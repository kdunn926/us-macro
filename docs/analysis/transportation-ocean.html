<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="ipynb_website:version" content="0.9.7" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="twitter:card" content="summary_large_image"></meta>
<meta property="og:title" content="US Macroeconomic Data Explorer | US Seaport Volumes" />
<meta property="og:type" content="article" />
<meta property="og:description" content="A look at shipping port traffic, according to TEU reports from each of the top 10 port authorities." />
<meta property="og:image" content="https://kdunn926.github.io/us-macro/analysis/transportation-ocean.png" />
<meta property="og:url" content="https://kdunn926.github.io/us-macro/analysis/transportation-ocean.html" />

<!-- begin stylesheets -->

<link rel="stylesheet"
    href="../css/jt.css">
<link rel="stylesheet"
    href="../css/toc2.css">
<link rel="stylesheet"
    href="../site_libs/jqueryui-1.11.4/jquery-ui.css">
<link rel="stylesheet"
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
<link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
<link rel="stylesheet"
    href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.1/build/styles/default.min.css">
    
<link rel="stylesheet" type="text/css" href="../css/readable.css">
<!-- end stylesheets -->

<!-- begin javascript -->

<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- Bootstrap 4 -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

<!-- Vega/Vegalite -->
<script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-lite@4"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.1/build/highlight.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    
<!-- end javascript -->


<script>hljs.initHighlightingOnLoad();</script>
<script type="text/javascript">
    if (window.hljs &&
        document.readyState &&
        document.readyState === "complete") {
       window.setTimeout(() => {
          hljs.initHighlighting();
       }, 0);
    }
</script>
    

<script src="../js/doc_toc.js"></script>
<script src="../js/docs.js"></script>


<script>
    MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true
        },
        "HTML-CSS": {
            preferredFont: "TeX",
            availableFonts: ["TeX"],
            styles: {
                scale: 110,
                ".MathJax_Display": {
                    "font-size": "110%%",
                }
            }
        }
    });
</script>
    

<script>
function filterDataFrame(id) {
    var input = document.getElementById("search_" + id);
    var filter = input.value.toUpperCase();
    var table = document.getElementById("dataframe_" + id);
    var tr = table.getElementsByTagName("tr");
    // Loop through all table rows, and hide those who don't match the search query
    for (var i = 1; i < tr.length; i++) {
        for (var j = 0; j < tr[i].cells.length; ++j) {
            var matched = false;
            if (tr[i].cells[j].innerHTML.toUpperCase().indexOf(filter) != -1) {
                tr[i].style.display = "";
                matched = true
                break;
            }
            if (!matched)
                tr[i].style.display = "none";
        }
    }
}

function sortDataFrame(id, n, dtype) {
    var table = document.getElementById("dataframe_" + id);
    var tb = table.tBodies[0]; // use `<tbody>` to ignore `<thead>` and `<tfoot>` rows
    var tr = Array.prototype.slice.call(tb.rows, 0); // put rows into array
    if (dtype === 'numeric') {
        var fn = (a, b) =>
            parseFloat(a.cells[n].textContent) <= parseFloat(b.cells[n].textContent) ? -1 : 1;
    } else {
        var fn = function(a, b) {
            var c = a.cells[n].textContent.trim().localeCompare(b.cells[n].textContent.trim());
            return c > 0 ? 1 : (c < 0 ? -1 : 0) }
    }
    var isSorted = function(array, fn) {
        if (array.length < 2)
            return 1;
        var direction = fn(array[0], array[1]);
        for (var i = 1; i < array.length - 1; ++i) {
            var d = fn(array[i], array[i+1]);
            if (d == 0)
                continue;
            else if (direction == 0)
                direction = d;
            else if (direction != d)
                return 0;
            }
        return direction;
    }
    var sorted = isSorted(tr, fn);
    if (sorted == 1 || sorted == -1) {
        // if sorted already, reverse it
        for(var i = tr.length - 1; i >= 0; --i)
            tb.appendChild(tr[i]); // append each row in order
    } else {
        tr = tr.sort(fn);
        for(var i = 0; i < tr.length; ++i)
            tb.appendChild(tr[i]); // append each row in order
    }
}
</script>




<script>
    // manage active state of menu based on current page
    $(document).ready(function () {
      // active menu anchor
      href = window.location.pathname
      href = href.substr(href.lastIndexOf('/') + 1)
      if (href === "")
        href = "index.html";
      var menuAnchor = $('a[href*="' + href + '"]');
      // mark it active
      menuAnchor.parent().addClass('active');
      // if it's got a parent navbar menu mark it active as well
      menuAnchor.closest('li.dropdown').addClass('active');
    });
</script>
    

<div class="container-fluid main-container">

<!-- tabsets -->
<script src="../site_libs/navigation-1.1/tabsets.js"></script>
<script>
    $(document).ready(function () {
      window.buildTabsets("TOC");
    });
</script>



<title>US Macroeconomic Data Explorer | US Seaport Volumes</title>

<style type = "text/css">
    body {
      
    }
</style>
</head>

<body>
<div tabindex="-1" id="notebook" class="border-box-sizing">
<div class="container" id="notebook-container">

<!-- code folding -->


<nav class="navbar navbar-expand-lg sticky-top navbar-light bg-light">
    <a class="navbar-brand" href="../index.html">US Macroeconomic Data Explorer</a>
    <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#navbar" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="navbar-nav mr-auto">
        
<li class="nav-item">
  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
</li>
        
<li class="nav-item dropdown">
  <a class="nav-link dropdown-toggle btn" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="background-color: steelblue; color: white;">
    Explore other charts
  </a>
  <div class="dropdown-menu" aria-labelledby="navbarDropdown">
  

    <a class="dropdown-item" href="../analysis/autos.html">Autos</a>
        
    <a class="dropdown-item" href="../analysis/construction.html">Construction</a>
        
    <a class="dropdown-item" href="../analysis/creditcards.html">Creditcards</a>
        
    <a class="dropdown-item" href="../analysis/dairy.html">Dairy</a>
        
    <a class="dropdown-item" href="../analysis/electricity.html">Electricity</a>
        
    <a class="dropdown-item" href="../analysis/international-trade.html">International Trade</a>
        
    <a class="dropdown-item" href="../analysis/labor.html">Labor</a>
        
    <a class="dropdown-item" href="../analysis/manufacturing.html">Manufacturing</a>
        
    <a class="dropdown-item" href="../analysis/oil-gas-inventories.html">Oil Gas Inventories</a>
        
    <a class="dropdown-item" href="../analysis/residential-realestate-zillow.html">Residential Realestate Zillow</a>
        
    <a class="dropdown-item" href="../analysis/residential-realestate.html">Residential Realestate</a>
        
    <a class="dropdown-item" href="../analysis/retailsales.html">Retailsales</a>
        
    <a class="dropdown-item" href="../analysis/sentiment.html">Sentiment</a>
        
    <a class="dropdown-item" href="../analysis/services.html">Services</a>
        
    <a class="dropdown-item" href="../analysis/sp500-returns-and-performance.html">Sp500 Returns And Performance</a>
        
    <a class="dropdown-item" href="../analysis/transportation-air-waterway.html">Transportation Air Waterway</a>
        
    <a class="dropdown-item" href="../analysis/transportation-cass.html">Transportation Cass</a>
        
    <a class="dropdown-item" href="../analysis/transportation-ocean.html">Transportation Ocean</a>
        
    <a class="dropdown-item" href="../analysis/transportation-rail.html">Transportation Rail</a>
        
    <a class="dropdown-item" href="../analysis/us-treasury-auctions.html">Us Treasury Auctions</a>
        
    <a class="dropdown-item" href="../analysis/us-treasury-rates.html">Us Treasury Rates</a>
        
  </div>
</li>
      </ul>
        
<ul class="navbar-nav">
<li class="nav-item">
   <a class="nav-link" href="http://github.com/kdunn926/us-macro"> source </a>
</li>
</ul>
        
    </div><!--/.nav-collapse -->
</nav><!--/.navbar -->
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="US-Seaport-Volumes">US Seaport Volumes<a class="anchor-link" href="#US-Seaport-Volumes">&#182;</a></h1><hr>
<h4 id="For-the-top-10-ports-(80%-of-all-TEUs)">For the top 10 ports (80% of all TEUs)<a class="anchor-link" href="#For-the-top-10-ports-(80%-of-all-TEUs)">&#182;</a></h4><p>Note: TEU means "Twenty-foot [container] Equivalent Unit"</p>
<p>A look at shipping port traffic, according to TEU reports from each of the top 10 port authorities.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">altair</span> <span class="k">as</span> <span class="nn">alt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">json</span> <span class="kn">import</span> <span class="n">loads</span><span class="p">,</span> <span class="n">JSONDecodeError</span>
<span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span>
<span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">environ</span>

<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>
<span class="kn">from</span> <span class="nn">joblib</span> <span class="kn">import</span> <span class="n">Memory</span>

<span class="kn">from</span> <span class="nn">urllib.request</span> <span class="kn">import</span> <span class="n">urlopen</span><span class="p">,</span> <span class="n">Request</span>
<span class="kn">from</span> <span class="nn">urllib.error</span> <span class="kn">import</span> <span class="n">HTTPError</span><span class="p">,</span> <span class="n">URLError</span>

<span class="kn">from</span> <span class="nn">tabula</span> <span class="kn">import</span> <span class="n">read_pdf</span>

<span class="kn">from</span> <span class="nn">googleapi.google</span> <span class="kn">import</span> <span class="n">search</span> <span class="k">as</span> <span class="n">googleSearch</span>

<span class="k">if</span> <span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;GITHUB_WORKFLOW&quot;</span><span class="p">):</span>
    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Requires manual updates&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">doChart</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Oakland&#39;</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;Full-Total&#39;</span><span class="p">):</span>
    <span class="c1">#metric = &#39;Full-Total&#39;</span>

    <span class="k">return</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()[[</span><span class="s1">&#39;dt&#39;</span><span class="p">,</span> <span class="n">metric</span><span class="p">]]</span><span class="o">.</span><span class="n">dropna</span><span class="p">())</span><span class="o">.</span><span class="n">mark_line</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;purple&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
        <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;dt:T&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)),</span>
        <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">metric</span><span class="si">}</span><span class="s1">:Q&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Volume [TEUs]&#39;</span><span class="p">)),</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="p">[</span><span class="n">alt</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s2">&quot;dt:T&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;%b %Y&quot;</span><span class="p">),</span> <span class="n">alt</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">metric</span><span class="si">}</span><span class="s2">:Q&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;,.02f&quot;</span><span class="p">)]</span>
    <span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Port of </span><span class="si">{</span><span class="n">location</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">metric</span><span class="si">}</span><span class="s1"> Container Volume&#39;</span><span class="p">,</span>
        <span class="n">width</span><span class="o">=</span><span class="mi">750</span><span class="p">,</span>
        <span class="n">height</span><span class="o">=</span><span class="mi">400</span>
    <span class="p">)</span>

<span class="k">def</span> <span class="nf">doYoyChart</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Oakland&#39;</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;Full-Total&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
    <span class="n">df_yoy</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()[[</span><span class="s1">&#39;dt&#39;</span><span class="p">,</span> <span class="n">metric</span><span class="p">]]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;dt&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">pct_change</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">df_yoy</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">transform_calculate</span><span class="p">(</span>
        <span class="n">nolarge</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;datum[&#39;</span><span class="si">{</span><span class="n">metric</span><span class="si">}</span><span class="s2">&#39;] &gt; 400 ? NaN : datum[&#39;</span><span class="si">{</span><span class="n">metric</span><span class="si">}</span><span class="s2">&#39;]&quot;</span>
    <span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
        <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;dt:T&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)),</span>
        <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;nolarge:Q&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Year-over-Year Volume Growth [%]&#39;</span><span class="p">)),</span>
        <span class="n">color</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">condition</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;datum[&#39;nolarge&#39;] &lt; 0&quot;</span><span class="p">,</span>
            <span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s1">&#39;lightsalmon&#39;</span><span class="p">),</span>
            <span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s1">&#39;royalblue&#39;</span><span class="p">)</span>
        <span class="p">),</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="p">[</span><span class="n">alt</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s2">&quot;dt:T&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;%b %Y&quot;</span><span class="p">),</span> <span class="n">alt</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;nolarge:Q&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;,.02f&quot;</span><span class="p">)]</span>
    <span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Port of </span><span class="si">{</span><span class="n">location</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">metric</span><span class="si">}</span><span class="s1"> Container Volume Growth&#39;</span><span class="p">,</span>
        <span class="n">width</span><span class="o">=</span><span class="mi">750</span><span class="p">,</span>
        <span class="n">height</span><span class="o">=</span><span class="mi">400</span>
    <span class="p">)</span>

<span class="n">uaString</span> <span class="o">=</span> <span class="s1">&#39;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/35.0.1916.47 Safari/537.36&#39;</span>

<span class="n">memory</span> <span class="o">=</span> <span class="n">Memory</span><span class="p">(</span><span class="s1">&#39;data/&#39;</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Port-of-Los-Angeles">Port of Los Angeles<a class="anchor-link" href="#Port-of-Los-Angeles">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Port of Los Angeles</span>
<span class="c1"># https://www.portoflosangeles.org/business/statistics/container-statistics</span>

<span class="c1"># 1995</span>
<span class="c1"># https://www.portoflosangeles.org/business/statistics/container-statistics/historical-teu-statistics-2019</span>

<span class="nd">@memory</span><span class="o">.</span><span class="n">cache</span>
<span class="k">def</span> <span class="nf">fetchLaData</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="n">args</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;skiprows&#39;</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}):</span>
 
    <span class="n">req</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span> <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="n">uaString</span> <span class="p">})</span>

    <span class="n">data</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>

    <span class="n">tmp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">read</span><span class="p">()),</span> <span class="o">**</span><span class="n">args</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">tmp</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Month&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">cols</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="c1">#print(tmp.head())</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        
    <span class="n">tmp</span><span class="p">[</span><span class="s1">&#39;dt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp</span><span class="p">[</span><span class="s1">&#39;Month&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">-</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">year</span><span class="p">),</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;%B-%Y&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">))</span>
    
    <span class="k">return</span> <span class="n">tmp</span>

<span class="k">def</span> <span class="nf">fetchLaDataNoCache</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="n">args</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;skiprows&#39;</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}):</span>
 
    <span class="n">req</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span> <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="n">uaString</span> <span class="p">})</span>

    <span class="n">data</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>

    <span class="n">tmp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">read</span><span class="p">()),</span> <span class="o">**</span><span class="n">args</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">tmp</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Month&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">cols</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="c1">#print(tmp.head())</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        
    <span class="n">tmp</span><span class="p">[</span><span class="s1">&#39;dt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp</span><span class="p">[</span><span class="s1">&#39;Month&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">-</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">year</span><span class="p">),</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;%B-%Y&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">))</span>
    
    <span class="k">return</span> <span class="n">tmp</span>

<span class="n">colsPre96</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Loaded Imports&#39;</span><span class="p">,</span> <span class="s1">&#39;Empty Imports&#39;</span><span class="p">,</span> <span class="s1">&#39;Total Imports&#39;</span><span class="p">,</span> 
        <span class="s1">&#39;Loaded Export&#39;</span><span class="p">,</span> <span class="s1">&#39;Empty Exports&#39;</span><span class="p">,</span> <span class="s1">&#39;Total TEUs&#39;</span><span class="p">,</span> <span class="s1">&#39;Prior Year Change&#39;</span><span class="p">]</span>

<span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Loaded Imports&#39;</span><span class="p">,</span> <span class="s1">&#39;Empty Imports&#39;</span><span class="p">,</span> <span class="s1">&#39;Total Imports&#39;</span><span class="p">,</span> 
        <span class="s1">&#39;Loaded Export&#39;</span><span class="p">,</span> <span class="s1">&#39;Empty Exports&#39;</span><span class="p">,</span> <span class="s1">&#39;Total Exports&#39;</span><span class="p">,</span> <span class="s1">&#39;Total TEUs&#39;</span><span class="p">,</span> 
        <span class="s1">&#39;Prior Year Change&#39;</span><span class="p">]</span>

<span class="n">args</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;skiprows&#39;</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>

<span class="n">urlFor</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">y</span><span class="p">:</span> <span class="s2">&quot;https://www.portoflosangeles.org/business/statistics/container-statistics/historical-teu-statistics-</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

<span class="n">dfs_la</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1995</span><span class="p">,</span> <span class="mi">2021</span><span class="p">):</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">urlFor</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
    <span class="c1">#print(url)</span>
    <span class="k">if</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">1996</span><span class="p">:</span>
        <span class="n">dfs_la</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fetchLaData</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">colsPre96</span><span class="p">,</span> <span class="n">args</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">2020</span><span class="p">:</span>
        <span class="n">dfs_la</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fetchLaDataNoCache</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="p">{}))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">dfs_la</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fetchLaData</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="p">{}))</span>

<span class="n">df_la</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">dfs_la</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span> <span class="c1">#.tail()</span>

<span class="n">df_la</span><span class="p">[</span><span class="n">cols</span><span class="p">[:</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">df_la</span><span class="p">[</span><span class="n">cols</span><span class="p">[:</span><span class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">)</span>

<span class="n">extractValue</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;\.&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span> <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="nb">float</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>

<span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">df_la</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;Month&#39;</span><span class="p">,</span> <span class="s1">&#39;dt&#39;</span><span class="p">,</span> <span class="s1">&#39;Prior Year Change&#39;</span><span class="p">]:</span>
        <span class="k">continue</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">df_la</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_la</span><span class="p">[</span><span class="n">c</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="n">df_la</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_la</span><span class="p">[</span><span class="n">c</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">extractValue</span><span class="p">)</span>

<span class="c1">#df_la.head()</span>

<span class="c1">#df_la_smoothed = df_la.set_index(&#39;dt&#39;).resample(&#39;2M&#39;).mean().reset_index()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="n">doYoyChart</span><span class="p">(</span><span class="n">df_la</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Los Angeles&#39;</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;Loaded Imports&#39;</span><span class="p">)</span>
<span class="c1">#c.save(&#39;transportation-ocean.png&#39;)</span>
<span class="n">c</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>



   
        
            
<div class="output_html rendered_html output_subarea ">

<div id="altair-viz-dbf32f81932244c395c0a57142611df4"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-dbf32f81932244c395c0a57142611df4") {
      outputDiv = document.getElementById("altair-viz-dbf32f81932244c395c0a57142611df4");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-e9f719665b450ee120da6bc0a0bab32b"}, "mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['nolarge'] < 0"}, "value": "royalblue"}, "tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "nolarge", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Year-over-Year Volume Growth [%]"}, "field": "nolarge"}}, "height": 400, "title": "Port of Los Angeles Loaded Imports Container Volume Growth", "transform": [{"calculate": "datum['Loaded Imports'] > 400 ? NaN : datum['Loaded Imports']", "as": "nolarge"}], "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-e9f719665b450ee120da6bc0a0bab32b": [{"dt": "1996-01-01T00:00:00", "Loaded Imports": null}, {"dt": "1996-02-01T00:00:00", "Loaded Imports": null}, {"dt": "1996-03-01T00:00:00", "Loaded Imports": null}, {"dt": "1996-04-01T00:00:00", "Loaded Imports": null}, {"dt": "1996-05-01T00:00:00", "Loaded Imports": null}, {"dt": "1996-06-01T00:00:00", "Loaded Imports": null}, {"dt": "1996-07-01T00:00:00", "Loaded Imports": null}, {"dt": "1996-08-01T00:00:00", "Loaded Imports": null}, {"dt": "1996-09-01T00:00:00", "Loaded Imports": null}, {"dt": "1996-10-01T00:00:00", "Loaded Imports": null}, {"dt": "1996-11-01T00:00:00", "Loaded Imports": null}, {"dt": "1996-12-01T00:00:00", "Loaded Imports": null}, {"dt": "1997-01-01T00:00:00", "Loaded Imports": 19.81131242563663}, {"dt": "1997-02-01T00:00:00", "Loaded Imports": 15.541596854084826}, {"dt": "1997-03-01T00:00:00", "Loaded Imports": 24.790900985941853}, {"dt": "1997-04-01T00:00:00", "Loaded Imports": 22.069912506368915}, {"dt": "1997-05-01T00:00:00", "Loaded Imports": 18.53909349110261}, {"dt": "1997-06-01T00:00:00", "Loaded Imports": 18.443466690535935}, {"dt": "1997-07-01T00:00:00", "Loaded Imports": 10.455630741308397}, {"dt": "1997-08-01T00:00:00", "Loaded Imports": 7.630206420631569}, {"dt": "1997-09-01T00:00:00", "Loaded Imports": 7.765441192268452}, {"dt": "1997-10-01T00:00:00", "Loaded Imports": 2.484920991931694}, {"dt": "1997-11-01T00:00:00", "Loaded Imports": 6.315411193443254}, {"dt": "1997-12-01T00:00:00", "Loaded Imports": 12.844797870705737}, {"dt": "1998-01-01T00:00:00", "Loaded Imports": 1.3130152840510112}, {"dt": "1998-02-01T00:00:00", "Loaded Imports": 8.778479454775345}, {"dt": "1998-03-01T00:00:00", "Loaded Imports": 39.59419468888261}, {"dt": "1998-04-01T00:00:00", "Loaded Imports": 20.500669883932375}, {"dt": "1998-05-01T00:00:00", "Loaded Imports": 26.641486657627954}, {"dt": "1998-06-01T00:00:00", "Loaded Imports": 16.549621847670103}, {"dt": "1998-07-01T00:00:00", "Loaded Imports": 12.912124652774715}, {"dt": "1998-08-01T00:00:00", "Loaded Imports": 21.853956328130586}, {"dt": "1998-09-01T00:00:00", "Loaded Imports": 11.281352188375893}, {"dt": "1998-10-01T00:00:00", "Loaded Imports": 20.39743995385852}, {"dt": "1998-11-01T00:00:00", "Loaded Imports": 21.282689114136243}, {"dt": "1998-12-01T00:00:00", "Loaded Imports": 7.724631286590711}, {"dt": "1999-01-01T00:00:00", "Loaded Imports": 13.053342979911186}, {"dt": "1999-02-01T00:00:00", "Loaded Imports": 22.27510722188326}, {"dt": "1999-03-01T00:00:00", "Loaded Imports": -6.3264233805432335}, {"dt": "1999-04-01T00:00:00", "Loaded Imports": 3.708655432034158}, {"dt": "1999-05-01T00:00:00", "Loaded Imports": 12.597593075642411}, {"dt": "1999-06-01T00:00:00", "Loaded Imports": 8.684470455431171}, {"dt": "1999-07-01T00:00:00", "Loaded Imports": 19.762544568709274}, {"dt": "1999-08-01T00:00:00", "Loaded Imports": 11.8092127552468}, {"dt": "1999-09-01T00:00:00", "Loaded Imports": 22.229978206997348}, {"dt": "1999-10-01T00:00:00", "Loaded Imports": 23.288817099744065}, {"dt": "1999-11-01T00:00:00", "Loaded Imports": 16.36298087556094}, {"dt": "1999-12-01T00:00:00", "Loaded Imports": 29.425258297442358}, {"dt": "2000-01-01T00:00:00", "Loaded Imports": 40.71772122149757}, {"dt": "2000-02-01T00:00:00", "Loaded Imports": 24.983709570878453}, {"dt": "2000-03-01T00:00:00", "Loaded Imports": 34.95157849765624}, {"dt": "2000-04-01T00:00:00", "Loaded Imports": 44.44450901811141}, {"dt": "2000-05-01T00:00:00", "Loaded Imports": 16.325301136182357}, {"dt": "2000-06-01T00:00:00", "Loaded Imports": 30.520878573978784}, {"dt": "2000-07-01T00:00:00", "Loaded Imports": 31.899984471046427}, {"dt": "2000-08-01T00:00:00", "Loaded Imports": 30.353696147571952}, {"dt": "2000-09-01T00:00:00", "Loaded Imports": 22.001147150542224}, {"dt": "2000-10-01T00:00:00", "Loaded Imports": 26.270364921474652}, {"dt": "2000-11-01T00:00:00", "Loaded Imports": 13.975242798918487}, {"dt": "2000-12-01T00:00:00", "Loaded Imports": 12.89093674064057}, {"dt": "2001-01-01T00:00:00", "Loaded Imports": 8.37921260757346}, {"dt": "2001-02-01T00:00:00", "Loaded Imports": -8.225895587641642}, {"dt": "2001-03-01T00:00:00", "Loaded Imports": 14.443995221448036}, {"dt": "2001-04-01T00:00:00", "Loaded Imports": -0.25099130322826513}, {"dt": "2001-05-01T00:00:00", "Loaded Imports": -0.465199761890589}, {"dt": "2001-06-01T00:00:00", "Loaded Imports": 9.986500472483462}, {"dt": "2001-07-01T00:00:00", "Loaded Imports": 2.6757140450925254}, {"dt": "2001-08-01T00:00:00", "Loaded Imports": 7.051332265525412}, {"dt": "2001-09-01T00:00:00", "Loaded Imports": 21.311226059224396}, {"dt": "2001-10-01T00:00:00", "Loaded Imports": 5.917819347337239}, {"dt": "2001-11-01T00:00:00", "Loaded Imports": 17.425897305819362}, {"dt": "2001-12-01T00:00:00", "Loaded Imports": 12.576538247300139}, {"dt": "2002-01-01T00:00:00", "Loaded Imports": 4.418295041856557}, {"dt": "2002-02-01T00:00:00", "Loaded Imports": 52.18717182521584}, {"dt": "2002-03-01T00:00:00", "Loaded Imports": 5.763320551639151}, {"dt": "2002-04-01T00:00:00", "Loaded Imports": 22.44288422193017}, {"dt": "2002-05-01T00:00:00", "Loaded Imports": 35.03575418362202}, {"dt": "2002-06-01T00:00:00", "Loaded Imports": 25.738145497118126}, {"dt": "2002-07-01T00:00:00", "Loaded Imports": 9.145367211589006}, {"dt": "2002-08-01T00:00:00", "Loaded Imports": 29.878435232881138}, {"dt": "2002-09-01T00:00:00", "Loaded Imports": 19.806394168467545}, {"dt": "2002-10-01T00:00:00", "Loaded Imports": -4.821604708986893}, {"dt": "2002-11-01T00:00:00", "Loaded Imports": 24.532854629319402}, {"dt": "2002-12-01T00:00:00", "Loaded Imports": 34.37410428572021}, {"dt": "2003-01-01T00:00:00", "Loaded Imports": 25.802226058934608}, {"dt": "2003-02-01T00:00:00", "Loaded Imports": 15.497142447595547}, {"dt": "2003-03-01T00:00:00", "Loaded Imports": 34.21861246699207}, {"dt": "2003-04-01T00:00:00", "Loaded Imports": 23.871258909940995}, {"dt": "2003-05-01T00:00:00", "Loaded Imports": 23.944458958357707}, {"dt": "2003-06-01T00:00:00", "Loaded Imports": 3.1459281430767927}, {"dt": "2003-07-01T00:00:00", "Loaded Imports": 25.283543284096567}, {"dt": "2003-08-01T00:00:00", "Loaded Imports": 8.233379449256484}, {"dt": "2003-09-01T00:00:00", "Loaded Imports": 6.7036332695058265}, {"dt": "2003-10-01T00:00:00", "Loaded Imports": 44.39893851420853}, {"dt": "2003-11-01T00:00:00", "Loaded Imports": 14.62557462330416}, {"dt": "2003-12-01T00:00:00", "Loaded Imports": 3.7068943308928626}, {"dt": "2004-01-01T00:00:00", "Loaded Imports": 28.799668581741788}, {"dt": "2004-02-01T00:00:00", "Loaded Imports": -10.269575455363944}, {"dt": "2004-03-01T00:00:00", "Loaded Imports": 13.972887182094663}, {"dt": "2004-04-01T00:00:00", "Loaded Imports": 6.358273896969391}, {"dt": "2004-05-01T00:00:00", "Loaded Imports": 6.246562327013927}, {"dt": "2004-06-01T00:00:00", "Loaded Imports": 13.107645042932736}, {"dt": "2004-07-01T00:00:00", "Loaded Imports": 10.659673218446496}, {"dt": "2004-08-01T00:00:00", "Loaded Imports": -4.233723725880023}, {"dt": "2004-09-01T00:00:00", "Loaded Imports": -6.824914929195359}, {"dt": "2004-10-01T00:00:00", "Loaded Imports": -4.886173655804226}, {"dt": "2004-11-01T00:00:00", "Loaded Imports": 0.4906864718552173}, {"dt": "2004-12-01T00:00:00", "Loaded Imports": -8.218105049509427}, {"dt": "2005-01-01T00:00:00", "Loaded Imports": -12.458632510021772}, {"dt": "2005-02-01T00:00:00", "Loaded Imports": 19.1361401697538}, {"dt": "2005-03-01T00:00:00", "Loaded Imports": -23.661151509762057}, {"dt": "2005-04-01T00:00:00", "Loaded Imports": -3.191330073374088}, {"dt": "2005-05-01T00:00:00", "Loaded Imports": -13.388121023769738}, {"dt": "2005-06-01T00:00:00", "Loaded Imports": -1.7032503760731732}, {"dt": "2005-07-01T00:00:00", "Loaded Imports": -2.5353700368074605}, {"dt": "2005-08-01T00:00:00", "Loaded Imports": 1.06094633885645}, {"dt": "2005-09-01T00:00:00", "Loaded Imports": 10.050352634732151}, {"dt": "2005-10-01T00:00:00", "Loaded Imports": 6.094521275952602}, {"dt": "2005-11-01T00:00:00", "Loaded Imports": -3.2053973227764043}, {"dt": "2005-12-01T00:00:00", "Loaded Imports": 15.956130794222245}, {"dt": "2006-01-01T00:00:00", "Loaded Imports": 7.794435210172002}, {"dt": "2006-02-01T00:00:00", "Loaded Imports": -14.416095342542246}, {"dt": "2006-03-01T00:00:00", "Loaded Imports": 33.440496276477646}, {"dt": "2006-04-01T00:00:00", "Loaded Imports": 10.967589219135432}, {"dt": "2006-05-01T00:00:00", "Loaded Imports": 15.803037343282211}, {"dt": "2006-06-01T00:00:00", "Loaded Imports": 13.74724295039027}, {"dt": "2006-07-01T00:00:00", "Loaded Imports": 14.825555989385286}, {"dt": "2006-08-01T00:00:00", "Loaded Imports": 18.154078697370558}, {"dt": "2006-09-01T00:00:00", "Loaded Imports": 21.302314137637723}, {"dt": "2006-10-01T00:00:00", "Loaded Imports": 11.947709268482232}, {"dt": "2006-11-01T00:00:00", "Loaded Imports": 17.630430843898882}, {"dt": "2006-12-01T00:00:00", "Loaded Imports": 11.745215881122629}, {"dt": "2007-01-01T00:00:00", "Loaded Imports": 11.966162537570323}, {"dt": "2007-02-01T00:00:00", "Loaded Imports": 42.51914668561485}, {"dt": "2007-03-01T00:00:00", "Loaded Imports": -6.606419047543599}, {"dt": "2007-04-01T00:00:00", "Loaded Imports": 0.9570552584025949}, {"dt": "2007-05-01T00:00:00", "Loaded Imports": -0.22387919709699888}, {"dt": "2007-06-01T00:00:00", "Loaded Imports": 1.6966673449695158}, {"dt": "2007-07-01T00:00:00", "Loaded Imports": -5.539773622374389}, {"dt": "2007-08-01T00:00:00", "Loaded Imports": -7.6676328983954045}, {"dt": "2007-09-01T00:00:00", "Loaded Imports": -5.1272140760740275}, {"dt": "2007-10-01T00:00:00", "Loaded Imports": -6.55056642227062}, {"dt": "2007-11-01T00:00:00", "Loaded Imports": -1.8653538862563601}, {"dt": "2007-12-01T00:00:00", "Loaded Imports": -5.28897703100204}, {"dt": "2008-01-01T00:00:00", "Loaded Imports": -4.625942675763128}, {"dt": "2008-02-01T00:00:00", "Loaded Imports": -9.791508709598695}, {"dt": "2008-03-01T00:00:00", "Loaded Imports": -7.013871150275874}, {"dt": "2008-04-01T00:00:00", "Loaded Imports": -10.925254341162239}, {"dt": "2008-05-01T00:00:00", "Loaded Imports": 2.5834497911914944}, {"dt": "2008-06-01T00:00:00", "Loaded Imports": -12.447784654478289}, {"dt": "2008-07-01T00:00:00", "Loaded Imports": -3.8589048627059364}, {"dt": "2008-08-01T00:00:00", "Loaded Imports": 7.191231285702027}, {"dt": "2008-09-01T00:00:00", "Loaded Imports": -9.042178691508763}, {"dt": "2008-10-01T00:00:00", "Loaded Imports": -3.772173223985953}, {"dt": "2008-11-01T00:00:00", "Loaded Imports": -9.690625279381104}, {"dt": "2008-12-01T00:00:00", "Loaded Imports": -12.830365831837709}, {"dt": "2009-01-01T00:00:00", "Loaded Imports": -7.579006384319009}, {"dt": "2009-02-01T00:00:00", "Loaded Imports": -35.29980613603701}, {"dt": "2009-03-01T00:00:00", "Loaded Imports": -6.212350771534647}, {"dt": "2009-04-01T00:00:00", "Loaded Imports": -14.984391148203702}, {"dt": "2009-05-01T00:00:00", "Loaded Imports": -18.035630565380757}, {"dt": "2009-06-01T00:00:00", "Loaded Imports": -17.08251714637694}, {"dt": "2009-07-01T00:00:00", "Loaded Imports": -16.94458314568982}, {"dt": "2009-08-01T00:00:00", "Loaded Imports": -19.32209753093298}, {"dt": "2009-09-01T00:00:00", "Loaded Imports": -15.819007692166275}, {"dt": "2009-10-01T00:00:00", "Loaded Imports": -8.693608857886904}, {"dt": "2009-11-01T00:00:00", "Loaded Imports": -11.840446283961914}, {"dt": "2009-12-01T00:00:00", "Loaded Imports": -4.411746350981149}, {"dt": "2010-01-01T00:00:00", "Loaded Imports": -6.6735781029571895}, {"dt": "2010-02-01T00:00:00", "Loaded Imports": 29.765233492449084}, {"dt": "2010-03-01T00:00:00", "Loaded Imports": -2.8589925849281883}, {"dt": "2010-04-01T00:00:00", "Loaded Imports": 8.248901346965877}, {"dt": "2010-05-01T00:00:00", "Loaded Imports": 12.515607022329744}, {"dt": "2010-06-01T00:00:00", "Loaded Imports": 32.262304212269186}, {"dt": "2010-07-01T00:00:00", "Loaded Imports": 21.021538975659837}, {"dt": "2010-08-01T00:00:00", "Loaded Imports": 23.33579602829412}, {"dt": "2010-09-01T00:00:00", "Loaded Imports": 20.762069029110087}, {"dt": "2010-10-01T00:00:00", "Loaded Imports": 3.1914794688174153}, {"dt": "2010-11-01T00:00:00", "Loaded Imports": 11.691898383211052}, {"dt": "2010-12-01T00:00:00", "Loaded Imports": 5.6252832042416046}, {"dt": "2011-01-01T00:00:00", "Loaded Imports": 14.276406789694196}, {"dt": "2011-02-01T00:00:00", "Loaded Imports": 3.188701873851141}, {"dt": "2011-03-01T00:00:00", "Loaded Imports": 10.15783982812264}, {"dt": "2011-04-01T00:00:00", "Loaded Imports": 3.3535655270947595}, {"dt": "2011-05-01T00:00:00", "Loaded Imports": 5.4937865880549275}, {"dt": "2011-06-01T00:00:00", "Loaded Imports": -10.216580986886935}, {"dt": "2011-07-01T00:00:00", "Loaded Imports": -3.173132706478188}, {"dt": "2011-08-01T00:00:00", "Loaded Imports": -5.752489692801466}, {"dt": "2011-09-01T00:00:00", "Loaded Imports": -0.1591831305265412}, {"dt": "2011-10-01T00:00:00", "Loaded Imports": 5.520756388154435}, {"dt": "2011-11-01T00:00:00", "Loaded Imports": 6.173905708292038}, {"dt": "2011-12-01T00:00:00", "Loaded Imports": 6.365157617937189}, {"dt": "2012-01-01T00:00:00", "Loaded Imports": 5.253307931193896}, {"dt": "2012-02-01T00:00:00", "Loaded Imports": -7.802810213620459}, {"dt": "2012-03-01T00:00:00", "Loaded Imports": 9.337623908712821}, {"dt": "2012-04-01T00:00:00", "Loaded Imports": 16.709971414384505}, {"dt": "2012-05-01T00:00:00", "Loaded Imports": 2.70175368123462}, {"dt": "2012-06-01T00:00:00", "Loaded Imports": 6.000776293575538}, {"dt": "2012-07-01T00:00:00", "Loaded Imports": 3.967775116399941}, {"dt": "2012-08-01T00:00:00", "Loaded Imports": -4.1009778182302}, {"dt": "2012-09-01T00:00:00", "Loaded Imports": 3.3798267138094307}, {"dt": "2012-10-01T00:00:00", "Loaded Imports": -1.0739123521271043}, {"dt": "2012-11-01T00:00:00", "Loaded Imports": -18.638768930643547}, {"dt": "2012-12-01T00:00:00", "Loaded Imports": -6.747547907505336}, {"dt": "2013-01-01T00:00:00", "Loaded Imports": -5.321740194228486}, {"dt": "2013-02-01T00:00:00", "Loaded Imports": 25.23490365608374}, {"dt": "2013-03-01T00:00:00", "Loaded Imports": -28.74796001946064}, {"dt": "2013-04-01T00:00:00", "Loaded Imports": -10.361724419473983}, {"dt": "2013-05-01T00:00:00", "Loaded Imports": -12.032514952251926}, {"dt": "2013-06-01T00:00:00", "Loaded Imports": -7.234653804256219}, {"dt": "2013-07-01T00:00:00", "Loaded Imports": -0.29946822607431756}, {"dt": "2013-08-01T00:00:00", "Loaded Imports": -1.407950003617331}, {"dt": "2013-09-01T00:00:00", "Loaded Imports": -3.75459798473875}, {"dt": "2013-10-01T00:00:00", "Loaded Imports": -5.137100524854765}, {"dt": "2013-11-01T00:00:00", "Loaded Imports": 18.72308762338544}, {"dt": "2013-12-01T00:00:00", "Loaded Imports": 8.63198230767248}, {"dt": "2014-01-01T00:00:00", "Loaded Imports": 6.700178971354798}, {"dt": "2014-02-01T00:00:00", "Loaded Imports": -10.59016408881579}, {"dt": "2014-03-01T00:00:00", "Loaded Imports": 41.53056201752228}, {"dt": "2014-04-01T00:00:00", "Loaded Imports": 11.428175357223225}, {"dt": "2014-05-01T00:00:00", "Loaded Imports": 7.754635946995325}, {"dt": "2014-06-01T00:00:00", "Loaded Imports": 16.551059636354104}, {"dt": "2014-07-01T00:00:00", "Loaded Imports": -1.983044705459036}, {"dt": "2014-08-01T00:00:00", "Loaded Imports": 7.835240815024047}, {"dt": "2014-09-01T00:00:00", "Loaded Imports": 10.982421921881013}, {"dt": "2014-10-01T00:00:00", "Loaded Imports": 7.16496953306569}, {"dt": "2014-11-01T00:00:00", "Loaded Imports": -2.657216771970672}, {"dt": "2014-12-01T00:00:00", "Loaded Imports": 4.395139109818724}, {"dt": "2015-01-01T00:00:00", "Loaded Imports": -28.005527771343242}, {"dt": "2015-02-01T00:00:00", "Loaded Imports": -10.739369272434985}, {"dt": "2015-03-01T00:00:00", "Loaded Imports": 31.57310882647646}, {"dt": "2015-04-01T00:00:00", "Loaded Imports": -9.882786469136162}, {"dt": "2015-05-01T00:00:00", "Loaded Imports": -0.84706018948012}, {"dt": "2015-06-01T00:00:00", "Loaded Imports": -3.647474436921061}, {"dt": "2015-07-01T00:00:00", "Loaded Imports": -3.512899928039448}, {"dt": "2015-08-01T00:00:00", "Loaded Imports": 6.32328630833916}, {"dt": "2015-09-01T00:00:00", "Loaded Imports": -9.359611058816874}, {"dt": "2015-10-01T00:00:00", "Loaded Imports": -3.3258100675530367}, {"dt": "2015-11-01T00:00:00", "Loaded Imports": 7.585254760613713}, {"dt": "2015-12-01T00:00:00", "Loaded Imports": -4.534715160721047}, {"dt": "2016-01-01T00:00:00", "Loaded Imports": 41.666536461573386}, {"dt": "2016-02-01T00:00:00", "Loaded Imports": 46.61967160624847}, {"dt": "2016-03-01T00:00:00", "Loaded Imports": -33.341250906101806}, {"dt": "2016-04-01T00:00:00", "Loaded Imports": 4.70343092625789}, {"dt": "2016-05-01T00:00:00", "Loaded Imports": 15.021496611915852}, {"dt": "2016-06-01T00:00:00", "Loaded Imports": -3.5490367051478233}, {"dt": "2016-07-01T00:00:00", "Loaded Imports": 5.153327095950888}, {"dt": "2016-08-01T00:00:00", "Loaded Imports": 0.8735683087283785}, {"dt": "2016-09-01T00:00:00", "Loaded Imports": 4.280794602557969}, {"dt": "2016-10-01T00:00:00", "Loaded Imports": 16.371808260701638}, {"dt": "2016-11-01T00:00:00", "Loaded Imports": 21.936831979046012}, {"dt": "2016-12-01T00:00:00", "Loaded Imports": 22.653299843158713}, {"dt": "2017-01-01T00:00:00", "Loaded Imports": 13.129832400530717}, {"dt": "2017-02-01T00:00:00", "Loaded Imports": -19.79087272427774}, {"dt": "2017-03-01T00:00:00", "Loaded Imports": 30.05163957612551}, {"dt": "2017-04-01T00:00:00", "Loaded Imports": 8.285490669989404}, {"dt": "2017-05-01T00:00:00", "Loaded Imports": 3.0579818470106934}, {"dt": "2017-06-01T00:00:00", "Loaded Imports": 4.681700756616047}, {"dt": "2017-07-01T00:00:00", "Loaded Imports": 13.125661366512897}, {"dt": "2017-08-01T00:00:00", "Loaded Imports": 5.1322317294162145}, {"dt": "2017-09-01T00:00:00", "Loaded Imports": -0.07415958257758204}, {"dt": "2017-10-01T00:00:00", "Loaded Imports": -8.129679288386926}, {"dt": "2017-11-01T00:00:00", "Loaded Imports": 6.095569799533318}, {"dt": "2017-12-01T00:00:00", "Loaded Imports": -2.2132725580305213}, {"dt": "2018-01-01T00:00:00", "Loaded Imports": 1.7835448086972683}, {"dt": "2018-02-01T00:00:00", "Loaded Imports": 28.13433031764032}, {"dt": "2018-03-01T00:00:00", "Loaded Imports": -29.203374818748664}, {"dt": "2018-04-01T00:00:00", "Loaded Imports": -2.9385478854609848}, {"dt": "2018-05-01T00:00:00", "Loaded Imports": -1.8000282309895366}, {"dt": "2018-06-01T00:00:00", "Loaded Imports": 2.872065889439468}, {"dt": "2018-07-01T00:00:00", "Loaded Imports": 5.052569494768222}, {"dt": "2018-08-01T00:00:00", "Loaded Imports": -2.7529419626356577}, {"dt": "2018-09-01T00:00:00", "Loaded Imports": 6.58950953385784}, {"dt": "2018-10-01T00:00:00", "Loaded Imports": 26.719498676265374}, {"dt": "2018-11-01T00:00:00", "Loaded Imports": -8.820153684275455}, {"dt": "2018-12-01T00:00:00", "Loaded Imports": 21.638267248312903}, {"dt": "2019-01-01T00:00:00", "Loaded Imports": 1.6769782888923057}, {"dt": "2019-02-01T00:00:00", "Loaded Imports": -9.077198790726603}, {"dt": "2019-03-01T00:00:00", "Loaded Imports": 12.374988207103499}, {"dt": "2019-04-01T00:00:00", "Loaded Imports": -0.10070386086389327}, {"dt": "2019-05-01T00:00:00", "Loaded Imports": 5.4740933383433665}, {"dt": "2019-06-01T00:00:00", "Loaded Imports": 3.4840089407881747}, {"dt": "2019-07-01T00:00:00", "Loaded Imports": 8.73499464984102}, {"dt": "2019-08-01T00:00:00", "Loaded Imports": 4.051612887885758}, {"dt": "2019-09-01T00:00:00", "Loaded Imports": -2.8873241986427156}, {"dt": "2019-10-01T00:00:00", "Loaded Imports": -19.15406323962682}, {"dt": "2019-11-01T00:00:00", "Loaded Imports": -12.167418236811834}, {"dt": "2019-12-01T00:00:00", "Loaded Imports": -20.344137314558985}, {"dt": "2020-01-01T00:00:00", "Loaded Imports": -3.533634821604581}, {"dt": "2020-02-01T00:00:00", "Loaded Imports": -22.476933644258125}, {"dt": "2020-03-01T00:00:00", "Loaded Imports": -25.886870200727195}, {"dt": "2020-04-01T00:00:00", "Loaded Imports": 2.596393321425561}, {"dt": "2020-05-01T00:00:00", "Loaded Imports": -28.393904471596976}, {"dt": "2020-06-01T00:00:00", "Loaded Imports": -6.842582697987531}, {"dt": "2020-07-01T00:00:00", "Loaded Imports": -4.283766498991892}, {"dt": "2020-08-01T00:00:00", "Loaded Imports": 17.977677778266532}, {"dt": "2020-09-01T00:00:00", "Loaded Imports": 17.268511608363358}, {"dt": "2020-10-01T00:00:00", "Loaded Imports": 28.985158182196848}, {"dt": "2020-11-01T00:00:00", "Loaded Imports": 25.17034482591476}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doYoyChart</span><span class="p">(</span><span class="n">df_la</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Los Angeles&#39;</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;Loaded Export&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[5]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-9fa799e0e8164574a9d0db9209ac5025"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-9fa799e0e8164574a9d0db9209ac5025") {
      outputDiv = document.getElementById("altair-viz-9fa799e0e8164574a9d0db9209ac5025");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-bdfe540a3214da9389789511218f3c03"}, "mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['nolarge'] < 0"}, "value": "royalblue"}, "tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "nolarge", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Year-over-Year Volume Growth [%]"}, "field": "nolarge"}}, "height": 400, "title": "Port of Los Angeles Loaded Export Container Volume Growth", "transform": [{"calculate": "datum['Loaded Export'] > 400 ? NaN : datum['Loaded Export']", "as": "nolarge"}], "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-bdfe540a3214da9389789511218f3c03": [{"dt": "1996-01-01T00:00:00", "Loaded Export": null}, {"dt": "1996-02-01T00:00:00", "Loaded Export": null}, {"dt": "1996-03-01T00:00:00", "Loaded Export": null}, {"dt": "1996-04-01T00:00:00", "Loaded Export": null}, {"dt": "1996-05-01T00:00:00", "Loaded Export": null}, {"dt": "1996-06-01T00:00:00", "Loaded Export": null}, {"dt": "1996-07-01T00:00:00", "Loaded Export": null}, {"dt": "1996-08-01T00:00:00", "Loaded Export": null}, {"dt": "1996-09-01T00:00:00", "Loaded Export": null}, {"dt": "1996-10-01T00:00:00", "Loaded Export": null}, {"dt": "1996-11-01T00:00:00", "Loaded Export": null}, {"dt": "1996-12-01T00:00:00", "Loaded Export": null}, {"dt": "1997-01-01T00:00:00", "Loaded Export": 3.056444703966865}, {"dt": "1997-02-01T00:00:00", "Loaded Export": 12.066427645632348}, {"dt": "1997-03-01T00:00:00", "Loaded Export": 15.946635431039136}, {"dt": "1997-04-01T00:00:00", "Loaded Export": 15.172438996921978}, {"dt": "1997-05-01T00:00:00", "Loaded Export": 25.59577043102803}, {"dt": "1997-06-01T00:00:00", "Loaded Export": 8.972009237463862}, {"dt": "1997-07-01T00:00:00", "Loaded Export": 5.507106966137876}, {"dt": "1997-08-01T00:00:00", "Loaded Export": -1.7727899705631933}, {"dt": "1997-09-01T00:00:00", "Loaded Export": -1.0238560341511604}, {"dt": "1997-10-01T00:00:00", "Loaded Export": -3.8891140953113745}, {"dt": "1997-11-01T00:00:00", "Loaded Export": -11.823329860832876}, {"dt": "1997-12-01T00:00:00", "Loaded Export": -11.115741971644756}, {"dt": "1998-01-01T00:00:00", "Loaded Export": -15.650426678798402}, {"dt": "1998-02-01T00:00:00", "Loaded Export": -6.7060826193861995}, {"dt": "1998-03-01T00:00:00", "Loaded Export": -8.191609518759202}, {"dt": "1998-04-01T00:00:00", "Loaded Export": -7.8993721118179705}, {"dt": "1998-05-01T00:00:00", "Loaded Export": -10.567981946159467}, {"dt": "1998-06-01T00:00:00", "Loaded Export": -12.804336823146256}, {"dt": "1998-07-01T00:00:00", "Loaded Export": -13.484440305462453}, {"dt": "1998-08-01T00:00:00", "Loaded Export": -4.328691067128798}, {"dt": "1998-09-01T00:00:00", "Loaded Export": -7.569258436555815}, {"dt": "1998-10-01T00:00:00", "Loaded Export": -11.760936931225174}, {"dt": "1998-11-01T00:00:00", "Loaded Export": 3.3729215072688667}, {"dt": "1998-12-01T00:00:00", "Loaded Export": -8.08101223400267}, {"dt": "1999-01-01T00:00:00", "Loaded Export": -5.940133677319404}, {"dt": "1999-02-01T00:00:00", "Loaded Export": -8.28282449053146}, {"dt": "1999-03-01T00:00:00", "Loaded Export": -10.120192872489554}, {"dt": "1999-04-01T00:00:00", "Loaded Export": -10.746076611542355}, {"dt": "1999-05-01T00:00:00", "Loaded Export": 2.856682439460312}, {"dt": "1999-06-01T00:00:00", "Loaded Export": 5.274288468704791}, {"dt": "1999-07-01T00:00:00", "Loaded Export": 8.042488741564746}, {"dt": "1999-08-01T00:00:00", "Loaded Export": 1.588979614705277}, {"dt": "1999-09-01T00:00:00", "Loaded Export": 9.165234912165587}, {"dt": "1999-10-01T00:00:00", "Loaded Export": 15.64370482679671}, {"dt": "1999-11-01T00:00:00", "Loaded Export": 13.779840508731}, {"dt": "1999-12-01T00:00:00", "Loaded Export": 17.31984414890768}, {"dt": "2000-01-01T00:00:00", "Loaded Export": 28.37670416436433}, {"dt": "2000-02-01T00:00:00", "Loaded Export": 25.358931976281053}, {"dt": "2000-03-01T00:00:00", "Loaded Export": 20.38417243828159}, {"dt": "2000-04-01T00:00:00", "Loaded Export": 34.28716603448072}, {"dt": "2000-05-01T00:00:00", "Loaded Export": 16.209710729088034}, {"dt": "2000-06-01T00:00:00", "Loaded Export": 17.451075409656024}, {"dt": "2000-07-01T00:00:00", "Loaded Export": 20.786160633266213}, {"dt": "2000-08-01T00:00:00", "Loaded Export": 26.759224453600883}, {"dt": "2000-09-01T00:00:00", "Loaded Export": 18.628312067878273}, {"dt": "2000-10-01T00:00:00", "Loaded Export": 23.466529416255753}, {"dt": "2000-11-01T00:00:00", "Loaded Export": 6.691456516350036}, {"dt": "2000-12-01T00:00:00", "Loaded Export": 11.72918638830447}, {"dt": "2001-01-01T00:00:00", "Loaded Export": 11.509514280048805}, {"dt": "2001-02-01T00:00:00", "Loaded Export": 4.935205388111341}, {"dt": "2001-03-01T00:00:00", "Loaded Export": 6.447766127558352}, {"dt": "2001-04-01T00:00:00", "Loaded Export": 3.314173952628341}, {"dt": "2001-05-01T00:00:00", "Loaded Export": 7.024585743700373}, {"dt": "2001-06-01T00:00:00", "Loaded Export": 11.371574507231962}, {"dt": "2001-07-01T00:00:00", "Loaded Export": 7.438158589534782}, {"dt": "2001-08-01T00:00:00", "Loaded Export": 0.6874974953771762}, {"dt": "2001-09-01T00:00:00", "Loaded Export": 4.1586479237636365}, {"dt": "2001-10-01T00:00:00", "Loaded Export": -3.1639645056841914}, {"dt": "2001-11-01T00:00:00", "Loaded Export": 8.246282235661685}, {"dt": "2001-12-01T00:00:00", "Loaded Export": 5.14383624730772}, {"dt": "2002-01-01T00:00:00", "Loaded Export": 0.8959827345953908}, {"dt": "2002-02-01T00:00:00", "Loaded Export": 15.01270855219592}, {"dt": "2002-03-01T00:00:00", "Loaded Export": 5.014234262413608}, {"dt": "2002-04-01T00:00:00", "Loaded Export": 3.4718361882027926}, {"dt": "2002-05-01T00:00:00", "Loaded Export": 10.720138336186702}, {"dt": "2002-06-01T00:00:00", "Loaded Export": 8.114569439866482}, {"dt": "2002-07-01T00:00:00", "Loaded Export": -3.6133629684537927}, {"dt": "2002-08-01T00:00:00", "Loaded Export": 3.960133706395186}, {"dt": "2002-09-01T00:00:00", "Loaded Export": 9.408950305080976}, {"dt": "2002-10-01T00:00:00", "Loaded Export": -22.701512149659276}, {"dt": "2002-11-01T00:00:00", "Loaded Export": 6.792423796397884}, {"dt": "2002-12-01T00:00:00", "Loaded Export": 29.883618461624128}, {"dt": "2003-01-01T00:00:00", "Loaded Export": 26.903108723204472}, {"dt": "2003-02-01T00:00:00", "Loaded Export": 8.400094155079918}, {"dt": "2003-03-01T00:00:00", "Loaded Export": 15.63716615989792}, {"dt": "2003-04-01T00:00:00", "Loaded Export": 7.0531151240172285}, {"dt": "2003-05-01T00:00:00", "Loaded Export": 5.759753094336539}, {"dt": "2003-06-01T00:00:00", "Loaded Export": -6.037512685614022}, {"dt": "2003-07-01T00:00:00", "Loaded Export": 16.282430127185865}, {"dt": "2003-08-01T00:00:00", "Loaded Export": -3.6541752509941516}, {"dt": "2003-09-01T00:00:00", "Loaded Export": -6.307312862940728}, {"dt": "2003-10-01T00:00:00", "Loaded Export": 33.6367870511221}, {"dt": "2003-11-01T00:00:00", "Loaded Export": 3.261590251043356}, {"dt": "2003-12-01T00:00:00", "Loaded Export": -11.39604053708194}, {"dt": "2004-01-01T00:00:00", "Loaded Export": -7.955483760265669}, {"dt": "2004-02-01T00:00:00", "Loaded Export": -4.766504430300767}, {"dt": "2004-03-01T00:00:00", "Loaded Export": 7.348439599820811}, {"dt": "2004-04-01T00:00:00", "Loaded Export": 5.126319000007684}, {"dt": "2004-05-01T00:00:00", "Loaded Export": -1.311446551951767}, {"dt": "2004-06-01T00:00:00", "Loaded Export": 0.1982525849623995}, {"dt": "2004-07-01T00:00:00", "Loaded Export": -1.472408073982412}, {"dt": "2004-08-01T00:00:00", "Loaded Export": -1.5752590662545418}, {"dt": "2004-09-01T00:00:00", "Loaded Export": -9.216771208471464}, {"dt": "2004-10-01T00:00:00", "Loaded Export": -2.483100051425935}, {"dt": "2004-11-01T00:00:00", "Loaded Export": -8.70889621420482}, {"dt": "2004-12-01T00:00:00", "Loaded Export": -10.602913747038368}, {"dt": "2005-01-01T00:00:00", "Loaded Export": -14.25536790662585}, {"dt": "2005-02-01T00:00:00", "Loaded Export": -8.481652614446745}, {"dt": "2005-03-01T00:00:00", "Loaded Export": -6.584163580407909}, {"dt": "2005-04-01T00:00:00", "Loaded Export": 4.395802654547931}, {"dt": "2005-05-01T00:00:00", "Loaded Export": 4.268797225318965}, {"dt": "2005-06-01T00:00:00", "Loaded Export": 7.746649611664291}, {"dt": "2005-07-01T00:00:00", "Loaded Export": 1.6747315400390317}, {"dt": "2005-08-01T00:00:00", "Loaded Export": 9.652423919970698}, {"dt": "2005-09-01T00:00:00", "Loaded Export": 22.15121701322755}, {"dt": "2005-10-01T00:00:00", "Loaded Export": 7.3168332522719925}, {"dt": "2005-11-01T00:00:00", "Loaded Export": 8.844386971005136}, {"dt": "2005-12-01T00:00:00", "Loaded Export": 15.307578226765983}, {"dt": "2006-01-01T00:00:00", "Loaded Export": 20.607250855081993}, {"dt": "2006-02-01T00:00:00", "Loaded Export": 10.519744208756808}, {"dt": "2006-03-01T00:00:00", "Loaded Export": 19.346222749587017}, {"dt": "2006-04-01T00:00:00", "Loaded Export": 5.932124224066659}, {"dt": "2006-05-01T00:00:00", "Loaded Export": 13.007952366583432}, {"dt": "2006-06-01T00:00:00", "Loaded Export": 19.165677366625534}, {"dt": "2006-07-01T00:00:00", "Loaded Export": 27.255183372203295}, {"dt": "2006-08-01T00:00:00", "Loaded Export": 25.414140882851854}, {"dt": "2006-09-01T00:00:00", "Loaded Export": 33.554587735570074}, {"dt": "2006-10-01T00:00:00", "Loaded Export": 33.757600138508394}, {"dt": "2006-11-01T00:00:00", "Loaded Export": 24.807351306245916}, {"dt": "2006-12-01T00:00:00", "Loaded Export": 26.6293530513539}, {"dt": "2007-01-01T00:00:00", "Loaded Export": 23.92731672945201}, {"dt": "2007-02-01T00:00:00", "Loaded Export": 23.2910539612619}, {"dt": "2007-03-01T00:00:00", "Loaded Export": -0.22984158670622534}, {"dt": "2007-04-01T00:00:00", "Loaded Export": 8.536469758264541}, {"dt": "2007-05-01T00:00:00", "Loaded Export": 12.986802739109681}, {"dt": "2007-06-01T00:00:00", "Loaded Export": 18.03959989460402}, {"dt": "2007-07-01T00:00:00", "Loaded Export": 4.39644981139371}, {"dt": "2007-08-01T00:00:00", "Loaded Export": 15.208615985958751}, {"dt": "2007-09-01T00:00:00", "Loaded Export": 9.27644464484494}, {"dt": "2007-10-01T00:00:00", "Loaded Export": 11.85629905147323}, {"dt": "2007-11-01T00:00:00", "Loaded Export": 18.412137370970115}, {"dt": "2007-12-01T00:00:00", "Loaded Export": 14.40995923695283}, {"dt": "2008-01-01T00:00:00", "Loaded Export": 18.898887556179723}, {"dt": "2008-02-01T00:00:00", "Loaded Export": 29.570060381117713}, {"dt": "2008-03-01T00:00:00", "Loaded Export": 21.129697547593395}, {"dt": "2008-04-01T00:00:00", "Loaded Export": 19.481186879971403}, {"dt": "2008-05-01T00:00:00", "Loaded Export": 22.115638688644168}, {"dt": "2008-06-01T00:00:00", "Loaded Export": 10.950475679134474}, {"dt": "2008-07-01T00:00:00", "Loaded Export": 33.99811330582387}, {"dt": "2008-08-01T00:00:00", "Loaded Export": 27.60098142000116}, {"dt": "2008-09-01T00:00:00", "Loaded Export": 5.713408887778715}, {"dt": "2008-10-01T00:00:00", "Loaded Export": -8.251663044754576}, {"dt": "2008-11-01T00:00:00", "Loaded Export": -12.825028274554962}, {"dt": "2008-12-01T00:00:00", "Loaded Export": -25.937390294618023}, {"dt": "2009-01-01T00:00:00", "Loaded Export": -29.365713696711214}, {"dt": "2009-02-01T00:00:00", "Loaded Export": -27.59533281449764}, {"dt": "2009-03-01T00:00:00", "Loaded Export": -9.811440550831296}, {"dt": "2009-04-01T00:00:00", "Loaded Export": -4.234604105571849}, {"dt": "2009-05-01T00:00:00", "Loaded Export": -7.0644132468415055}, {"dt": "2009-06-01T00:00:00", "Loaded Export": -9.040474398276722}, {"dt": "2009-07-01T00:00:00", "Loaded Export": -20.375265259817855}, {"dt": "2009-08-01T00:00:00", "Loaded Export": -14.219242564724343}, {"dt": "2009-09-01T00:00:00", "Loaded Export": -2.230245537853537}, {"dt": "2009-10-01T00:00:00", "Loaded Export": 11.776020239716}, {"dt": "2009-11-01T00:00:00", "Loaded Export": 17.80825380275626}, {"dt": "2009-12-01T00:00:00", "Loaded Export": 40.22806721693275}, {"dt": "2010-01-01T00:00:00", "Loaded Export": 35.15704057050857}, {"dt": "2010-02-01T00:00:00", "Loaded Export": 32.55546271010638}, {"dt": "2010-03-01T00:00:00", "Loaded Export": 15.76986503260609}, {"dt": "2010-04-01T00:00:00", "Loaded Export": 12.432808583459366}, {"dt": "2010-05-01T00:00:00", "Loaded Export": 5.344924551597252}, {"dt": "2010-06-01T00:00:00", "Loaded Export": 12.639781247449244}, {"dt": "2010-07-01T00:00:00", "Loaded Export": 5.858156669529446}, {"dt": "2010-08-01T00:00:00", "Loaded Export": -1.817695047608281}, {"dt": "2010-09-01T00:00:00", "Loaded Export": -0.33560037356260564}, {"dt": "2010-10-01T00:00:00", "Loaded Export": 0.260194116758794}, {"dt": "2010-11-01T00:00:00", "Loaded Export": 14.194869656227137}, {"dt": "2010-12-01T00:00:00", "Loaded Export": 5.062842693378999}, {"dt": "2011-01-01T00:00:00", "Loaded Export": 12.607482822218374}, {"dt": "2011-02-01T00:00:00", "Loaded Export": 1.6436641122293816}, {"dt": "2011-03-01T00:00:00", "Loaded Export": 19.177557329510076}, {"dt": "2011-04-01T00:00:00", "Loaded Export": 5.753672523336162}, {"dt": "2011-05-01T00:00:00", "Loaded Export": 14.72610255492346}, {"dt": "2011-06-01T00:00:00", "Loaded Export": 5.55082881507265}, {"dt": "2011-07-01T00:00:00", "Loaded Export": 12.821384346043807}, {"dt": "2011-08-01T00:00:00", "Loaded Export": 24.810690423162573}, {"dt": "2011-09-01T00:00:00", "Loaded Export": 26.576490385389164}, {"dt": "2011-10-01T00:00:00", "Loaded Export": 28.13594948650684}, {"dt": "2011-11-01T00:00:00", "Loaded Export": 15.006230945709298}, {"dt": "2011-12-01T00:00:00", "Loaded Export": 9.222428460943544}, {"dt": "2012-01-01T00:00:00", "Loaded Export": 5.895130956628614}, {"dt": "2012-02-01T00:00:00", "Loaded Export": 9.55608983951528}, {"dt": "2012-03-01T00:00:00", "Loaded Export": -2.433895905739847}, {"dt": "2012-04-01T00:00:00", "Loaded Export": 11.579697010867541}, {"dt": "2012-05-01T00:00:00", "Loaded Export": 0.45204301191972274}, {"dt": "2012-06-01T00:00:00", "Loaded Export": 6.915036265475849}, {"dt": "2012-07-01T00:00:00", "Loaded Export": 0.2700816451968846}, {"dt": "2012-08-01T00:00:00", "Loaded Export": -10.537014571340952}, {"dt": "2012-09-01T00:00:00", "Loaded Export": -2.555180223136766}, {"dt": "2012-10-01T00:00:00", "Loaded Export": -7.097602529608327}, {"dt": "2012-11-01T00:00:00", "Loaded Export": -25.79861673926722}, {"dt": "2012-12-01T00:00:00", "Loaded Export": -16.492169211313048}, {"dt": "2013-01-01T00:00:00", "Loaded Export": -5.444198376744824}, {"dt": "2013-02-01T00:00:00", "Loaded Export": -4.877515742122107}, {"dt": "2013-03-01T00:00:00", "Loaded Export": -17.925200166883247}, {"dt": "2013-04-01T00:00:00", "Loaded Export": -14.295118906326731}, {"dt": "2013-05-01T00:00:00", "Loaded Export": -16.316464756965544}, {"dt": "2013-06-01T00:00:00", "Loaded Export": -15.029820560635143}, {"dt": "2013-07-01T00:00:00", "Loaded Export": -4.828898199524401}, {"dt": "2013-08-01T00:00:00", "Loaded Export": -3.8433069002966946}, {"dt": "2013-09-01T00:00:00", "Loaded Export": -12.78918882868828}, {"dt": "2013-10-01T00:00:00", "Loaded Export": -5.69613565392455}, {"dt": "2013-11-01T00:00:00", "Loaded Export": 23.27701865918097}, {"dt": "2013-12-01T00:00:00", "Loaded Export": 16.852873142174918}, {"dt": "2014-01-01T00:00:00", "Loaded Export": 1.6834372007597853}, {"dt": "2014-02-01T00:00:00", "Loaded Export": -6.232020715964404}, {"dt": "2014-03-01T00:00:00", "Loaded Export": 21.62671013885089}, {"dt": "2014-04-01T00:00:00", "Loaded Export": 8.003366025623016}, {"dt": "2014-05-01T00:00:00", "Loaded Export": 2.3036774270599025}, {"dt": "2014-06-01T00:00:00", "Loaded Export": 8.514981090190176}, {"dt": "2014-07-01T00:00:00", "Loaded Export": 3.622795244486321}, {"dt": "2014-08-01T00:00:00", "Loaded Export": 6.160539358738548}, {"dt": "2014-09-01T00:00:00", "Loaded Export": 0.1984971405772029}, {"dt": "2014-10-01T00:00:00", "Loaded Export": -6.715142722767975}, {"dt": "2014-11-01T00:00:00", "Loaded Export": -15.96630682444471}, {"dt": "2014-12-01T00:00:00", "Loaded Export": -11.696785691479795}, {"dt": "2015-01-01T00:00:00", "Loaded Export": -23.20217242965694}, {"dt": "2015-02-01T00:00:00", "Loaded Export": -10.290401784574865}, {"dt": "2015-03-01T00:00:00", "Loaded Export": -22.515386581197493}, {"dt": "2015-04-01T00:00:00", "Loaded Export": -15.77927118553415}, {"dt": "2015-05-01T00:00:00", "Loaded Export": -3.5059600058054086}, {"dt": "2015-06-01T00:00:00", "Loaded Export": -10.740845525826526}, {"dt": "2015-07-01T00:00:00", "Loaded Export": -16.468711438535898}, {"dt": "2015-08-01T00:00:00", "Loaded Export": -14.45009747515572}, {"dt": "2015-09-01T00:00:00", "Loaded Export": -17.515770332197356}, {"dt": "2015-10-01T00:00:00", "Loaded Export": -14.677917455581092}, {"dt": "2015-11-01T00:00:00", "Loaded Export": -5.6770030816641}, {"dt": "2015-12-01T00:00:00", "Loaded Export": -13.722125802040598}, {"dt": "2016-01-01T00:00:00", "Loaded Export": 1.507856897324622}, {"dt": "2016-02-01T00:00:00", "Loaded Export": 11.139245788333652}, {"dt": "2016-03-01T00:00:00", "Loaded Export": 9.500210428673261}, {"dt": "2016-04-01T00:00:00", "Loaded Export": -1.0655260777552522}, {"dt": "2016-05-01T00:00:00", "Loaded Export": 6.258296984638734}, {"dt": "2016-06-01T00:00:00", "Loaded Export": -2.081341421149885}, {"dt": "2016-07-01T00:00:00", "Loaded Export": -2.8679931379305246}, {"dt": "2016-08-01T00:00:00", "Loaded Export": 6.300716985326815}, {"dt": "2016-09-01T00:00:00", "Loaded Export": 16.743840818756727}, {"dt": "2016-10-01T00:00:00", "Loaded Export": 23.296996415704218}, {"dt": "2016-11-01T00:00:00", "Loaded Export": 24.883423314632957}, {"dt": "2016-12-01T00:00:00", "Loaded Export": 25.64900677390105}, {"dt": "2017-01-01T00:00:00", "Loaded Export": 28.659186235795953}, {"dt": "2017-02-01T00:00:00", "Loaded Export": 6.054321577595556}, {"dt": "2017-03-01T00:00:00", "Loaded Export": 20.33681073025335}, {"dt": "2017-04-01T00:00:00", "Loaded Export": 9.40832559874396}, {"dt": "2017-05-01T00:00:00", "Loaded Export": 4.401582895862433}, {"dt": "2017-06-01T00:00:00", "Loaded Export": 3.532973111413873}, {"dt": "2017-07-01T00:00:00", "Loaded Export": 16.933919541097442}, {"dt": "2017-08-01T00:00:00", "Loaded Export": 4.0469265710270985}, {"dt": "2017-09-01T00:00:00", "Loaded Export": -11.475658399166067}, {"dt": "2017-10-01T00:00:00", "Loaded Export": -13.338741784037556}, {"dt": "2017-11-01T00:00:00", "Loaded Export": 0.31193661470543255}, {"dt": "2017-12-01T00:00:00", "Loaded Export": -7.298340514431434}, {"dt": "2018-01-01T00:00:00", "Loaded Export": -7.625138529737718}, {"dt": "2018-02-01T00:00:00", "Loaded Export": 1.4377148469998158}, {"dt": "2018-03-01T00:00:00", "Loaded Export": -14.634637270609463}, {"dt": "2018-04-01T00:00:00", "Loaded Export": 4.466626284793684}, {"dt": "2018-05-01T00:00:00", "Loaded Export": -0.5648760013911902}, {"dt": "2018-06-01T00:00:00", "Loaded Export": 1.3988765010049642}, {"dt": "2018-07-01T00:00:00", "Loaded Export": 8.433717442064982}, {"dt": "2018-08-01T00:00:00", "Loaded Export": 2.0531165788300054}, {"dt": "2018-09-01T00:00:00", "Loaded Export": 14.445037000128469}, {"dt": "2018-10-01T00:00:00", "Loaded Export": 20.535470035833225}, {"dt": "2018-11-01T00:00:00", "Loaded Export": -14.268771815437887}, {"dt": "2018-12-01T00:00:00", "Loaded Export": -3.20549764335315}, {"dt": "2019-01-01T00:00:00", "Loaded Export": -3.360710233095221}, {"dt": "2019-02-01T00:00:00", "Loaded Export": -9.541614778739305}, {"dt": "2019-03-01T00:00:00", "Loaded Export": -2.9216284127737024}, {"dt": "2019-04-01T00:00:00", "Loaded Export": -5.56812189650927}, {"dt": "2019-05-01T00:00:00", "Loaded Export": -0.7846182803906143}, {"dt": "2019-06-01T00:00:00", "Loaded Export": -5.587603959657972}, {"dt": "2019-07-01T00:00:00", "Loaded Export": -3.959420626310517}, {"dt": "2019-08-01T00:00:00", "Loaded Export": -9.95996073012424}, {"dt": "2019-09-01T00:00:00", "Loaded Export": -11.041534154878075}, {"dt": "2019-10-01T00:00:00", "Loaded Export": -19.268006298328366}, {"dt": "2019-11-01T00:00:00", "Loaded Export": -9.167229408563726}, {"dt": "2019-12-01T00:00:00", "Loaded Export": -11.987194303533123}, {"dt": "2020-01-01T00:00:00", "Loaded Export": 2.215969046781563}, {"dt": "2020-02-01T00:00:00", "Loaded Export": -5.672216590847712}, {"dt": "2020-03-01T00:00:00", "Loaded Export": -23.770990805339043}, {"dt": "2020-04-01T00:00:00", "Loaded Export": -16.20976932510998}, {"dt": "2020-05-01T00:00:00", "Loaded Export": -37.62923327193772}, {"dt": "2020-06-01T00:00:00", "Loaded Export": -21.34128396904923}, {"dt": "2020-07-01T00:00:00", "Loaded Export": -21.68494842421529}, {"dt": "2020-08-01T00:00:00", "Loaded Export": -10.15507505947335}, {"dt": "2020-09-01T00:00:00", "Loaded Export": -0.28428100039382675}, {"dt": "2020-10-01T00:00:00", "Loaded Export": 2.5683827223396127}, {"dt": "2020-11-01T00:00:00", "Loaded Export": -5.505812211960781}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doYoyChart</span><span class="p">(</span><span class="n">df_la</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Los Angeles&#39;</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;Total Imports&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[6]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-02e85db89e884ac8a105be2cb56993dc"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-02e85db89e884ac8a105be2cb56993dc") {
      outputDiv = document.getElementById("altair-viz-02e85db89e884ac8a105be2cb56993dc");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-3b66247e2c0a237de53b2a8df71e7102"}, "mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['nolarge'] < 0"}, "value": "royalblue"}, "tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "nolarge", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Year-over-Year Volume Growth [%]"}, "field": "nolarge"}}, "height": 400, "title": "Port of Los Angeles Total Imports Container Volume Growth", "transform": [{"calculate": "datum['Total Imports'] > 400 ? NaN : datum['Total Imports']", "as": "nolarge"}], "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-3b66247e2c0a237de53b2a8df71e7102": [{"dt": "1996-01-01T00:00:00", "Total Imports": null}, {"dt": "1996-02-01T00:00:00", "Total Imports": null}, {"dt": "1996-03-01T00:00:00", "Total Imports": null}, {"dt": "1996-04-01T00:00:00", "Total Imports": null}, {"dt": "1996-05-01T00:00:00", "Total Imports": null}, {"dt": "1996-06-01T00:00:00", "Total Imports": null}, {"dt": "1996-07-01T00:00:00", "Total Imports": null}, {"dt": "1996-08-01T00:00:00", "Total Imports": null}, {"dt": "1996-09-01T00:00:00", "Total Imports": null}, {"dt": "1996-10-01T00:00:00", "Total Imports": null}, {"dt": "1996-11-01T00:00:00", "Total Imports": null}, {"dt": "1996-12-01T00:00:00", "Total Imports": null}, {"dt": "1997-01-01T00:00:00", "Total Imports": 13.965964847293844}, {"dt": "1997-02-01T00:00:00", "Total Imports": 12.976121935319318}, {"dt": "1997-03-01T00:00:00", "Total Imports": 16.672144486484065}, {"dt": "1997-04-01T00:00:00", "Total Imports": 16.71975266898795}, {"dt": "1997-05-01T00:00:00", "Total Imports": 18.35161053649923}, {"dt": "1997-06-01T00:00:00", "Total Imports": 17.414619645541208}, {"dt": "1997-07-01T00:00:00", "Total Imports": 10.595381474738442}, {"dt": "1997-08-01T00:00:00", "Total Imports": 6.771110435155903}, {"dt": "1997-09-01T00:00:00", "Total Imports": 6.715578847777648}, {"dt": "1997-10-01T00:00:00", "Total Imports": -0.003011855285550702}, {"dt": "1997-11-01T00:00:00", "Total Imports": 2.611184856543969}, {"dt": "1997-12-01T00:00:00", "Total Imports": 9.709896865196988}, {"dt": "1998-01-01T00:00:00", "Total Imports": -0.8932850744541976}, {"dt": "1998-02-01T00:00:00", "Total Imports": 9.08689313563167}, {"dt": "1998-03-01T00:00:00", "Total Imports": 37.045654053408626}, {"dt": "1998-04-01T00:00:00", "Total Imports": 19.04976343665179}, {"dt": "1998-05-01T00:00:00", "Total Imports": 22.30417112862735}, {"dt": "1998-06-01T00:00:00", "Total Imports": 13.849048234075024}, {"dt": "1998-07-01T00:00:00", "Total Imports": 10.568379241801606}, {"dt": "1998-08-01T00:00:00", "Total Imports": 19.361826250785885}, {"dt": "1998-09-01T00:00:00", "Total Imports": 9.441246213880717}, {"dt": "1998-10-01T00:00:00", "Total Imports": 17.267728764222777}, {"dt": "1998-11-01T00:00:00", "Total Imports": 20.002259696791146}, {"dt": "1998-12-01T00:00:00", "Total Imports": 4.355182269699442}, {"dt": "1999-01-01T00:00:00", "Total Imports": 12.852969892316878}, {"dt": "1999-02-01T00:00:00", "Total Imports": 15.534697827218324}, {"dt": "1999-03-01T00:00:00", "Total Imports": -8.403846737172538}, {"dt": "1999-04-01T00:00:00", "Total Imports": -0.62369779827397}, {"dt": "1999-05-01T00:00:00", "Total Imports": 9.432218823170558}, {"dt": "1999-06-01T00:00:00", "Total Imports": 6.291923185823856}, {"dt": "1999-07-01T00:00:00", "Total Imports": 16.400504945489992}, {"dt": "1999-08-01T00:00:00", "Total Imports": 10.008060108132245}, {"dt": "1999-09-01T00:00:00", "Total Imports": 18.957945522322817}, {"dt": "1999-10-01T00:00:00", "Total Imports": 22.908289728973962}, {"dt": "1999-11-01T00:00:00", "Total Imports": 16.686560807510453}, {"dt": "1999-12-01T00:00:00", "Total Imports": 27.34525576582061}, {"dt": "2000-01-01T00:00:00", "Total Imports": 36.63485330754208}, {"dt": "2000-02-01T00:00:00", "Total Imports": 23.7959683966668}, {"dt": "2000-03-01T00:00:00", "Total Imports": 32.77253402139435}, {"dt": "2000-04-01T00:00:00", "Total Imports": 43.36987539577828}, {"dt": "2000-05-01T00:00:00", "Total Imports": 19.00494331177296}, {"dt": "2000-06-01T00:00:00", "Total Imports": 29.6962926707663}, {"dt": "2000-07-01T00:00:00", "Total Imports": 31.715564213060365}, {"dt": "2000-08-01T00:00:00", "Total Imports": 33.0729948135893}, {"dt": "2000-09-01T00:00:00", "Total Imports": 21.79110405295681}, {"dt": "2000-10-01T00:00:00", "Total Imports": 25.12774296383853}, {"dt": "2000-11-01T00:00:00", "Total Imports": 13.834313053885072}, {"dt": "2000-12-01T00:00:00", "Total Imports": 13.741518208172732}, {"dt": "2001-01-01T00:00:00", "Total Imports": 9.34369352829425}, {"dt": "2001-02-01T00:00:00", "Total Imports": -7.139634741748003}, {"dt": "2001-03-01T00:00:00", "Total Imports": 15.307744538719504}, {"dt": "2001-04-01T00:00:00", "Total Imports": 0.5943507382485613}, {"dt": "2001-05-01T00:00:00", "Total Imports": -1.785911925076944}, {"dt": "2001-06-01T00:00:00", "Total Imports": 10.443219231287436}, {"dt": "2001-07-01T00:00:00", "Total Imports": 2.7282258560906048}, {"dt": "2001-08-01T00:00:00", "Total Imports": 4.451837054805319}, {"dt": "2001-09-01T00:00:00", "Total Imports": 20.939759527912628}, {"dt": "2001-10-01T00:00:00", "Total Imports": 5.560939015297794}, {"dt": "2001-11-01T00:00:00", "Total Imports": 14.995160749000469}, {"dt": "2001-12-01T00:00:00", "Total Imports": 11.262546470118128}, {"dt": "2002-01-01T00:00:00", "Total Imports": 3.9970544821889}, {"dt": "2002-02-01T00:00:00", "Total Imports": 49.49161643137818}, {"dt": "2002-03-01T00:00:00", "Total Imports": 5.831159330745472}, {"dt": "2002-04-01T00:00:00", "Total Imports": 24.793138590484176}, {"dt": "2002-05-01T00:00:00", "Total Imports": 32.9770097152388}, {"dt": "2002-06-01T00:00:00", "Total Imports": 24.025192036304844}, {"dt": "2002-07-01T00:00:00", "Total Imports": 8.623569490805739}, {"dt": "2002-08-01T00:00:00", "Total Imports": 29.798731088410356}, {"dt": "2002-09-01T00:00:00", "Total Imports": 20.10755251881271}, {"dt": "2002-10-01T00:00:00", "Total Imports": -3.5408766076832743}, {"dt": "2002-11-01T00:00:00", "Total Imports": 24.65688878298524}, {"dt": "2002-12-01T00:00:00", "Total Imports": 35.5104909345664}, {"dt": "2003-01-01T00:00:00", "Total Imports": 25.21284774075361}, {"dt": "2003-02-01T00:00:00", "Total Imports": 12.521258525167745}, {"dt": "2003-03-01T00:00:00", "Total Imports": 29.806565408601806}, {"dt": "2003-04-01T00:00:00", "Total Imports": 18.21283031702654}, {"dt": "2003-05-01T00:00:00", "Total Imports": 22.46625607232462}, {"dt": "2003-06-01T00:00:00", "Total Imports": 1.474521470527379}, {"dt": "2003-07-01T00:00:00", "Total Imports": 21.993799187370676}, {"dt": "2003-08-01T00:00:00", "Total Imports": 5.992491667016253}, {"dt": "2003-09-01T00:00:00", "Total Imports": 5.894600495004854}, {"dt": "2003-10-01T00:00:00", "Total Imports": 40.304188244094895}, {"dt": "2003-11-01T00:00:00", "Total Imports": 12.294110053326568}, {"dt": "2003-12-01T00:00:00", "Total Imports": 0.28908990258202927}, {"dt": "2004-01-01T00:00:00", "Total Imports": 24.931139166429016}, {"dt": "2004-02-01T00:00:00", "Total Imports": -9.838483363331452}, {"dt": "2004-03-01T00:00:00", "Total Imports": 14.1553459856949}, {"dt": "2004-04-01T00:00:00", "Total Imports": 5.702369439626609}, {"dt": "2004-05-01T00:00:00", "Total Imports": 5.413235889277734}, {"dt": "2004-06-01T00:00:00", "Total Imports": 13.457011031840182}, {"dt": "2004-07-01T00:00:00", "Total Imports": 10.29721140301616}, {"dt": "2004-08-01T00:00:00", "Total Imports": -4.4262510446607894}, {"dt": "2004-09-01T00:00:00", "Total Imports": -7.455554680554077}, {"dt": "2004-10-01T00:00:00", "Total Imports": -5.211670010874448}, {"dt": "2004-11-01T00:00:00", "Total Imports": 0.49418077169274266}, {"dt": "2004-12-01T00:00:00", "Total Imports": -7.725579343120936}, {"dt": "2005-01-01T00:00:00", "Total Imports": -11.66994850056403}, {"dt": "2005-02-01T00:00:00", "Total Imports": 18.696572958706035}, {"dt": "2005-03-01T00:00:00", "Total Imports": -23.059548405273112}, {"dt": "2005-04-01T00:00:00", "Total Imports": -2.6788960327725153}, {"dt": "2005-05-01T00:00:00", "Total Imports": -12.980649800614497}, {"dt": "2005-06-01T00:00:00", "Total Imports": -1.8653487227916488}, {"dt": "2005-07-01T00:00:00", "Total Imports": -2.510068999670123}, {"dt": "2005-08-01T00:00:00", "Total Imports": 1.6116714316352532}, {"dt": "2005-09-01T00:00:00", "Total Imports": 10.040737398399301}, {"dt": "2005-10-01T00:00:00", "Total Imports": 6.331689762794834}, {"dt": "2005-11-01T00:00:00", "Total Imports": -2.356665364898858}, {"dt": "2005-12-01T00:00:00", "Total Imports": 15.877906090080307}, {"dt": "2006-01-01T00:00:00", "Total Imports": 7.180184213683138}, {"dt": "2006-02-01T00:00:00", "Total Imports": -14.356250687660078}, {"dt": "2006-03-01T00:00:00", "Total Imports": 31.745444468834606}, {"dt": "2006-04-01T00:00:00", "Total Imports": 10.141335470082268}, {"dt": "2006-05-01T00:00:00", "Total Imports": 15.46022442001249}, {"dt": "2006-06-01T00:00:00", "Total Imports": 13.909985540924863}, {"dt": "2006-07-01T00:00:00", "Total Imports": 15.878544259094674}, {"dt": "2006-08-01T00:00:00", "Total Imports": 18.403824346605013}, {"dt": "2006-09-01T00:00:00", "Total Imports": 20.837185819265457}, {"dt": "2006-10-01T00:00:00", "Total Imports": 12.436406956550039}, {"dt": "2006-11-01T00:00:00", "Total Imports": 17.519742931915182}, {"dt": "2006-12-01T00:00:00", "Total Imports": 11.377706408127363}, {"dt": "2007-01-01T00:00:00", "Total Imports": 12.258542652176963}, {"dt": "2007-02-01T00:00:00", "Total Imports": 42.408210733529806}, {"dt": "2007-03-01T00:00:00", "Total Imports": -6.348837098208016}, {"dt": "2007-04-01T00:00:00", "Total Imports": 1.4428212289144593}, {"dt": "2007-05-01T00:00:00", "Total Imports": 0.0029143568129663677}, {"dt": "2007-06-01T00:00:00", "Total Imports": 1.348152507166711}, {"dt": "2007-07-01T00:00:00", "Total Imports": -6.237703584490173}, {"dt": "2007-08-01T00:00:00", "Total Imports": -8.448511283578464}, {"dt": "2007-09-01T00:00:00", "Total Imports": -5.418288088862322}, {"dt": "2007-10-01T00:00:00", "Total Imports": -6.5795979404008165}, {"dt": "2007-11-01T00:00:00", "Total Imports": -1.7856479292480798}, {"dt": "2007-12-01T00:00:00", "Total Imports": -5.3202385454227175}, {"dt": "2008-01-01T00:00:00", "Total Imports": -5.435558825063714}, {"dt": "2008-02-01T00:00:00", "Total Imports": -9.933665782907596}, {"dt": "2008-03-01T00:00:00", "Total Imports": -6.858025777184484}, {"dt": "2008-04-01T00:00:00", "Total Imports": -11.629697093164914}, {"dt": "2008-05-01T00:00:00", "Total Imports": 2.1450803159775544}, {"dt": "2008-06-01T00:00:00", "Total Imports": -11.799865763652972}, {"dt": "2008-07-01T00:00:00", "Total Imports": -2.7420365053573814}, {"dt": "2008-08-01T00:00:00", "Total Imports": 7.706361893384406}, {"dt": "2008-09-01T00:00:00", "Total Imports": -8.473216523795724}, {"dt": "2008-10-01T00:00:00", "Total Imports": -4.232792682383546}, {"dt": "2008-11-01T00:00:00", "Total Imports": -9.778683503776675}, {"dt": "2008-12-01T00:00:00", "Total Imports": -12.532557232187102}, {"dt": "2009-01-01T00:00:00", "Total Imports": -7.709483109143111}, {"dt": "2009-02-01T00:00:00", "Total Imports": -35.54417158662704}, {"dt": "2009-03-01T00:00:00", "Total Imports": -6.503787236344715}, {"dt": "2009-04-01T00:00:00", "Total Imports": -15.117617446807685}, {"dt": "2009-05-01T00:00:00", "Total Imports": -18.743271230598623}, {"dt": "2009-06-01T00:00:00", "Total Imports": -18.111384201835367}, {"dt": "2009-07-01T00:00:00", "Total Imports": -18.315124042352494}, {"dt": "2009-08-01T00:00:00", "Total Imports": -19.922419931789502}, {"dt": "2009-09-01T00:00:00", "Total Imports": -16.087879711129926}, {"dt": "2009-10-01T00:00:00", "Total Imports": -9.240087316093037}, {"dt": "2009-11-01T00:00:00", "Total Imports": -12.225100382528753}, {"dt": "2009-12-01T00:00:00", "Total Imports": -4.541333372087886}, {"dt": "2010-01-01T00:00:00", "Total Imports": -5.520397554022704}, {"dt": "2010-02-01T00:00:00", "Total Imports": 32.069257872450805}, {"dt": "2010-03-01T00:00:00", "Total Imports": 0.019755538961452324}, {"dt": "2010-04-01T00:00:00", "Total Imports": 10.533018193888854}, {"dt": "2010-05-01T00:00:00", "Total Imports": 14.884992475456427}, {"dt": "2010-06-01T00:00:00", "Total Imports": 33.44718412523575}, {"dt": "2010-07-01T00:00:00", "Total Imports": 22.049834731344053}, {"dt": "2010-08-01T00:00:00", "Total Imports": 24.406315887683228}, {"dt": "2010-09-01T00:00:00", "Total Imports": 21.225748471169958}, {"dt": "2010-10-01T00:00:00", "Total Imports": 4.622508050229479}, {"dt": "2010-11-01T00:00:00", "Total Imports": 13.453181644822521}, {"dt": "2010-12-01T00:00:00", "Total Imports": 8.252233436910771}, {"dt": "2011-01-01T00:00:00", "Total Imports": 17.3199800854265}, {"dt": "2011-02-01T00:00:00", "Total Imports": 5.173223374716929}, {"dt": "2011-03-01T00:00:00", "Total Imports": 11.021892551095158}, {"dt": "2011-04-01T00:00:00", "Total Imports": 4.979491271765979}, {"dt": "2011-05-01T00:00:00", "Total Imports": 6.649976182512329}, {"dt": "2011-06-01T00:00:00", "Total Imports": -7.7958624635044105}, {"dt": "2011-07-01T00:00:00", "Total Imports": -0.1334084085482634}, {"dt": "2011-08-01T00:00:00", "Total Imports": -3.88842744154414}, {"dt": "2011-09-01T00:00:00", "Total Imports": 0.9611899591992268}, {"dt": "2011-10-01T00:00:00", "Total Imports": 6.196170088458675}, {"dt": "2011-11-01T00:00:00", "Total Imports": 6.974236072982909}, {"dt": "2011-12-01T00:00:00", "Total Imports": 6.489645391703069}, {"dt": "2012-01-01T00:00:00", "Total Imports": 3.014438107762385}, {"dt": "2012-02-01T00:00:00", "Total Imports": -8.889188988703777}, {"dt": "2012-03-01T00:00:00", "Total Imports": 8.292491580559446}, {"dt": "2012-04-01T00:00:00", "Total Imports": 14.437777873303471}, {"dt": "2012-05-01T00:00:00", "Total Imports": 1.1853826882465057}, {"dt": "2012-06-01T00:00:00", "Total Imports": 4.058158113669008}, {"dt": "2012-07-01T00:00:00", "Total Imports": 1.4977236183736364}, {"dt": "2012-08-01T00:00:00", "Total Imports": -4.934154562490811}, {"dt": "2012-09-01T00:00:00", "Total Imports": 2.7413258417530395}, {"dt": "2012-10-01T00:00:00", "Total Imports": -1.5909431724524747}, {"dt": "2012-11-01T00:00:00", "Total Imports": -18.889760219167997}, {"dt": "2012-12-01T00:00:00", "Total Imports": -8.462057378605293}, {"dt": "2013-01-01T00:00:00", "Total Imports": -4.560265439045708}, {"dt": "2013-02-01T00:00:00", "Total Imports": 23.550722162250803}, {"dt": "2013-03-01T00:00:00", "Total Imports": -28.397571012747168}, {"dt": "2013-04-01T00:00:00", "Total Imports": -10.427547423949102}, {"dt": "2013-05-01T00:00:00", "Total Imports": -10.918317747899298}, {"dt": "2013-06-01T00:00:00", "Total Imports": -6.866532757046173}, {"dt": "2013-07-01T00:00:00", "Total Imports": 0.48894716876619615}, {"dt": "2013-08-01T00:00:00", "Total Imports": -0.7786114303091285}, {"dt": "2013-09-01T00:00:00", "Total Imports": -2.861393982577809}, {"dt": "2013-10-01T00:00:00", "Total Imports": -3.1874114715508384}, {"dt": "2013-11-01T00:00:00", "Total Imports": 17.81765107936064}, {"dt": "2013-12-01T00:00:00", "Total Imports": 9.230249888760156}, {"dt": "2014-01-01T00:00:00", "Total Imports": 6.470670706479931}, {"dt": "2014-02-01T00:00:00", "Total Imports": -8.899441714073742}, {"dt": "2014-03-01T00:00:00", "Total Imports": 41.36853605994701}, {"dt": "2014-04-01T00:00:00", "Total Imports": 12.837871618299035}, {"dt": "2014-05-01T00:00:00", "Total Imports": 8.836447729558362}, {"dt": "2014-06-01T00:00:00", "Total Imports": 16.966954241494925}, {"dt": "2014-07-01T00:00:00", "Total Imports": -0.6768195034784763}, {"dt": "2014-08-01T00:00:00", "Total Imports": 9.304491280459404}, {"dt": "2014-09-01T00:00:00", "Total Imports": 10.857146590274347}, {"dt": "2014-10-01T00:00:00", "Total Imports": 5.271468974796956}, {"dt": "2014-11-01T00:00:00", "Total Imports": -2.487455334598998}, {"dt": "2014-12-01T00:00:00", "Total Imports": 3.3854329660947924}, {"dt": "2015-01-01T00:00:00", "Total Imports": -27.920456961959417}, {"dt": "2015-02-01T00:00:00", "Total Imports": -12.336078689647934}, {"dt": "2015-03-01T00:00:00", "Total Imports": 28.09200204674529}, {"dt": "2015-04-01T00:00:00", "Total Imports": -10.170851783013113}, {"dt": "2015-05-01T00:00:00", "Total Imports": -2.262125107147195}, {"dt": "2015-06-01T00:00:00", "Total Imports": -4.623209510498549}, {"dt": "2015-07-01T00:00:00", "Total Imports": -4.784500473115905}, {"dt": "2015-08-01T00:00:00", "Total Imports": 3.552229858224454}, {"dt": "2015-09-01T00:00:00", "Total Imports": -9.489813333232755}, {"dt": "2015-10-01T00:00:00", "Total Imports": -2.3962240143160174}, {"dt": "2015-11-01T00:00:00", "Total Imports": 7.422853506881255}, {"dt": "2015-12-01T00:00:00", "Total Imports": -3.876913678163074}, {"dt": "2016-01-01T00:00:00", "Total Imports": 40.03527606732309}, {"dt": "2016-02-01T00:00:00", "Total Imports": 47.474255744384486}, {"dt": "2016-03-01T00:00:00", "Total Imports": -32.412709337813496}, {"dt": "2016-04-01T00:00:00", "Total Imports": 4.302140425140322}, {"dt": "2016-05-01T00:00:00", "Total Imports": 14.46368533826654}, {"dt": "2016-06-01T00:00:00", "Total Imports": -3.3361824296959552}, {"dt": "2016-07-01T00:00:00", "Total Imports": 4.820871821270556}, {"dt": "2016-08-01T00:00:00", "Total Imports": 1.4069459607379375}, {"dt": "2016-09-01T00:00:00", "Total Imports": 4.170931396065347}, {"dt": "2016-10-01T00:00:00", "Total Imports": 14.97821050216337}, {"dt": "2016-11-01T00:00:00", "Total Imports": 21.587648222724056}, {"dt": "2016-12-01T00:00:00", "Total Imports": 22.303108713599194}, {"dt": "2017-01-01T00:00:00", "Total Imports": 14.173607341057416}, {"dt": "2017-02-01T00:00:00", "Total Imports": -19.507744838024532}, {"dt": "2017-03-01T00:00:00", "Total Imports": 29.90983315799207}, {"dt": "2017-04-01T00:00:00", "Total Imports": 7.711131071385369}, {"dt": "2017-05-01T00:00:00", "Total Imports": 3.1072671343998826}, {"dt": "2017-06-01T00:00:00", "Total Imports": 4.821344928071203}, {"dt": "2017-07-01T00:00:00", "Total Imports": 12.708892470647282}, {"dt": "2017-08-01T00:00:00", "Total Imports": 4.6902191153978645}, {"dt": "2017-09-01T00:00:00", "Total Imports": -0.4030219143165925}, {"dt": "2017-10-01T00:00:00", "Total Imports": -7.06174041214922}, {"dt": "2017-11-01T00:00:00", "Total Imports": 6.12897710486251}, {"dt": "2017-12-01T00:00:00", "Total Imports": -1.8720578521102538}, {"dt": "2018-01-01T00:00:00", "Total Imports": 0.8710255643534559}, {"dt": "2018-02-01T00:00:00", "Total Imports": 27.254106893878216}, {"dt": "2018-03-01T00:00:00", "Total Imports": -28.989623530629004}, {"dt": "2018-04-01T00:00:00", "Total Imports": -2.3564764473582023}, {"dt": "2018-05-01T00:00:00", "Total Imports": -1.6794622498200629}, {"dt": "2018-06-01T00:00:00", "Total Imports": 2.764368692911612}, {"dt": "2018-07-01T00:00:00", "Total Imports": 6.314015019946662}, {"dt": "2018-08-01T00:00:00", "Total Imports": -0.5332264352467475}, {"dt": "2018-09-01T00:00:00", "Total Imports": 8.269814523695217}, {"dt": "2018-10-01T00:00:00", "Total Imports": 26.743767632168858}, {"dt": "2018-11-01T00:00:00", "Total Imports": -7.529000558546784}, {"dt": "2018-12-01T00:00:00", "Total Imports": 21.407494392476444}, {"dt": "2019-01-01T00:00:00", "Total Imports": 3.1476151494201687}, {"dt": "2019-02-01T00:00:00", "Total Imports": -7.164151130065621}, {"dt": "2019-03-01T00:00:00", "Total Imports": 13.588717591971289}, {"dt": "2019-04-01T00:00:00", "Total Imports": 1.5615541775171327}, {"dt": "2019-05-01T00:00:00", "Total Imports": 5.496479644327401}, {"dt": "2019-06-01T00:00:00", "Total Imports": 3.1672480391310653}, {"dt": "2019-07-01T00:00:00", "Total Imports": 7.240957188502906}, {"dt": "2019-08-01T00:00:00", "Total Imports": 1.9082937048591653}, {"dt": "2019-09-01T00:00:00", "Total Imports": -3.855610715623836}, {"dt": "2019-10-01T00:00:00", "Total Imports": -20.215068622291355}, {"dt": "2019-11-01T00:00:00", "Total Imports": -13.530245451837597}, {"dt": "2019-12-01T00:00:00", "Total Imports": -20.43295033256228}, {"dt": "2020-01-01T00:00:00", "Total Imports": -4.480061382382406}, {"dt": "2020-02-01T00:00:00", "Total Imports": -23.540082438498587}, {"dt": "2020-03-01T00:00:00", "Total Imports": -25.54110396944067}, {"dt": "2020-04-01T00:00:00", "Total Imports": -1.0988691493312275}, {"dt": "2020-05-01T00:00:00", "Total Imports": -30.42092291535984}, {"dt": "2020-06-01T00:00:00", "Total Imports": -9.010580941491874}, {"dt": "2020-07-01T00:00:00", "Total Imports": -6.236237576775794}, {"dt": "2020-08-01T00:00:00", "Total Imports": 15.128278382438287}, {"dt": "2020-09-01T00:00:00", "Total Imports": 14.951453618235222}, {"dt": "2020-10-01T00:00:00", "Total Imports": 26.93350694724861}, {"dt": "2020-11-01T00:00:00", "Total Imports": 22.508221780888405}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doYoyChart</span><span class="p">(</span><span class="n">df_la</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Los Angeles&#39;</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;Total TEUs&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[7]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-973da5558d5d44fb9a3ab1c91077f074"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-973da5558d5d44fb9a3ab1c91077f074") {
      outputDiv = document.getElementById("altair-viz-973da5558d5d44fb9a3ab1c91077f074");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-cff398bc2f42fec4fa05b6583e898bb7"}, "mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['nolarge'] < 0"}, "value": "royalblue"}, "tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "nolarge", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Year-over-Year Volume Growth [%]"}, "field": "nolarge"}}, "height": 400, "title": "Port of Los Angeles Total TEUs Container Volume Growth", "transform": [{"calculate": "datum['Total TEUs'] > 400 ? NaN : datum['Total TEUs']", "as": "nolarge"}], "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-cff398bc2f42fec4fa05b6583e898bb7": [{"dt": "1996-01-01T00:00:00", "Total TEUs": null}, {"dt": "1996-02-01T00:00:00", "Total TEUs": null}, {"dt": "1996-03-01T00:00:00", "Total TEUs": null}, {"dt": "1996-04-01T00:00:00", "Total TEUs": null}, {"dt": "1996-05-01T00:00:00", "Total TEUs": null}, {"dt": "1996-06-01T00:00:00", "Total TEUs": null}, {"dt": "1996-07-01T00:00:00", "Total TEUs": null}, {"dt": "1996-08-01T00:00:00", "Total TEUs": null}, {"dt": "1996-09-01T00:00:00", "Total TEUs": null}, {"dt": "1996-10-01T00:00:00", "Total TEUs": null}, {"dt": "1996-11-01T00:00:00", "Total TEUs": null}, {"dt": "1996-12-01T00:00:00", "Total TEUs": null}, {"dt": "1997-01-01T00:00:00", "Total TEUs": 15.432087596095535}, {"dt": "1997-02-01T00:00:00", "Total TEUs": 16.624391432529293}, {"dt": "1997-03-01T00:00:00", "Total TEUs": 18.017381459400617}, {"dt": "1997-04-01T00:00:00", "Total TEUs": 17.439868245138147}, {"dt": "1997-05-01T00:00:00", "Total TEUs": 19.546428833171035}, {"dt": "1997-06-01T00:00:00", "Total TEUs": 12.384960742621697}, {"dt": "1997-07-01T00:00:00", "Total TEUs": 9.134095924934883}, {"dt": "1997-08-01T00:00:00", "Total TEUs": 3.765314357346705}, {"dt": "1997-09-01T00:00:00", "Total TEUs": 5.967036504930312}, {"dt": "1997-10-01T00:00:00", "Total TEUs": -0.4857568490325148}, {"dt": "1997-11-01T00:00:00", "Total TEUs": 2.4259492468052146}, {"dt": "1997-12-01T00:00:00", "Total TEUs": 11.091507906149456}, {"dt": "1998-01-01T00:00:00", "Total TEUs": 1.0241477985842629}, {"dt": "1998-02-01T00:00:00", "Total TEUs": 8.454481171855255}, {"dt": "1998-03-01T00:00:00", "Total TEUs": 19.465737408548133}, {"dt": "1998-04-01T00:00:00", "Total TEUs": 13.445563948906214}, {"dt": "1998-05-01T00:00:00", "Total TEUs": 19.65638169744288}, {"dt": "1998-06-01T00:00:00", "Total TEUs": 15.580573435137302}, {"dt": "1998-07-01T00:00:00", "Total TEUs": 10.655519938677038}, {"dt": "1998-08-01T00:00:00", "Total TEUs": 20.530896569032354}, {"dt": "1998-09-01T00:00:00", "Total TEUs": 13.022929320133914}, {"dt": "1998-10-01T00:00:00", "Total TEUs": 15.986526177725157}, {"dt": "1998-11-01T00:00:00", "Total TEUs": 21.949192475131163}, {"dt": "1998-12-01T00:00:00", "Total TEUs": 8.755715045710533}, {"dt": "1999-01-01T00:00:00", "Total TEUs": 12.866126486663987}, {"dt": "1999-02-01T00:00:00", "Total TEUs": 11.929842502494559}, {"dt": "1999-03-01T00:00:00", "Total TEUs": 0.2634518557553811}, {"dt": "1999-04-01T00:00:00", "Total TEUs": 3.1941352075325558}, {"dt": "1999-05-01T00:00:00", "Total TEUs": 11.770586657954652}, {"dt": "1999-06-01T00:00:00", "Total TEUs": 11.424085697242138}, {"dt": "1999-07-01T00:00:00", "Total TEUs": 18.16559141208498}, {"dt": "1999-08-01T00:00:00", "Total TEUs": 11.154971084725585}, {"dt": "1999-09-01T00:00:00", "Total TEUs": 16.193057984848558}, {"dt": "1999-10-01T00:00:00", "Total TEUs": 24.380255892165014}, {"dt": "1999-11-01T00:00:00", "Total TEUs": 16.30872806397148}, {"dt": "1999-12-01T00:00:00", "Total TEUs": 20.63074782848531}, {"dt": "2000-01-01T00:00:00", "Total TEUs": 33.10449145382031}, {"dt": "2000-02-01T00:00:00", "Total TEUs": 27.73039794008909}, {"dt": "2000-03-01T00:00:00", "Total TEUs": 29.590580699102343}, {"dt": "2000-04-01T00:00:00", "Total TEUs": 43.95660983475989}, {"dt": "2000-05-01T00:00:00", "Total TEUs": 21.45313425052393}, {"dt": "2000-06-01T00:00:00", "Total TEUs": 26.922811350862077}, {"dt": "2000-07-01T00:00:00", "Total TEUs": 33.455797968175126}, {"dt": "2000-08-01T00:00:00", "Total TEUs": 33.32323928679528}, {"dt": "2000-09-01T00:00:00", "Total TEUs": 25.276009636259957}, {"dt": "2000-10-01T00:00:00", "Total TEUs": 24.365978420853395}, {"dt": "2000-11-01T00:00:00", "Total TEUs": 19.036589003532754}, {"dt": "2000-12-01T00:00:00", "Total TEUs": 15.808136973707532}, {"dt": "2001-01-01T00:00:00", "Total TEUs": 10.819421356681168}, {"dt": "2001-02-01T00:00:00", "Total TEUs": -1.9275494976333074}, {"dt": "2001-03-01T00:00:00", "Total TEUs": 12.418768804197878}, {"dt": "2001-04-01T00:00:00", "Total TEUs": 2.5546167534371333}, {"dt": "2001-05-01T00:00:00", "Total TEUs": -1.9664131588776113}, {"dt": "2001-06-01T00:00:00", "Total TEUs": 8.120071820813624}, {"dt": "2001-07-01T00:00:00", "Total TEUs": 2.524112775340792}, {"dt": "2001-08-01T00:00:00", "Total TEUs": 2.804513702125311}, {"dt": "2001-09-01T00:00:00", "Total TEUs": 14.819879004860482}, {"dt": "2001-10-01T00:00:00", "Total TEUs": 4.88429853161596}, {"dt": "2001-11-01T00:00:00", "Total TEUs": 10.017701675681344}, {"dt": "2001-12-01T00:00:00", "Total TEUs": 10.51980572212683}, {"dt": "2002-01-01T00:00:00", "Total TEUs": 2.8320496008245932}, {"dt": "2002-02-01T00:00:00", "Total TEUs": 31.648653817985494}, {"dt": "2002-03-01T00:00:00", "Total TEUs": 8.696990181395826}, {"dt": "2002-04-01T00:00:00", "Total TEUs": 16.01932827986885}, {"dt": "2002-05-01T00:00:00", "Total TEUs": 32.799848204231296}, {"dt": "2002-06-01T00:00:00", "Total TEUs": 23.25496412540651}, {"dt": "2002-07-01T00:00:00", "Total TEUs": 9.70106271770641}, {"dt": "2002-08-01T00:00:00", "Total TEUs": 26.922204591046395}, {"dt": "2002-09-01T00:00:00", "Total TEUs": 21.57989948504526}, {"dt": "2002-10-01T00:00:00", "Total TEUs": -6.7422068943394535}, {"dt": "2002-11-01T00:00:00", "Total TEUs": 19.8625261317253}, {"dt": "2002-12-01T00:00:00", "Total TEUs": 32.50599776491847}, {"dt": "2003-01-01T00:00:00", "Total TEUs": 27.019133151878027}, {"dt": "2003-02-01T00:00:00", "Total TEUs": 24.397522158803177}, {"dt": "2003-03-01T00:00:00", "Total TEUs": 29.09196714263167}, {"dt": "2003-04-01T00:00:00", "Total TEUs": 21.626205285265264}, {"dt": "2003-05-01T00:00:00", "Total TEUs": 22.72003459244878}, {"dt": "2003-06-01T00:00:00", "Total TEUs": 5.093506244157298}, {"dt": "2003-07-01T00:00:00", "Total TEUs": 24.21346830466473}, {"dt": "2003-08-01T00:00:00", "Total TEUs": 7.5104980430848345}, {"dt": "2003-09-01T00:00:00", "Total TEUs": 5.683071043033827}, {"dt": "2003-10-01T00:00:00", "Total TEUs": 42.49442534204895}, {"dt": "2003-11-01T00:00:00", "Total TEUs": 14.983630337769105}, {"dt": "2003-12-01T00:00:00", "Total TEUs": -0.7136468673959673}, {"dt": "2004-01-01T00:00:00", "Total TEUs": 18.812213328848927}, {"dt": "2004-02-01T00:00:00", "Total TEUs": -10.85952439558946}, {"dt": "2004-03-01T00:00:00", "Total TEUs": 8.525115502254588}, {"dt": "2004-04-01T00:00:00", "Total TEUs": 4.730153464617026}, {"dt": "2004-05-01T00:00:00", "Total TEUs": 1.3702737165044887}, {"dt": "2004-06-01T00:00:00", "Total TEUs": 8.56611956802067}, {"dt": "2004-07-01T00:00:00", "Total TEUs": 9.856056615868747}, {"dt": "2004-08-01T00:00:00", "Total TEUs": -3.6223822502255865}, {"dt": "2004-09-01T00:00:00", "Total TEUs": -4.809217232787533}, {"dt": "2004-10-01T00:00:00", "Total TEUs": -4.197684765101107}, {"dt": "2004-11-01T00:00:00", "Total TEUs": 0.4150770551893279}, {"dt": "2004-12-01T00:00:00", "Total TEUs": -1.9566606760487937}, {"dt": "2005-01-01T00:00:00", "Total TEUs": -4.205339846916079}, {"dt": "2005-02-01T00:00:00", "Total TEUs": 14.945124495800677}, {"dt": "2005-03-01T00:00:00", "Total TEUs": -14.158704226922636}, {"dt": "2005-04-01T00:00:00", "Total TEUs": 3.2543031288607915}, {"dt": "2005-05-01T00:00:00", "Total TEUs": -7.598709912994717}, {"dt": "2005-06-01T00:00:00", "Total TEUs": 3.5890114507757698}, {"dt": "2005-07-01T00:00:00", "Total TEUs": -4.142493019472438}, {"dt": "2005-08-01T00:00:00", "Total TEUs": 3.8517821803640606}, {"dt": "2005-09-01T00:00:00", "Total TEUs": 11.92927469985532}, {"dt": "2005-10-01T00:00:00", "Total TEUs": 10.079418492574455}, {"dt": "2005-11-01T00:00:00", "Total TEUs": 1.6600917983127461}, {"dt": "2005-12-01T00:00:00", "Total TEUs": 12.624130265605803}, {"dt": "2006-01-01T00:00:00", "Total TEUs": 5.099635974478223}, {"dt": "2006-02-01T00:00:00", "Total TEUs": -13.283091513162104}, {"dt": "2006-03-01T00:00:00", "Total TEUs": 27.795239566385543}, {"dt": "2006-04-01T00:00:00", "Total TEUs": 5.71780346961468}, {"dt": "2006-05-01T00:00:00", "Total TEUs": 13.974133668859023}, {"dt": "2006-06-01T00:00:00", "Total TEUs": 14.63974085892017}, {"dt": "2006-07-01T00:00:00", "Total TEUs": 17.419840366674055}, {"dt": "2006-08-01T00:00:00", "Total TEUs": 21.36001066372888}, {"dt": "2006-09-01T00:00:00", "Total TEUs": 19.308261814986615}, {"dt": "2006-10-01T00:00:00", "Total TEUs": 13.044866328755433}, {"dt": "2006-11-01T00:00:00", "Total TEUs": 16.346079501705503}, {"dt": "2006-12-01T00:00:00", "Total TEUs": 14.642281668872027}, {"dt": "2007-01-01T00:00:00", "Total TEUs": 11.49919144779814}, {"dt": "2007-02-01T00:00:00", "Total TEUs": 35.02970321534302}, {"dt": "2007-03-01T00:00:00", "Total TEUs": -6.112327628684}, {"dt": "2007-04-01T00:00:00", "Total TEUs": 0.930161795419493}, {"dt": "2007-05-01T00:00:00", "Total TEUs": -2.0703616176545148}, {"dt": "2007-06-01T00:00:00", "Total TEUs": -1.4721653001940505}, {"dt": "2007-07-01T00:00:00", "Total TEUs": -5.911650109049815}, {"dt": "2007-08-01T00:00:00", "Total TEUs": -9.61348142414089}, {"dt": "2007-09-01T00:00:00", "Total TEUs": -6.195156887974318}, {"dt": "2007-10-01T00:00:00", "Total TEUs": -8.064056387499575}, {"dt": "2007-11-01T00:00:00", "Total TEUs": -1.2436677949998365}, {"dt": "2007-12-01T00:00:00", "Total TEUs": -7.140327970123261}, {"dt": "2008-01-01T00:00:00", "Total TEUs": -5.691973129053995}, {"dt": "2008-02-01T00:00:00", "Total TEUs": -5.470571111278833}, {"dt": "2008-03-01T00:00:00", "Total TEUs": -7.304856350014132}, {"dt": "2008-04-01T00:00:00", "Total TEUs": -10.915928580177736}, {"dt": "2008-05-01T00:00:00", "Total TEUs": 0.7781222812213828}, {"dt": "2008-06-01T00:00:00", "Total TEUs": -11.713777754816157}, {"dt": "2008-07-01T00:00:00", "Total TEUs": -2.5351958916650874}, {"dt": "2008-08-01T00:00:00", "Total TEUs": 5.9266888873280354}, {"dt": "2008-09-01T00:00:00", "Total TEUs": -6.6894750415284365}, {"dt": "2008-10-01T00:00:00", "Total TEUs": -3.975004970795515}, {"dt": "2008-11-01T00:00:00", "Total TEUs": -10.361196520385318}, {"dt": "2008-12-01T00:00:00", "Total TEUs": -15.175189139801903}, {"dt": "2009-01-01T00:00:00", "Total TEUs": -10.001284810625355}, {"dt": "2009-02-01T00:00:00", "Total TEUs": -32.557769700698536}, {"dt": "2009-03-01T00:00:00", "Total TEUs": -9.836219844054773}, {"dt": "2009-04-01T00:00:00", "Total TEUs": -12.113340402815108}, {"dt": "2009-05-01T00:00:00", "Total TEUs": -16.309290063970504}, {"dt": "2009-06-01T00:00:00", "Total TEUs": -12.747578169864916}, {"dt": "2009-07-01T00:00:00", "Total TEUs": -17.468226807263044}, {"dt": "2009-08-01T00:00:00", "Total TEUs": -19.08510038419887}, {"dt": "2009-09-01T00:00:00", "Total TEUs": -15.779260168173902}, {"dt": "2009-10-01T00:00:00", "Total TEUs": -8.336947784483629}, {"dt": "2009-11-01T00:00:00", "Total TEUs": -12.096170497078607}, {"dt": "2009-12-01T00:00:00", "Total TEUs": 0.3487315591366391}, {"dt": "2010-01-01T00:00:00", "Total TEUs": -2.390962449672407}, {"dt": "2010-02-01T00:00:00", "Total TEUs": 26.949872955565503}, {"dt": "2010-03-01T00:00:00", "Total TEUs": 4.513453844686199}, {"dt": "2010-04-01T00:00:00", "Total TEUs": 11.869325983419454}, {"dt": "2010-05-01T00:00:00", "Total TEUs": 19.935170150086677}, {"dt": "2010-06-01T00:00:00", "Total TEUs": 32.38077275636571}, {"dt": "2010-07-01T00:00:00", "Total TEUs": 26.820804985046507}, {"dt": "2010-08-01T00:00:00", "Total TEUs": 24.6915226790231}, {"dt": "2010-09-01T00:00:00", "Total TEUs": 21.944043169733195}, {"dt": "2010-10-01T00:00:00", "Total TEUs": 5.39998767422325}, {"dt": "2010-11-01T00:00:00", "Total TEUs": 14.954055554219824}, {"dt": "2010-12-01T00:00:00", "Total TEUs": 8.821110863918925}, {"dt": "2011-01-01T00:00:00", "Total TEUs": 15.279819166529297}, {"dt": "2011-02-01T00:00:00", "Total TEUs": 5.605427335283908}, {"dt": "2011-03-01T00:00:00", "Total TEUs": 9.186046046722772}, {"dt": "2011-04-01T00:00:00", "Total TEUs": 3.693835393107525}, {"dt": "2011-05-01T00:00:00", "Total TEUs": 0.5095582421589695}, {"dt": "2011-06-01T00:00:00", "Total TEUs": -12.258121583636495}, {"dt": "2011-07-01T00:00:00", "Total TEUs": -5.805036663922425}, {"dt": "2011-08-01T00:00:00", "Total TEUs": -5.323994432321433}, {"dt": "2011-09-01T00:00:00", "Total TEUs": -0.8416302119269914}, {"dt": "2011-10-01T00:00:00", "Total TEUs": 4.425906508720523}, {"dt": "2011-11-01T00:00:00", "Total TEUs": 4.068875609940759}, {"dt": "2011-12-01T00:00:00", "Total TEUs": 6.009450394081983}, {"dt": "2012-01-01T00:00:00", "Total TEUs": 5.782932723387613}, {"dt": "2012-02-01T00:00:00", "Total TEUs": -5.2727833994818845}, {"dt": "2012-03-01T00:00:00", "Total TEUs": 8.265076664957816}, {"dt": "2012-04-01T00:00:00", "Total TEUs": 14.565641592651545}, {"dt": "2012-05-01T00:00:00", "Total TEUs": 5.544426544704062}, {"dt": "2012-06-01T00:00:00", "Total TEUs": 8.74747540007359}, {"dt": "2012-07-01T00:00:00", "Total TEUs": 5.527863959139667}, {"dt": "2012-08-01T00:00:00", "Total TEUs": -2.2817231702812024}, {"dt": "2012-09-01T00:00:00", "Total TEUs": 5.5694404320375535}, {"dt": "2012-10-01T00:00:00", "Total TEUs": 0.816764343738341}, {"dt": "2012-11-01T00:00:00", "Total TEUs": -16.010028400450828}, {"dt": "2012-12-01T00:00:00", "Total TEUs": -9.440716696585994}, {"dt": "2013-01-01T00:00:00", "Total TEUs": -4.252777705820288}, {"dt": "2013-02-01T00:00:00", "Total TEUs": 16.98938720938672}, {"dt": "2013-03-01T00:00:00", "Total TEUs": -22.643360830868065}, {"dt": "2013-04-01T00:00:00", "Total TEUs": -9.453292235013834}, {"dt": "2013-05-01T00:00:00", "Total TEUs": -12.921436422826794}, {"dt": "2013-06-01T00:00:00", "Total TEUs": -7.2035011367974855}, {"dt": "2013-07-01T00:00:00", "Total TEUs": -1.4778862578260998}, {"dt": "2013-08-01T00:00:00", "Total TEUs": 0.42536839695144213}, {"dt": "2013-09-01T00:00:00", "Total TEUs": -4.568377288314906}, {"dt": "2013-10-01T00:00:00", "Total TEUs": -4.760432588047136}, {"dt": "2013-11-01T00:00:00", "Total TEUs": 17.30196676842517}, {"dt": "2013-12-01T00:00:00", "Total TEUs": 11.086233848198312}, {"dt": "2014-01-01T00:00:00", "Total TEUs": 2.473773180669725}, {"dt": "2014-02-01T00:00:00", "Total TEUs": -8.971723713175884}, {"dt": "2014-03-01T00:00:00", "Total TEUs": 34.204500286186715}, {"dt": "2014-04-01T00:00:00", "Total TEUs": 10.261362028528431}, {"dt": "2014-05-01T00:00:00", "Total TEUs": 8.210711883270783}, {"dt": "2014-06-01T00:00:00", "Total TEUs": 13.88513578818853}, {"dt": "2014-07-01T00:00:00", "Total TEUs": 0.2468768351137296}, {"dt": "2014-08-01T00:00:00", "Total TEUs": 6.767414555168316}, {"dt": "2014-09-01T00:00:00", "Total TEUs": 9.036594505004093}, {"dt": "2014-10-01T00:00:00", "Total TEUs": 4.600332267817753}, {"dt": "2014-11-01T00:00:00", "Total TEUs": -2.9982349904730476}, {"dt": "2014-12-01T00:00:00", "Total TEUs": 0.7972806959611001}, {"dt": "2015-01-01T00:00:00", "Total TEUs": -22.773347554521383}, {"dt": "2015-02-01T00:00:00", "Total TEUs": -10.204437818106848}, {"dt": "2015-03-01T00:00:00", "Total TEUs": 17.26550744356996}, {"dt": "2015-04-01T00:00:00", "Total TEUs": -6.099335048824662}, {"dt": "2015-05-01T00:00:00", "Total TEUs": 0.8197734094289588}, {"dt": "2015-06-01T00:00:00", "Total TEUs": -1.9874292337666133}, {"dt": "2015-07-01T00:00:00", "Total TEUs": -2.5479330421922297}, {"dt": "2015-08-01T00:00:00", "Total TEUs": 3.8227869000555748}, {"dt": "2015-09-01T00:00:00", "Total TEUs": -5.78298399744972}, {"dt": "2015-10-01T00:00:00", "Total TEUs": -1.5501278569042265}, {"dt": "2015-11-01T00:00:00", "Total TEUs": 7.028478066335242}, {"dt": "2015-12-01T00:00:00", "Total TEUs": -4.90318797262147}, {"dt": "2016-01-01T00:00:00", "Total TEUs": 33.04916143333776}, {"dt": "2016-02-01T00:00:00", "Total TEUs": 41.98788731940446}, {"dt": "2016-03-01T00:00:00", "Total TEUs": -22.604953681416852}, {"dt": "2016-04-01T00:00:00", "Total TEUs": -1.0251092332910772}, {"dt": "2016-05-01T00:00:00", "Total TEUs": 10.88359586669978}, {"dt": "2016-06-01T00:00:00", "Total TEUs": -6.344629404216606}, {"dt": "2016-07-01T00:00:00", "Total TEUs": -1.6071664707440037}, {"dt": "2016-08-01T00:00:00", "Total TEUs": 1.5591015673960484}, {"dt": "2016-09-01T00:00:00", "Total TEUs": 2.3826284538732923}, {"dt": "2016-10-01T00:00:00", "Total TEUs": 15.609896778107068}, {"dt": "2016-11-01T00:00:00", "Total TEUs": 23.60604066066574}, {"dt": "2016-12-01T00:00:00", "Total TEUs": 27.186004779197816}, {"dt": "2017-01-01T00:00:00", "Total TEUs": 17.35397061137771}, {"dt": "2017-02-01T00:00:00", "Total TEUs": -12.37736454440881}, {"dt": "2017-03-01T00:00:00", "Total TEUs": 28.662269165451605}, {"dt": "2017-04-01T00:00:00", "Total TEUs": 8.927163789102345}, {"dt": "2017-05-01T00:00:00", "Total TEUs": 3.34982975932403}, {"dt": "2017-06-01T00:00:00", "Total TEUs": 8.139776383939278}, {"dt": "2017-07-01T00:00:00", "Total TEUs": 15.832751604249374}, {"dt": "2017-08-01T00:00:00", "Total TEUs": 6.123706907746618}, {"dt": "2017-09-01T00:00:00", "Total TEUs": 2.1501860219652835}, {"dt": "2017-10-01T00:00:00", "Total TEUs": -8.079346947394017}, {"dt": "2017-11-01T00:00:00", "Total TEUs": 5.317166538926732}, {"dt": "2017-12-01T00:00:00", "Total TEUs": -2.1750799163252177}, {"dt": "2018-01-01T00:00:00", "Total TEUs": -2.1667303481910594}, {"dt": "2018-02-01T00:00:00", "Total TEUs": 15.938807877404027}, {"dt": "2018-03-01T00:00:00", "Total TEUs": -26.715468412680554}, {"dt": "2018-04-01T00:00:00", "Total TEUs": -1.2898264937057924}, {"dt": "2018-05-01T00:00:00", "Total TEUs": -3.4428253012025456}, {"dt": "2018-06-01T00:00:00", "Total TEUs": -1.0794597530464856}, {"dt": "2018-07-01T00:00:00", "Total TEUs": 4.61391383577392}, {"dt": "2018-08-01T00:00:00", "Total TEUs": -2.5026211670941545}, {"dt": "2018-09-01T00:00:00", "Total TEUs": 4.907097486267409}, {"dt": "2018-10-01T00:00:00", "Total TEUs": 27.217125811105312}, {"dt": "2018-11-01T00:00:00", "Total TEUs": -9.942900855121161}, {"dt": "2018-12-01T00:00:00", "Total TEUs": 15.919591479046868}, {"dt": "2019-01-01T00:00:00", "Total TEUs": 5.4061406269223955}, {"dt": "2019-02-01T00:00:00", "Total TEUs": -2.7243145372424116}, {"dt": "2019-03-01T00:00:00", "Total TEUs": 12.651940528070615}, {"dt": "2019-04-01T00:00:00", "Total TEUs": 4.38390134478619}, {"dt": "2019-05-01T00:00:00", "Total TEUs": 7.78583003595128}, {"dt": "2019-06-01T00:00:00", "Total TEUs": 5.757672620345278}, {"dt": "2019-07-01T00:00:00", "Total TEUs": 9.427702855862318}, {"dt": "2019-08-01T00:00:00", "Total TEUs": 4.166561824372073}, {"dt": "2019-09-01T00:00:00", "Total TEUs": -2.6659622797301052}, {"dt": "2019-10-01T00:00:00", "Total TEUs": -19.14487765126115}, {"dt": "2019-11-01T00:00:00", "Total TEUs": -12.424505686380261}, {"dt": "2019-12-01T00:00:00", "Total TEUs": -17.32709524956958}, {"dt": "2020-01-01T00:00:00", "Total TEUs": -5.432081313907744}, {"dt": "2020-02-01T00:00:00", "Total TEUs": -22.86512864512601}, {"dt": "2020-03-01T00:00:00", "Total TEUs": -30.939465386765118}, {"dt": "2020-04-01T00:00:00", "Total TEUs": -6.445233482960067}, {"dt": "2020-05-01T00:00:00", "Total TEUs": -29.80676745040184}, {"dt": "2020-06-01T00:00:00", "Total TEUs": -9.584732024913134}, {"dt": "2020-07-01T00:00:00", "Total TEUs": -6.113549995908041}, {"dt": "2020-08-01T00:00:00", "Total TEUs": 11.700638314081546}, {"dt": "2020-09-01T00:00:00", "Total TEUs": 13.299356874943701}, {"dt": "2020-10-01T00:00:00", "Total TEUs": 27.336171599549996}, {"dt": "2020-11-01T00:00:00", "Total TEUs": 22.064247564780604}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Port-of-Long-Beach">Port of Long Beach<a class="anchor-link" href="#Port-of-Long-Beach">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># http://www.polb.com/economics/stats/teus_archive.asp</span>

<span class="n">uaString</span> <span class="o">=</span> <span class="s1">&#39;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.122 Safari/537.36&#39;</span>

<span class="n">req</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="s2">&quot;https://thehelm.polb.com/stellar_custom_table/table100/&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span> <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="n">uaString</span> <span class="p">})</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>

<span class="n">df_lb_raw</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">read</span><span class="p">()),</span> <span class="n">displayed_only</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

<span class="n">df_lb_raw</span> <span class="o">=</span> <span class="n">df_lb_raw</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span>

<span class="n">df_lb_raw</span><span class="p">[</span><span class="n">df_lb_raw</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">1</span><span class="p">:]]</span> <span class="o">=</span> <span class="n">df_lb_raw</span><span class="p">[</span><span class="n">df_lb_raw</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">1</span><span class="p">:]]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">)</span>

<span class="n">df_lb_raw</span><span class="p">[</span><span class="s1">&#39;dt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_lb_raw</span><span class="p">[</span><span class="s1">&#39;Date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;%b %Y&#39;</span><span class="p">))</span>

<span class="c1">#df_lb_raw.head(16)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doYoyChart</span><span class="p">(</span><span class="n">df_lb_raw</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Long Beach&#39;</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;Total Loaded&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[9]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-e06d1df5c6bd41e78ce58c6e7a2fb818"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-e06d1df5c6bd41e78ce58c6e7a2fb818") {
      outputDiv = document.getElementById("altair-viz-e06d1df5c6bd41e78ce58c6e7a2fb818");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-8803fe19b0e7391231f2b1802566b25b"}, "mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['nolarge'] < 0"}, "value": "royalblue"}, "tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "nolarge", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Year-over-Year Volume Growth [%]"}, "field": "nolarge"}}, "height": 400, "title": "Port of Long Beach Total Loaded Container Volume Growth", "transform": [{"calculate": "datum['Total Loaded'] > 400 ? NaN : datum['Total Loaded']", "as": "nolarge"}], "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-8803fe19b0e7391231f2b1802566b25b": [{"dt": "1995-02-01T00:00:00", "Total Loaded": null}, {"dt": "1995-03-01T00:00:00", "Total Loaded": null}, {"dt": "1995-04-01T00:00:00", "Total Loaded": null}, {"dt": "1995-05-01T00:00:00", "Total Loaded": null}, {"dt": "1995-06-01T00:00:00", "Total Loaded": null}, {"dt": "1995-07-01T00:00:00", "Total Loaded": null}, {"dt": "1995-08-01T00:00:00", "Total Loaded": null}, {"dt": "1995-09-01T00:00:00", "Total Loaded": null}, {"dt": "1995-10-01T00:00:00", "Total Loaded": null}, {"dt": "1995-11-01T00:00:00", "Total Loaded": null}, {"dt": "1995-12-01T00:00:00", "Total Loaded": null}, {"dt": "1996-01-01T00:00:00", "Total Loaded": null}, {"dt": "1996-02-01T00:00:00", "Total Loaded": 12.476243093922657}, {"dt": "1996-03-01T00:00:00", "Total Loaded": 13.830725086894757}, {"dt": "1996-04-01T00:00:00", "Total Loaded": 15.688181684625402}, {"dt": "1996-05-01T00:00:00", "Total Loaded": 1.1370623773875765}, {"dt": "1996-06-01T00:00:00", "Total Loaded": 12.711675353383756}, {"dt": "1996-07-01T00:00:00", "Total Loaded": 6.87978957249944}, {"dt": "1996-08-01T00:00:00", "Total Loaded": 2.4026912350781027}, {"dt": "1996-09-01T00:00:00", "Total Loaded": 17.100147951635126}, {"dt": "1996-10-01T00:00:00", "Total Loaded": 5.653214999670486}, {"dt": "1996-11-01T00:00:00", "Total Loaded": 6.634890180262087}, {"dt": "1996-12-01T00:00:00", "Total Loaded": 18.637750775620887}, {"dt": "1997-01-01T00:00:00", "Total Loaded": 2.861948584524532}, {"dt": "1997-02-01T00:00:00", "Total Loaded": 5.308917291312598}, {"dt": "1997-03-01T00:00:00", "Total Loaded": 14.244277821625895}, {"dt": "1997-04-01T00:00:00", "Total Loaded": 4.6583320561381925}, {"dt": "1997-05-01T00:00:00", "Total Loaded": 13.423790314798012}, {"dt": "1997-06-01T00:00:00", "Total Loaded": 19.66505928711517}, {"dt": "1997-07-01T00:00:00", "Total Loaded": 15.750157618975159}, {"dt": "1997-08-01T00:00:00", "Total Loaded": 11.331167226169448}, {"dt": "1997-09-01T00:00:00", "Total Loaded": 19.66949566066014}, {"dt": "1997-10-01T00:00:00", "Total Loaded": 6.913070960444467}, {"dt": "1997-11-01T00:00:00", "Total Loaded": 14.419077853505978}, {"dt": "1997-12-01T00:00:00", "Total Loaded": 1.4269572512026762}, {"dt": "1998-01-01T00:00:00", "Total Loaded": 7.290251505525602}, {"dt": "1998-02-01T00:00:00", "Total Loaded": -2.3182051401651194}, {"dt": "1998-03-01T00:00:00", "Total Loaded": 10.636625848460257}, {"dt": "1998-04-01T00:00:00", "Total Loaded": 8.583574264758177}, {"dt": "1998-05-01T00:00:00", "Total Loaded": 5.512115849300625}, {"dt": "1998-06-01T00:00:00", "Total Loaded": -0.14697866741847365}, {"dt": "1998-07-01T00:00:00", "Total Loaded": 5.213968025003002}, {"dt": "1998-08-01T00:00:00", "Total Loaded": 10.130261208639958}, {"dt": "1998-09-01T00:00:00", "Total Loaded": -0.7084736506780764}, {"dt": "1998-10-01T00:00:00", "Total Loaded": 0.3088340542054313}, {"dt": "1998-11-01T00:00:00", "Total Loaded": 14.008611817785145}, {"dt": "1998-12-01T00:00:00", "Total Loaded": 7.207842078167603}, {"dt": "1999-01-01T00:00:00", "Total Loaded": 13.765206420539844}, {"dt": "1999-02-01T00:00:00", "Total Loaded": 20.562505968866397}, {"dt": "1999-03-01T00:00:00", "Total Loaded": 1.7101822581274684}, {"dt": "1999-04-01T00:00:00", "Total Loaded": -0.3479527431623275}, {"dt": "1999-05-01T00:00:00", "Total Loaded": 18.212973901403508}, {"dt": "1999-06-01T00:00:00", "Total Loaded": 2.913030711430009}, {"dt": "1999-07-01T00:00:00", "Total Loaded": -6.193410642369546}, {"dt": "1999-08-01T00:00:00", "Total Loaded": 8.232629229297462}, {"dt": "1999-09-01T00:00:00", "Total Loaded": 10.508233447854831}, {"dt": "1999-10-01T00:00:00", "Total Loaded": 11.904688045290634}, {"dt": "1999-11-01T00:00:00", "Total Loaded": 8.554912042520012}, {"dt": "1999-12-01T00:00:00", "Total Loaded": 7.167626417485695}, {"dt": "2000-01-01T00:00:00", "Total Loaded": 4.731395174705444}, {"dt": "2000-02-01T00:00:00", "Total Loaded": 2.682567470156294}, {"dt": "2000-03-01T00:00:00", "Total Loaded": 6.042699491965076}, {"dt": "2000-04-01T00:00:00", "Total Loaded": 12.80784177251899}, {"dt": "2000-05-01T00:00:00", "Total Loaded": 7.7058456375152184}, {"dt": "2000-06-01T00:00:00", "Total Loaded": 4.732379321949587}, {"dt": "2000-07-01T00:00:00", "Total Loaded": 18.648783402666513}, {"dt": "2000-08-01T00:00:00", "Total Loaded": 9.377561041687832}, {"dt": "2000-09-01T00:00:00", "Total Loaded": -3.8598086187903946}, {"dt": "2000-10-01T00:00:00", "Total Loaded": 12.287631977435186}, {"dt": "2000-11-01T00:00:00", "Total Loaded": 1.0563954165211387}, {"dt": "2000-12-01T00:00:00", "Total Loaded": -4.512816369105554}, {"dt": "2001-01-01T00:00:00", "Total Loaded": 5.042451973427431}, {"dt": "2001-02-01T00:00:00", "Total Loaded": -11.026595436925035}, {"dt": "2001-03-01T00:00:00", "Total Loaded": 1.3004776378636507}, {"dt": "2001-04-01T00:00:00", "Total Loaded": -4.298034537838746}, {"dt": "2001-05-01T00:00:00", "Total Loaded": -12.210167645177428}, {"dt": "2001-06-01T00:00:00", "Total Loaded": -1.7205187402421829}, {"dt": "2001-07-01T00:00:00", "Total Loaded": -8.213280981846992}, {"dt": "2001-08-01T00:00:00", "Total Loaded": -5.631291004734029}, {"dt": "2001-09-01T00:00:00", "Total Loaded": 2.4755396800745455}, {"dt": "2001-10-01T00:00:00", "Total Loaded": -1.1146359226297031}, {"dt": "2001-11-01T00:00:00", "Total Loaded": -11.21746028088908}, {"dt": "2001-12-01T00:00:00", "Total Loaded": 5.87040641275165}, {"dt": "2002-01-01T00:00:00", "Total Loaded": -7.482772956208539}, {"dt": "2002-02-01T00:00:00", "Total Loaded": 23.818214923613155}, {"dt": "2002-03-01T00:00:00", "Total Loaded": -7.227973167020297}, {"dt": "2002-04-01T00:00:00", "Total Loaded": 13.149760565045}, {"dt": "2002-05-01T00:00:00", "Total Loaded": 13.785043357813787}, {"dt": "2002-06-01T00:00:00", "Total Loaded": 10.85460031345178}, {"dt": "2002-07-01T00:00:00", "Total Loaded": 11.876561762804272}, {"dt": "2002-08-01T00:00:00", "Total Loaded": 0.290360999104311}, {"dt": "2002-09-01T00:00:00", "Total Loaded": -18.23000862161871}, {"dt": "2002-10-01T00:00:00", "Total Loaded": -36.217700661590314}, {"dt": "2002-11-01T00:00:00", "Total Loaded": -9.39089493586417}, {"dt": "2002-12-01T00:00:00", "Total Loaded": -8.988025170394264}, {"dt": "2003-01-01T00:00:00", "Total Loaded": -10.203919323026023}, {"dt": "2003-02-01T00:00:00", "Total Loaded": -20.692975361420686}, {"dt": "2003-03-01T00:00:00", "Total Loaded": 1.1081206996792714}, {"dt": "2003-04-01T00:00:00", "Total Loaded": -12.706662910358235}, {"dt": "2003-05-01T00:00:00", "Total Loaded": -13.401110815231865}, {"dt": "2003-06-01T00:00:00", "Total Loaded": -11.730346300083994}, {"dt": "2003-07-01T00:00:00", "Total Loaded": -2.507825239442951}, {"dt": "2003-08-01T00:00:00", "Total Loaded": -7.664928454124931}, {"dt": "2003-09-01T00:00:00", "Total Loaded": 12.12654140478917}, {"dt": "2003-10-01T00:00:00", "Total Loaded": 54.35601612650696}, {"dt": "2003-11-01T00:00:00", "Total Loaded": 22.265546686087667}, {"dt": "2003-12-01T00:00:00", "Total Loaded": 17.376898664697315}, {"dt": "2004-01-01T00:00:00", "Total Loaded": 21.617540254725178}, {"dt": "2004-02-01T00:00:00", "Total Loaded": 1.9646105214826903}, {"dt": "2004-03-01T00:00:00", "Total Loaded": 25.790850619009365}, {"dt": "2004-04-01T00:00:00", "Total Loaded": 11.277472975766134}, {"dt": "2004-05-01T00:00:00", "Total Loaded": 19.856060855654523}, {"dt": "2004-06-01T00:00:00", "Total Loaded": 24.564168870035164}, {"dt": "2004-07-01T00:00:00", "Total Loaded": 16.715690986574394}, {"dt": "2004-08-01T00:00:00", "Total Loaded": 25.51125251551827}, {"dt": "2004-09-01T00:00:00", "Total Loaded": 21.87069544998732}, {"dt": "2004-10-01T00:00:00", "Total Loaded": 18.68111665118757}, {"dt": "2004-11-01T00:00:00", "Total Loaded": 32.23426184962588}, {"dt": "2004-12-01T00:00:00", "Total Loaded": 23.411158535548495}, {"dt": "2005-01-01T00:00:00", "Total Loaded": 21.752413273276105}, {"dt": "2005-02-01T00:00:00", "Total Loaded": 47.694385992258326}, {"dt": "2005-03-01T00:00:00", "Total Loaded": -4.756253727412263}, {"dt": "2005-04-01T00:00:00", "Total Loaded": 23.35118013758224}, {"dt": "2005-05-01T00:00:00", "Total Loaded": 20.357531183951714}, {"dt": "2005-06-01T00:00:00", "Total Loaded": 15.35498731667493}, {"dt": "2005-07-01T00:00:00", "Total Loaded": 8.833574005238054}, {"dt": "2005-08-01T00:00:00", "Total Loaded": 17.67691452154252}, {"dt": "2005-09-01T00:00:00", "Total Loaded": 23.71647648154511}, {"dt": "2005-10-01T00:00:00", "Total Loaded": 7.534707569695587}, {"dt": "2005-11-01T00:00:00", "Total Loaded": 4.317061998770089}, {"dt": "2005-12-01T00:00:00", "Total Loaded": 2.11369298264954}, {"dt": "2006-01-01T00:00:00", "Total Loaded": 17.71417462952163}, {"dt": "2006-02-01T00:00:00", "Total Loaded": 6.24838762635147}, {"dt": "2006-03-01T00:00:00", "Total Loaded": 27.511983013998197}, {"dt": "2006-04-01T00:00:00", "Total Loaded": 14.337078532952564}, {"dt": "2006-05-01T00:00:00", "Total Loaded": 12.537779300369234}, {"dt": "2006-06-01T00:00:00", "Total Loaded": 6.55455940227434}, {"dt": "2006-07-01T00:00:00", "Total Loaded": 2.407204207499336}, {"dt": "2006-08-01T00:00:00", "Total Loaded": 8.68631768831829}, {"dt": "2006-09-01T00:00:00", "Total Loaded": 1.4256862272181259}, {"dt": "2006-10-01T00:00:00", "Total Loaded": 10.526171996274458}, {"dt": "2006-11-01T00:00:00", "Total Loaded": 6.873162353352158}, {"dt": "2006-12-01T00:00:00", "Total Loaded": 6.482935807546775}, {"dt": "2007-01-01T00:00:00", "Total Loaded": 4.58821885440619}, {"dt": "2007-02-01T00:00:00", "Total Loaded": 8.440067765557657}, {"dt": "2007-03-01T00:00:00", "Total Loaded": -5.643770191042153}, {"dt": "2007-04-01T00:00:00", "Total Loaded": -1.957028551359874}, {"dt": "2007-05-01T00:00:00", "Total Loaded": 0.057500811776156624}, {"dt": "2007-06-01T00:00:00", "Total Loaded": 13.95111074211568}, {"dt": "2007-07-01T00:00:00", "Total Loaded": 15.15180625551138}, {"dt": "2007-08-01T00:00:00", "Total Loaded": 3.3042365119127837}, {"dt": "2007-09-01T00:00:00", "Total Loaded": 12.01668904523192}, {"dt": "2007-10-01T00:00:00", "Total Loaded": 5.1603798600468265}, {"dt": "2007-11-01T00:00:00", "Total Loaded": 3.0353381274061064}, {"dt": "2007-12-01T00:00:00", "Total Loaded": 7.31389584452713}, {"dt": "2008-01-01T00:00:00", "Total Loaded": -6.901426926496523}, {"dt": "2008-02-01T00:00:00", "Total Loaded": 4.450466267190811}, {"dt": "2008-03-01T00:00:00", "Total Loaded": 3.2969907034372747}, {"dt": "2008-04-01T00:00:00", "Total Loaded": 4.6664262871498385}, {"dt": "2008-05-01T00:00:00", "Total Loaded": -3.954683848402285}, {"dt": "2008-06-01T00:00:00", "Total Loaded": -6.632068912398148}, {"dt": "2008-07-01T00:00:00", "Total Loaded": -8.936428722691991}, {"dt": "2008-08-01T00:00:00", "Total Loaded": -6.711803715794695}, {"dt": "2008-09-01T00:00:00", "Total Loaded": -12.34740505501245}, {"dt": "2008-10-01T00:00:00", "Total Loaded": -9.187127379960259}, {"dt": "2008-11-01T00:00:00", "Total Loaded": -16.792974911657666}, {"dt": "2008-12-01T00:00:00", "Total Loaded": -29.375422155674478}, {"dt": "2009-01-01T00:00:00", "Total Loaded": -24.565550928390266}, {"dt": "2009-02-01T00:00:00", "Total Loaded": -41.0288765572245}, {"dt": "2009-03-01T00:00:00", "Total Loaded": -22.220318306321886}, {"dt": "2009-04-01T00:00:00", "Total Loaded": -29.744219034967234}, {"dt": "2009-05-01T00:00:00", "Total Loaded": -22.648699255477155}, {"dt": "2009-06-01T00:00:00", "Total Loaded": -28.550407006169188}, {"dt": "2009-07-01T00:00:00", "Total Loaded": -22.45051842316673}, {"dt": "2009-08-01T00:00:00", "Total Loaded": -12.847625394775108}, {"dt": "2009-09-01T00:00:00", "Total Loaded": -18.22700951887016}, {"dt": "2009-10-01T00:00:00", "Total Loaded": -18.523120074733455}, {"dt": "2009-11-01T00:00:00", "Total Loaded": -9.282745108422253}, {"dt": "2009-12-01T00:00:00", "Total Loaded": 18.937265917602986}, {"dt": "2010-01-01T00:00:00", "Total Loaded": 14.53140457561104}, {"dt": "2010-02-01T00:00:00", "Total Loaded": 36.784534038334435}, {"dt": "2010-03-01T00:00:00", "Total Loaded": 10.858399863213686}, {"dt": "2010-04-01T00:00:00", "Total Loaded": 19.028161024526714}, {"dt": "2010-05-01T00:00:00", "Total Loaded": 22.298766892660502}, {"dt": "2010-06-01T00:00:00", "Total Loaded": 18.005086358884736}, {"dt": "2010-07-01T00:00:00", "Total Loaded": 27.235800677896282}, {"dt": "2010-08-01T00:00:00", "Total Loaded": 14.909221822501006}, {"dt": "2010-09-01T00:00:00", "Total Loaded": 23.534004864462197}, {"dt": "2010-10-01T00:00:00", "Total Loaded": 31.04361487676819}, {"dt": "2010-11-01T00:00:00", "Total Loaded": 21.737150862446363}, {"dt": "2010-12-01T00:00:00", "Total Loaded": 11.90963533612619}, {"dt": "2011-01-01T00:00:00", "Total Loaded": 11.743298259178282}, {"dt": "2011-02-01T00:00:00", "Total Loaded": 7.387173540141578}, {"dt": "2011-03-01T00:00:00", "Total Loaded": -4.204397488335953}, {"dt": "2011-04-01T00:00:00", "Total Loaded": 11.41357027463652}, {"dt": "2011-05-01T00:00:00", "Total Loaded": 0.5201357264041473}, {"dt": "2011-06-01T00:00:00", "Total Loaded": 5.165998968704133}, {"dt": "2011-07-01T00:00:00", "Total Loaded": -0.6601516468081603}, {"dt": "2011-08-01T00:00:00", "Total Loaded": -11.160837817503245}, {"dt": "2011-09-01T00:00:00", "Total Loaded": -7.628001143061958}, {"dt": "2011-10-01T00:00:00", "Total Loaded": -20.975473224183418}, {"dt": "2011-11-01T00:00:00", "Total Loaded": -17.824640141162483}, {"dt": "2011-12-01T00:00:00", "Total Loaded": -5.0727459556967}, {"dt": "2012-01-01T00:00:00", "Total Loaded": -6.42799419445338}, {"dt": "2012-02-01T00:00:00", "Total Loaded": -12.40420822916345}, {"dt": "2012-03-01T00:00:00", "Total Loaded": 14.864136829198827}, {"dt": "2012-04-01T00:00:00", "Total Loaded": -14.590734430508235}, {"dt": "2012-05-01T00:00:00", "Total Loaded": -6.475086425784859}, {"dt": "2012-06-01T00:00:00", "Total Loaded": 4.142307914739973}, {"dt": "2012-07-01T00:00:00", "Total Loaded": -7.542860703313348}, {"dt": "2012-08-01T00:00:00", "Total Loaded": 3.7909775403822676}, {"dt": "2012-09-01T00:00:00", "Total Loaded": -0.3733338926350416}, {"dt": "2012-10-01T00:00:00", "Total Loaded": 14.398183912341423}, {"dt": "2012-11-01T00:00:00", "Total Loaded": 21.61454078655618}, {"dt": "2012-12-01T00:00:00", "Total Loaded": 14.107104102816548}, {"dt": "2013-01-01T00:00:00", "Total Loaded": 15.720029577594975}, {"dt": "2013-02-01T00:00:00", "Total Loaded": 34.765844465633535}, {"dt": "2013-03-01T00:00:00", "Total Loaded": 2.7349256966027635}, {"dt": "2013-04-01T00:00:00", "Total Loaded": 13.804167904588095}, {"dt": "2013-05-01T00:00:00", "Total Loaded": 19.405572265315808}, {"dt": "2013-06-01T00:00:00", "Total Loaded": 2.432063741172219}, {"dt": "2013-07-01T00:00:00", "Total Loaded": 10.733086750629205}, {"dt": "2013-08-01T00:00:00", "Total Loaded": 19.526936870352827}, {"dt": "2013-09-01T00:00:00", "Total Loaded": 16.48745802675762}, {"dt": "2013-10-01T00:00:00", "Total Loaded": 7.198178453977433}, {"dt": "2013-11-01T00:00:00", "Total Loaded": 7.614802588965719}, {"dt": "2013-12-01T00:00:00", "Total Loaded": 1.9585285522104146}, {"dt": "2014-01-01T00:00:00", "Total Loaded": 0.29802911399987586}, {"dt": "2014-02-01T00:00:00", "Total Loaded": -1.078447721371223}, {"dt": "2014-03-01T00:00:00", "Total Loaded": -0.9996720236142953}, {"dt": "2014-04-01T00:00:00", "Total Loaded": 9.947513805286402}, {"dt": "2014-05-01T00:00:00", "Total Loaded": 1.4517059201760718}, {"dt": "2014-06-01T00:00:00", "Total Loaded": 7.505044219418822}, {"dt": "2014-07-01T00:00:00", "Total Loaded": -1.2815531253511092}, {"dt": "2014-08-01T00:00:00", "Total Loaded": -11.252139811385353}, {"dt": "2014-09-01T00:00:00", "Total Loaded": 3.410767253200553}, {"dt": "2014-10-01T00:00:00", "Total Loaded": -2.001464541716702}, {"dt": "2014-11-01T00:00:00", "Total Loaded": -5.493682398994181}, {"dt": "2014-12-01T00:00:00", "Total Loaded": -7.182245031666302}, {"dt": "2015-01-01T00:00:00", "Total Loaded": -22.322348479192488}, {"dt": "2015-02-01T00:00:00", "Total Loaded": -24.099141948208636}, {"dt": "2015-03-01T00:00:00", "Total Loaded": 17.900693054874584}, {"dt": "2015-04-01T00:00:00", "Total Loaded": 2.8746523145112057}, {"dt": "2015-05-01T00:00:00", "Total Loaded": 0.8779438124671968}, {"dt": "2015-06-01T00:00:00", "Total Loaded": -6.725895002718774}, {"dt": "2015-07-01T00:00:00", "Total Loaded": 16.134547032420365}, {"dt": "2015-08-01T00:00:00", "Total Loaded": 16.207356905545154}, {"dt": "2015-09-01T00:00:00", "Total Loaded": 0.17323677513079172}, {"dt": "2015-10-01T00:00:00", "Total Loaded": 1.2475430873442495}, {"dt": "2015-11-01T00:00:00", "Total Loaded": 1.7518823240805448}, {"dt": "2015-12-01T00:00:00", "Total Loaded": 3.45774143897728}, {"dt": "2016-01-01T00:00:00", "Total Loaded": 23.42012437165404}, {"dt": "2016-02-01T00:00:00", "Total Loaded": 32.90478562567225}, {"dt": "2016-03-01T00:00:00", "Total Loaded": -24.729744614561533}, {"dt": "2016-04-01T00:00:00", "Total Loaded": -20.838957008014557}, {"dt": "2016-05-01T00:00:00", "Total Loaded": 1.3085851476341448}, {"dt": "2016-06-01T00:00:00", "Total Loaded": 3.8111289761454836}, {"dt": "2016-07-01T00:00:00", "Total Loaded": -4.362508600677439}, {"dt": "2016-08-01T00:00:00", "Total Loaded": -3.250326441018292}, {"dt": "2016-09-01T00:00:00", "Total Loaded": -12.042359796575274}, {"dt": "2016-10-01T00:00:00", "Total Loaded": -2.938783368438902}, {"dt": "2016-11-01T00:00:00", "Total Loaded": -9.241233184428255}, {"dt": "2016-12-01T00:00:00", "Total Loaded": -6.535582298872356}, {"dt": "2017-01-01T00:00:00", "Total Loaded": 8.305168340991088}, {"dt": "2017-02-01T00:00:00", "Total Loaded": -11.771867838044303}, {"dt": "2017-03-01T00:00:00", "Total Loaded": 10.489629530081078}, {"dt": "2017-04-01T00:00:00", "Total Loaded": 12.314194395772526}, {"dt": "2017-05-01T00:00:00", "Total Loaded": -2.9522646531680463}, {"dt": "2017-06-01T00:00:00", "Total Loaded": 2.7188225304273894}, {"dt": "2017-07-01T00:00:00", "Total Loaded": 7.791725374663772}, {"dt": "2017-08-01T00:00:00", "Total Loaded": -1.6359862915703127}, {"dt": "2017-09-01T00:00:00", "Total Loaded": 21.894339098698822}, {"dt": "2017-10-01T00:00:00", "Total Loaded": 9.842708409586255}, {"dt": "2017-11-01T00:00:00", "Total Loaded": 13.809970192103837}, {"dt": "2017-12-01T00:00:00", "Total Loaded": 22.46661867731894}, {"dt": "2018-01-01T00:00:00", "Total Loaded": 6.695444173873022}, {"dt": "2018-02-01T00:00:00", "Total Loaded": 28.030684308791297}, {"dt": "2018-03-01T00:00:00", "Total Loaded": 10.885776916444346}, {"dt": "2018-04-01T00:00:00", "Total Loaded": 12.289754170303135}, {"dt": "2018-05-01T00:00:00", "Total Loaded": 10.559971891607}, {"dt": "2018-06-01T00:00:00", "Total Loaded": 14.46789468115124}, {"dt": "2018-07-01T00:00:00", "Total Loaded": -7.414075156758127}, {"dt": "2018-08-01T00:00:00", "Total Loaded": -2.2050506865678}, {"dt": "2018-09-01T00:00:00", "Total Loaded": -2.5978675193334855}, {"dt": "2018-10-01T00:00:00", "Total Loaded": 4.032564928852889}, {"dt": "2018-11-01T00:00:00", "Total Loaded": -2.2270150412726064}, {"dt": "2018-12-01T00:00:00", "Total Loaded": 0.6740898648508908}, {"dt": "2019-01-01T00:00:00", "Total Loaded": -0.905968429257864}, {"dt": "2019-02-01T00:00:00", "Total Loaded": -13.739662653250573}, {"dt": "2019-03-01T00:00:00", "Total Loaded": -7.743703122295809}, {"dt": "2019-04-01T00:00:00", "Total Loaded": -2.74960092475367}, {"dt": "2019-05-01T00:00:00", "Total Loaded": -18.33741171236305}, {"dt": "2019-06-01T00:00:00", "Total Loaded": -10.363341890333032}, {"dt": "2019-07-01T00:00:00", "Total Loaded": -9.08674753948272}, {"dt": "2019-08-01T00:00:00", "Total Loaded": -3.2038047884126897}, {"dt": "2019-09-01T00:00:00", "Total Loaded": -0.1520270975771676}, {"dt": "2019-10-01T00:00:00", "Total Loaded": -3.1459680402379675}, {"dt": "2019-11-01T00:00:00", "Total Loaded": -4.283015533075785}, {"dt": "2019-12-01T00:00:00", "Total Loaded": -7.771155795216956}, {"dt": "2020-01-01T00:00:00", "Total Loaded": -5.109877903365478}, {"dt": "2020-02-01T00:00:00", "Total Loaded": -8.330474921107822}, {"dt": "2020-03-01T00:00:00", "Total Loaded": 0.406103441442629}, {"dt": "2020-04-01T00:00:00", "Total Loaded": -19.390428063311806}, {"dt": "2020-05-01T00:00:00", "Total Loaded": 8.756034975495265}, {"dt": "2020-06-01T00:00:00", "Total Loaded": -10.140294338811906}, {"dt": "2020-07-01T00:00:00", "Total Loaded": 21.271329211019196}, {"dt": "2020-08-01T00:00:00", "Total Loaded": 9.651260175765763}, {"dt": "2020-09-01T00:00:00", "Total Loaded": 8.374012306173583}, {"dt": "2020-10-01T00:00:00", "Total Loaded": 10.32415398434383}, {"dt": "2020-11-01T00:00:00", "Total Loaded": 19.896784590591675}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doYoyChart</span><span class="p">(</span><span class="n">df_lb_raw</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Long Beach&#39;</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;Total&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[10]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-34d087528bdd4f26976d62146017d2f5"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-34d087528bdd4f26976d62146017d2f5") {
      outputDiv = document.getElementById("altair-viz-34d087528bdd4f26976d62146017d2f5");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-49fecc726ef8ee6b10863b62b13dce56"}, "mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['nolarge'] < 0"}, "value": "royalblue"}, "tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "nolarge", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Year-over-Year Volume Growth [%]"}, "field": "nolarge"}}, "height": 400, "title": "Port of Long Beach Total Container Volume Growth", "transform": [{"calculate": "datum['Total'] > 400 ? NaN : datum['Total']", "as": "nolarge"}], "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-49fecc726ef8ee6b10863b62b13dce56": [{"dt": "1995-02-01T00:00:00", "Total": null}, {"dt": "1995-03-01T00:00:00", "Total": null}, {"dt": "1995-04-01T00:00:00", "Total": null}, {"dt": "1995-05-01T00:00:00", "Total": null}, {"dt": "1995-06-01T00:00:00", "Total": null}, {"dt": "1995-07-01T00:00:00", "Total": null}, {"dt": "1995-08-01T00:00:00", "Total": null}, {"dt": "1995-09-01T00:00:00", "Total": null}, {"dt": "1995-10-01T00:00:00", "Total": null}, {"dt": "1995-11-01T00:00:00", "Total": null}, {"dt": "1995-12-01T00:00:00", "Total": null}, {"dt": "1996-01-01T00:00:00", "Total": null}, {"dt": "1996-02-01T00:00:00", "Total": 4.998565492221263}, {"dt": "1996-03-01T00:00:00", "Total": 11.510477722124811}, {"dt": "1996-04-01T00:00:00", "Total": 13.752638467199274}, {"dt": "1996-05-01T00:00:00", "Total": -0.14768529304090006}, {"dt": "1996-06-01T00:00:00", "Total": 15.206984690247616}, {"dt": "1996-07-01T00:00:00", "Total": 4.262731757234417}, {"dt": "1996-08-01T00:00:00", "Total": 1.7937864871618192}, {"dt": "1996-09-01T00:00:00", "Total": 14.467133836248669}, {"dt": "1996-10-01T00:00:00", "Total": 4.887936462349085}, {"dt": "1996-11-01T00:00:00", "Total": 3.7515580072316146}, {"dt": "1996-12-01T00:00:00", "Total": 16.041237289730013}, {"dt": "1997-01-01T00:00:00", "Total": 7.005913940755293}, {"dt": "1997-02-01T00:00:00", "Total": 10.29950992490216}, {"dt": "1997-03-01T00:00:00", "Total": 18.99304952215466}, {"dt": "1997-04-01T00:00:00", "Total": 7.280545440458663}, {"dt": "1997-05-01T00:00:00", "Total": 15.830281517033917}, {"dt": "1997-06-01T00:00:00", "Total": 18.033043106997447}, {"dt": "1997-07-01T00:00:00", "Total": 18.000951499735905}, {"dt": "1997-08-01T00:00:00", "Total": 10.650421018179657}, {"dt": "1997-09-01T00:00:00", "Total": 19.796489736207757}, {"dt": "1997-10-01T00:00:00", "Total": 10.564413645905745}, {"dt": "1997-11-01T00:00:00", "Total": 23.302368180034016}, {"dt": "1997-12-01T00:00:00", "Total": 10.911228125771522}, {"dt": "1998-01-01T00:00:00", "Total": 18.191098993460564}, {"dt": "1998-02-01T00:00:00", "Total": 10.349456995133345}, {"dt": "1998-03-01T00:00:00", "Total": 21.689386029599667}, {"dt": "1998-04-01T00:00:00", "Total": 21.662201102067648}, {"dt": "1998-05-01T00:00:00", "Total": 19.28011596413168}, {"dt": "1998-06-01T00:00:00", "Total": 14.664970012498824}, {"dt": "1998-07-01T00:00:00", "Total": 20.22666666666666}, {"dt": "1998-08-01T00:00:00", "Total": 25.245371553033856}, {"dt": "1998-09-01T00:00:00", "Total": 12.114175715102116}, {"dt": "1998-10-01T00:00:00", "Total": 10.320806715858733}, {"dt": "1998-11-01T00:00:00", "Total": 18.376356948088702}, {"dt": "1998-12-01T00:00:00", "Total": 11.846162024239849}, {"dt": "1999-01-01T00:00:00", "Total": 10.766839881501621}, {"dt": "1999-02-01T00:00:00", "Total": 17.363203174787103}, {"dt": "1999-03-01T00:00:00", "Total": 4.391991216017566}, {"dt": "1999-04-01T00:00:00", "Total": 0.8197694435540415}, {"dt": "1999-05-01T00:00:00", "Total": 18.951869464656724}, {"dt": "1999-06-01T00:00:00", "Total": 5.3343886253788275}, {"dt": "1999-07-01T00:00:00", "Total": -8.120375798095658}, {"dt": "1999-08-01T00:00:00", "Total": 7.1628893093407475}, {"dt": "1999-09-01T00:00:00", "Total": 8.038718054653838}, {"dt": "1999-10-01T00:00:00", "Total": 14.090173889518853}, {"dt": "1999-11-01T00:00:00", "Total": 7.920878141798937}, {"dt": "1999-12-01T00:00:00", "Total": 8.493144174330446}, {"dt": "2000-01-01T00:00:00", "Total": 6.2105401613469}, {"dt": "2000-02-01T00:00:00", "Total": 3.420551693924323}, {"dt": "2000-03-01T00:00:00", "Total": 0.8017840413364175}, {"dt": "2000-04-01T00:00:00", "Total": 7.883457075063438}, {"dt": "2000-05-01T00:00:00", "Total": 3.1193990878831457}, {"dt": "2000-06-01T00:00:00", "Total": 0.24600574904740657}, {"dt": "2000-07-01T00:00:00", "Total": 17.823261802328428}, {"dt": "2000-08-01T00:00:00", "Total": 8.874419303539893}, {"dt": "2000-09-01T00:00:00", "Total": -3.7538178838370073}, {"dt": "2000-10-01T00:00:00", "Total": 9.210433378739724}, {"dt": "2000-11-01T00:00:00", "Total": 3.42209055602678}, {"dt": "2000-12-01T00:00:00", "Total": -3.79202716022341}, {"dt": "2001-01-01T00:00:00", "Total": 4.508422700748649}, {"dt": "2001-02-01T00:00:00", "Total": -7.0115984917187735}, {"dt": "2001-03-01T00:00:00", "Total": 2.7126501009225645}, {"dt": "2001-04-01T00:00:00", "Total": 0.01719127338217774}, {"dt": "2001-05-01T00:00:00", "Total": -9.636848160640355}, {"dt": "2001-06-01T00:00:00", "Total": -3.264113951906533}, {"dt": "2001-07-01T00:00:00", "Total": -7.54843540766722}, {"dt": "2001-08-01T00:00:00", "Total": -6.6428057165070715}, {"dt": "2001-09-01T00:00:00", "Total": 0.20279004006780177}, {"dt": "2001-10-01T00:00:00", "Total": 0.44718339138709595}, {"dt": "2001-11-01T00:00:00", "Total": -9.445676167019956}, {"dt": "2001-12-01T00:00:00", "Total": 2.3202140072284383}, {"dt": "2002-01-01T00:00:00", "Total": -2.761593869645318}, {"dt": "2002-02-01T00:00:00", "Total": 16.448195770454777}, {"dt": "2002-03-01T00:00:00", "Total": -4.6278023420737835}, {"dt": "2002-04-01T00:00:00", "Total": 11.915051510389386}, {"dt": "2002-05-01T00:00:00", "Total": 16.448750176836114}, {"dt": "2002-06-01T00:00:00", "Total": 15.529507138957355}, {"dt": "2002-07-01T00:00:00", "Total": 19.22924713480656}, {"dt": "2002-08-01T00:00:00", "Total": 5.26632205035209}, {"dt": "2002-09-01T00:00:00", "Total": -12.36936085627699}, {"dt": "2002-10-01T00:00:00", "Total": -30.710468463993667}, {"dt": "2002-11-01T00:00:00", "Total": -9.926764045849733}, {"dt": "2002-12-01T00:00:00", "Total": 0.6727985247939827}, {"dt": "2003-01-01T00:00:00", "Total": -2.9882923007732543}, {"dt": "2003-02-01T00:00:00", "Total": -11.123661438689968}, {"dt": "2003-03-01T00:00:00", "Total": 3.7618667892877378}, {"dt": "2003-04-01T00:00:00", "Total": -2.294978059483177}, {"dt": "2003-05-01T00:00:00", "Total": -9.262603584303076}, {"dt": "2003-06-01T00:00:00", "Total": -7.747680660274902}, {"dt": "2003-07-01T00:00:00", "Total": -4.697986577181212}, {"dt": "2003-08-01T00:00:00", "Total": -8.547734741454372}, {"dt": "2003-09-01T00:00:00", "Total": 11.597848027995617}, {"dt": "2003-10-01T00:00:00", "Total": 44.971093661845615}, {"dt": "2003-11-01T00:00:00", "Total": 26.77734380827632}, {"dt": "2003-12-01T00:00:00", "Total": 12.172272227471392}, {"dt": "2004-01-01T00:00:00", "Total": 12.744282868645062}, {"dt": "2004-02-01T00:00:00", "Total": -2.4354785713842864}, {"dt": "2004-03-01T00:00:00", "Total": 25.766551109016866}, {"dt": "2004-04-01T00:00:00", "Total": 10.049003707714332}, {"dt": "2004-05-01T00:00:00", "Total": 20.506145947588216}, {"dt": "2004-06-01T00:00:00", "Total": 27.833776609506454}, {"dt": "2004-07-01T00:00:00", "Total": 22.981243876048918}, {"dt": "2004-08-01T00:00:00", "Total": 33.32002446783733}, {"dt": "2004-09-01T00:00:00", "Total": 30.163686675741364}, {"dt": "2004-10-01T00:00:00", "Total": 27.663544127612028}, {"dt": "2004-11-01T00:00:00", "Total": 37.12016907786195}, {"dt": "2004-12-01T00:00:00", "Total": 35.790759591252666}, {"dt": "2005-01-01T00:00:00", "Total": 35.18739587644182}, {"dt": "2005-02-01T00:00:00", "Total": 58.1974843446683}, {"dt": "2005-03-01T00:00:00", "Total": 3.9297677509712248}, {"dt": "2005-04-01T00:00:00", "Total": 22.092182260503645}, {"dt": "2005-05-01T00:00:00", "Total": 20.69465780966564}, {"dt": "2005-06-01T00:00:00", "Total": 16.698306813628072}, {"dt": "2005-07-01T00:00:00", "Total": 8.238634754551487}, {"dt": "2005-08-01T00:00:00", "Total": 18.133283676070832}, {"dt": "2005-09-01T00:00:00", "Total": 23.442278751395705}, {"dt": "2005-10-01T00:00:00", "Total": 7.7600351465485495}, {"dt": "2005-11-01T00:00:00", "Total": 4.811075600654968}, {"dt": "2005-12-01T00:00:00", "Total": -1.0097236001806564}, {"dt": "2006-01-01T00:00:00", "Total": 13.708479445522649}, {"dt": "2006-02-01T00:00:00", "Total": 3.52241803484461}, {"dt": "2006-03-01T00:00:00", "Total": 20.422987045592556}, {"dt": "2006-04-01T00:00:00", "Total": 15.043797504554313}, {"dt": "2006-05-01T00:00:00", "Total": 14.01698749836251}, {"dt": "2006-06-01T00:00:00", "Total": 7.006194892855411}, {"dt": "2006-07-01T00:00:00", "Total": 1.678876678876673}, {"dt": "2006-08-01T00:00:00", "Total": 9.701134781047216}, {"dt": "2006-09-01T00:00:00", "Total": 0.7324638806821326}, {"dt": "2006-10-01T00:00:00", "Total": 8.284687323193673}, {"dt": "2006-11-01T00:00:00", "Total": 7.263315450573482}, {"dt": "2006-12-01T00:00:00", "Total": 5.396942312907216}, {"dt": "2007-01-01T00:00:00", "Total": 2.0733275232761805}, {"dt": "2007-02-01T00:00:00", "Total": 4.9935592010305285}, {"dt": "2007-03-01T00:00:00", "Total": -3.57933263719854}, {"dt": "2007-04-01T00:00:00", "Total": -6.50140755949844}, {"dt": "2007-05-01T00:00:00", "Total": -5.870516375650947}, {"dt": "2007-06-01T00:00:00", "Total": 7.328501366284068}, {"dt": "2007-07-01T00:00:00", "Total": 11.065402924904566}, {"dt": "2007-08-01T00:00:00", "Total": -2.541114985675308}, {"dt": "2007-09-01T00:00:00", "Total": 6.404343957354253}, {"dt": "2007-10-01T00:00:00", "Total": -0.9455592676487545}, {"dt": "2007-11-01T00:00:00", "Total": -6.624610494399208}, {"dt": "2007-12-01T00:00:00", "Total": 0.022252084829110785}, {"dt": "2008-01-01T00:00:00", "Total": -11.856411747699369}, {"dt": "2008-02-01T00:00:00", "Total": -2.1258157737193417}, {"dt": "2008-03-01T00:00:00", "Total": -7.945378640453738}, {"dt": "2008-04-01T00:00:00", "Total": -3.9103300042297118}, {"dt": "2008-05-01T00:00:00", "Total": -12.741317199334933}, {"dt": "2008-06-01T00:00:00", "Total": -12.464758637248408}, {"dt": "2008-07-01T00:00:00", "Total": -12.931939922277069}, {"dt": "2008-08-01T00:00:00", "Total": -13.018312702157154}, {"dt": "2008-09-01T00:00:00", "Total": -15.176675447058518}, {"dt": "2008-10-01T00:00:00", "Total": -7.66150614437775}, {"dt": "2008-11-01T00:00:00", "Total": -8.85324866008509}, {"dt": "2008-12-01T00:00:00", "Total": -25.27291845903833}, {"dt": "2009-01-01T00:00:00", "Total": -23.410160700653314}, {"dt": "2009-02-01T00:00:00", "Total": -39.9579761336155}, {"dt": "2009-03-01T00:00:00", "Total": -24.8904869166496}, {"dt": "2009-04-01T00:00:00", "Total": -26.569167332932075}, {"dt": "2009-05-01T00:00:00", "Total": -20.690685070820834}, {"dt": "2009-06-01T00:00:00", "Total": -28.693319532496652}, {"dt": "2009-07-01T00:00:00", "Total": -23.184194513777644}, {"dt": "2009-08-01T00:00:00", "Total": -13.790506346809817}, {"dt": "2009-09-01T00:00:00", "Total": -20.63182520271719}, {"dt": "2009-10-01T00:00:00", "Total": -23.98750648953526}, {"dt": "2009-11-01T00:00:00", "Total": -19.608258185803795}, {"dt": "2009-12-01T00:00:00", "Total": 8.67341480092849}, {"dt": "2010-01-01T00:00:00", "Total": 7.390525801725545}, {"dt": "2010-02-01T00:00:00", "Total": 29.89919570371209}, {"dt": "2010-03-01T00:00:00", "Total": 13.001595697763623}, {"dt": "2010-04-01T00:00:00", "Total": 18.681934402564202}, {"dt": "2010-05-01T00:00:00", "Total": 25.06465183349025}, {"dt": "2010-06-01T00:00:00", "Total": 25.826484769455192}, {"dt": "2010-07-01T00:00:00", "Total": 35.76520797297078}, {"dt": "2010-08-01T00:00:00", "Total": 23.85033415156719}, {"dt": "2010-09-01T00:00:00", "Total": 30.526110217910627}, {"dt": "2010-10-01T00:00:00", "Total": 35.63142934189179}, {"dt": "2010-11-01T00:00:00", "Total": 24.58010804394055}, {"dt": "2010-12-01T00:00:00", "Total": 12.001189974252902}, {"dt": "2011-01-01T00:00:00", "Total": 10.76363381956833}, {"dt": "2011-02-01T00:00:00", "Total": 10.94124424520857}, {"dt": "2011-03-01T00:00:00", "Total": -2.49282122363248}, {"dt": "2011-04-01T00:00:00", "Total": 9.489773409007984}, {"dt": "2011-05-01T00:00:00", "Total": 2.280476067960713}, {"dt": "2011-06-01T00:00:00", "Total": 6.5696981349740335}, {"dt": "2011-07-01T00:00:00", "Total": -2.543882180237156}, {"dt": "2011-08-01T00:00:00", "Total": -12.286866491435378}, {"dt": "2011-09-01T00:00:00", "Total": -8.283894987734651}, {"dt": "2011-10-01T00:00:00", "Total": -20.52667689013251}, {"dt": "2011-11-01T00:00:00", "Total": -17.629368788139853}, {"dt": "2011-12-01T00:00:00", "Total": -2.5543128273626925}, {"dt": "2012-01-01T00:00:00", "Total": -3.9026444332154298}, {"dt": "2012-02-01T00:00:00", "Total": -15.217438734901911}, {"dt": "2012-03-01T00:00:00", "Total": 11.972539934745964}, {"dt": "2012-04-01T00:00:00", "Total": -13.025852492044665}, {"dt": "2012-05-01T00:00:00", "Total": -7.227570940651895}, {"dt": "2012-06-01T00:00:00", "Total": 0.19665541460915925}, {"dt": "2012-07-01T00:00:00", "Total": -8.803929303260805}, {"dt": "2012-08-01T00:00:00", "Total": 1.4024245748970543}, {"dt": "2012-09-01T00:00:00", "Total": -2.874756959264002}, {"dt": "2012-10-01T00:00:00", "Total": 8.74534772846114}, {"dt": "2012-11-01T00:00:00", "Total": 20.794944779192882}, {"dt": "2012-12-01T00:00:00", "Total": 9.83951178952982}, {"dt": "2013-01-01T00:00:00", "Total": 17.49228787267978}, {"dt": "2013-02-01T00:00:00", "Total": 36.63974018821943}, {"dt": "2013-03-01T00:00:00", "Total": 5.4396759028575215}, {"dt": "2013-04-01T00:00:00", "Total": 12.45975956407186}, {"dt": "2013-05-01T00:00:00", "Total": 17.211764800398477}, {"dt": "2013-06-01T00:00:00", "Total": 1.8217045190588532}, {"dt": "2013-07-01T00:00:00", "Total": 7.594461861179047}, {"dt": "2013-08-01T00:00:00", "Total": 15.980826026552819}, {"dt": "2013-09-01T00:00:00", "Total": 14.666223975625957}, {"dt": "2013-10-01T00:00:00", "Total": 8.709761970760654}, {"dt": "2013-11-01T00:00:00", "Total": 2.5356742326462234}, {"dt": "2013-12-01T00:00:00", "Total": 3.9853959865743027}, {"dt": "2014-01-01T00:00:00", "Total": -1.376003938366066}, {"dt": "2014-02-01T00:00:00", "Total": -2.5979015645040127}, {"dt": "2014-03-01T00:00:00", "Total": -1.949870453812319}, {"dt": "2014-04-01T00:00:00", "Total": 9.698265904855784}, {"dt": "2014-05-01T00:00:00", "Total": 2.7281232650431475}, {"dt": "2014-06-01T00:00:00", "Total": 7.964971103990259}, {"dt": "2014-07-01T00:00:00", "Total": 3.7166957802499567}, {"dt": "2014-08-01T00:00:00", "Total": -9.076586724883073}, {"dt": "2014-09-01T00:00:00", "Total": 7.265539571531243}, {"dt": "2014-10-01T00:00:00", "Total": 1.1287038032825603}, {"dt": "2014-11-01T00:00:00", "Total": 2.0918224926658846}, {"dt": "2014-12-01T00:00:00", "Total": -2.610727573341942}, {"dt": "2015-01-01T00:00:00", "Total": -18.79315691153448}, {"dt": "2015-02-01T00:00:00", "Total": -20.12073329427484}, {"dt": "2015-03-01T00:00:00", "Total": 32.0352298468805}, {"dt": "2015-04-01T00:00:00", "Total": 7.899895234301368}, {"dt": "2015-05-01T00:00:00", "Total": 5.961712000987474}, {"dt": "2015-06-01T00:00:00", "Total": -4.405289951450908}, {"dt": "2015-07-01T00:00:00", "Total": 18.38301375501663}, {"dt": "2015-08-01T00:00:00", "Total": 22.78361075097324}, {"dt": "2015-09-01T00:00:00", "Total": 4.105142980543719}, {"dt": "2015-10-01T00:00:00", "Total": 6.342097634856403}, {"dt": "2015-11-01T00:00:00", "Total": 6.5664799127794105}, {"dt": "2015-12-01T00:00:00", "Total": 5.149699332025248}, {"dt": "2016-01-01T00:00:00", "Total": 24.84295327015762}, {"dt": "2016-02-01T00:00:00", "Total": 35.89759727339186}, {"dt": "2016-03-01T00:00:00", "Total": -26.223328952964998}, {"dt": "2016-04-01T00:00:00", "Total": -22.12178382070715}, {"dt": "2016-05-01T00:00:00", "Total": 0.836835891381349}, {"dt": "2016-06-01T00:00:00", "Total": 3.3785624574852458}, {"dt": "2016-07-01T00:00:00", "Total": -7.700610218995019}, {"dt": "2016-08-01T00:00:00", "Total": -8.899711789350418}, {"dt": "2016-09-01T00:00:00", "Total": -16.597928080729197}, {"dt": "2016-10-01T00:00:00", "Total": -6.157578260084129}, {"dt": "2016-11-01T00:00:00", "Total": -13.779431627290029}, {"dt": "2016-12-01T00:00:00", "Total": -7.966997961264022}, {"dt": "2017-01-01T00:00:00", "Total": 8.67251784821741}, {"dt": "2017-02-01T00:00:00", "Total": -11.23951750229778}, {"dt": "2017-03-01T00:00:00", "Total": 8.718202450226409}, {"dt": "2017-04-01T00:00:00", "Total": 16.53405507453398}, {"dt": "2017-05-01T00:00:00", "Total": 1.2054963891308557}, {"dt": "2017-06-01T00:00:00", "Total": 9.18024526841461}, {"dt": "2017-07-01T00:00:00", "Total": 13.06265509950697}, {"dt": "2017-08-01T00:00:00", "Total": 8.009934027945697}, {"dt": "2017-09-01T00:00:00", "Total": 28.31270436939013}, {"dt": "2017-10-01T00:00:00", "Total": 15.023856667491685}, {"dt": "2017-11-01T00:00:00", "Total": 14.664014014388705}, {"dt": "2017-12-01T00:00:00", "Total": 26.959770753594725}, {"dt": "2018-01-01T00:00:00", "Total": 12.895558351024295}, {"dt": "2018-02-01T00:00:00", "Total": 32.8065549294418}, {"dt": "2018-03-01T00:00:00", "Total": 13.826372921869012}, {"dt": "2018-04-01T00:00:00", "Total": 10.82858136175795}, {"dt": "2018-05-01T00:00:00", "Total": 6.037285897625755}, {"dt": "2018-06-01T00:00:00", "Total": 14.188275264259698}, {"dt": "2018-07-01T00:00:00", "Total": -4.422250358178125}, {"dt": "2018-08-01T00:00:00", "Total": -1.8533309261599573}, {"dt": "2018-09-01T00:00:00", "Total": -0.0590063838065924}, {"dt": "2018-10-01T00:00:00", "Total": 5.407804332818311}, {"dt": "2018-11-01T00:00:00", "Total": 1.4975704266157797}, {"dt": "2018-12-01T00:00:00", "Total": 6.417962489184537}, {"dt": "2019-01-01T00:00:00", "Total": -0.0826961372999091}, {"dt": "2019-02-01T00:00:00", "Total": -9.848124256751756}, {"dt": "2019-03-01T00:00:00", "Total": -3.9003368923161474}, {"dt": "2019-04-01T00:00:00", "Total": 1.5657162630429156}, {"dt": "2019-05-01T00:00:00", "Total": -16.554921468024965}, {"dt": "2019-06-01T00:00:00", "Total": -9.973690123094059}, {"dt": "2019-07-01T00:00:00", "Total": -9.68497715183787}, {"dt": "2019-08-01T00:00:00", "Total": -2.2883025798220324}, {"dt": "2019-09-01T00:00:00", "Total": 0.8200169707859972}, {"dt": "2019-10-01T00:00:00", "Total": -2.4075428688078437}, {"dt": "2019-11-01T00:00:00", "Total": -3.5137995027611835}, {"dt": "2019-12-01T00:00:00", "Total": -10.29937423059758}, {"dt": "2020-01-01T00:00:00", "Total": -4.633751517604212}, {"dt": "2020-02-01T00:00:00", "Total": -9.753158223785107}, {"dt": "2020-03-01T00:00:00", "Total": -6.359563041201399}, {"dt": "2020-04-01T00:00:00", "Total": -17.25652023014638}, {"dt": "2020-05-01T00:00:00", "Total": 9.515117916963023}, {"dt": "2020-06-01T00:00:00", "Total": -11.073766037379206}, {"dt": "2020-07-01T00:00:00", "Total": 21.116759759465143}, {"dt": "2020-08-01T00:00:00", "Total": 9.279766503562549}, {"dt": "2020-09-01T00:00:00", "Total": 12.536158595667324}, {"dt": "2020-10-01T00:00:00", "Total": 17.166430620619533}, {"dt": "2020-11-01T00:00:00", "Total": 30.590649083975574}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doYoyChart</span><span class="p">(</span><span class="n">df_lb_raw</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Long Beach&#39;</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;Total Empties&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[11]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-5c2b925e78074ad3ba4be5919eab7318"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-5c2b925e78074ad3ba4be5919eab7318") {
      outputDiv = document.getElementById("altair-viz-5c2b925e78074ad3ba4be5919eab7318");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-4beb1264a5ad24b571c0cd85e37087a2"}, "mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['nolarge'] < 0"}, "value": "royalblue"}, "tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "nolarge", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Year-over-Year Volume Growth [%]"}, "field": "nolarge"}}, "height": 400, "title": "Port of Long Beach Total Empties Container Volume Growth", "transform": [{"calculate": "datum['Total Empties'] > 400 ? NaN : datum['Total Empties']", "as": "nolarge"}], "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-4beb1264a5ad24b571c0cd85e37087a2": [{"dt": "1995-02-01T00:00:00", "Total Empties": null}, {"dt": "1995-03-01T00:00:00", "Total Empties": null}, {"dt": "1995-04-01T00:00:00", "Total Empties": null}, {"dt": "1995-05-01T00:00:00", "Total Empties": null}, {"dt": "1995-06-01T00:00:00", "Total Empties": null}, {"dt": "1995-07-01T00:00:00", "Total Empties": null}, {"dt": "1995-08-01T00:00:00", "Total Empties": null}, {"dt": "1995-09-01T00:00:00", "Total Empties": null}, {"dt": "1995-10-01T00:00:00", "Total Empties": null}, {"dt": "1995-11-01T00:00:00", "Total Empties": null}, {"dt": "1995-12-01T00:00:00", "Total Empties": null}, {"dt": "1996-01-01T00:00:00", "Total Empties": null}, {"dt": "1996-02-01T00:00:00", "Total Empties": -33.559341348071335}, {"dt": "1996-03-01T00:00:00", "Total Empties": -3.0653638576316644}, {"dt": "1996-04-01T00:00:00", "Total Empties": 0.8160086679758871}, {"dt": "1996-05-01T00:00:00", "Total Empties": -7.571484969826859}, {"dt": "1996-06-01T00:00:00", "Total Empties": 31.363666207077667}, {"dt": "1996-07-01T00:00:00", "Total Empties": -9.52217761676295}, {"dt": "1996-08-01T00:00:00", "Total Empties": -1.0312580066615396}, {"dt": "1996-09-01T00:00:00", "Total Empties": 3.3546497857588786}, {"dt": "1996-10-01T00:00:00", "Total Empties": 0.9276522213632843}, {"dt": "1996-11-01T00:00:00", "Total Empties": -9.29545454545454}, {"dt": "1996-12-01T00:00:00", "Total Empties": 2.1935169388252573}, {"dt": "1997-01-01T00:00:00", "Total Empties": 33.18778694577327}, {"dt": "1997-02-01T00:00:00", "Total Empties": 53.8633050338736}, {"dt": "1997-03-01T00:00:00", "Total Empties": 54.024745269286754}, {"dt": "1997-04-01T00:00:00", "Total Empties": 27.392107472712013}, {"dt": "1997-05-01T00:00:00", "Total Empties": 31.046160417365833}, {"dt": "1997-06-01T00:00:00", "Total Empties": 8.96641343462614}, {"dt": "1997-07-01T00:00:00", "Total Empties": 32.00584383961906}, {"dt": "1997-08-01T00:00:00", "Total Empties": 7.382477941017851}, {"dt": "1997-09-01T00:00:00", "Total Empties": 20.403741588716894}, {"dt": "1997-10-01T00:00:00", "Total Empties": 30.344672223473744}, {"dt": "1997-11-01T00:00:00", "Total Empties": 70.55875720370834}, {"dt": "1997-12-01T00:00:00", "Total Empties": 69.6319262262501}, {"dt": "1998-01-01T00:00:00", "Total Empties": 71.3817375373638}, {"dt": "1998-02-01T00:00:00", "Total Empties": 86.03277226619106}, {"dt": "1998-03-01T00:00:00", "Total Empties": 82.16698955724613}, {"dt": "1998-04-01T00:00:00", "Total Empties": 104.0705491550447}, {"dt": "1998-05-01T00:00:00", "Total Empties": 94.62668498125859}, {"dt": "1998-06-01T00:00:00", "Total Empties": 105.0316484726172}, {"dt": "1998-07-01T00:00:00", "Total Empties": 102.13559599934415}, {"dt": "1998-08-01T00:00:00", "Total Empties": 100.47413360120542}, {"dt": "1998-09-01T00:00:00", "Total Empties": 73.05476252270957}, {"dt": "1998-10-01T00:00:00", "Total Empties": 54.80815762184583}, {"dt": "1998-11-01T00:00:00", "Total Empties": 33.96356691640958}, {"dt": "1998-12-01T00:00:00", "Total Empties": 29.017090011559965}, {"dt": "1999-01-01T00:00:00", "Total Empties": 1.6076853831439086}, {"dt": "1999-02-01T00:00:00", "Total Empties": 7.32668224579065}, {"dt": "1999-03-01T00:00:00", "Total Empties": 13.30410873625234}, {"dt": "1999-04-01T00:00:00", "Total Empties": 4.734775082034992}, {"dt": "1999-05-01T00:00:00", "Total Empties": 21.14404650828967}, {"dt": "1999-06-01T00:00:00", "Total Empties": 12.5288024876401}, {"dt": "1999-07-01T00:00:00", "Total Empties": -13.592764585403438}, {"dt": "1999-08-01T00:00:00", "Total Empties": 4.238069468662942}, {"dt": "1999-09-01T00:00:00", "Total Empties": 1.3047781877080888}, {"dt": "1999-10-01T00:00:00", "Total Empties": 20.382485598178015}, {"dt": "1999-11-01T00:00:00", "Total Empties": 5.995240654026257}, {"dt": "1999-12-01T00:00:00", "Total Empties": 12.570681325600264}, {"dt": "2000-01-01T00:00:00", "Total Empties": 11.269535846288026}, {"dt": "2000-02-01T00:00:00", "Total Empties": 6.021187209513301}, {"dt": "2000-03-01T00:00:00", "Total Empties": -14.832535885167463}, {"dt": "2000-04-01T00:00:00", "Total Empties": -7.825239604790857}, {"dt": "2000-05-01T00:00:00", "Total Empties": -10.158579694689651}, {"dt": "2000-06-01T00:00:00", "Total Empties": -11.944971819925843}, {"dt": "2000-07-01T00:00:00", "Total Empties": 15.278103731518433}, {"dt": "2000-08-01T00:00:00", "Total Empties": 7.446041436331297}, {"dt": "2000-09-01T00:00:00", "Total Empties": -3.438542468565564}, {"dt": "2000-10-01T00:00:00", "Total Empties": 0.9746914095466019}, {"dt": "2000-11-01T00:00:00", "Total Empties": 10.780499917232245}, {"dt": "2000-12-01T00:00:00", "Total Empties": -1.6811693969087105}, {"dt": "2001-01-01T00:00:00", "Total Empties": 2.7892510574769824}, {"dt": "2001-02-01T00:00:00", "Total Empties": 6.691591737865488}, {"dt": "2001-03-01T00:00:00", "Total Empties": 7.9579054889522105}, {"dt": "2001-04-01T00:00:00", "Total Empties": 16.864051815274262}, {"dt": "2001-05-01T00:00:00", "Total Empties": -0.7056030598113994}, {"dt": "2001-06-01T00:00:00", "Total Empties": -8.25299708757592}, {"dt": "2001-07-01T00:00:00", "Total Empties": -5.438721498371335}, {"dt": "2001-08-01T00:00:00", "Total Empties": -9.566034359341447}, {"dt": "2001-09-01T00:00:00", "Total Empties": -6.528138351151902}, {"dt": "2001-10-01T00:00:00", "Total Empties": 5.095518001469501}, {"dt": "2001-11-01T00:00:00", "Total Empties": -4.4183570548021915}, {"dt": "2001-12-01T00:00:00", "Total Empties": -7.777218624190441}, {"dt": "2002-01-01T00:00:00", "Total Empties": 12.770206482534906}, {"dt": "2002-02-01T00:00:00", "Total Empties": -4.528404323577318}, {"dt": "2002-03-01T00:00:00", "Total Empties": 4.434484905073144}, {"dt": "2002-04-01T00:00:00", "Total Empties": 7.967570910006994}, {"dt": "2002-05-01T00:00:00", "Total Empties": 24.622553794385894}, {"dt": "2002-06-01T00:00:00", "Total Empties": 31.714549369424795}, {"dt": "2002-07-01T00:00:00", "Total Empties": 41.87648686179317}, {"dt": "2002-08-01T00:00:00", "Total Empties": 20.272289228151074}, {"dt": "2002-09-01T00:00:00", "Total Empties": 6.659303889514612}, {"dt": "2002-10-01T00:00:00", "Total Empties": -15.288216170867274}, {"dt": "2002-11-01T00:00:00", "Total Empties": -11.339098148419557}, {"dt": "2002-12-01T00:00:00", "Total Empties": 32.216277773164556}, {"dt": "2003-01-01T00:00:00", "Total Empties": 16.486535798997572}, {"dt": "2003-02-01T00:00:00", "Total Empties": 24.199343448703694}, {"dt": "2003-03-01T00:00:00", "Total Empties": 11.97801804808849}, {"dt": "2003-04-01T00:00:00", "Total Empties": 32.58985862313999}, {"dt": "2003-05-01T00:00:00", "Total Empties": 2.3323770528204335}, {"dt": "2003-06-01T00:00:00", "Total Empties": 3.857040102381104}, {"dt": "2003-07-01T00:00:00", "Total Empties": -10.017526688366374}, {"dt": "2003-08-01T00:00:00", "Total Empties": -10.767699369848138}, {"dt": "2003-09-01T00:00:00", "Total Empties": 10.28183020473441}, {"dt": "2003-10-01T00:00:00", "Total Empties": 25.183114283945773}, {"dt": "2003-11-01T00:00:00", "Total Empties": 38.92990963191536}, {"dt": "2003-12-01T00:00:00", "Total Empties": 0.4746225001570181}, {"dt": "2004-01-01T00:00:00", "Total Empties": -5.717102474800528}, {"dt": "2004-02-01T00:00:00", "Total Empties": -12.80671814189681}, {"dt": "2004-03-01T00:00:00", "Total Empties": 25.698621387129393}, {"dt": "2004-04-01T00:00:00", "Total Empties": 7.339119305683317}, {"dt": "2004-05-01T00:00:00", "Total Empties": 22.047476457058536}, {"dt": "2004-06-01T00:00:00", "Total Empties": 35.930922827846736}, {"dt": "2004-07-01T00:00:00", "Total Empties": 39.46929070120409}, {"dt": "2004-08-01T00:00:00", "Total Empties": 53.63928864468188}, {"dt": "2004-09-01T00:00:00", "Total Empties": 51.15180812494189}, {"dt": "2004-10-01T00:00:00", "Total Empties": 51.016523136511594}, {"dt": "2004-11-01T00:00:00", "Total Empties": 48.701860151509145}, {"dt": "2004-12-01T00:00:00", "Total Empties": 68.29514403586163}, {"dt": "2005-01-01T00:00:00", "Total Empties": 71.24373344799618}, {"dt": "2005-02-01T00:00:00", "Total Empties": 87.14778436824957}, {"dt": "2005-03-01T00:00:00", "Total Empties": 28.229515138683038}, {"dt": "2005-04-01T00:00:00", "Total Empties": 19.213056114464557}, {"dt": "2005-05-01T00:00:00", "Total Empties": 21.4796219518266}, {"dt": "2005-06-01T00:00:00", "Total Empties": 19.74683711820444}, {"dt": "2005-07-01T00:00:00", "Total Empties": 6.928448354040073}, {"dt": "2005-08-01T00:00:00", "Total Empties": 19.103395719197614}, {"dt": "2005-09-01T00:00:00", "Total Empties": 22.88276320159415}, {"dt": "2005-10-01T00:00:00", "Total Empties": 8.220418988163768}, {"dt": "2005-11-01T00:00:00", "Total Empties": 5.852417302798973}, {"dt": "2005-12-01T00:00:00", "Total Empties": -7.02351074723957}, {"dt": "2006-01-01T00:00:00", "Total Empties": 6.065102264426581}, {"dt": "2006-02-01T00:00:00", "Total Empties": -2.4073259232334054}, {"dt": "2006-03-01T00:00:00", "Total Empties": 5.692603380292849}, {"dt": "2006-04-01T00:00:00", "Total Empties": 16.716050308804032}, {"dt": "2006-05-01T00:00:00", "Total Empties": 17.42935587544856}, {"dt": "2006-06-01T00:00:00", "Total Empties": 7.993545927248014}, {"dt": "2006-07-01T00:00:00", "Total Empties": 0.04636304526051127}, {"dt": "2006-08-01T00:00:00", "Total Empties": 11.832512960546527}, {"dt": "2006-09-01T00:00:00", "Total Empties": -0.6916916916916871}, {"dt": "2006-10-01T00:00:00", "Total Empties": 3.733958601215237}, {"dt": "2006-11-01T00:00:00", "Total Empties": 8.073798580874048}, {"dt": "2006-12-01T00:00:00", "Total Empties": 3.1004964903269983}, {"dt": "2007-01-01T00:00:00", "Total Empties": -3.2524480791993993}, {"dt": "2007-02-01T00:00:00", "Total Empties": -3.168494099504693}, {"dt": "2007-03-01T00:00:00", "Total Empties": 1.5959906515191191}, {"dt": "2007-04-01T00:00:00", "Total Empties": -17.035235896804192}, {"dt": "2007-05-01T00:00:00", "Total Empties": -18.97614086164092}, {"dt": "2007-06-01T00:00:00", "Total Empties": -6.956717509990429}, {"dt": "2007-07-01T00:00:00", "Total Empties": 1.6897715135040459}, {"dt": "2007-08-01T00:00:00", "Total Empties": -14.47248088731512}, {"dt": "2007-09-01T00:00:00", "Total Empties": -5.371488473827979}, {"dt": "2007-10-01T00:00:00", "Total Empties": -14.153704063776008}, {"dt": "2007-11-01T00:00:00", "Total Empties": -26.468736739518683}, {"dt": "2007-12-01T00:00:00", "Total Empties": -15.902536767351371}, {"dt": "2008-01-01T00:00:00", "Total Empties": -23.19995550982955}, {"dt": "2008-02-01T00:00:00", "Total Empties": -19.566904426104504}, {"dt": "2008-03-01T00:00:00", "Total Empties": -34.120433017591346}, {"dt": "2008-04-01T00:00:00", "Total Empties": -27.40436135462797}, {"dt": "2008-05-01T00:00:00", "Total Empties": -36.73006048151407}, {"dt": "2008-06-01T00:00:00", "Total Empties": -27.873251906885688}, {"dt": "2008-07-01T00:00:00", "Total Empties": -23.312603855793967}, {"dt": "2008-08-01T00:00:00", "Total Empties": -28.5665374404787}, {"dt": "2008-09-01T00:00:00", "Total Empties": -22.20387729015765}, {"dt": "2008-10-01T00:00:00", "Total Empties": -3.6188513218914697}, {"dt": "2008-11-01T00:00:00", "Total Empties": 14.001521973492292}, {"dt": "2008-12-01T00:00:00", "Total Empties": -13.839653004942964}, {"dt": "2009-01-01T00:00:00", "Total Empties": -20.203768338426332}, {"dt": "2009-02-01T00:00:00", "Total Empties": -36.26974738449405}, {"dt": "2009-03-01T00:00:00", "Total Empties": -34.63825893732436}, {"dt": "2009-04-01T00:00:00", "Total Empties": -14.0296118447379}, {"dt": "2009-05-01T00:00:00", "Total Empties": -12.575851874902755}, {"dt": "2009-06-01T00:00:00", "Total Empties": -29.182042758242087}, {"dt": "2009-07-01T00:00:00", "Total Empties": -25.44768061222271}, {"dt": "2009-08-01T00:00:00", "Total Empties": -16.826309773992556}, {"dt": "2009-09-01T00:00:00", "Total Empties": -27.361538988156365}, {"dt": "2009-10-01T00:00:00", "Total Empties": -37.630719338237014}, {"dt": "2009-11-01T00:00:00", "Total Empties": -41.30189298488616}, {"dt": "2009-12-01T00:00:00", "Total Empties": -14.773196033795244}, {"dt": "2010-01-01T00:00:00", "Total Empties": -11.343321506030113}, {"dt": "2010-02-01T00:00:00", "Total Empties": 7.95660988388931}, {"dt": "2010-03-01T00:00:00", "Total Empties": 22.312054508834823}, {"dt": "2010-04-01T00:00:00", "Total Empties": 17.564492438817524}, {"dt": "2010-05-01T00:00:00", "Total Empties": 35.20689655172413}, {"dt": "2010-06-01T00:00:00", "Total Empties": 52.81217028057106}, {"dt": "2010-07-01T00:00:00", "Total Empties": 63.13743025448606}, {"dt": "2010-08-01T00:00:00", "Total Empties": 54.01521330543637}, {"dt": "2010-09-01T00:00:00", "Total Empties": 52.55365069790676}, {"dt": "2010-10-01T00:00:00", "Total Empties": 50.59532780708365}, {"dt": "2010-11-01T00:00:00", "Total Empties": 33.811279271424645}, {"dt": "2010-12-01T00:00:00", "Total Empties": 12.293061568384921}, {"dt": "2011-01-01T00:00:00", "Total Empties": 7.443422008864142}, {"dt": "2011-02-01T00:00:00", "Total Empties": 25.292051801087734}, {"dt": "2011-03-01T00:00:00", "Total Empties": 4.246324173449967}, {"dt": "2011-04-01T00:00:00", "Total Empties": 3.203441874378621}, {"dt": "2011-05-01T00:00:00", "Total Empties": 8.119225674819619}, {"dt": "2011-06-01T00:00:00", "Total Empties": 10.309648782893577}, {"dt": "2011-07-01T00:00:00", "Total Empties": -7.258708424201254}, {"dt": "2011-08-01T00:00:00", "Total Empties": -15.121198689868354}, {"dt": "2011-09-01T00:00:00", "Total Empties": -9.957124499579894}, {"dt": "2011-10-01T00:00:00", "Total Empties": -19.25290232185749}, {"dt": "2011-11-01T00:00:00", "Total Empties": -17.052528700628187}, {"dt": "2011-12-01T00:00:00", "Total Empties": 5.446911767053519}, {"dt": "2012-01-01T00:00:00", "Total Empties": 4.998618639788899}, {"dt": "2012-02-01T00:00:00", "Total Empties": -24.95352662364838}, {"dt": "2012-03-01T00:00:00", "Total Empties": 1.5101441806795624}, {"dt": "2012-04-01T00:00:00", "Total Empties": -7.505541346973576}, {"dt": "2012-05-01T00:00:00", "Total Empties": -9.548014000913108}, {"dt": "2012-06-01T00:00:00", "Total Empties": -9.825762607940325}, {"dt": "2012-07-01T00:00:00", "Total Empties": -12.184857752306543}, {"dt": "2012-08-01T00:00:00", "Total Empties": -4.890338681894013}, {"dt": "2012-09-01T00:00:00", "Total Empties": -9.421120160277741}, {"dt": "2012-10-01T00:00:00", "Total Empties": -6.956279242710628}, {"dt": "2012-11-01T00:00:00", "Total Empties": 18.396359320702516}, {"dt": "2012-12-01T00:00:00", "Total Empties": -2.366281622333577}, {"dt": "2013-01-01T00:00:00", "Total Empties": 23.059265442403998}, {"dt": "2013-02-01T00:00:00", "Total Empties": 44.20942055299062}, {"dt": "2013-03-01T00:00:00", "Total Empties": 16.51344759466289}, {"dt": "2013-04-01T00:00:00", "Total Empties": 8.080482229759633}, {"dt": "2013-05-01T00:00:00", "Total Empties": 10.216871929470361}, {"dt": "2013-06-01T00:00:00", "Total Empties": 0.031165004533084684}, {"dt": "2013-07-01T00:00:00", "Total Empties": -1.2650077919797442}, {"dt": "2013-08-01T00:00:00", "Total Empties": 5.785672012150345}, {"dt": "2013-09-01T00:00:00", "Total Empties": 9.423857714216455}, {"dt": "2013-10-01T00:00:00", "Total Empties": 13.87205275076595}, {"dt": "2013-11-01T00:00:00", "Total Empties": -12.732661700332448}, {"dt": "2013-12-01T00:00:00", "Total Empties": 10.760583036129635}, {"dt": "2014-01-01T00:00:00", "Total Empties": -6.320826359755516}, {"dt": "2014-02-01T00:00:00", "Total Empties": -8.333857927821796}, {"dt": "2014-03-01T00:00:00", "Total Empties": -5.380112527705682}, {"dt": "2014-04-01T00:00:00", "Total Empties": 8.843369178683824}, {"dt": "2014-05-01T00:00:00", "Total Empties": 7.137241731988975}, {"dt": "2014-06-01T00:00:00", "Total Empties": 9.34658849519925}, {"dt": "2014-07-01T00:00:00", "Total Empties": 19.539829566506107}, {"dt": "2014-08-01T00:00:00", "Total Empties": -2.009342329650776}, {"dt": "2014-09-01T00:00:00", "Total Empties": 19.07764940432102}, {"dt": "2014-10-01T00:00:00", "Total Empties": 11.19218564931932}, {"dt": "2014-11-01T00:00:00", "Total Empties": 30.211303104676436}, {"dt": "2014-12-01T00:00:00", "Total Empties": 11.45605107133607}, {"dt": "2015-01-01T00:00:00", "Total Empties": -7.631947614475276}, {"dt": "2015-02-01T00:00:00", "Total Empties": -3.913470028450894}, {"dt": "2015-03-01T00:00:00", "Total Empties": 85.42354896189961}, {"dt": "2015-04-01T00:00:00", "Total Empties": 25.31085220906819}, {"dt": "2015-05-01T00:00:00", "Total Empties": 22.59061894448877}, {"dt": "2015-06-01T00:00:00", "Total Empties": 2.448390188307825}, {"dt": "2015-07-01T00:00:00", "Total Empties": 24.261246350398903}, {"dt": "2015-08-01T00:00:00", "Total Empties": 42.13143847677745}, {"dt": "2015-09-01T00:00:00", "Total Empties": 14.568412240721784}, {"dt": "2015-10-01T00:00:00", "Total Empties": 20.77760681737484}, {"dt": "2015-11-01T00:00:00", "Total Empties": 19.520213238560636}, {"dt": "2015-12-01T00:00:00", "Total Empties": 9.485319516407609}, {"dt": "2016-01-01T00:00:00", "Total Empties": 28.627056688337692}, {"dt": "2016-02-01T00:00:00", "Total Empties": 45.52843038155625}, {"dt": "2016-03-01T00:00:00", "Total Empties": -29.810448800660815}, {"dt": "2016-04-01T00:00:00", "Total Empties": -25.77061111180583}, {"dt": "2016-05-01T00:00:00", "Total Empties": -0.4329432001766609}, {"dt": "2016-06-01T00:00:00", "Total Empties": 2.2154239012951216}, {"dt": "2016-07-01T00:00:00", "Total Empties": -15.856767286749774}, {"dt": "2016-08-01T00:00:00", "Total Empties": -22.489050211736238}, {"dt": "2016-09-01T00:00:00", "Total Empties": -27.1976293409649}, {"dt": "2016-10-01T00:00:00", "Total Empties": -13.80327851002553}, {"dt": "2016-11-01T00:00:00", "Total Empties": -24.17431290089631}, {"dt": "2016-12-01T00:00:00", "Total Empties": -11.433045752833737}, {"dt": "2017-01-01T00:00:00", "Total Empties": 9.609957736588992}, {"dt": "2017-02-01T00:00:00", "Total Empties": -9.675020346308195}, {"dt": "2017-03-01T00:00:00", "Total Empties": 4.155834166602568}, {"dt": "2017-04-01T00:00:00", "Total Empties": 29.334321644864847}, {"dt": "2017-05-01T00:00:00", "Total Empties": 12.592436950266439}, {"dt": "2017-06-01T00:00:00", "Total Empties": 26.825754109106192}, {"dt": "2017-07-01T00:00:00", "Total Empties": 27.70067172187276}, {"dt": "2017-08-01T00:00:00", "Total Empties": 36.9718463757438}, {"dt": "2017-09-01T00:00:00", "Total Empties": 46.35548802587193}, {"dt": "2017-10-01T00:00:00", "Total Empties": 28.881997385158552}, {"dt": "2017-11-01T00:00:00", "Total Empties": 17.00548315487986}, {"dt": "2017-12-01T00:00:00", "Total Empties": 38.441161421530204}, {"dt": "2018-01-01T00:00:00", "Total Empties": 28.529296225787924}, {"dt": "2018-02-01T00:00:00", "Total Empties": 46.516288390734964}, {"dt": "2018-03-01T00:00:00", "Total Empties": 21.860530377437914}, {"dt": "2018-04-01T00:00:00", "Total Empties": 6.97962187473542}, {"dt": "2018-05-01T00:00:00", "Total Empties": -4.638998901030544}, {"dt": "2018-06-01T00:00:00", "Total Empties": 13.569809112850152}, {"dt": "2018-07-01T00:00:00", "Total Empties": 2.591065674995585}, {"dt": "2018-08-01T00:00:00", "Total Empties": -1.09495373113917}, {"dt": "2018-09-01T00:00:00", "Total Empties": 5.885182274924405}, {"dt": "2018-10-01T00:00:00", "Total Empties": 8.542794834725932}, {"dt": "2018-11-01T00:00:00", "Total Empties": 11.43011042283868}, {"dt": "2018-12-01T00:00:00", "Total Empties": 19.401728195219636}, {"dt": "2019-01-01T00:00:00", "Total Empties": 1.6405621829022277}, {"dt": "2019-02-01T00:00:00", "Total Empties": -0.08641346989842758}, {"dt": "2019-03-01T00:00:00", "Total Empties": 5.654637457200851}, {"dt": "2019-04-01T00:00:00", "Total Empties": 13.497175278819462}, {"dt": "2019-05-01T00:00:00", "Total Empties": -11.676514875597277}, {"dt": "2019-06-01T00:00:00", "Total Empties": -9.105037651442949}, {"dt": "2019-07-01T00:00:00", "Total Empties": -10.950560018101596}, {"dt": "2019-08-01T00:00:00", "Total Empties": -0.3364551454592357}, {"dt": "2019-09-01T00:00:00", "Total Empties": 2.9135165037802}, {"dt": "2019-10-01T00:00:00", "Total Empties": -0.7941775363791148}, {"dt": "2019-11-01T00:00:00", "Total Empties": -1.7139051363443514}, {"dt": "2019-12-01T00:00:00", "Total Empties": -15.117937465715858}, {"dt": "2020-01-01T00:00:00", "Total Empties": -3.6621021465581105}, {"dt": "2020-02-01T00:00:00", "Total Empties": -12.8342132491444}, {"dt": "2020-03-01T00:00:00", "Total Empties": -21.04665435398575}, {"dt": "2020-04-01T00:00:00", "Total Empties": -12.201035213345135}, {"dt": "2020-05-01T00:00:00", "Total Empties": 11.43593941370884}, {"dt": "2020-06-01T00:00:00", "Total Empties": -13.125950556872823}, {"dt": "2020-07-01T00:00:00", "Total Empties": 20.782408513190063}, {"dt": "2020-08-01T00:00:00", "Total Empties": 8.510992517503869}, {"dt": "2020-09-01T00:00:00", "Total Empties": 21.23275398674074}, {"dt": "2020-10-01T00:00:00", "Total Empties": 31.761541542270443}, {"dt": "2020-11-01T00:00:00", "Total Empties": 54.959233190521985}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doYoyChart</span><span class="p">(</span><span class="n">df_lb_raw</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Long Beach&#39;</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;Loaded Inbound&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[12]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-784bce617a17470cb8040be95353f211"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-784bce617a17470cb8040be95353f211") {
      outputDiv = document.getElementById("altair-viz-784bce617a17470cb8040be95353f211");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-fe9bb1cbc6998838240b07fa605afa86"}, "mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['nolarge'] < 0"}, "value": "royalblue"}, "tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "nolarge", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Year-over-Year Volume Growth [%]"}, "field": "nolarge"}}, "height": 400, "title": "Port of Long Beach Loaded Inbound Container Volume Growth", "transform": [{"calculate": "datum['Loaded Inbound'] > 400 ? NaN : datum['Loaded Inbound']", "as": "nolarge"}], "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-fe9bb1cbc6998838240b07fa605afa86": [{"dt": "1995-02-01T00:00:00", "Loaded Inbound": null}, {"dt": "1995-03-01T00:00:00", "Loaded Inbound": null}, {"dt": "1995-04-01T00:00:00", "Loaded Inbound": null}, {"dt": "1995-05-01T00:00:00", "Loaded Inbound": null}, {"dt": "1995-06-01T00:00:00", "Loaded Inbound": null}, {"dt": "1995-07-01T00:00:00", "Loaded Inbound": null}, {"dt": "1995-08-01T00:00:00", "Loaded Inbound": null}, {"dt": "1995-09-01T00:00:00", "Loaded Inbound": null}, {"dt": "1995-10-01T00:00:00", "Loaded Inbound": null}, {"dt": "1995-11-01T00:00:00", "Loaded Inbound": null}, {"dt": "1995-12-01T00:00:00", "Loaded Inbound": null}, {"dt": "1996-01-01T00:00:00", "Loaded Inbound": null}, {"dt": "1996-02-01T00:00:00", "Loaded Inbound": 14.354173182272167}, {"dt": "1996-03-01T00:00:00", "Loaded Inbound": 7.663213811420988}, {"dt": "1996-04-01T00:00:00", "Loaded Inbound": 15.440923650446091}, {"dt": "1996-05-01T00:00:00", "Loaded Inbound": 5.553796354936313}, {"dt": "1996-06-01T00:00:00", "Loaded Inbound": 16.752043308440378}, {"dt": "1996-07-01T00:00:00", "Loaded Inbound": 15.613977072310403}, {"dt": "1996-08-01T00:00:00", "Loaded Inbound": 9.074282498593146}, {"dt": "1996-09-01T00:00:00", "Loaded Inbound": 28.691909447272156}, {"dt": "1996-10-01T00:00:00", "Loaded Inbound": 11.83660150108279}, {"dt": "1996-11-01T00:00:00", "Loaded Inbound": 15.358058608058611}, {"dt": "1996-12-01T00:00:00", "Loaded Inbound": 27.7888733124652}, {"dt": "1997-01-01T00:00:00", "Loaded Inbound": 13.018721105872654}, {"dt": "1997-02-01T00:00:00", "Loaded Inbound": 11.870417912817931}, {"dt": "1997-03-01T00:00:00", "Loaded Inbound": 23.389054451439726}, {"dt": "1997-04-01T00:00:00", "Loaded Inbound": 14.521527162709758}, {"dt": "1997-05-01T00:00:00", "Loaded Inbound": 19.43967600539991}, {"dt": "1997-06-01T00:00:00", "Loaded Inbound": 25.18067648902347}, {"dt": "1997-07-01T00:00:00", "Loaded Inbound": 15.74854091896567}, {"dt": "1997-08-01T00:00:00", "Loaded Inbound": 14.805021712025447}, {"dt": "1997-09-01T00:00:00", "Loaded Inbound": 24.76781655981819}, {"dt": "1997-10-01T00:00:00", "Loaded Inbound": 12.731770073476746}, {"dt": "1997-11-01T00:00:00", "Loaded Inbound": 16.180708258249908}, {"dt": "1997-12-01T00:00:00", "Loaded Inbound": 9.582453582994589}, {"dt": "1998-01-01T00:00:00", "Loaded Inbound": 17.254730430274744}, {"dt": "1998-02-01T00:00:00", "Loaded Inbound": 4.189930917005769}, {"dt": "1998-03-01T00:00:00", "Loaded Inbound": 34.12667946257197}, {"dt": "1998-04-01T00:00:00", "Loaded Inbound": 17.888577099445623}, {"dt": "1998-05-01T00:00:00", "Loaded Inbound": 14.170096978999513}, {"dt": "1998-06-01T00:00:00", "Loaded Inbound": 10.410043254526036}, {"dt": "1998-07-01T00:00:00", "Loaded Inbound": 17.16481137181991}, {"dt": "1998-08-01T00:00:00", "Loaded Inbound": 21.969228848734513}, {"dt": "1998-09-01T00:00:00", "Loaded Inbound": 8.17284165425145}, {"dt": "1998-10-01T00:00:00", "Loaded Inbound": 6.308420835906947}, {"dt": "1998-11-01T00:00:00", "Loaded Inbound": 31.6404061385408}, {"dt": "1998-12-01T00:00:00", "Loaded Inbound": 14.188151398793192}, {"dt": "1999-01-01T00:00:00", "Loaded Inbound": 17.020820956354754}, {"dt": "1999-02-01T00:00:00", "Loaded Inbound": 30.552464860691654}, {"dt": "1999-03-01T00:00:00", "Loaded Inbound": 2.5048893340965384}, {"dt": "1999-04-01T00:00:00", "Loaded Inbound": 5.415478934321061}, {"dt": "1999-05-01T00:00:00", "Loaded Inbound": 25.66609630897092}, {"dt": "1999-06-01T00:00:00", "Loaded Inbound": 6.223943962102285}, {"dt": "1999-07-01T00:00:00", "Loaded Inbound": -5.298837991744421}, {"dt": "1999-08-01T00:00:00", "Loaded Inbound": 9.874470992206241}, {"dt": "1999-09-01T00:00:00", "Loaded Inbound": 10.120887682525325}, {"dt": "1999-10-01T00:00:00", "Loaded Inbound": 13.01634028519414}, {"dt": "1999-11-01T00:00:00", "Loaded Inbound": 8.711155864445841}, {"dt": "1999-12-01T00:00:00", "Loaded Inbound": 11.433238056349527}, {"dt": "2000-01-01T00:00:00", "Loaded Inbound": 5.475303576804791}, {"dt": "2000-02-01T00:00:00", "Loaded Inbound": 2.829280736540629}, {"dt": "2000-03-01T00:00:00", "Loaded Inbound": 3.825190648758392}, {"dt": "2000-04-01T00:00:00", "Loaded Inbound": 10.546055349029327}, {"dt": "2000-05-01T00:00:00", "Loaded Inbound": 6.018284380470718}, {"dt": "2000-06-01T00:00:00", "Loaded Inbound": 4.420554498225404}, {"dt": "2000-07-01T00:00:00", "Loaded Inbound": 19.237377111768627}, {"dt": "2000-08-01T00:00:00", "Loaded Inbound": 10.367520690795452}, {"dt": "2000-09-01T00:00:00", "Loaded Inbound": -4.6558334854847505}, {"dt": "2000-10-01T00:00:00", "Loaded Inbound": 15.309779575209802}, {"dt": "2000-11-01T00:00:00", "Loaded Inbound": 1.7288630851206133}, {"dt": "2000-12-01T00:00:00", "Loaded Inbound": -2.66257840622508}, {"dt": "2001-01-01T00:00:00", "Loaded Inbound": 8.991895764305546}, {"dt": "2001-02-01T00:00:00", "Loaded Inbound": -12.524667065098495}, {"dt": "2001-03-01T00:00:00", "Loaded Inbound": 9.589386460790305}, {"dt": "2001-04-01T00:00:00", "Loaded Inbound": 0.9221617743767618}, {"dt": "2001-05-01T00:00:00", "Loaded Inbound": -10.043299574343168}, {"dt": "2001-06-01T00:00:00", "Loaded Inbound": -0.00788161809619492}, {"dt": "2001-07-01T00:00:00", "Loaded Inbound": -7.420452271362821}, {"dt": "2001-08-01T00:00:00", "Loaded Inbound": -6.531234043271484}, {"dt": "2001-09-01T00:00:00", "Loaded Inbound": 5.421294523171194}, {"dt": "2001-10-01T00:00:00", "Loaded Inbound": 1.1354034418774583}, {"dt": "2001-11-01T00:00:00", "Loaded Inbound": -9.013211930631492}, {"dt": "2001-12-01T00:00:00", "Loaded Inbound": 6.063743211298167}, {"dt": "2002-01-01T00:00:00", "Loaded Inbound": -7.296983639556743}, {"dt": "2002-02-01T00:00:00", "Loaded Inbound": 30.37615695980611}, {"dt": "2002-03-01T00:00:00", "Loaded Inbound": -12.13210296260321}, {"dt": "2002-04-01T00:00:00", "Loaded Inbound": 12.52770578797977}, {"dt": "2002-05-01T00:00:00", "Loaded Inbound": 17.979808280644495}, {"dt": "2002-06-01T00:00:00", "Loaded Inbound": 16.318206002325255}, {"dt": "2002-07-01T00:00:00", "Loaded Inbound": 19.905465969189983}, {"dt": "2002-08-01T00:00:00", "Loaded Inbound": 5.914434832860782}, {"dt": "2002-09-01T00:00:00", "Loaded Inbound": -14.227716117781696}, {"dt": "2002-10-01T00:00:00", "Loaded Inbound": -31.240002519050314}, {"dt": "2002-11-01T00:00:00", "Loaded Inbound": -7.426970870881711}, {"dt": "2002-12-01T00:00:00", "Loaded Inbound": -2.7878110906965126}, {"dt": "2003-01-01T00:00:00", "Loaded Inbound": -6.836612603031112}, {"dt": "2003-02-01T00:00:00", "Loaded Inbound": -21.462259487037517}, {"dt": "2003-03-01T00:00:00", "Loaded Inbound": 4.611517739739579}, {"dt": "2003-04-01T00:00:00", "Loaded Inbound": -12.053800564151384}, {"dt": "2003-05-01T00:00:00", "Loaded Inbound": -15.047410775254777}, {"dt": "2003-06-01T00:00:00", "Loaded Inbound": -13.454631700210074}, {"dt": "2003-07-01T00:00:00", "Loaded Inbound": -7.411324503841865}, {"dt": "2003-08-01T00:00:00", "Loaded Inbound": -11.800061383167371}, {"dt": "2003-09-01T00:00:00", "Loaded Inbound": 9.23419846034923}, {"dt": "2003-10-01T00:00:00", "Loaded Inbound": 40.75749804611177}, {"dt": "2003-11-01T00:00:00", "Loaded Inbound": 20.570256821740408}, {"dt": "2003-12-01T00:00:00", "Loaded Inbound": 12.806387354155602}, {"dt": "2004-01-01T00:00:00", "Loaded Inbound": 19.898207936451318}, {"dt": "2004-02-01T00:00:00", "Loaded Inbound": -3.0642755078274964}, {"dt": "2004-03-01T00:00:00", "Loaded Inbound": 30.978865406006673}, {"dt": "2004-04-01T00:00:00", "Loaded Inbound": 13.253456772880545}, {"dt": "2004-05-01T00:00:00", "Loaded Inbound": 23.57744257624703}, {"dt": "2004-06-01T00:00:00", "Loaded Inbound": 27.604431742551782}, {"dt": "2004-07-01T00:00:00", "Loaded Inbound": 21.93641343383035}, {"dt": "2004-08-01T00:00:00", "Loaded Inbound": 32.866463679860814}, {"dt": "2004-09-01T00:00:00", "Loaded Inbound": 23.88435159828417}, {"dt": "2004-10-01T00:00:00", "Loaded Inbound": 25.187071362573587}, {"dt": "2004-11-01T00:00:00", "Loaded Inbound": 36.66621991967798}, {"dt": "2004-12-01T00:00:00", "Loaded Inbound": 28.273534703513658}, {"dt": "2005-01-01T00:00:00", "Loaded Inbound": 25.357050760716483}, {"dt": "2005-02-01T00:00:00", "Loaded Inbound": 62.50202928666515}, {"dt": "2005-03-01T00:00:00", "Loaded Inbound": -10.788535031847136}, {"dt": "2005-04-01T00:00:00", "Loaded Inbound": 19.32383746025035}, {"dt": "2005-05-01T00:00:00", "Loaded Inbound": 18.575192458112056}, {"dt": "2005-06-01T00:00:00", "Loaded Inbound": 12.847456587101913}, {"dt": "2005-07-01T00:00:00", "Loaded Inbound": 2.7326243626182967}, {"dt": "2005-08-01T00:00:00", "Loaded Inbound": 11.352641189608391}, {"dt": "2005-09-01T00:00:00", "Loaded Inbound": 22.640771229146452}, {"dt": "2005-10-01T00:00:00", "Loaded Inbound": 3.6775356041442775}, {"dt": "2005-11-01T00:00:00", "Loaded Inbound": 3.1611304050832345}, {"dt": "2005-12-01T00:00:00", "Loaded Inbound": -1.1640290172359458}, {"dt": "2006-01-01T00:00:00", "Loaded Inbound": 16.247008327234603}, {"dt": "2006-02-01T00:00:00", "Loaded Inbound": 0.8863313952326646}, {"dt": "2006-03-01T00:00:00", "Loaded Inbound": 34.4357022842265}, {"dt": "2006-04-01T00:00:00", "Loaded Inbound": 18.501402628082086}, {"dt": "2006-05-01T00:00:00", "Loaded Inbound": 13.985647378233601}, {"dt": "2006-06-01T00:00:00", "Loaded Inbound": 8.660943680926557}, {"dt": "2006-07-01T00:00:00", "Loaded Inbound": 5.387920612880714}, {"dt": "2006-08-01T00:00:00", "Loaded Inbound": 13.623564307274183}, {"dt": "2006-09-01T00:00:00", "Loaded Inbound": 1.3402028967013369}, {"dt": "2006-10-01T00:00:00", "Loaded Inbound": 12.194062225311919}, {"dt": "2006-11-01T00:00:00", "Loaded Inbound": 9.093471883041326}, {"dt": "2006-12-01T00:00:00", "Loaded Inbound": 6.145112968260769}, {"dt": "2007-01-01T00:00:00", "Loaded Inbound": 3.229143625257347}, {"dt": "2007-02-01T00:00:00", "Loaded Inbound": 12.808609578433284}, {"dt": "2007-03-01T00:00:00", "Loaded Inbound": -10.424160883727518}, {"dt": "2007-04-01T00:00:00", "Loaded Inbound": -5.577428639065052}, {"dt": "2007-05-01T00:00:00", "Loaded Inbound": -3.5478231205492317}, {"dt": "2007-06-01T00:00:00", "Loaded Inbound": 6.153182146576719}, {"dt": "2007-07-01T00:00:00", "Loaded Inbound": 8.942471248734085}, {"dt": "2007-08-01T00:00:00", "Loaded Inbound": -6.090061495734977}, {"dt": "2007-09-01T00:00:00", "Loaded Inbound": 4.358734625906235}, {"dt": "2007-10-01T00:00:00", "Loaded Inbound": -3.740675865684806}, {"dt": "2007-11-01T00:00:00", "Loaded Inbound": -6.832208553932317}, {"dt": "2007-12-01T00:00:00", "Loaded Inbound": -0.7937013221281375}, {"dt": "2008-01-01T00:00:00", "Loaded Inbound": -13.780064876839493}, {"dt": "2008-02-01T00:00:00", "Loaded Inbound": -7.573384831460672}, {"dt": "2008-03-01T00:00:00", "Loaded Inbound": -9.751065225812061}, {"dt": "2008-04-01T00:00:00", "Loaded Inbound": -7.450402127084033}, {"dt": "2008-05-01T00:00:00", "Loaded Inbound": -15.563716976246267}, {"dt": "2008-06-01T00:00:00", "Loaded Inbound": -15.047243607307959}, {"dt": "2008-07-01T00:00:00", "Loaded Inbound": -18.06607661807089}, {"dt": "2008-08-01T00:00:00", "Loaded Inbound": -13.3085970745088}, {"dt": "2008-09-01T00:00:00", "Loaded Inbound": -15.797554802764346}, {"dt": "2008-10-01T00:00:00", "Loaded Inbound": -9.493053900739945}, {"dt": "2008-11-01T00:00:00", "Loaded Inbound": -13.618948101706717}, {"dt": "2008-12-01T00:00:00", "Loaded Inbound": -26.900478462075995}, {"dt": "2009-01-01T00:00:00", "Loaded Inbound": -23.305919103168506}, {"dt": "2009-02-01T00:00:00", "Loaded Inbound": -43.28213622255738}, {"dt": "2009-03-01T00:00:00", "Loaded Inbound": -18.34115833362531}, {"dt": "2009-04-01T00:00:00", "Loaded Inbound": -29.050482440038074}, {"dt": "2009-05-01T00:00:00", "Loaded Inbound": -21.987725380636626}, {"dt": "2009-06-01T00:00:00", "Loaded Inbound": -28.432157980710205}, {"dt": "2009-07-01T00:00:00", "Loaded Inbound": -18.590416743161377}, {"dt": "2009-08-01T00:00:00", "Loaded Inbound": -11.743309767139642}, {"dt": "2009-09-01T00:00:00", "Loaded Inbound": -19.421646001784065}, {"dt": "2009-10-01T00:00:00", "Loaded Inbound": -22.35960281204694}, {"dt": "2009-11-01T00:00:00", "Loaded Inbound": -14.74499701314217}, {"dt": "2009-12-01T00:00:00", "Loaded Inbound": 13.439431110417456}, {"dt": "2010-01-01T00:00:00", "Loaded Inbound": 8.643089317406826}, {"dt": "2010-02-01T00:00:00", "Loaded Inbound": 39.26416117991414}, {"dt": "2010-03-01T00:00:00", "Loaded Inbound": 10.835076427996793}, {"dt": "2010-04-01T00:00:00", "Loaded Inbound": 21.19758252910058}, {"dt": "2010-05-01T00:00:00", "Loaded Inbound": 26.806174792655458}, {"dt": "2010-06-01T00:00:00", "Loaded Inbound": 26.989503678074023}, {"dt": "2010-07-01T00:00:00", "Loaded Inbound": 32.54524871571674}, {"dt": "2010-08-01T00:00:00", "Loaded Inbound": 24.535851472471194}, {"dt": "2010-09-01T00:00:00", "Loaded Inbound": 28.445608294357207}, {"dt": "2010-10-01T00:00:00", "Loaded Inbound": 33.51654159179791}, {"dt": "2010-11-01T00:00:00", "Loaded Inbound": 20.203024344528274}, {"dt": "2010-12-01T00:00:00", "Loaded Inbound": 10.449038205223005}, {"dt": "2011-01-01T00:00:00", "Loaded Inbound": 11.251577377538148}, {"dt": "2011-02-01T00:00:00", "Loaded Inbound": 12.379761446710269}, {"dt": "2011-03-01T00:00:00", "Loaded Inbound": -7.47198188258521}, {"dt": "2011-04-01T00:00:00", "Loaded Inbound": 11.963771269870872}, {"dt": "2011-05-01T00:00:00", "Loaded Inbound": 4.005595357365643}, {"dt": "2011-06-01T00:00:00", "Loaded Inbound": 3.4573158864809717}, {"dt": "2011-07-01T00:00:00", "Loaded Inbound": -1.2127481471903345}, {"dt": "2011-08-01T00:00:00", "Loaded Inbound": -14.15049479501349}, {"dt": "2011-09-01T00:00:00", "Loaded Inbound": -8.892542531281912}, {"dt": "2011-10-01T00:00:00", "Loaded Inbound": -20.754169305467595}, {"dt": "2011-11-01T00:00:00", "Loaded Inbound": -15.567983095307492}, {"dt": "2011-12-01T00:00:00", "Loaded Inbound": -3.223181996893598}, {"dt": "2012-01-01T00:00:00", "Loaded Inbound": -5.494029573717752}, {"dt": "2012-02-01T00:00:00", "Loaded Inbound": -18.05401010014551}, {"dt": "2012-03-01T00:00:00", "Loaded Inbound": 18.267777481421057}, {"dt": "2012-04-01T00:00:00", "Loaded Inbound": -13.751587333908411}, {"dt": "2012-05-01T00:00:00", "Loaded Inbound": -9.146855688840416}, {"dt": "2012-06-01T00:00:00", "Loaded Inbound": 3.4719840066688157}, {"dt": "2012-07-01T00:00:00", "Loaded Inbound": -10.017084949399614}, {"dt": "2012-08-01T00:00:00", "Loaded Inbound": 2.911324186558284}, {"dt": "2012-09-01T00:00:00", "Loaded Inbound": 0.7172870743957338}, {"dt": "2012-10-01T00:00:00", "Loaded Inbound": 15.171822450134865}, {"dt": "2012-11-01T00:00:00", "Loaded Inbound": 20.18778937557444}, {"dt": "2012-12-01T00:00:00", "Loaded Inbound": 18.893121327063778}, {"dt": "2013-01-01T00:00:00", "Loaded Inbound": 19.549590834697227}, {"dt": "2013-02-01T00:00:00", "Loaded Inbound": 45.786133960047}, {"dt": "2013-03-01T00:00:00", "Loaded Inbound": -0.5430240425221444}, {"dt": "2013-04-01T00:00:00", "Loaded Inbound": 13.467374647476205}, {"dt": "2013-05-01T00:00:00", "Loaded Inbound": 22.23000196049405}, {"dt": "2013-06-01T00:00:00", "Loaded Inbound": 3.5369270584544754}, {"dt": "2013-07-01T00:00:00", "Loaded Inbound": 12.89768138022378}, {"dt": "2013-08-01T00:00:00", "Loaded Inbound": 19.216152623673977}, {"dt": "2013-09-01T00:00:00", "Loaded Inbound": 16.174529049196163}, {"dt": "2013-10-01T00:00:00", "Loaded Inbound": 7.796586892568791}, {"dt": "2013-11-01T00:00:00", "Loaded Inbound": 6.499745093956211}, {"dt": "2013-12-01T00:00:00", "Loaded Inbound": -1.4023323713795666}, {"dt": "2014-01-01T00:00:00", "Loaded Inbound": 2.006804956227781}, {"dt": "2014-02-01T00:00:00", "Loaded Inbound": -2.6771128879718}, {"dt": "2014-03-01T00:00:00", "Loaded Inbound": -0.6584768332644209}, {"dt": "2014-04-01T00:00:00", "Loaded Inbound": 11.869318332280375}, {"dt": "2014-05-01T00:00:00", "Loaded Inbound": 2.2720279674498745}, {"dt": "2014-06-01T00:00:00", "Loaded Inbound": 8.816035916928321}, {"dt": "2014-07-01T00:00:00", "Loaded Inbound": 0.9117541349355385}, {"dt": "2014-08-01T00:00:00", "Loaded Inbound": -8.225930930976732}, {"dt": "2014-09-01T00:00:00", "Loaded Inbound": 10.183095710449663}, {"dt": "2014-10-01T00:00:00", "Loaded Inbound": 4.093928005069225}, {"dt": "2014-11-01T00:00:00", "Loaded Inbound": -0.8946931950727821}, {"dt": "2014-12-01T00:00:00", "Loaded Inbound": -5.1188262179429955}, {"dt": "2015-01-01T00:00:00", "Loaded Inbound": -23.53059069842349}, {"dt": "2015-02-01T00:00:00", "Loaded Inbound": -24.739114590810207}, {"dt": "2015-03-01T00:00:00", "Loaded Inbound": 42.11035124780693}, {"dt": "2015-04-01T00:00:00", "Loaded Inbound": 7.32604696461423}, {"dt": "2015-05-01T00:00:00", "Loaded Inbound": 4.7618895208344725}, {"dt": "2015-06-01T00:00:00", "Loaded Inbound": -5.96891670410753}, {"dt": "2015-07-01T00:00:00", "Loaded Inbound": 16.228012700972737}, {"dt": "2015-08-01T00:00:00", "Loaded Inbound": 19.08286826369199}, {"dt": "2015-09-01T00:00:00", "Loaded Inbound": -1.8960167146515494}, {"dt": "2015-10-01T00:00:00", "Loaded Inbound": -0.8010126190890254}, {"dt": "2015-11-01T00:00:00", "Loaded Inbound": 4.309758354196136}, {"dt": "2015-12-01T00:00:00", "Loaded Inbound": 7.046970157242249}, {"dt": "2016-01-01T00:00:00", "Loaded Inbound": 30.338798223403707}, {"dt": "2016-02-01T00:00:00", "Loaded Inbound": 44.70659584666099}, {"dt": "2016-03-01T00:00:00", "Loaded Inbound": -34.607268833459315}, {"dt": "2016-04-01T00:00:00", "Loaded Inbound": -22.07476305706796}, {"dt": "2016-05-01T00:00:00", "Loaded Inbound": 1.0149182596687512}, {"dt": "2016-06-01T00:00:00", "Loaded Inbound": 5.4971751982745065}, {"dt": "2016-07-01T00:00:00", "Loaded Inbound": -5.869700964407132}, {"dt": "2016-08-01T00:00:00", "Loaded Inbound": -10.226314819880422}, {"dt": "2016-09-01T00:00:00", "Loaded Inbound": -15.008305572994418}, {"dt": "2016-10-01T00:00:00", "Loaded Inbound": -3.663695839218173}, {"dt": "2016-11-01T00:00:00", "Loaded Inbound": -11.753963750676654}, {"dt": "2016-12-01T00:00:00", "Loaded Inbound": -8.244201052695587}, {"dt": "2017-01-01T00:00:00", "Loaded Inbound": 7.360740562531642}, {"dt": "2017-02-01T00:00:00", "Loaded Inbound": -15.584885253658697}, {"dt": "2017-03-01T00:00:00", "Loaded Inbound": 20.179160546150698}, {"dt": "2017-04-01T00:00:00", "Loaded Inbound": 16.533908036681822}, {"dt": "2017-05-01T00:00:00", "Loaded Inbound": 1.8010579514213365}, {"dt": "2017-06-01T00:00:00", "Loaded Inbound": 6.953809253459053}, {"dt": "2017-07-01T00:00:00", "Loaded Inbound": 16.342350310803177}, {"dt": "2017-08-01T00:00:00", "Loaded Inbound": 10.59930042751651}, {"dt": "2017-09-01T00:00:00", "Loaded Inbound": 29.459082153775462}, {"dt": "2017-10-01T00:00:00", "Loaded Inbound": 14.256970587541407}, {"dt": "2017-11-01T00:00:00", "Loaded Inbound": 17.959425002771525}, {"dt": "2017-12-01T00:00:00", "Loaded Inbound": 27.290969407103848}, {"dt": "2018-01-01T00:00:00", "Loaded Inbound": 8.584233586407564}, {"dt": "2018-02-01T00:00:00", "Loaded Inbound": 37.03089778546518}, {"dt": "2018-03-01T00:00:00", "Loaded Inbound": 7.329662490883004}, {"dt": "2018-04-01T00:00:00", "Loaded Inbound": 8.385986461119966}, {"dt": "2018-05-01T00:00:00", "Loaded Inbound": 7.267509224763358}, {"dt": "2018-06-01T00:00:00", "Loaded Inbound": 14.54307424372554}, {"dt": "2018-07-01T00:00:00", "Loaded Inbound": -8.205480175281131}, {"dt": "2018-08-01T00:00:00", "Loaded Inbound": -3.566338220204379}, {"dt": "2018-09-01T00:00:00", "Loaded Inbound": -2.456196867031757}, {"dt": "2018-10-01T00:00:00", "Loaded Inbound": 7.395291625984846}, {"dt": "2018-11-01T00:00:00", "Loaded Inbound": 0.20895335359167877}, {"dt": "2018-12-01T00:00:00", "Loaded Inbound": 7.9188131470173895}, {"dt": "2019-01-01T00:00:00", "Loaded Inbound": -0.2519589965994773}, {"dt": "2019-02-01T00:00:00", "Loaded Inbound": -11.506894143703228}, {"dt": "2019-03-01T00:00:00", "Loaded Inbound": -7.760693589820178}, {"dt": "2019-04-01T00:00:00", "Loaded Inbound": 1.7629395344072485}, {"dt": "2019-05-01T00:00:00", "Loaded Inbound": -19.522733315607553}, {"dt": "2019-06-01T00:00:00", "Loaded Inbound": -13.662765722021897}, {"dt": "2019-07-01T00:00:00", "Loaded Inbound": -9.888536130857894}, {"dt": "2019-08-01T00:00:00", "Loaded Inbound": -5.902999454856584}, {"dt": "2019-09-01T00:00:00", "Loaded Inbound": -0.6666648008261888}, {"dt": "2019-10-01T00:00:00", "Loaded Inbound": -7.421913624328447}, {"dt": "2019-11-01T00:00:00", "Loaded Inbound": -8.312570144149156}, {"dt": "2019-12-01T00:00:00", "Loaded Inbound": -13.365657280392817}, {"dt": "2020-01-01T00:00:00", "Loaded Inbound": -4.285167274995527}, {"dt": "2020-02-01T00:00:00", "Loaded Inbound": -17.91986528651379}, {"dt": "2020-03-01T00:00:00", "Loaded Inbound": -5.047381182728228}, {"dt": "2020-04-01T00:00:00", "Loaded Inbound": -20.241094994070142}, {"dt": "2020-05-01T00:00:00", "Loaded Inbound": 7.578948817488507}, {"dt": "2020-06-01T00:00:00", "Loaded Inbound": -9.318882928197292}, {"dt": "2020-07-01T00:00:00", "Loaded Inbound": 20.251156853358854}, {"dt": "2020-08-01T00:00:00", "Loaded Inbound": 13.01567631203917}, {"dt": "2020-09-01T00:00:00", "Loaded Inbound": 14.284667769265669}, {"dt": "2020-10-01T00:00:00", "Loaded Inbound": 19.386937714723107}, {"dt": "2020-11-01T00:00:00", "Loaded Inbound": 30.478677882074546}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Port-of-New-York-/-New-Jersey">Port of New York / New Jersey<a class="anchor-link" href="#Port-of-New-York-/-New-Jersey">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dataUrl</span> <span class="o">=</span> <span class="s2">&quot;https://www.panynj.gov/content/port/en.model.json&quot;</span>

<span class="c1">#jqPath = &#39;\&#39;.&quot;:children&quot;.&quot;/port/en/our-port/facts-and-figures&quot;.&quot;:items&quot;.&quot;root&quot;.&quot;:items&quot;.&quot;responsivegrid&quot;.&quot;:items&quot;.&quot;accordionlist_435572874&quot;.&quot;:items&quot;\&#39;&#39;</span>
    
<span class="k">def</span> <span class="nf">doNynjFetch</span><span class="p">(</span><span class="n">retries</span> <span class="o">=</span> <span class="mi">5</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">retries</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">loads</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">req</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="n">dataUrl</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span> <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="n">uaString</span> <span class="p">})</span>

        <span class="n">data</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>

        <span class="n">dict_data</span> <span class="o">=</span> <span class="n">loads</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

        <span class="n">r</span> <span class="o">=</span> <span class="n">dict_data</span><span class="p">[</span><span class="s2">&quot;:children&quot;</span><span class="p">]</span>\
                     <span class="p">[</span><span class="s2">&quot;/port/en/our-port/facts-and-figures&quot;</span><span class="p">]</span>\
                     <span class="p">[</span><span class="s2">&quot;:items&quot;</span><span class="p">]</span>\
                     <span class="p">[</span><span class="s2">&quot;root&quot;</span><span class="p">]</span>\
                     <span class="p">[</span><span class="s2">&quot;:items&quot;</span><span class="p">]</span>\
                     <span class="p">[</span><span class="s2">&quot;responsivegrid&quot;</span><span class="p">]</span>\
                     <span class="p">[</span><span class="s2">&quot;:items&quot;</span><span class="p">]</span>\
                     <span class="p">[</span><span class="s2">&quot;accordionlist_435572874&quot;</span><span class="p">]</span>\
                     <span class="p">[</span><span class="s2">&quot;:items&quot;</span><span class="p">]</span>
        
        <span class="k">return</span> <span class="n">r</span>
    <span class="k">except</span> <span class="n">JSONDecodeError</span><span class="p">:</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">doNynjFetch</span><span class="p">(</span><span class="n">retries</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

<span class="n">nynj_dict_content</span> <span class="o">=</span> <span class="n">doNynjFetch</span><span class="p">()</span>
    
<span class="n">post2011Cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Import Loads&#39;</span><span class="p">,</span> <span class="s1">&#39;Import Empties&#39;</span><span class="p">,</span> <span class="s1">&#39;Export Loads&#39;</span><span class="p">,</span> <span class="s1">&#39;Export Empties&#39;</span><span class="p">,</span> <span class="s1">&#39;Total Loads&#39;</span><span class="p">,</span> <span class="s1">&#39;Total Empties&#39;</span><span class="p">,</span> <span class="s1">&#39;Total TEUs&#39;</span><span class="p">,</span> <span class="s1">&#39;Total Rail Lifts&#39;</span><span class="p">]</span>
<span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Import TEUs&quot;</span><span class="p">,</span> <span class="s2">&quot;Export TEUs&quot;</span><span class="p">,</span> <span class="s2">&quot;Total TEUs&quot;</span><span class="p">,</span> <span class="s2">&quot;Total Rail Lifts&quot;</span><span class="p">]</span>

<span class="n">dfs_nynj</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">nynj_dict_content</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
    <span class="n">year</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="s2">&quot;linkAriaLabel&quot;</span><span class="p">]</span>
    <span class="c1">#print(year)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="s2">&quot;:items&quot;</span><span class="p">][</span><span class="s2">&quot;text&quot;</span><span class="p">][</span><span class="s2">&quot;text&quot;</span><span class="p">])</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="c1"># text_copy</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="s2">&quot;:items&quot;</span><span class="p">][</span><span class="s2">&quot;text_copy&quot;</span><span class="p">][</span><span class="s2">&quot;text&quot;</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">monthData</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">tmp</span><span class="p">):</span>
        <span class="c1"># skip the YTD section</span>
        <span class="c1">#if n &lt; 2:</span>
        <span class="c1">#    continue</span>
        
        <span class="n">mtmp</span> <span class="o">=</span> <span class="n">monthData</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">mtmp</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Period&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">post2011Cols</span>
            
            <span class="c1"># cleanup types before doing math</span>
            <span class="n">mtmp</span><span class="p">[</span><span class="n">post2011Cols</span><span class="p">]</span> <span class="o">=</span> <span class="n">mtmp</span><span class="p">[</span><span class="n">post2011Cols</span><span class="p">]</span><span class="o">.</span><span class="n">applymap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;[^0-9.]&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)))</span>
            <span class="n">mtmp</span><span class="p">[</span><span class="n">post2011Cols</span><span class="p">]</span> <span class="o">=</span> <span class="n">mtmp</span><span class="p">[</span><span class="n">post2011Cols</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">))</span>
            
            <span class="n">mtmp</span><span class="p">[</span><span class="s1">&#39;Import TEUs&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mtmp</span><span class="p">[</span><span class="s1">&#39;Import Loads&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">mtmp</span><span class="p">[</span><span class="s1">&#39;Import Empties&#39;</span><span class="p">]</span>
            <span class="n">mtmp</span><span class="p">[</span><span class="s1">&#39;Export TEUs&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mtmp</span><span class="p">[</span><span class="s1">&#39;Export Loads&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">mtmp</span><span class="p">[</span><span class="s1">&#39;Export Empties&#39;</span><span class="p">]</span>
            
            <span class="c1"># Monthy is shown Dec-&gt;Jan after 2014, Jan-&gt;Dec before 2014 (and for 2020)</span>
            <span class="n">index</span> <span class="o">=</span> <span class="mi">13</span><span class="o">-</span><span class="n">n</span> <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">year</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2014</span> <span class="ow">and</span> <span class="nb">int</span><span class="p">(</span><span class="n">year</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2020</span> <span class="k">else</span> <span class="n">n</span>
            <span class="n">mtmp</span><span class="p">[</span><span class="s1">&#39;dt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mtmp</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">-</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">v</span><span class="p">),</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;%m-%Y&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">mtmp</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Period&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">cols</span>
            <span class="n">mtmp</span><span class="p">[</span><span class="s1">&#39;dt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mtmp</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;%B %y&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">))</span>
        
            <span class="n">mtmp</span><span class="p">[</span><span class="n">cols</span><span class="p">]</span> <span class="o">=</span> <span class="n">mtmp</span><span class="p">[</span><span class="n">cols</span><span class="p">]</span><span class="o">.</span><span class="n">applymap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;[^0-9.]&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)))</span>
            <span class="n">mtmp</span><span class="p">[</span><span class="n">cols</span><span class="p">]</span> <span class="o">=</span> <span class="n">mtmp</span><span class="p">[</span><span class="n">cols</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">))</span>
        
        <span class="n">dfs_nynj</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mtmp</span><span class="p">)</span>

<span class="n">commonFields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Period&#39;</span><span class="p">,</span> <span class="s1">&#39;dt&#39;</span><span class="p">,</span> <span class="s1">&#39;Import TEUs&#39;</span><span class="p">,</span> <span class="s1">&#39;Export TEUs&#39;</span><span class="p">,</span> <span class="s1">&#39;Total TEUs&#39;</span><span class="p">]</span>

<span class="n">df_nynj</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">dfs_nynj</span><span class="p">)[</span><span class="n">commonFields</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span> <span class="c1">#.tail(30)</span>

<span class="n">df_nynj</span> <span class="o">=</span> <span class="n">df_nynj</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;dt&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="s1">&#39;mean&#39;</span><span class="p">)</span> <span class="c1">#.head()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doChart</span><span class="p">(</span><span class="n">df_nynj</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(),</span> <span class="n">location</span><span class="o">=</span><span class="s2">&quot;New York/New Jersey&quot;</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s2">&quot;Import TEUs&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[14]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-8d9d78a78a6649e38cfec9e08f8368b0"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-8d9d78a78a6649e38cfec9e08f8368b0") {
      outputDiv = document.getElementById("altair-viz-8d9d78a78a6649e38cfec9e08f8368b0");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-9932a2d67a2277c55a36afd28277ce4b"}, "mark": {"type": "line", "color": "purple"}, "encoding": {"tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "Import TEUs", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Volume [TEUs]"}, "field": "Import TEUs"}}, "height": 400, "title": "Port of New York/New Jersey Import TEUs Container Volume", "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-9932a2d67a2277c55a36afd28277ce4b": [{"dt": "2005-01-01T00:00:00", "Import TEUs": 191242.0}, {"dt": "2005-02-01T00:00:00", "Import TEUs": 179210.0}, {"dt": "2005-03-01T00:00:00", "Import TEUs": 194984.0}, {"dt": "2005-04-01T00:00:00", "Import TEUs": 184573.0}, {"dt": "2005-05-01T00:00:00", "Import TEUs": 211414.0}, {"dt": "2005-06-01T00:00:00", "Import TEUs": 202916.0}, {"dt": "2005-07-01T00:00:00", "Import TEUs": 211764.0}, {"dt": "2005-08-01T00:00:00", "Import TEUs": 199437.0}, {"dt": "2005-09-01T00:00:00", "Import TEUs": 205132.0}, {"dt": "2005-10-01T00:00:00", "Import TEUs": 216593.0}, {"dt": "2005-11-01T00:00:00", "Import TEUs": 213802.0}, {"dt": "2005-12-01T00:00:00", "Import TEUs": 197055.0}, {"dt": "2006-01-01T00:00:00", "Import TEUs": 196328.5}, {"dt": "2006-02-01T00:00:00", "Import TEUs": 177956.5}, {"dt": "2006-03-01T00:00:00", "Import TEUs": 203648.5}, {"dt": "2006-04-01T00:00:00", "Import TEUs": 219230.5}, {"dt": "2006-05-01T00:00:00", "Import TEUs": 215877.0}, {"dt": "2006-06-01T00:00:00", "Import TEUs": 226168.5}, {"dt": "2006-07-01T00:00:00", "Import TEUs": 222998.0}, {"dt": "2006-08-01T00:00:00", "Import TEUs": 226110.0}, {"dt": "2006-09-01T00:00:00", "Import TEUs": 217306.0}, {"dt": "2006-10-01T00:00:00", "Import TEUs": 228202.0}, {"dt": "2006-11-01T00:00:00", "Import TEUs": 212153.0}, {"dt": "2006-12-01T00:00:00", "Import TEUs": 208295.0}, {"dt": "2007-01-01T00:00:00", "Import TEUs": 190233.0}, {"dt": "2007-02-01T00:00:00", "Import TEUs": 192377.0}, {"dt": "2007-03-01T00:00:00", "Import TEUs": 233233.0}, {"dt": "2007-04-01T00:00:00", "Import TEUs": 190907.0}, {"dt": "2007-05-01T00:00:00", "Import TEUs": 218807.0}, {"dt": "2007-06-01T00:00:00", "Import TEUs": 235998.0}, {"dt": "2007-07-01T00:00:00", "Import TEUs": 230276.0}, {"dt": "2007-08-01T00:00:00", "Import TEUs": 245535.0}, {"dt": "2007-09-01T00:00:00", "Import TEUs": 235112.0}, {"dt": "2007-10-01T00:00:00", "Import TEUs": 224795.0}, {"dt": "2007-11-01T00:00:00", "Import TEUs": 213170.0}, {"dt": "2007-12-01T00:00:00", "Import TEUs": 209149.0}, {"dt": "2008-01-01T00:00:00", "Import TEUs": 199718.0}, {"dt": "2008-02-01T00:00:00", "Import TEUs": 194440.0}, {"dt": "2008-03-01T00:00:00", "Import TEUs": 203279.0}, {"dt": "2008-04-01T00:00:00", "Import TEUs": 202462.0}, {"dt": "2008-05-01T00:00:00", "Import TEUs": 210660.0}, {"dt": "2008-06-01T00:00:00", "Import TEUs": 221509.0}, {"dt": "2008-07-01T00:00:00", "Import TEUs": 229149.0}, {"dt": "2008-08-01T00:00:00", "Import TEUs": 227739.0}, {"dt": "2008-09-01T00:00:00", "Import TEUs": 238844.0}, {"dt": "2008-10-01T00:00:00", "Import TEUs": 230338.0}, {"dt": "2008-11-01T00:00:00", "Import TEUs": 204080.0}, {"dt": "2008-12-01T00:00:00", "Import TEUs": 186756.0}, {"dt": "2009-01-01T00:00:00", "Import TEUs": 176449.0}, {"dt": "2009-02-01T00:00:00", "Import TEUs": 169909.0}, {"dt": "2009-03-01T00:00:00", "Import TEUs": 167592.0}, {"dt": "2009-04-01T00:00:00", "Import TEUs": 170899.0}, {"dt": "2009-05-01T00:00:00", "Import TEUs": 182403.0}, {"dt": "2009-06-01T00:00:00", "Import TEUs": 186985.0}, {"dt": "2009-07-01T00:00:00", "Import TEUs": 207066.0}, {"dt": "2009-08-01T00:00:00", "Import TEUs": 209693.0}, {"dt": "2009-09-01T00:00:00", "Import TEUs": 203622.0}, {"dt": "2009-10-01T00:00:00", "Import TEUs": 206034.0}, {"dt": "2009-11-01T00:00:00", "Import TEUs": 191549.0}, {"dt": "2009-12-01T00:00:00", "Import TEUs": 172834.0}, {"dt": "2010-01-01T00:00:00", "Import TEUs": 185797.0}, {"dt": "2010-02-01T00:00:00", "Import TEUs": 173911.0}, {"dt": "2010-03-01T00:00:00", "Import TEUs": 204311.0}, {"dt": "2010-04-01T00:00:00", "Import TEUs": 197723.0}, {"dt": "2010-05-01T00:00:00", "Import TEUs": 222840.0}, {"dt": "2010-06-01T00:00:00", "Import TEUs": 222671.0}, {"dt": "2010-07-01T00:00:00", "Import TEUs": 251199.0}, {"dt": "2010-08-01T00:00:00", "Import TEUs": 244559.0}, {"dt": "2010-09-01T00:00:00", "Import TEUs": 225947.0}, {"dt": "2010-10-01T00:00:00", "Import TEUs": 232438.0}, {"dt": "2010-11-01T00:00:00", "Import TEUs": 214830.0}, {"dt": "2010-12-01T00:00:00", "Import TEUs": 202868.0}, {"dt": "2011-01-01T00:00:00", "Import TEUs": 219680.5}, {"dt": "2011-02-01T00:00:00", "Import TEUs": 209735.5}, {"dt": "2011-03-01T00:00:00", "Import TEUs": 211585.5}, {"dt": "2011-04-01T00:00:00", "Import TEUs": 220590.5}, {"dt": "2011-05-01T00:00:00", "Import TEUs": 234126.0}, {"dt": "2011-06-01T00:00:00", "Import TEUs": 225197.5}, {"dt": "2011-07-01T00:00:00", "Import TEUs": 239558.5}, {"dt": "2011-08-01T00:00:00", "Import TEUs": 246511.5}, {"dt": "2011-09-01T00:00:00", "Import TEUs": 245655.0}, {"dt": "2011-10-01T00:00:00", "Import TEUs": 226693.0}, {"dt": "2011-11-01T00:00:00", "Import TEUs": 230595.0}, {"dt": "2011-12-01T00:00:00", "Import TEUs": 214969.0}, {"dt": "2012-01-01T00:00:00", "Import TEUs": 233956.0}, {"dt": "2012-02-01T00:00:00", "Import TEUs": 228386.0}, {"dt": "2012-03-01T00:00:00", "Import TEUs": 217105.0}, {"dt": "2012-04-01T00:00:00", "Import TEUs": 230148.0}, {"dt": "2012-05-01T00:00:00", "Import TEUs": 246310.0}, {"dt": "2012-06-01T00:00:00", "Import TEUs": 244428.0}, {"dt": "2012-07-01T00:00:00", "Import TEUs": 261284.0}, {"dt": "2012-08-01T00:00:00", "Import TEUs": 261909.0}, {"dt": "2012-09-01T00:00:00", "Import TEUs": 242199.0}, {"dt": "2012-10-01T00:00:00", "Import TEUs": 202616.0}, {"dt": "2012-11-01T00:00:00", "Import TEUs": 229363.0}, {"dt": "2012-12-01T00:00:00", "Import TEUs": 220102.0}, {"dt": "2013-01-01T00:00:00", "Import TEUs": 220326.0}, {"dt": "2013-02-01T00:00:00", "Import TEUs": 206492.0}, {"dt": "2013-03-01T00:00:00", "Import TEUs": 218430.0}, {"dt": "2013-04-01T00:00:00", "Import TEUs": 219295.0}, {"dt": "2013-05-01T00:00:00", "Import TEUs": 247274.0}, {"dt": "2013-06-01T00:00:00", "Import TEUs": 231570.0}, {"dt": "2013-07-01T00:00:00", "Import TEUs": 253551.0}, {"dt": "2013-08-01T00:00:00", "Import TEUs": 266498.0}, {"dt": "2013-09-01T00:00:00", "Import TEUs": 237845.0}, {"dt": "2013-10-01T00:00:00", "Import TEUs": 258701.0}, {"dt": "2013-11-01T00:00:00", "Import TEUs": 213476.0}, {"dt": "2013-12-01T00:00:00", "Import TEUs": 230543.0}, {"dt": "2014-01-01T00:00:00", "Import TEUs": 234133.0}, {"dt": "2014-02-01T00:00:00", "Import TEUs": 208529.0}, {"dt": "2014-03-01T00:00:00", "Import TEUs": 235462.0}, {"dt": "2014-04-01T00:00:00", "Import TEUs": 231188.0}, {"dt": "2014-05-01T00:00:00", "Import TEUs": 250741.0}, {"dt": "2014-06-01T00:00:00", "Import TEUs": 243714.0}, {"dt": "2014-07-01T00:00:00", "Import TEUs": 269961.0}, {"dt": "2014-08-01T00:00:00", "Import TEUs": 271429.0}, {"dt": "2014-09-01T00:00:00", "Import TEUs": 253846.0}, {"dt": "2014-10-01T00:00:00", "Import TEUs": 275238.0}, {"dt": "2014-11-01T00:00:00", "Import TEUs": 242430.0}, {"dt": "2014-12-01T00:00:00", "Import TEUs": 252965.0}, {"dt": "2015-01-01T00:00:00", "Import TEUs": 237739.0}, {"dt": "2015-02-01T00:00:00", "Import TEUs": 241394.0}, {"dt": "2015-03-01T00:00:00", "Import TEUs": 288749.0}, {"dt": "2015-04-01T00:00:00", "Import TEUs": 252633.0}, {"dt": "2015-05-01T00:00:00", "Import TEUs": 284632.0}, {"dt": "2015-06-01T00:00:00", "Import TEUs": 281099.0}, {"dt": "2015-07-01T00:00:00", "Import TEUs": 298333.0}, {"dt": "2015-08-01T00:00:00", "Import TEUs": 287790.0}, {"dt": "2015-09-01T00:00:00", "Import TEUs": 288104.0}, {"dt": "2015-10-01T00:00:00", "Import TEUs": 271248.0}, {"dt": "2015-11-01T00:00:00", "Import TEUs": 250702.0}, {"dt": "2015-12-01T00:00:00", "Import TEUs": 255181.0}, {"dt": "2016-01-01T00:00:00", "Import TEUs": 249510.0}, {"dt": "2016-02-01T00:00:00", "Import TEUs": 261146.0}, {"dt": "2016-03-01T00:00:00", "Import TEUs": 255114.0}, {"dt": "2016-04-01T00:00:00", "Import TEUs": 247136.0}, {"dt": "2016-05-01T00:00:00", "Import TEUs": 270986.0}, {"dt": "2016-06-01T00:00:00", "Import TEUs": 273154.0}, {"dt": "2016-07-01T00:00:00", "Import TEUs": 276778.0}, {"dt": "2016-08-01T00:00:00", "Import TEUs": 306200.0}, {"dt": "2016-09-01T00:00:00", "Import TEUs": 256330.0}, {"dt": "2016-10-01T00:00:00", "Import TEUs": 291038.0}, {"dt": "2016-11-01T00:00:00", "Import TEUs": 274088.0}, {"dt": "2016-12-01T00:00:00", "Import TEUs": 267405.0}, {"dt": "2017-01-01T00:00:00", "Import TEUs": 262484.0}, {"dt": "2017-02-01T00:00:00", "Import TEUs": 264134.0}, {"dt": "2017-03-01T00:00:00", "Import TEUs": 251335.0}, {"dt": "2017-04-01T00:00:00", "Import TEUs": 281356.0}, {"dt": "2017-05-01T00:00:00", "Import TEUs": 285674.0}, {"dt": "2017-06-01T00:00:00", "Import TEUs": 296902.0}, {"dt": "2017-07-01T00:00:00", "Import TEUs": 293233.0}, {"dt": "2017-08-01T00:00:00", "Import TEUs": 322437.0}, {"dt": "2017-09-01T00:00:00", "Import TEUs": 289305.0}, {"dt": "2017-10-01T00:00:00", "Import TEUs": 307357.0}, {"dt": "2017-11-01T00:00:00", "Import TEUs": 287223.0}, {"dt": "2017-12-01T00:00:00", "Import TEUs": 275520.0}, {"dt": "2018-01-01T00:00:00", "Import TEUs": 310901.0}, {"dt": "2018-02-01T00:00:00", "Import TEUs": 275459.0}, {"dt": "2018-03-01T00:00:00", "Import TEUs": 290033.0}, {"dt": "2018-04-01T00:00:00", "Import TEUs": 273610.0}, {"dt": "2018-05-01T00:00:00", "Import TEUs": 303541.0}, {"dt": "2018-06-01T00:00:00", "Import TEUs": 312052.0}, {"dt": "2018-07-01T00:00:00", "Import TEUs": 323551.0}, {"dt": "2018-08-01T00:00:00", "Import TEUs": 335116.0}, {"dt": "2018-09-01T00:00:00", "Import TEUs": 305443.0}, {"dt": "2018-10-01T00:00:00", "Import TEUs": 340899.0}, {"dt": "2018-11-01T00:00:00", "Import TEUs": 303881.0}, {"dt": "2018-12-01T00:00:00", "Import TEUs": 318426.0}, {"dt": "2019-01-01T00:00:00", "Import TEUs": 334656.5}, {"dt": "2019-02-01T00:00:00", "Import TEUs": 307043.5}, {"dt": "2019-03-01T00:00:00", "Import TEUs": 314378.0}, {"dt": "2019-04-01T00:00:00", "Import TEUs": 319051.5}, {"dt": "2019-05-01T00:00:00", "Import TEUs": 322626.0}, {"dt": "2019-06-01T00:00:00", "Import TEUs": 322626.0}, {"dt": "2019-07-01T00:00:00", "Import TEUs": 319051.5}, {"dt": "2019-08-01T00:00:00", "Import TEUs": 314378.0}, {"dt": "2019-09-01T00:00:00", "Import TEUs": 307043.5}, {"dt": "2019-10-01T00:00:00", "Import TEUs": 334656.5}, {"dt": "2019-11-01T00:00:00", "Import TEUs": 302460.0}, {"dt": "2019-12-01T00:00:00", "Import TEUs": 290508.0}, {"dt": "2020-01-01T00:00:00", "Import TEUs": 405415.0}, {"dt": "2020-02-01T00:00:00", "Import TEUs": 376756.0}, {"dt": "2020-03-01T00:00:00", "Import TEUs": 368868.0}, {"dt": "2020-04-01T00:00:00", "Import TEUs": 328864.0}, {"dt": "2020-05-01T00:00:00", "Import TEUs": 266836.0}, {"dt": "2020-06-01T00:00:00", "Import TEUs": 267008.0}, {"dt": "2020-07-01T00:00:00", "Import TEUs": 285363.0}, {"dt": "2020-08-01T00:00:00", "Import TEUs": 273348.0}, {"dt": "2020-09-01T00:00:00", "Import TEUs": 301759.0}, {"dt": "2020-10-01T00:00:00", "Import TEUs": 324644.0}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doYoyChart</span><span class="p">(</span><span class="n">df_nynj</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(),</span> <span class="n">location</span><span class="o">=</span><span class="s2">&quot;New York/New Jersey&quot;</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s2">&quot;Import TEUs&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[15]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-193ba540afce42c09d2243115da8283b"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-193ba540afce42c09d2243115da8283b") {
      outputDiv = document.getElementById("altair-viz-193ba540afce42c09d2243115da8283b");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-a62c8a639fa3174f4570e8572377b31a"}, "mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['nolarge'] < 0"}, "value": "royalblue"}, "tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "nolarge", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Year-over-Year Volume Growth [%]"}, "field": "nolarge"}}, "height": 400, "title": "Port of New York/New Jersey Import TEUs Container Volume Growth", "transform": [{"calculate": "datum['Import TEUs'] > 400 ? NaN : datum['Import TEUs']", "as": "nolarge"}], "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-a62c8a639fa3174f4570e8572377b31a": [{"dt": "2005-01-01T00:00:00", "Import TEUs": null}, {"dt": "2005-02-01T00:00:00", "Import TEUs": null}, {"dt": "2005-03-01T00:00:00", "Import TEUs": null}, {"dt": "2005-04-01T00:00:00", "Import TEUs": null}, {"dt": "2005-05-01T00:00:00", "Import TEUs": null}, {"dt": "2005-06-01T00:00:00", "Import TEUs": null}, {"dt": "2005-07-01T00:00:00", "Import TEUs": null}, {"dt": "2005-08-01T00:00:00", "Import TEUs": null}, {"dt": "2005-09-01T00:00:00", "Import TEUs": null}, {"dt": "2005-10-01T00:00:00", "Import TEUs": null}, {"dt": "2005-11-01T00:00:00", "Import TEUs": null}, {"dt": "2005-12-01T00:00:00", "Import TEUs": null}, {"dt": "2006-01-01T00:00:00", "Import TEUs": 2.6597190993610242}, {"dt": "2006-02-01T00:00:00", "Import TEUs": -0.6994587355616311}, {"dt": "2006-03-01T00:00:00", "Import TEUs": 4.443697944446723}, {"dt": "2006-04-01T00:00:00", "Import TEUs": 18.77712341458393}, {"dt": "2006-05-01T00:00:00", "Import TEUs": 2.1110238678611726}, {"dt": "2006-06-01T00:00:00", "Import TEUs": 11.459175225216356}, {"dt": "2006-07-01T00:00:00", "Import TEUs": 5.304962127651547}, {"dt": "2006-08-01T00:00:00", "Import TEUs": 13.374148227259731}, {"dt": "2006-09-01T00:00:00", "Import TEUs": 5.934715207768648}, {"dt": "2006-10-01T00:00:00", "Import TEUs": 5.359822339595466}, {"dt": "2006-11-01T00:00:00", "Import TEUs": -0.7712743566477442}, {"dt": "2006-12-01T00:00:00", "Import TEUs": 5.703991271472431}, {"dt": "2007-01-01T00:00:00", "Import TEUs": -3.1047453630012933}, {"dt": "2007-02-01T00:00:00", "Import TEUs": 8.103384815952207}, {"dt": "2007-03-01T00:00:00", "Import TEUs": 14.527236881194794}, {"dt": "2007-04-01T00:00:00", "Import TEUs": -12.919507094131522}, {"dt": "2007-05-01T00:00:00", "Import TEUs": 1.3572543624378763}, {"dt": "2007-06-01T00:00:00", "Import TEUs": 4.346095941742556}, {"dt": "2007-07-01T00:00:00", "Import TEUs": 3.2637064009542582}, {"dt": "2007-08-01T00:00:00", "Import TEUs": 8.59095130688603}, {"dt": "2007-09-01T00:00:00", "Import TEUs": 8.19397531591397}, {"dt": "2007-10-01T00:00:00", "Import TEUs": -1.4929755216869234}, {"dt": "2007-11-01T00:00:00", "Import TEUs": 0.4793710199714418}, {"dt": "2007-12-01T00:00:00", "Import TEUs": 0.40999543916080405}, {"dt": "2008-01-01T00:00:00", "Import TEUs": 4.985990863835399}, {"dt": "2008-02-01T00:00:00", "Import TEUs": 1.0723735165846238}, {"dt": "2008-03-01T00:00:00", "Import TEUs": -12.842951040375938}, {"dt": "2008-04-01T00:00:00", "Import TEUs": 6.05268533893466}, {"dt": "2008-05-01T00:00:00", "Import TEUs": -3.7233726526116673}, {"dt": "2008-06-01T00:00:00", "Import TEUs": -6.139458808972953}, {"dt": "2008-07-01T00:00:00", "Import TEUs": -0.48941270475429954}, {"dt": "2008-08-01T00:00:00", "Import TEUs": -7.247846539189928}, {"dt": "2008-09-01T00:00:00", "Import TEUs": 1.5873285923304614}, {"dt": "2008-10-01T00:00:00", "Import TEUs": 2.4658021753152903}, {"dt": "2008-11-01T00:00:00", "Import TEUs": -4.2642022798705215}, {"dt": "2008-12-01T00:00:00", "Import TEUs": -10.706721045761636}, {"dt": "2009-01-01T00:00:00", "Import TEUs": -11.650927808209577}, {"dt": "2009-02-01T00:00:00", "Import TEUs": -12.616231228142361}, {"dt": "2009-03-01T00:00:00", "Import TEUs": -17.55567471307907}, {"dt": "2009-04-01T00:00:00", "Import TEUs": -15.589592120990602}, {"dt": "2009-05-01T00:00:00", "Import TEUs": -13.413557391056674}, {"dt": "2009-06-01T00:00:00", "Import TEUs": -15.58582269794907}, {"dt": "2009-07-01T00:00:00", "Import TEUs": -9.636961103910558}, {"dt": "2009-08-01T00:00:00", "Import TEUs": -7.923983156156833}, {"dt": "2009-09-01T00:00:00", "Import TEUs": -14.746864061898146}, {"dt": "2009-10-01T00:00:00", "Import TEUs": -10.551450477124924}, {"dt": "2009-11-01T00:00:00", "Import TEUs": -6.1402391219129715}, {"dt": "2009-12-01T00:00:00", "Import TEUs": -7.454646704791279}, {"dt": "2010-01-01T00:00:00", "Import TEUs": 5.297848103417979}, {"dt": "2010-02-01T00:00:00", "Import TEUs": 2.355378467297209}, {"dt": "2010-03-01T00:00:00", "Import TEUs": 21.90975702897513}, {"dt": "2010-04-01T00:00:00", "Import TEUs": 15.695820338328481}, {"dt": "2010-05-01T00:00:00", "Import TEUs": 22.169043272314592}, {"dt": "2010-06-01T00:00:00", "Import TEUs": 19.084953338503084}, {"dt": "2010-07-01T00:00:00", "Import TEUs": 21.313494248210716}, {"dt": "2010-08-01T00:00:00", "Import TEUs": 16.627164473778343}, {"dt": "2010-09-01T00:00:00", "Import TEUs": 10.963942992407505}, {"dt": "2010-10-01T00:00:00", "Import TEUs": 12.815360571556145}, {"dt": "2010-11-01T00:00:00", "Import TEUs": 12.15407023790258}, {"dt": "2010-12-01T00:00:00", "Import TEUs": 17.377367879005277}, {"dt": "2011-01-01T00:00:00", "Import TEUs": 18.23683913087939}, {"dt": "2011-02-01T00:00:00", "Import TEUs": 20.599329542122113}, {"dt": "2011-03-01T00:00:00", "Import TEUs": 3.560503350284616}, {"dt": "2011-04-01T00:00:00", "Import TEUs": 11.565422333264209}, {"dt": "2011-05-01T00:00:00", "Import TEUs": 5.064620355411953}, {"dt": "2011-06-01T00:00:00", "Import TEUs": 1.1346336074298025}, {"dt": "2011-07-01T00:00:00", "Import TEUs": -4.633975453723938}, {"dt": "2011-08-01T00:00:00", "Import TEUs": 0.7983758520438755}, {"dt": "2011-09-01T00:00:00", "Import TEUs": 8.722399500767875}, {"dt": "2011-10-01T00:00:00", "Import TEUs": -2.4716268424267995}, {"dt": "2011-11-01T00:00:00", "Import TEUs": 7.338360564167012}, {"dt": "2011-12-01T00:00:00", "Import TEUs": 5.96496243863005}, {"dt": "2012-01-01T00:00:00", "Import TEUs": 6.498300941594715}, {"dt": "2012-02-01T00:00:00", "Import TEUs": 8.892390653942694}, {"dt": "2012-03-01T00:00:00", "Import TEUs": 2.6086381155608462}, {"dt": "2012-04-01T00:00:00", "Import TEUs": 4.332688851061128}, {"dt": "2012-05-01T00:00:00", "Import TEUs": 5.204035433911658}, {"dt": "2012-06-01T00:00:00", "Import TEUs": 8.539393199302836}, {"dt": "2012-07-01T00:00:00", "Import TEUs": 9.068974801562035}, {"dt": "2012-08-01T00:00:00", "Import TEUs": 6.2461589013088625}, {"dt": "2012-09-01T00:00:00", "Import TEUs": -1.4068510716248372}, {"dt": "2012-10-01T00:00:00", "Import TEUs": -10.62097197531463}, {"dt": "2012-11-01T00:00:00", "Import TEUs": -0.53427004054728}, {"dt": "2012-12-01T00:00:00", "Import TEUs": 2.3877861459094207}, {"dt": "2013-01-01T00:00:00", "Import TEUs": -5.825881789738241}, {"dt": "2013-02-01T00:00:00", "Import TEUs": -9.586401968597025}, {"dt": "2013-03-01T00:00:00", "Import TEUs": 0.6103037700651681}, {"dt": "2013-04-01T00:00:00", "Import TEUs": -4.715661226688916}, {"dt": "2013-05-01T00:00:00", "Import TEUs": 0.39137672039299964}, {"dt": "2013-06-01T00:00:00", "Import TEUs": -5.260444793558838}, {"dt": "2013-07-01T00:00:00", "Import TEUs": -2.959614825247625}, {"dt": "2013-08-01T00:00:00", "Import TEUs": 1.7521352836290527}, {"dt": "2013-09-01T00:00:00", "Import TEUs": -1.7976952836304072}, {"dt": "2013-10-01T00:00:00", "Import TEUs": 27.680439846803818}, {"dt": "2013-11-01T00:00:00", "Import TEUs": -6.9265749052811465}, {"dt": "2013-12-01T00:00:00", "Import TEUs": 4.743709734577606}, {"dt": "2014-01-01T00:00:00", "Import TEUs": 6.2666230948685175}, {"dt": "2014-02-01T00:00:00", "Import TEUs": 0.9864788950661563}, {"dt": "2014-03-01T00:00:00", "Import TEUs": 7.797463718353703}, {"dt": "2014-04-01T00:00:00", "Import TEUs": 5.423288264666315}, {"dt": "2014-05-01T00:00:00", "Import TEUs": 1.40208837160396}, {"dt": "2014-06-01T00:00:00", "Import TEUs": 5.244202616919291}, {"dt": "2014-07-01T00:00:00", "Import TEUs": 6.472070707668287}, {"dt": "2014-08-01T00:00:00", "Import TEUs": 1.850295311784711}, {"dt": "2014-09-01T00:00:00", "Import TEUs": 6.727490592612839}, {"dt": "2014-10-01T00:00:00", "Import TEUs": 6.392321637720766}, {"dt": "2014-11-01T00:00:00", "Import TEUs": 13.563117165395644}, {"dt": "2014-12-01T00:00:00", "Import TEUs": 9.725734461683944}, {"dt": "2015-01-01T00:00:00", "Import TEUs": 1.5401502564781566}, {"dt": "2015-02-01T00:00:00", "Import TEUs": 15.760397834353967}, {"dt": "2015-03-01T00:00:00", "Import TEUs": 22.630827904290296}, {"dt": "2015-04-01T00:00:00", "Import TEUs": 9.276000484454205}, {"dt": "2015-05-01T00:00:00", "Import TEUs": 13.51633757542643}, {"dt": "2015-06-01T00:00:00", "Import TEUs": 15.339701453342848}, {"dt": "2015-07-01T00:00:00", "Import TEUs": 10.5096662110453}, {"dt": "2015-08-01T00:00:00", "Import TEUs": 6.0277273246410745}, {"dt": "2015-09-01T00:00:00", "Import TEUs": 13.495583936717548}, {"dt": "2015-10-01T00:00:00", "Import TEUs": -1.449654480849305}, {"dt": "2015-11-01T00:00:00", "Import TEUs": 3.4121189621746373}, {"dt": "2015-12-01T00:00:00", "Import TEUs": 0.8760105152886721}, {"dt": "2016-01-01T00:00:00", "Import TEUs": 4.951228027374555}, {"dt": "2016-02-01T00:00:00", "Import TEUs": 8.182473466614738}, {"dt": "2016-03-01T00:00:00", "Import TEUs": -11.648525189697622}, {"dt": "2016-04-01T00:00:00", "Import TEUs": -2.175883593988115}, {"dt": "2016-05-01T00:00:00", "Import TEUs": -4.794260659377725}, {"dt": "2016-06-01T00:00:00", "Import TEUs": -2.826406355056399}, {"dt": "2016-07-01T00:00:00", "Import TEUs": -7.225147737595239}, {"dt": "2016-08-01T00:00:00", "Import TEUs": 6.397025608950968}, {"dt": "2016-09-01T00:00:00", "Import TEUs": -11.028656318551633}, {"dt": "2016-10-01T00:00:00", "Import TEUs": 7.2959063292632464}, {"dt": "2016-11-01T00:00:00", "Import TEUs": 9.328206396438809}, {"dt": "2016-12-01T00:00:00", "Import TEUs": 4.790325298513598}, {"dt": "2017-01-01T00:00:00", "Import TEUs": 5.199791591519376}, {"dt": "2017-02-01T00:00:00", "Import TEUs": 1.1441875426006831}, {"dt": "2017-03-01T00:00:00", "Import TEUs": -1.4812985567236647}, {"dt": "2017-04-01T00:00:00", "Import TEUs": 13.846626958435838}, {"dt": "2017-05-01T00:00:00", "Import TEUs": 5.420206209914902}, {"dt": "2017-06-01T00:00:00", "Import TEUs": 8.693996793017856}, {"dt": "2017-07-01T00:00:00", "Import TEUs": 5.945197956484982}, {"dt": "2017-08-01T00:00:00", "Import TEUs": 5.3027433050294}, {"dt": "2017-09-01T00:00:00", "Import TEUs": 12.86427651855031}, {"dt": "2017-10-01T00:00:00", "Import TEUs": 5.607171572097114}, {"dt": "2017-11-01T00:00:00", "Import TEUs": 4.792256501561543}, {"dt": "2017-12-01T00:00:00", "Import TEUs": 3.03472261176867}, {"dt": "2018-01-01T00:00:00", "Import TEUs": 18.44569573764496}, {"dt": "2018-02-01T00:00:00", "Import TEUs": 4.287596447257824}, {"dt": "2018-03-01T00:00:00", "Import TEUs": 15.396980126126492}, {"dt": "2018-04-01T00:00:00", "Import TEUs": -2.7530957221456043}, {"dt": "2018-05-01T00:00:00", "Import TEUs": 6.2543318607923615}, {"dt": "2018-06-01T00:00:00", "Import TEUs": 5.102693818162218}, {"dt": "2018-07-01T00:00:00", "Import TEUs": 10.339218300805154}, {"dt": "2018-08-01T00:00:00", "Import TEUs": 3.932241026929284}, {"dt": "2018-09-01T00:00:00", "Import TEUs": 5.578196021499804}, {"dt": "2018-10-01T00:00:00", "Import TEUs": 10.91304248805136}, {"dt": "2018-11-01T00:00:00", "Import TEUs": 5.799674817128153}, {"dt": "2018-12-01T00:00:00", "Import TEUs": 15.572735191637621}, {"dt": "2019-01-01T00:00:00", "Import TEUs": 7.64085673574546}, {"dt": "2019-02-01T00:00:00", "Import TEUs": 11.466134706072406}, {"dt": "2019-03-01T00:00:00", "Import TEUs": 8.393872421414116}, {"dt": "2019-04-01T00:00:00", "Import TEUs": 16.608128357881657}, {"dt": "2019-05-01T00:00:00", "Import TEUs": 6.287453754188066}, {"dt": "2019-06-01T00:00:00", "Import TEUs": 3.388537807801262}, {"dt": "2019-07-01T00:00:00", "Import TEUs": -1.3906617503886554}, {"dt": "2019-08-01T00:00:00", "Import TEUs": -6.188304945153322}, {"dt": "2019-09-01T00:00:00", "Import TEUs": 0.523993019974256}, {"dt": "2019-10-01T00:00:00", "Import TEUs": -1.8311875364844132}, {"dt": "2019-11-01T00:00:00", "Import TEUs": -0.46761725807141774}, {"dt": "2019-12-01T00:00:00", "Import TEUs": -8.767500141320117}, {"dt": "2020-01-01T00:00:00", "Import TEUs": 21.14362039882687}, {"dt": "2020-02-01T00:00:00", "Import TEUs": 22.704437644828836}, {"dt": "2020-03-01T00:00:00", "Import TEUs": 17.332637779997317}, {"dt": "2020-04-01T00:00:00", "Import TEUs": 3.075522290288557}, {"dt": "2020-05-01T00:00:00", "Import TEUs": -17.29246867890375}, {"dt": "2020-06-01T00:00:00", "Import TEUs": -17.239156174641845}, {"dt": "2020-07-01T00:00:00", "Import TEUs": -10.558953648548897}, {"dt": "2020-08-01T00:00:00", "Import TEUs": -13.051167702574606}, {"dt": "2020-09-01T00:00:00", "Import TEUs": -1.7210916368527562}, {"dt": "2020-10-01T00:00:00", "Import TEUs": -2.9918737571211107}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doYoyChart</span><span class="p">(</span><span class="n">df_nynj</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(),</span> <span class="n">location</span><span class="o">=</span><span class="s2">&quot;New York/New Jersey&quot;</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s2">&quot;Export TEUs&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[16]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-08b69a2210c0421395ed3423796b4a80"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-08b69a2210c0421395ed3423796b4a80") {
      outputDiv = document.getElementById("altair-viz-08b69a2210c0421395ed3423796b4a80");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-6499e2a8044599b89b1885171539e73a"}, "mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['nolarge'] < 0"}, "value": "royalblue"}, "tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "nolarge", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Year-over-Year Volume Growth [%]"}, "field": "nolarge"}}, "height": 400, "title": "Port of New York/New Jersey Export TEUs Container Volume Growth", "transform": [{"calculate": "datum['Export TEUs'] > 400 ? NaN : datum['Export TEUs']", "as": "nolarge"}], "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-6499e2a8044599b89b1885171539e73a": [{"dt": "2005-01-01T00:00:00", "Export TEUs": null}, {"dt": "2005-02-01T00:00:00", "Export TEUs": null}, {"dt": "2005-03-01T00:00:00", "Export TEUs": null}, {"dt": "2005-04-01T00:00:00", "Export TEUs": null}, {"dt": "2005-05-01T00:00:00", "Export TEUs": null}, {"dt": "2005-06-01T00:00:00", "Export TEUs": null}, {"dt": "2005-07-01T00:00:00", "Export TEUs": null}, {"dt": "2005-08-01T00:00:00", "Export TEUs": null}, {"dt": "2005-09-01T00:00:00", "Export TEUs": null}, {"dt": "2005-10-01T00:00:00", "Export TEUs": null}, {"dt": "2005-11-01T00:00:00", "Export TEUs": null}, {"dt": "2005-12-01T00:00:00", "Export TEUs": null}, {"dt": "2006-01-01T00:00:00", "Export TEUs": 11.961978067239865}, {"dt": "2006-02-01T00:00:00", "Export TEUs": 13.33756191041715}, {"dt": "2006-03-01T00:00:00", "Export TEUs": 21.232293612694207}, {"dt": "2006-04-01T00:00:00", "Export TEUs": 7.89006376624426}, {"dt": "2006-05-01T00:00:00", "Export TEUs": 13.342006360219717}, {"dt": "2006-06-01T00:00:00", "Export TEUs": 26.572311434315353}, {"dt": "2006-07-01T00:00:00", "Export TEUs": 13.096955618046223}, {"dt": "2006-08-01T00:00:00", "Export TEUs": 26.544421095273062}, {"dt": "2006-09-01T00:00:00", "Export TEUs": 28.383248175652188}, {"dt": "2006-10-01T00:00:00", "Export TEUs": 24.995233555767406}, {"dt": "2006-11-01T00:00:00", "Export TEUs": 21.325991087714446}, {"dt": "2006-12-01T00:00:00", "Export TEUs": 34.728697927915334}, {"dt": "2007-01-01T00:00:00", "Export TEUs": 21.067304320835078}, {"dt": "2007-02-01T00:00:00", "Export TEUs": 18.745683598866414}, {"dt": "2007-03-01T00:00:00", "Export TEUs": 25.87997776282296}, {"dt": "2007-04-01T00:00:00", "Export TEUs": 20.29433925966302}, {"dt": "2007-05-01T00:00:00", "Export TEUs": 29.627343451090415}, {"dt": "2007-06-01T00:00:00", "Export TEUs": 27.709827490698036}, {"dt": "2007-07-01T00:00:00", "Export TEUs": 24.94432552809669}, {"dt": "2007-08-01T00:00:00", "Export TEUs": 28.847317744154054}, {"dt": "2007-09-01T00:00:00", "Export TEUs": 29.76617127390291}, {"dt": "2007-10-01T00:00:00", "Export TEUs": 26.650205918242833}, {"dt": "2007-11-01T00:00:00", "Export TEUs": 25.554022551025255}, {"dt": "2007-12-01T00:00:00", "Export TEUs": 27.598562928457593}, {"dt": "2008-01-01T00:00:00", "Export TEUs": 16.81685673861231}, {"dt": "2008-02-01T00:00:00", "Export TEUs": 30.6462772624718}, {"dt": "2008-03-01T00:00:00", "Export TEUs": 12.786481335130873}, {"dt": "2008-04-01T00:00:00", "Export TEUs": 24.593528439682277}, {"dt": "2008-05-01T00:00:00", "Export TEUs": 14.261202194394373}, {"dt": "2008-06-01T00:00:00", "Export TEUs": 16.91195098919829}, {"dt": "2008-07-01T00:00:00", "Export TEUs": 24.479995846888624}, {"dt": "2008-08-01T00:00:00", "Export TEUs": 9.433303053595132}, {"dt": "2008-09-01T00:00:00", "Export TEUs": 11.270423732086975}, {"dt": "2008-10-01T00:00:00", "Export TEUs": -1.3865157206193413}, {"dt": "2008-11-01T00:00:00", "Export TEUs": -10.348538472614832}, {"dt": "2008-12-01T00:00:00", "Export TEUs": -24.979862101583695}, {"dt": "2009-01-01T00:00:00", "Export TEUs": -21.70930166394356}, {"dt": "2009-02-01T00:00:00", "Export TEUs": -13.089563809129078}, {"dt": "2009-03-01T00:00:00", "Export TEUs": -22.211459857524606}, {"dt": "2009-04-01T00:00:00", "Export TEUs": -21.06107605091454}, {"dt": "2009-05-01T00:00:00", "Export TEUs": -15.511469311841285}, {"dt": "2009-06-01T00:00:00", "Export TEUs": -22.890482381834175}, {"dt": "2009-07-01T00:00:00", "Export TEUs": -20.217698044749042}, {"dt": "2009-08-01T00:00:00", "Export TEUs": -13.707085541578866}, {"dt": "2009-09-01T00:00:00", "Export TEUs": -18.65809461654887}, {"dt": "2009-10-01T00:00:00", "Export TEUs": -2.9784213298323037}, {"dt": "2009-11-01T00:00:00", "Export TEUs": 4.827720294853588}, {"dt": "2009-12-01T00:00:00", "Export TEUs": 13.111362852780385}, {"dt": "2010-01-01T00:00:00", "Export TEUs": 21.227443569989823}, {"dt": "2010-02-01T00:00:00", "Export TEUs": -4.219617955896249}, {"dt": "2010-03-01T00:00:00", "Export TEUs": 13.031191493871198}, {"dt": "2010-04-01T00:00:00", "Export TEUs": 20.102981029810294}, {"dt": "2010-05-01T00:00:00", "Export TEUs": 9.906891041320165}, {"dt": "2010-06-01T00:00:00", "Export TEUs": 7.743534280872377}, {"dt": "2010-07-01T00:00:00", "Export TEUs": 12.085518635326098}, {"dt": "2010-08-01T00:00:00", "Export TEUs": 5.588305420582262}, {"dt": "2010-09-01T00:00:00", "Export TEUs": 0.11010583817001596}, {"dt": "2010-10-01T00:00:00", "Export TEUs": 9.499870188109227}, {"dt": "2010-11-01T00:00:00", "Export TEUs": 8.102768392106906}, {"dt": "2010-12-01T00:00:00", "Export TEUs": 7.327672545177455}, {"dt": "2011-01-01T00:00:00", "Export TEUs": 47.18865355133224}, {"dt": "2011-02-01T00:00:00", "Export TEUs": 48.74325757226499}, {"dt": "2011-03-01T00:00:00", "Export TEUs": 52.1860741296331}, {"dt": "2011-04-01T00:00:00", "Export TEUs": 34.54465454217248}, {"dt": "2011-05-01T00:00:00", "Export TEUs": 42.44861019413515}, {"dt": "2011-06-01T00:00:00", "Export TEUs": 40.5299557382232}, {"dt": "2011-07-01T00:00:00", "Export TEUs": 43.62864737979386}, {"dt": "2011-08-01T00:00:00", "Export TEUs": 38.85973245293008}, {"dt": "2011-09-01T00:00:00", "Export TEUs": 65.96441269002209}, {"dt": "2011-10-01T00:00:00", "Export TEUs": 36.36928625828053}, {"dt": "2011-11-01T00:00:00", "Export TEUs": 31.711610905971433}, {"dt": "2011-12-01T00:00:00", "Export TEUs": 44.85349605238602}, {"dt": "2012-01-01T00:00:00", "Export TEUs": 24.944721161902983}, {"dt": "2012-02-01T00:00:00", "Export TEUs": 24.918562232092214}, {"dt": "2012-03-01T00:00:00", "Export TEUs": 15.635620629819403}, {"dt": "2012-04-01T00:00:00", "Export TEUs": 19.423644012130858}, {"dt": "2012-05-01T00:00:00", "Export TEUs": 22.154406978258034}, {"dt": "2012-06-01T00:00:00", "Export TEUs": 29.797495479433177}, {"dt": "2012-07-01T00:00:00", "Export TEUs": 37.183955320807}, {"dt": "2012-08-01T00:00:00", "Export TEUs": 40.84965121234552}, {"dt": "2012-09-01T00:00:00", "Export TEUs": 27.757400158226233}, {"dt": "2012-10-01T00:00:00", "Export TEUs": 11.413239621393934}, {"dt": "2012-11-01T00:00:00", "Export TEUs": 9.256595267492052}, {"dt": "2012-12-01T00:00:00", "Export TEUs": 31.03139214412154}, {"dt": "2013-01-01T00:00:00", "Export TEUs": -3.1128187216206804}, {"dt": "2013-02-01T00:00:00", "Export TEUs": -2.349666034795894}, {"dt": "2013-03-01T00:00:00", "Export TEUs": -2.1692224363129453}, {"dt": "2013-04-01T00:00:00", "Export TEUs": 1.7113861478832426}, {"dt": "2013-05-01T00:00:00", "Export TEUs": -2.3264142014861378}, {"dt": "2013-06-01T00:00:00", "Export TEUs": -10.65006196431202}, {"dt": "2013-07-01T00:00:00", "Export TEUs": -8.758787190229356}, {"dt": "2013-08-01T00:00:00", "Export TEUs": 3.9214905645353904}, {"dt": "2013-09-01T00:00:00", "Export TEUs": -5.611001648638869}, {"dt": "2013-10-01T00:00:00", "Export TEUs": 16.878523058298335}, {"dt": "2013-11-01T00:00:00", "Export TEUs": 8.160281996786068}, {"dt": "2013-12-01T00:00:00", "Export TEUs": -13.340487020759939}, {"dt": "2014-01-01T00:00:00", "Export TEUs": -6.371820939141804}, {"dt": "2014-02-01T00:00:00", "Export TEUs": -8.84375174684805}, {"dt": "2014-03-01T00:00:00", "Export TEUs": 12.94314654468225}, {"dt": "2014-04-01T00:00:00", "Export TEUs": 5.699913477292395}, {"dt": "2014-05-01T00:00:00", "Export TEUs": 6.626947754353796}, {"dt": "2014-06-01T00:00:00", "Export TEUs": 9.982056256062076}, {"dt": "2014-07-01T00:00:00", "Export TEUs": 6.481877807610337}, {"dt": "2014-08-01T00:00:00", "Export TEUs": -1.4856529900777682}, {"dt": "2014-09-01T00:00:00", "Export TEUs": 4.23923045463841}, {"dt": "2014-10-01T00:00:00", "Export TEUs": 3.6042013950703167}, {"dt": "2014-11-01T00:00:00", "Export TEUs": 16.159442516726408}, {"dt": "2014-12-01T00:00:00", "Export TEUs": 14.611236908444214}, {"dt": "2015-01-01T00:00:00", "Export TEUs": 15.646995405190346}, {"dt": "2015-02-01T00:00:00", "Export TEUs": 13.664288103467491}, {"dt": "2015-03-01T00:00:00", "Export TEUs": 8.694254591625583}, {"dt": "2015-04-01T00:00:00", "Export TEUs": 9.740975055405832}, {"dt": "2015-05-01T00:00:00", "Export TEUs": 12.3073522368631}, {"dt": "2015-06-01T00:00:00", "Export TEUs": 24.11600516793586}, {"dt": "2015-07-01T00:00:00", "Export TEUs": 17.98824929045042}, {"dt": "2015-08-01T00:00:00", "Export TEUs": 11.512646217023391}, {"dt": "2015-09-01T00:00:00", "Export TEUs": 15.188792212091373}, {"dt": "2015-10-01T00:00:00", "Export TEUs": 6.781507748062987}, {"dt": "2015-11-01T00:00:00", "Export TEUs": 3.109721127701981}, {"dt": "2015-12-01T00:00:00", "Export TEUs": 5.0442268374045085}, {"dt": "2016-01-01T00:00:00", "Export TEUs": 1.39037480633748}, {"dt": "2016-02-01T00:00:00", "Export TEUs": 17.471099754280473}, {"dt": "2016-03-01T00:00:00", "Export TEUs": -2.8981757019019283}, {"dt": "2016-04-01T00:00:00", "Export TEUs": -3.9144424914994036}, {"dt": "2016-05-01T00:00:00", "Export TEUs": -7.39797127121764}, {"dt": "2016-06-01T00:00:00", "Export TEUs": -8.54537186383112}, {"dt": "2016-07-01T00:00:00", "Export TEUs": -12.019202642944403}, {"dt": "2016-08-01T00:00:00", "Export TEUs": -2.66078944890622}, {"dt": "2016-09-01T00:00:00", "Export TEUs": -14.361437917772445}, {"dt": "2016-10-01T00:00:00", "Export TEUs": -9.280288484396316}, {"dt": "2016-11-01T00:00:00", "Export TEUs": 1.5925988171552552}, {"dt": "2016-12-01T00:00:00", "Export TEUs": 6.836062349412408}, {"dt": "2017-01-01T00:00:00", "Export TEUs": 11.72924100790298}, {"dt": "2017-02-01T00:00:00", "Export TEUs": 1.427479928020614}, {"dt": "2017-03-01T00:00:00", "Export TEUs": -2.1852098600932734}, {"dt": "2017-04-01T00:00:00", "Export TEUs": 9.696294002271078}, {"dt": "2017-05-01T00:00:00", "Export TEUs": 9.964496855098371}, {"dt": "2017-06-01T00:00:00", "Export TEUs": 11.763997498261602}, {"dt": "2017-07-01T00:00:00", "Export TEUs": 10.973601555196577}, {"dt": "2017-08-01T00:00:00", "Export TEUs": 10.690474228576964}, {"dt": "2017-09-01T00:00:00", "Export TEUs": 17.72311848003514}, {"dt": "2017-10-01T00:00:00", "Export TEUs": 13.479726188652474}, {"dt": "2017-11-01T00:00:00", "Export TEUs": 10.008428979935879}, {"dt": "2017-12-01T00:00:00", "Export TEUs": 2.9605679503848847}, {"dt": "2018-01-01T00:00:00", "Export TEUs": 7.750877797981071}, {"dt": "2018-02-01T00:00:00", "Export TEUs": 1.4530815207547843}, {"dt": "2018-03-01T00:00:00", "Export TEUs": 9.966723101173457}, {"dt": "2018-04-01T00:00:00", "Export TEUs": 4.460639094772589}, {"dt": "2018-05-01T00:00:00", "Export TEUs": 3.832084129745361}, {"dt": "2018-06-01T00:00:00", "Export TEUs": 8.901509885159742}, {"dt": "2018-07-01T00:00:00", "Export TEUs": 5.3906398697279645}, {"dt": "2018-08-01T00:00:00", "Export TEUs": 2.4821421057912296}, {"dt": "2018-09-01T00:00:00", "Export TEUs": 4.729142398637354}, {"dt": "2018-10-01T00:00:00", "Export TEUs": 12.902011076730702}, {"dt": "2018-11-01T00:00:00", "Export TEUs": 0.2517042850595841}, {"dt": "2018-12-01T00:00:00", "Export TEUs": 8.388279206991346}, {"dt": "2019-01-01T00:00:00", "Export TEUs": 12.669522808523336}, {"dt": "2019-02-01T00:00:00", "Export TEUs": 20.92939276643053}, {"dt": "2019-03-01T00:00:00", "Export TEUs": 12.536321904984371}, {"dt": "2019-04-01T00:00:00", "Export TEUs": 13.538397229619425}, {"dt": "2019-05-01T00:00:00", "Export TEUs": 5.052502033893624}, {"dt": "2019-06-01T00:00:00", "Export TEUs": -2.73639224547898}, {"dt": "2019-07-01T00:00:00", "Export TEUs": 5.3741037029109595}, {"dt": "2019-08-01T00:00:00", "Export TEUs": 0.4192511274776045}, {"dt": "2019-09-01T00:00:00", "Export TEUs": 0.1525583771014638}, {"dt": "2019-10-01T00:00:00", "Export TEUs": -2.520224411517613}, {"dt": "2019-11-01T00:00:00", "Export TEUs": 6.131093325333303}, {"dt": "2019-12-01T00:00:00", "Export TEUs": 1.124194058371475}, {"dt": "2020-01-01T00:00:00", "Export TEUs": 12.983397326335266}, {"dt": "2020-02-01T00:00:00", "Export TEUs": 15.490278313677464}, {"dt": "2020-03-01T00:00:00", "Export TEUs": 0.48228806136554336}, {"dt": "2020-04-01T00:00:00", "Export TEUs": -11.577487407839993}, {"dt": "2020-05-01T00:00:00", "Export TEUs": -19.77764688316781}, {"dt": "2020-06-01T00:00:00", "Export TEUs": -11.267455425189631}, {"dt": "2020-07-01T00:00:00", "Export TEUs": -12.85749197815137}, {"dt": "2020-08-01T00:00:00", "Export TEUs": -9.58647769319434}, {"dt": "2020-09-01T00:00:00", "Export TEUs": -6.938549547887063}, {"dt": "2020-10-01T00:00:00", "Export TEUs": -5.622830249887423}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doYoyChart</span><span class="p">(</span><span class="n">df_nynj</span><span class="p">[</span><span class="mi">12</span><span class="p">:]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(),</span> <span class="n">location</span><span class="o">=</span><span class="s2">&quot;New York/New Jersey&quot;</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s2">&quot;Total TEUs&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[17]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-acbd47db063644c4a202727caabbaf2a"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-acbd47db063644c4a202727caabbaf2a") {
      outputDiv = document.getElementById("altair-viz-acbd47db063644c4a202727caabbaf2a");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-1ea77455d88adcb6204e4f60fa7d2aaa"}, "mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['nolarge'] < 0"}, "value": "royalblue"}, "tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "nolarge", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Year-over-Year Volume Growth [%]"}, "field": "nolarge"}}, "height": 400, "title": "Port of New York/New Jersey Total TEUs Container Volume Growth", "transform": [{"calculate": "datum['Total TEUs'] > 400 ? NaN : datum['Total TEUs']", "as": "nolarge"}], "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-1ea77455d88adcb6204e4f60fa7d2aaa": [{"dt": "2006-01-01T00:00:00", "Total TEUs": null}, {"dt": "2006-02-01T00:00:00", "Total TEUs": null}, {"dt": "2006-03-01T00:00:00", "Total TEUs": null}, {"dt": "2006-04-01T00:00:00", "Total TEUs": null}, {"dt": "2006-05-01T00:00:00", "Total TEUs": null}, {"dt": "2006-06-01T00:00:00", "Total TEUs": null}, {"dt": "2006-07-01T00:00:00", "Total TEUs": null}, {"dt": "2006-08-01T00:00:00", "Total TEUs": null}, {"dt": "2006-09-01T00:00:00", "Total TEUs": null}, {"dt": "2006-10-01T00:00:00", "Total TEUs": null}, {"dt": "2006-11-01T00:00:00", "Total TEUs": null}, {"dt": "2006-12-01T00:00:00", "Total TEUs": null}, {"dt": "2007-01-01T00:00:00", "Total TEUs": 4.316765143974521}, {"dt": "2007-02-01T00:00:00", "Total TEUs": 11.515489322875405}, {"dt": "2007-03-01T00:00:00", "Total TEUs": 18.328954093922036}, {"dt": "2007-04-01T00:00:00", "Total TEUs": -2.9843732017033497}, {"dt": "2007-05-01T00:00:00", "Total TEUs": 10.184635038763634}, {"dt": "2007-06-01T00:00:00", "Total TEUs": 11.607646200211486}, {"dt": "2007-07-01T00:00:00", "Total TEUs": 9.620285261489702}, {"dt": "2007-08-01T00:00:00", "Total TEUs": 14.800849504328028}, {"dt": "2007-09-01T00:00:00", "Total TEUs": 14.980989312697822}, {"dt": "2007-10-01T00:00:00", "Total TEUs": 7.369602939675413}, {"dt": "2007-11-01T00:00:00", "Total TEUs": 8.785870990518463}, {"dt": "2007-12-01T00:00:00", "Total TEUs": 9.58232130671921}, {"dt": "2008-01-01T00:00:00", "Total TEUs": 9.201675554232192}, {"dt": "2008-02-01T00:00:00", "Total TEUs": 11.169043690217805}, {"dt": "2008-03-01T00:00:00", "Total TEUs": -3.7126793063188113}, {"dt": "2008-04-01T00:00:00", "Total TEUs": 12.929503296964029}, {"dt": "2008-05-01T00:00:00", "Total TEUs": 2.8832642298284306}, {"dt": "2008-06-01T00:00:00", "Total TEUs": 2.058674966894647}, {"dt": "2008-07-01T00:00:00", "Total TEUs": 7.854804945467997}, {"dt": "2008-08-01T00:00:00", "Total TEUs": -1.5082787029764844}, {"dt": "2008-09-01T00:00:00", "Total TEUs": 5.02555155983837}, {"dt": "2008-10-01T00:00:00", "Total TEUs": 1.0348221425655613}, {"dt": "2008-11-01T00:00:00", "Total TEUs": -6.5904421927382}, {"dt": "2008-12-01T00:00:00", "Total TEUs": -16.31365650020612}, {"dt": "2009-01-01T00:00:00", "Total TEUs": -15.484958433904794}, {"dt": "2009-02-01T00:00:00", "Total TEUs": -12.806141774475178}, {"dt": "2009-03-01T00:00:00", "Total TEUs": -19.498463514195297}, {"dt": "2009-04-01T00:00:00", "Total TEUs": -17.828577431375237}, {"dt": "2009-05-01T00:00:00", "Total TEUs": -14.269454514796386}, {"dt": "2009-06-01T00:00:00", "Total TEUs": -18.561778514961414}, {"dt": "2009-07-01T00:00:00", "Total TEUs": -13.717836672761097}, {"dt": "2009-08-01T00:00:00", "Total TEUs": -10.134856572494899}, {"dt": "2009-09-01T00:00:00", "Total TEUs": -16.218220947664797}, {"dt": "2009-10-01T00:00:00", "Total TEUs": -7.805793323315258}, {"dt": "2009-11-01T00:00:00", "Total TEUs": -2.1155420999081853}, {"dt": "2009-12-01T00:00:00", "Total TEUs": -0.21230023137950305}, {"dt": "2010-01-01T00:00:00", "Total TEUs": 10.92266913034392}, {"dt": "2010-02-01T00:00:00", "Total TEUs": -0.2740674290638623}, {"dt": "2010-03-01T00:00:00", "Total TEUs": 18.329724956200955}, {"dt": "2010-04-01T00:00:00", "Total TEUs": 17.428328935827196}, {"dt": "2010-05-01T00:00:00", "Total TEUs": 17.238858566488013}, {"dt": "2010-06-01T00:00:00", "Total TEUs": 14.70999829178876}, {"dt": "2010-07-01T00:00:00", "Total TEUs": 18.02248266262334}, {"dt": "2010-08-01T00:00:00", "Total TEUs": 12.57477619958831}, {"dt": "2010-09-01T00:00:00", "Total TEUs": 6.999613444644659}, {"dt": "2010-10-01T00:00:00", "Total TEUs": 11.550214473751353}, {"dt": "2010-11-01T00:00:00", "Total TEUs": 10.561992166208212}, {"dt": "2010-12-01T00:00:00", "Total TEUs": 13.3658255086752}, {"dt": "2011-01-01T00:00:00", "Total TEUs": 29.40976215973241}, {"dt": "2011-02-01T00:00:00", "Total TEUs": 31.40923482288944}, {"dt": "2011-03-01T00:00:00", "Total TEUs": 22.289296214599318}, {"dt": "2011-04-01T00:00:00", "Total TEUs": 20.804440587038098}, {"dt": "2011-05-01T00:00:00", "Total TEUs": 19.15527495295588}, {"dt": "2011-06-01T00:00:00", "Total TEUs": 15.408472726960309}, {"dt": "2011-07-01T00:00:00", "Total TEUs": 11.71229396635014}, {"dt": "2011-08-01T00:00:00", "Total TEUs": 13.903642237623504}, {"dt": "2011-09-01T00:00:00", "Total TEUs": 28.283059298936152}, {"dt": "2011-10-01T00:00:00", "Total TEUs": 12.07525439327053}, {"dt": "2011-11-01T00:00:00", "Total TEUs": 16.703498287401295}, {"dt": "2011-12-01T00:00:00", "Total TEUs": 20.661316684401143}, {"dt": "2012-01-01T00:00:00", "Total TEUs": 14.594789253633756}, {"dt": "2012-02-01T00:00:00", "Total TEUs": 15.85991295091025}, {"dt": "2012-03-01T00:00:00", "Total TEUs": 8.852993939036002}, {"dt": "2012-04-01T00:00:00", "Total TEUs": 11.090500597663166}, {"dt": "2012-05-01T00:00:00", "Total TEUs": 12.841824660536606}, {"dt": "2012-06-01T00:00:00", "Total TEUs": 17.918291992972634}, {"dt": "2012-07-01T00:00:00", "Total TEUs": 21.311676299215843}, {"dt": "2012-08-01T00:00:00", "Total TEUs": 20.771060402242234}, {"dt": "2012-09-01T00:00:00", "Total TEUs": 11.48614735426845}, {"dt": "2012-10-01T00:00:00", "Total TEUs": -0.5794808322338807}, {"dt": "2012-11-01T00:00:00", "Total TEUs": 3.7115539061943537}, {"dt": "2012-12-01T00:00:00", "Total TEUs": 15.382543171912522}, {"dt": "2013-01-01T00:00:00", "Total TEUs": -4.527492806693401}, {"dt": "2013-02-01T00:00:00", "Total TEUs": -6.1941735829394435}, {"dt": "2013-03-01T00:00:00", "Total TEUs": -0.8050241100312605}, {"dt": "2013-04-01T00:00:00", "Total TEUs": -1.6217641332564203}, {"dt": "2013-05-01T00:00:00", "Total TEUs": -0.934128548731894}, {"dt": "2013-06-01T00:00:00", "Total TEUs": -7.877846660185261}, {"dt": "2013-07-01T00:00:00", "Total TEUs": -5.815139371028621}, {"dt": "2013-08-01T00:00:00", "Total TEUs": 2.814332044405643}, {"dt": "2013-09-01T00:00:00", "Total TEUs": -3.7293639282280244}, {"dt": "2013-10-01T00:00:00", "Total TEUs": 22.16407457496137}, {"dt": "2013-11-01T00:00:00", "Total TEUs": -0.0343379756697626}, {"dt": "2013-12-01T00:00:00", "Total TEUs": -4.573217066471669}, {"dt": "2014-01-01T00:00:00", "Total TEUs": 0.12862802223327918}, {"dt": "2014-02-01T00:00:00", "Total TEUs": -3.810303143016547}, {"dt": "2014-03-01T00:00:00", "Total TEUs": 10.38159831899832}, {"dt": "2014-04-01T00:00:00", "Total TEUs": 5.560963766007987}, {"dt": "2014-05-01T00:00:00", "Total TEUs": 3.914908980990117}, {"dt": "2014-06-01T00:00:00", "Total TEUs": 7.475843479452671}, {"dt": "2014-07-01T00:00:00", "Total TEUs": 6.476749126519565}, {"dt": "2014-08-01T00:00:00", "Total TEUs": 0.19961025765458107}, {"dt": "2014-09-01T00:00:00", "Total TEUs": 5.491545364709971}, {"dt": "2014-10-01T00:00:00", "Total TEUs": 5.030077670171607}, {"dt": "2014-11-01T00:00:00", "Total TEUs": 14.846444680286552}, {"dt": "2014-12-01T00:00:00", "Total TEUs": 12.011540680900179}, {"dt": "2015-01-01T00:00:00", "Total TEUs": 7.94650725779753}, {"dt": "2015-02-01T00:00:00", "Total TEUs": 14.791097912139195}, {"dt": "2015-03-01T00:00:00", "Total TEUs": 15.469536832672981}, {"dt": "2015-04-01T00:00:00", "Total TEUs": 9.507721484104614}, {"dt": "2015-05-01T00:00:00", "Total TEUs": 12.919718645587984}, {"dt": "2015-06-01T00:00:00", "Total TEUs": 19.569944122916837}, {"dt": "2015-07-01T00:00:00", "Total TEUs": 14.077451747623225}, {"dt": "2015-08-01T00:00:00", "Total TEUs": 8.696112800119572}, {"dt": "2015-09-01T00:00:00", "Total TEUs": 14.32663434516872}, {"dt": "2015-10-01T00:00:00", "Total TEUs": 2.5174006497246326}, {"dt": "2015-11-01T00:00:00", "Total TEUs": 3.2609390695937934}, {"dt": "2015-12-01T00:00:00", "Total TEUs": 2.8714789095180215}, {"dt": "2016-01-01T00:00:00", "Total TEUs": 3.2187765927576883}, {"dt": "2016-02-01T00:00:00", "Total TEUs": 12.435631112658175}, {"dt": "2016-03-01T00:00:00", "Total TEUs": -7.415996738570696}, {"dt": "2016-04-01T00:00:00", "Total TEUs": -3.0441433479830526}, {"dt": "2016-05-01T00:00:00", "Total TEUs": -6.07219078661374}, {"dt": "2016-06-01T00:00:00", "Total TEUs": -5.687795183913913}, {"dt": "2016-07-01T00:00:00", "Total TEUs": -9.590639104255605}, {"dt": "2016-08-01T00:00:00", "Total TEUs": 1.8762607758808336}, {"dt": "2016-09-01T00:00:00", "Total TEUs": -12.676768031216445}, {"dt": "2016-10-01T00:00:00", "Total TEUs": -1.02537834349532}, {"dt": "2016-11-01T00:00:00", "Total TEUs": 5.466552671950908}, {"dt": "2016-12-01T00:00:00", "Total TEUs": 5.790375081376142}, {"dt": "2017-01-01T00:00:00", "Total TEUs": 8.320272857576306}, {"dt": "2017-02-01T00:00:00", "Total TEUs": 1.2797133378207537}, {"dt": "2017-03-01T00:00:00", "Total TEUs": -1.838393631382662}, {"dt": "2017-04-01T00:00:00", "Total TEUs": 11.792500066419919}, {"dt": "2017-05-01T00:00:00", "Total TEUs": 7.619112919199766}, {"dt": "2017-06-01T00:00:00", "Total TEUs": 10.18348018659001}, {"dt": "2017-07-01T00:00:00", "Total TEUs": 8.359674477919455}, {"dt": "2017-08-01T00:00:00", "Total TEUs": 7.872010004664065}, {"dt": "2017-09-01T00:00:00", "Total TEUs": 15.220693424203935}, {"dt": "2017-10-01T00:00:00", "Total TEUs": 9.229593464566355}, {"dt": "2017-11-01T00:00:00", "Total TEUs": 7.300548890665071}, {"dt": "2017-12-01T00:00:00", "Total TEUs": 2.99811410783668}, {"dt": "2018-01-01T00:00:00", "Total TEUs": 13.173694336910913}, {"dt": "2018-02-01T00:00:00", "Total TEUs": 2.929598908228903}, {"dt": "2018-03-01T00:00:00", "Total TEUs": 12.651936962637977}, {"dt": "2018-04-01T00:00:00", "Total TEUs": 0.7502563924440597}, {"dt": "2018-05-01T00:00:00", "Total TEUs": 5.056702745941966}, {"dt": "2018-06-01T00:00:00", "Total TEUs": 6.972217185591667}, {"dt": "2018-07-01T00:00:00", "Total TEUs": 7.905752174809821}, {"dt": "2018-08-01T00:00:00", "Total TEUs": 3.222659343304768}, {"dt": "2018-09-01T00:00:00", "Total TEUs": 5.157483198420798}, {"dt": "2018-10-01T00:00:00", "Total TEUs": 11.863842621525421}, {"dt": "2018-11-01T00:00:00", "Total TEUs": 3.064504456161221}, {"dt": "2018-12-01T00:00:00", "Total TEUs": 12.027222289628403}, {"dt": "2019-01-01T00:00:00", "Total TEUs": 10.00095585323557}, {"dt": "2019-02-01T00:00:00", "Total TEUs": 15.93488286541449}, {"dt": "2019-03-01T00:00:00", "Total TEUs": 10.438002989996086}, {"dt": "2019-04-01T00:00:00", "Total TEUs": 15.062409615381123}, {"dt": "2019-05-01T00:00:00", "Total TEUs": 5.683975573805022}, {"dt": "2019-06-01T00:00:00", "Total TEUs": 0.31989267085195117}, {"dt": "2019-07-01T00:00:00", "Total TEUs": 1.8583780814348527}, {"dt": "2019-08-01T00:00:00", "Total TEUs": -2.978203365697385}, {"dt": "2019-09-01T00:00:00", "Total TEUs": 0.3406938912233759}, {"dt": "2019-10-01T00:00:00", "Total TEUs": -2.1636294078711704}, {"dt": "2019-11-01T00:00:00", "Total TEUs": 2.6967870110296666}, {"dt": "2019-12-01T00:00:00", "Total TEUs": -4.044536339618309}, {"dt": "2020-01-01T00:00:00", "Total TEUs": 17.22088086696376}, {"dt": "2020-02-01T00:00:00", "Total TEUs": 19.151000225586845}, {"dt": "2020-03-01T00:00:00", "Total TEUs": 8.859690531144949}, {"dt": "2020-04-01T00:00:00", "Total TEUs": -4.205062538586423}, {"dt": "2020-05-01T00:00:00", "Total TEUs": -18.499632989647996}, {"dt": "2020-06-01T00:00:00", "Total TEUs": -14.338428972538386}, {"dt": "2020-07-01T00:00:00", "Total TEUs": -11.70101958830111}, {"dt": "2020-08-01T00:00:00", "Total TEUs": -11.308999962836541}, {"dt": "2020-09-01T00:00:00", "Total TEUs": -4.291025197140586}, {"dt": "2020-10-01T00:00:00", "Total TEUs": -4.256613329692016}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Georgia-Ports">Georgia Ports<a class="anchor-link" href="#Georgia-Ports">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[18]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nd">@memory</span><span class="o">.</span><span class="n">cache</span>
<span class="k">def</span> <span class="nf">doGaFetch</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">retries</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">retries</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">req</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span> <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="n">uaString</span> <span class="p">})</span>

        <span class="n">data</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>

        <span class="n">tabs</span> <span class="o">=</span> <span class="n">read_pdf</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">read</span><span class="p">()),</span> <span class="n">pages</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>

        <span class="c1"># noop to test for the table</span>
        <span class="n">tabs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        
        <span class="k">return</span> <span class="n">tabs</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">doGaFetch</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">retries</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    
<span class="n">reportPage</span> <span class="o">=</span> <span class="s1">&#39;https://gaports.com/sales/by-the-numbers/&#39;</span>
<span class="n">currentReport</span> <span class="o">=</span> <span class="o">!</span>curl -s -L <span class="nv">$reportPage</span> <span class="p">|</span> egrep -i <span class="s1">&#39;Monthly.*TEU.*pdf&#39;</span> <span class="p">|</span> perl -pe <span class="s1">&#39;s/.*href=\&quot;([^&quot;]+)\&quot;.*/\1/&#39;</span>

<span class="c1">#print(currentReport[0])</span>

<span class="n">tabs</span> <span class="o">=</span> <span class="n">doGaFetch</span><span class="p">(</span><span class="n">currentReport</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[19]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">,</span> <span class="s1">&#39;Jan&#39;</span><span class="p">,</span> <span class="s1">&#39;Feb&#39;</span><span class="p">,</span> <span class="s1">&#39;Mar&#39;</span><span class="p">,</span> <span class="s1">&#39;Apr&#39;</span><span class="p">,</span> <span class="s1">&#39;May&#39;</span><span class="p">,</span> <span class="s1">&#39;Jun&#39;</span><span class="p">,</span> <span class="s1">&#39;Jul&#39;</span><span class="p">,</span> <span class="s1">&#39;Aug&#39;</span><span class="p">,</span> <span class="s1">&#39;Sep&#39;</span><span class="p">,</span> <span class="s1">&#39;Oct&#39;</span><span class="p">,</span> <span class="s1">&#39;Nov&#39;</span><span class="p">,</span> <span class="s1">&#39;Dec&#39;</span><span class="p">,</span> <span class="s1">&#39;Total&#39;</span><span class="p">]</span>

<span class="n">flatten</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">l</span><span class="p">:</span> <span class="p">[</span><span class="n">item</span> <span class="k">for</span> <span class="n">sublist</span> <span class="ow">in</span> <span class="n">l</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">sublist</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">parseGpTable</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">columns</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">17</span><span class="p">):</span>
    <span class="n">gp_raw</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span> <span class="k">if</span> <span class="n">end</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="mi">17</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="c1">#print(gp_raw.iloc[0, :].values)</span>
    
    <span class="n">firstRowVals</span> <span class="o">=</span> <span class="n">flatten</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(),</span> <span class="n">gp_raw</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">))</span>
    <span class="c1">#print(firstRowVals)</span>
    
    <span class="c1"># Use all the month values in order then append the total value as the last element</span>
    <span class="n">firstRow</span> <span class="o">=</span> <span class="p">[</span><span class="n">firstRowVals</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">firstRowVals</span><span class="p">)</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cols</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]))]</span> <span class="o">+</span> <span class="p">[</span><span class="n">gp_raw</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
    <span class="c1">#print(firstRow)</span>

    <span class="n">records</span> <span class="o">=</span> <span class="n">gp_raw</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">flatten</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(),</span> <span class="n">s</span><span class="o">.</span><span class="n">values</span><span class="p">)),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="c1">#print(records.head(1))</span>
    
    <span class="n">df_ga_melted</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_records</span><span class="p">([</span><span class="n">firstRow</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">r</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">records</span><span class="o">.</span><span class="n">values</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">id_vars</span><span class="o">=</span><span class="s1">&#39;Year&#39;</span><span class="p">)</span>
    
    <span class="c1">#print(df_ga_melted[df_ga_melted[&#39;Year&#39;] == &#39;2020&#39;].head(15))</span>
    
    <span class="n">df_ga_melted</span> <span class="o">=</span> <span class="n">df_ga_melted</span><span class="p">[</span><span class="n">df_ga_melted</span><span class="p">[</span><span class="s1">&#39;variable&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;Total&#39;</span><span class="p">]</span>
    <span class="n">df_ga_melted</span><span class="p">[</span><span class="s1">&#39;dt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df_ga_melted</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="n">df_ga_melted</span><span class="p">[</span><span class="s1">&#39;variable&#39;</span><span class="p">],</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;%Y-%b&#39;</span><span class="p">)</span>
    <span class="n">df_ga_melted</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_ga_melted</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">))</span>

    <span class="n">df_ga_tst</span> <span class="o">=</span> <span class="n">df_ga_melted</span><span class="p">[[</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="s1">&#39;dt&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;dt&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;1M&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;TEU Total&#39;</span><span class="p">},</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">df_ga_tst</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="n">df_ga_tst</span> <span class="o">=</span> <span class="n">parseGpTable</span><span class="p">(</span><span class="n">tabs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="n">cols</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[20]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cols2</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">,</span> <span class="s1">&#39;Key&#39;</span><span class="p">,</span> <span class="s1">&#39;Jan&#39;</span><span class="p">,</span> <span class="s1">&#39;Feb&#39;</span><span class="p">,</span> <span class="s1">&#39;Mar&#39;</span><span class="p">,</span> <span class="s1">&#39;Apr&#39;</span><span class="p">,</span> <span class="s1">&#39;May&#39;</span><span class="p">,</span> <span class="s1">&#39;Jun&#39;</span><span class="p">,</span> <span class="s1">&#39;Jul&#39;</span><span class="p">,</span> <span class="s1">&#39;Aug&#39;</span><span class="p">,</span> <span class="s1">&#39;Sep&#39;</span><span class="p">,</span> <span class="s1">&#39;Oct&#39;</span><span class="p">,</span> <span class="s1">&#39;Nov&#39;</span><span class="p">,</span> <span class="s1">&#39;Dec&#39;</span><span class="p">,</span> <span class="s1">&#39;Total&#39;</span><span class="p">]</span>

<span class="c1">#gp_raw = tabs[0].iloc[3:21].copy()</span>

<span class="n">gp_detail_raw</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">tabs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">18</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()]</span> <span class="o">+</span> <span class="n">tabs</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="n">gp_detail_raw</span> <span class="o">=</span> <span class="n">gp_detail_raw</span><span class="p">[</span><span class="o">~</span><span class="n">gp_detail_raw</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">()]</span>

<span class="c1">#print(gp_detail_raw)</span>

<span class="c1"># Exclude rows with erroneous data</span>
<span class="n">gp_detail_raw</span> <span class="o">=</span> <span class="n">gp_detail_raw</span><span class="p">[</span><span class="o">~</span><span class="n">gp_detail_raw</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">&quot;%&quot;</span><span class="p">)]</span>
<span class="n">gp_detail_raw</span> <span class="o">=</span> <span class="n">gp_detail_raw</span><span class="p">[</span><span class="n">gp_detail_raw</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s2">&quot;^(I|E|T|\d)&quot;</span><span class="p">)]</span>

<span class="c1">#print(gp_detail_raw.head(25))</span>

<span class="n">hypenate</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;rt &quot;</span><span class="p">,</span> <span class="s2">&quot;rt-&quot;</span><span class="p">)</span>\
                           <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;Total Full&quot;</span><span class="p">,</span> <span class="s2">&quot;Total-Full&quot;</span><span class="p">)</span>\
                           <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;Total Empty&quot;</span><span class="p">,</span> <span class="s2">&quot;Total-Empty&quot;</span><span class="p">)</span>\
                           <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;Total All&quot;</span><span class="p">,</span> <span class="s2">&quot;Total-All&quot;</span><span class="p">)</span>

<span class="n">gp_detail_raw</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">gp_detail_raw</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">hypenate</span><span class="p">)</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd"># Special case for the current year</span>
<span class="sd">firstRowVals2 = flatten(map(lambda v: hypenate(v).split(), gp_detail_raw.iloc[0, :-1].values))</span>
<span class="sd">firstRow2 = [firstRowVals2[n] if n &lt; len(firstRowVals2) else &#39;&#39; for n in range(len(cols2[:-1]))] + [gp_detail_raw.iloc[0, -1]]</span>

<span class="sd"># General case for the historical years</span>
<span class="sd">remainingRows = gp_detail_raw.iloc[1:].apply(lambda s: flatten(map(lambda v: hypenate(v).split(), s.to_list())), axis=1)</span>

<span class="sd">gp_detail = pd.DataFrame.from_records([firstRow2] + [r for r in remainingRows.values], columns=cols2)</span>

<span class="sd">#print(gp_detail.head())</span>

<span class="sd"># Find all the records that don&#39;t have the year in them</span>
<span class="sd">rowsToShift = gp_detail[~gp_detail[&#39;Year&#39;].str.match(&quot;^\d&quot;)].index.values</span>

<span class="sd">#####</span>
<span class="sd"># Note, this is the likely line to toggle between commented&lt;-&gt;uncommented if seeing issues</span>
<span class="sd">#####</span>
<span class="sd"># Shift records not containing the year to the right by one to line things up</span>
<span class="sd">gp_detail.iloc[rowsToShift] = gp_detail.iloc[rowsToShift].apply(lambda v: pd.Series([None] + v.to_list()[:-1]), axis=1)</span>

<span class="sd">gp_detail.iloc[rowsToShift, 0] = pd.to_numeric(&#39;&#39;, errors=&#39;coerce&#39;)</span>
<span class="sd">&quot;&quot;&quot;</span><span class="p">;</span>

<span class="n">gp_detail</span> <span class="o">=</span> <span class="n">gp_detail_raw</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">gp_detail</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">cols2</span>

<span class="c1"># Fill the years for the rest of the rows</span>
<span class="n">gp_detail</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gp_detail</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ffill</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

<span class="c1">#print(gp_detail.head(20))</span>

<span class="n">df_ga_detail_melted</span> <span class="o">=</span> <span class="n">gp_detail</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">id_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Key&quot;</span><span class="p">,</span> <span class="s2">&quot;Year&quot;</span><span class="p">])</span>

<span class="n">df_ga_detail_melted</span> <span class="o">=</span> <span class="n">df_ga_detail_melted</span><span class="p">[</span><span class="n">df_ga_detail_melted</span><span class="p">[</span><span class="s2">&quot;variable&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;Total&quot;</span><span class="p">]</span>

<span class="n">df_ga_detail_melted</span><span class="p">[</span><span class="s1">&#39;dt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df_ga_detail_melted</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span>\
                                           <span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="n">df_ga_detail_melted</span><span class="p">[</span><span class="s1">&#39;variable&#39;</span><span class="p">],</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;%Y-%b&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>

<span class="n">df_ga_detail_melted</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_ga_detail_melted</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">]</span>\
                                    <span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>\
                                    <span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">))</span>

<span class="c1">#print(df_ga_detail_melted.fillna(&#39;nan&#39;).dropna().tail())</span>

<span class="n">df_ga_ts</span> <span class="o">=</span> <span class="n">df_ga_detail_melted</span><span class="p">[[</span><span class="s1">&#39;dt&#39;</span><span class="p">,</span> <span class="s1">&#39;Key&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s1">&#39;dt&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;Key&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">df_ga_ts</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;dt&#39;</span><span class="p">,</span> <span class="s1">&#39;Export Empty&#39;</span><span class="p">,</span> <span class="s1">&#39;Export Full&#39;</span><span class="p">,</span> <span class="s1">&#39;Export Total&#39;</span><span class="p">,</span>\
                    <span class="s1">&#39;Import Empty&#39;</span><span class="p">,</span> <span class="s1">&#39;Import Full&#39;</span><span class="p">,</span> <span class="s1">&#39;Import Total&#39;</span><span class="p">,</span> <span class="s1">&#39;Total All&#39;</span><span class="p">,</span> <span class="s1">&#39;Total Empty&#39;</span><span class="p">,</span> <span class="s1">&#39;Total Full&#39;</span><span class="p">]</span>

<span class="n">df_ga_ts</span> <span class="o">=</span> <span class="n">df_ga_ts</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[21]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doYoyChart</span><span class="p">(</span><span class="n">df_ga_ts</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Georgia&#39;</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;Total All&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[21]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-93d8c3d9dcff44439d3b91fbc990af85"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-93d8c3d9dcff44439d3b91fbc990af85") {
      outputDiv = document.getElementById("altair-viz-93d8c3d9dcff44439d3b91fbc990af85");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-a39e42910397c6a2489bdad5eb131d2b"}, "mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['nolarge'] < 0"}, "value": "royalblue"}, "tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "nolarge", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Year-over-Year Volume Growth [%]"}, "field": "nolarge"}}, "height": 400, "title": "Port of Georgia Total All Container Volume Growth", "transform": [{"calculate": "datum['Total All'] > 400 ? NaN : datum['Total All']", "as": "nolarge"}], "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-a39e42910397c6a2489bdad5eb131d2b": [{"dt": "2003-01-01T00:00:00", "Total All": null}, {"dt": "2003-02-01T00:00:00", "Total All": null}, {"dt": "2003-03-01T00:00:00", "Total All": null}, {"dt": "2003-04-01T00:00:00", "Total All": null}, {"dt": "2003-05-01T00:00:00", "Total All": null}, {"dt": "2003-06-01T00:00:00", "Total All": null}, {"dt": "2003-07-01T00:00:00", "Total All": null}, {"dt": "2003-08-01T00:00:00", "Total All": null}, {"dt": "2003-09-01T00:00:00", "Total All": null}, {"dt": "2003-10-01T00:00:00", "Total All": null}, {"dt": "2003-11-01T00:00:00", "Total All": null}, {"dt": "2003-12-01T00:00:00", "Total All": null}, {"dt": "2004-01-01T00:00:00", "Total All": -4.078015544796787}, {"dt": "2004-02-01T00:00:00", "Total All": 14.222168893612274}, {"dt": "2004-03-01T00:00:00", "Total All": 8.157773579513883}, {"dt": "2004-04-01T00:00:00", "Total All": 5.711407315561057}, {"dt": "2004-05-01T00:00:00", "Total All": 12.28743200687088}, {"dt": "2004-06-01T00:00:00", "Total All": 5.591554423006917}, {"dt": "2004-07-01T00:00:00", "Total All": 6.876123068714146}, {"dt": "2004-08-01T00:00:00", "Total All": 15.780591350264771}, {"dt": "2004-09-01T00:00:00", "Total All": 0.6462172088949059}, {"dt": "2004-10-01T00:00:00", "Total All": 12.516933648031504}, {"dt": "2004-11-01T00:00:00", "Total All": 21.542726121624867}, {"dt": "2004-12-01T00:00:00", "Total All": 13.58204462811261}, {"dt": "2005-01-01T00:00:00", "Total All": 20.6554256187109}, {"dt": "2005-02-01T00:00:00", "Total All": 8.769349670971183}, {"dt": "2005-03-01T00:00:00", "Total All": 9.34791383802429}, {"dt": "2005-04-01T00:00:00", "Total All": 12.829704567113854}, {"dt": "2005-05-01T00:00:00", "Total All": 8.387421053781763}, {"dt": "2005-06-01T00:00:00", "Total All": 14.330368429520334}, {"dt": "2005-07-01T00:00:00", "Total All": 19.008986520219672}, {"dt": "2005-08-01T00:00:00", "Total All": 8.094661216239851}, {"dt": "2005-09-01T00:00:00", "Total All": 29.601551346357937}, {"dt": "2005-10-01T00:00:00", "Total All": 18.60659959908397}, {"dt": "2005-11-01T00:00:00", "Total All": 13.884587228291467}, {"dt": "2005-12-01T00:00:00", "Total All": 9.705421026621686}, {"dt": "2006-01-01T00:00:00", "Total All": 17.699431852082647}, {"dt": "2006-02-01T00:00:00", "Total All": 10.923163950937509}, {"dt": "2006-03-01T00:00:00", "Total All": 15.571977018900341}, {"dt": "2006-04-01T00:00:00", "Total All": 12.65536576333075}, {"dt": "2006-05-01T00:00:00", "Total All": 19.458166152522672}, {"dt": "2006-06-01T00:00:00", "Total All": 17.54248418569744}, {"dt": "2006-07-01T00:00:00", "Total All": 12.546346278416976}, {"dt": "2006-08-01T00:00:00", "Total All": 8.727885122500844}, {"dt": "2006-09-01T00:00:00", "Total All": 14.052522443978411}, {"dt": "2006-10-01T00:00:00", "Total All": 8.639959814140408}, {"dt": "2006-11-01T00:00:00", "Total All": 11.436500627360324}, {"dt": "2006-12-01T00:00:00", "Total All": 16.045804118192386}, {"dt": "2007-01-01T00:00:00", "Total All": -0.0850517351117186}, {"dt": "2007-02-01T00:00:00", "Total All": 17.56555052490174}, {"dt": "2007-03-01T00:00:00", "Total All": 20.788301498899497}, {"dt": "2007-04-01T00:00:00", "Total All": 18.077271337858814}, {"dt": "2007-05-01T00:00:00", "Total All": 24.227677039320827}, {"dt": "2007-06-01T00:00:00", "Total All": 22.68329808278842}, {"dt": "2007-07-01T00:00:00", "Total All": 27.00129363269601}, {"dt": "2007-08-01T00:00:00", "Total All": 30.09056383289512}, {"dt": "2007-09-01T00:00:00", "Total All": 29.409486031268894}, {"dt": "2007-10-01T00:00:00", "Total All": 20.1696335683736}, {"dt": "2007-11-01T00:00:00", "Total All": 21.13183058593837}, {"dt": "2007-12-01T00:00:00", "Total All": 14.21306089382961}, {"dt": "2008-01-01T00:00:00", "Total All": 26.11732473448034}, {"dt": "2008-02-01T00:00:00", "Total All": 13.410144099536602}, {"dt": "2008-03-01T00:00:00", "Total All": 4.9137213987278106}, {"dt": "2008-04-01T00:00:00", "Total All": 6.709226162856008}, {"dt": "2008-05-01T00:00:00", "Total All": -3.091854388014814}, {"dt": "2008-06-01T00:00:00", "Total All": -2.5678438661710046}, {"dt": "2008-07-01T00:00:00", "Total All": -4.701952169052747}, {"dt": "2008-08-01T00:00:00", "Total All": -3.1634386824231253}, {"dt": "2008-09-01T00:00:00", "Total All": -4.1552418469692824}, {"dt": "2008-10-01T00:00:00", "Total All": -7.714598338283219}, {"dt": "2008-11-01T00:00:00", "Total All": -2.119134946037149}, {"dt": "2008-12-01T00:00:00", "Total All": -9.269712732001423}, {"dt": "2009-01-01T00:00:00", "Total All": -15.916537411104203}, {"dt": "2009-02-01T00:00:00", "Total All": -21.65066748761579}, {"dt": "2009-03-01T00:00:00", "Total All": -21.182444353807583}, {"dt": "2009-04-01T00:00:00", "Total All": -11.273910715021351}, {"dt": "2009-05-01T00:00:00", "Total All": -13.11437103641011}, {"dt": "2009-06-01T00:00:00", "Total All": -14.414281217509084}, {"dt": "2009-07-01T00:00:00", "Total All": -5.756418791921991}, {"dt": "2009-08-01T00:00:00", "Total All": -9.312908292968935}, {"dt": "2009-09-01T00:00:00", "Total All": -15.50303989339552}, {"dt": "2009-10-01T00:00:00", "Total All": 1.6638219697463263}, {"dt": "2009-11-01T00:00:00", "Total All": -6.759354986597311}, {"dt": "2009-12-01T00:00:00", "Total All": 18.126245270009832}, {"dt": "2010-01-01T00:00:00", "Total All": 20.056456628869434}, {"dt": "2010-02-01T00:00:00", "Total All": 20.59772578436625}, {"dt": "2010-03-01T00:00:00", "Total All": 32.48675772006025}, {"dt": "2010-04-01T00:00:00", "Total All": 23.680992989026972}, {"dt": "2010-05-01T00:00:00", "Total All": 24.658853144144977}, {"dt": "2010-06-01T00:00:00", "Total All": 34.150269432881394}, {"dt": "2010-07-01T00:00:00", "Total All": 20.684136923498354}, {"dt": "2010-08-01T00:00:00", "Total All": 19.884299354913427}, {"dt": "2010-09-01T00:00:00", "Total All": 19.75398080932034}, {"dt": "2010-10-01T00:00:00", "Total All": 16.743134943011917}, {"dt": "2010-11-01T00:00:00", "Total All": 11.523023972224733}, {"dt": "2010-12-01T00:00:00", "Total All": 0.43063630305397727}, {"dt": "2011-01-01T00:00:00", "Total All": 4.934532428255767}, {"dt": "2011-02-01T00:00:00", "Total All": 16.327850400853052}, {"dt": "2011-03-01T00:00:00", "Total All": 4.455806196787493}, {"dt": "2011-04-01T00:00:00", "Total All": 8.476195243219786}, {"dt": "2011-05-01T00:00:00", "Total All": 9.737575616365056}, {"dt": "2011-06-01T00:00:00", "Total All": 1.9980559455664793}, {"dt": "2011-07-01T00:00:00", "Total All": 4.617167340957606}, {"dt": "2011-08-01T00:00:00", "Total All": -4.297885869980799}, {"dt": "2011-09-01T00:00:00", "Total All": 11.054593940591118}, {"dt": "2011-10-01T00:00:00", "Total All": -6.645637942453996}, {"dt": "2011-11-01T00:00:00", "Total All": 5.339637665837382}, {"dt": "2011-12-01T00:00:00", "Total All": -1.8533603023951795}, {"dt": "2012-01-01T00:00:00", "Total All": 4.2708065203539425}, {"dt": "2012-02-01T00:00:00", "Total All": 0.6081233051692614}, {"dt": "2012-03-01T00:00:00", "Total All": 9.151600962972605}, {"dt": "2012-04-01T00:00:00", "Total All": -4.288191707393974}, {"dt": "2012-05-01T00:00:00", "Total All": 0.8650178901427275}, {"dt": "2012-06-01T00:00:00", "Total All": 5.459713941289546}, {"dt": "2012-07-01T00:00:00", "Total All": -4.0320032886348}, {"dt": "2012-08-01T00:00:00", "Total All": 13.801137128246532}, {"dt": "2012-09-01T00:00:00", "Total All": -4.70510198031543}, {"dt": "2012-10-01T00:00:00", "Total All": -9.594067012653063}, {"dt": "2012-11-01T00:00:00", "Total All": -2.547939355114248}, {"dt": "2012-12-01T00:00:00", "Total All": 2.17091275317991}, {"dt": "2013-01-01T00:00:00", "Total All": -6.770483444083819}, {"dt": "2013-02-01T00:00:00", "Total All": 2.256238505795616}, {"dt": "2013-03-01T00:00:00", "Total All": -10.489039434939084}, {"dt": "2013-04-01T00:00:00", "Total All": 4.033570231930295}, {"dt": "2013-05-01T00:00:00", "Total All": 1.9451915955248866}, {"dt": "2013-06-01T00:00:00", "Total All": 2.6402780459548136}, {"dt": "2013-07-01T00:00:00", "Total All": -2.1726886923412514}, {"dt": "2013-08-01T00:00:00", "Total All": 3.7703706441003737}, {"dt": "2013-09-01T00:00:00", "Total All": 1.8128861910335692}, {"dt": "2013-10-01T00:00:00", "Total All": 18.941640652098513}, {"dt": "2013-11-01T00:00:00", "Total All": 6.5872278512078}, {"dt": "2013-12-01T00:00:00", "Total All": 7.38016136687234}, {"dt": "2014-01-01T00:00:00", "Total All": 12.46635875887694}, {"dt": "2014-02-01T00:00:00", "Total All": 2.609054346705175}, {"dt": "2014-03-01T00:00:00", "Total All": 12.046700638586083}, {"dt": "2014-04-01T00:00:00", "Total All": 3.0832087923970075}, {"dt": "2014-05-01T00:00:00", "Total All": 11.056898133985937}, {"dt": "2014-06-01T00:00:00", "Total All": 0.8773943044618537}, {"dt": "2014-07-01T00:00:00", "Total All": 19.151273859526775}, {"dt": "2014-08-01T00:00:00", "Total All": 7.481491241502347}, {"dt": "2014-09-01T00:00:00", "Total All": 12.938992670564996}, {"dt": "2014-10-01T00:00:00", "Total All": 13.645394000590528}, {"dt": "2014-11-01T00:00:00", "Total All": 11.57083239109431}, {"dt": "2014-12-01T00:00:00", "Total All": 17.991500212494692}, {"dt": "2015-01-01T00:00:00", "Total All": 13.340100582420856}, {"dt": "2015-02-01T00:00:00", "Total All": 14.185728643216077}, {"dt": "2015-03-01T00:00:00", "Total All": 27.82364071093304}, {"dt": "2015-04-01T00:00:00", "Total All": 25.838500009365582}, {"dt": "2015-05-01T00:00:00", "Total All": 16.44802985855749}, {"dt": "2015-06-01T00:00:00", "Total All": 23.23632416949191}, {"dt": "2015-07-01T00:00:00", "Total All": 10.32804902531228}, {"dt": "2015-08-01T00:00:00", "Total All": 4.424130779068447}, {"dt": "2015-09-01T00:00:00", "Total All": 7.344993878889938}, {"dt": "2015-10-01T00:00:00", "Total All": 2.9939697202976623}, {"dt": "2015-11-01T00:00:00", "Total All": 4.712979580405152}, {"dt": "2015-12-01T00:00:00", "Total All": -6.324873754655414}, {"dt": "2016-01-01T00:00:00", "Total All": -2.8445040762257623}, {"dt": "2016-02-01T00:00:00", "Total All": 8.09683245492665}, {"dt": "2016-03-01T00:00:00", "Total All": -11.381569465795538}, {"dt": "2016-04-01T00:00:00", "Total All": -11.273060698348058}, {"dt": "2016-05-01T00:00:00", "Total All": -7.309724517824878}, {"dt": "2016-06-01T00:00:00", "Total All": -12.728043096664853}, {"dt": "2016-07-01T00:00:00", "Total All": -2.9385459009011794}, {"dt": "2016-08-01T00:00:00", "Total All": 4.972158324740228}, {"dt": "2016-09-01T00:00:00", "Total All": -2.8571248546864214}, {"dt": "2016-10-01T00:00:00", "Total All": -3.332668938067984}, {"dt": "2016-11-01T00:00:00", "Total All": 5.815672224842161}, {"dt": "2016-12-01T00:00:00", "Total All": 12.342256434707055}, {"dt": "2017-01-01T00:00:00", "Total All": 16.18185705623183}, {"dt": "2017-02-01T00:00:00", "Total All": 7.655153321282593}, {"dt": "2017-03-01T00:00:00", "Total All": 5.631392957455383}, {"dt": "2017-04-01T00:00:00", "Total All": 11.731982284257136}, {"dt": "2017-05-01T00:00:00", "Total All": 11.681260666379579}, {"dt": "2017-06-01T00:00:00", "Total All": 17.11274638997933}, {"dt": "2017-07-01T00:00:00", "Total All": 6.795058370456997}, {"dt": "2017-08-01T00:00:00", "Total All": 5.274659509258073}, {"dt": "2017-09-01T00:00:00", "Total All": 5.446119319729648}, {"dt": "2017-10-01T00:00:00", "Total All": 32.030683681655184}, {"dt": "2017-11-01T00:00:00", "Total All": 2.819028107133703}, {"dt": "2017-12-01T00:00:00", "Total All": 10.590985477781988}, {"dt": "2018-01-01T00:00:00", "Total All": 2.209866412444028}, {"dt": "2018-02-01T00:00:00", "Total All": 3.1932691754982034}, {"dt": "2018-03-01T00:00:00", "Total All": 13.932706803092021}, {"dt": "2018-04-01T00:00:00", "Total All": 7.120292126868577}, {"dt": "2018-05-01T00:00:00", "Total All": 3.1205013367456624}, {"dt": "2018-06-01T00:00:00", "Total All": 9.776110342867117}, {"dt": "2018-07-01T00:00:00", "Total All": 12.695069012404092}, {"dt": "2018-08-01T00:00:00", "Total All": 7.909054628664625}, {"dt": "2018-09-01T00:00:00", "Total All": 11.997564133714288}, {"dt": "2018-10-01T00:00:00", "Total All": 0.9672680777133014}, {"dt": "2018-11-01T00:00:00", "Total All": 11.43760088242809}, {"dt": "2018-12-01T00:00:00", "Total All": 8.742653589876115}, {"dt": "2019-01-01T00:00:00", "Total All": 26.94447642070528}, {"dt": "2019-02-01T00:00:00", "Total All": -8.517300216362644}, {"dt": "2019-03-01T00:00:00", "Total All": 15.517105470597503}, {"dt": "2019-04-01T00:00:00", "Total All": 2.1765152768160823}, {"dt": "2019-05-01T00:00:00", "Total All": 3.424932623141075}, {"dt": "2019-06-01T00:00:00", "Total All": -2.3791155732265867}, {"dt": "2019-07-01T00:00:00", "Total All": 2.179440130740007}, {"dt": "2019-08-01T00:00:00", "Total All": 16.470397292493686}, {"dt": "2019-09-01T00:00:00", "Total All": 1.6062062336948957}, {"dt": "2019-10-01T00:00:00", "Total All": 3.529187148664259}, {"dt": "2019-11-01T00:00:00", "Total All": 5.35781669985429}, {"dt": "2019-12-01T00:00:00", "Total All": 2.6946261163573126}, {"dt": "2020-01-01T00:00:00", "Total All": -12.185668214444323}, {"dt": "2020-02-01T00:00:00", "Total All": 16.780753872876097}, {"dt": "2020-03-01T00:00:00", "Total All": -18.165312458874162}, {"dt": "2020-04-01T00:00:00", "Total All": -7.295579193428459}, {"dt": "2020-05-01T00:00:00", "Total All": -9.650663909971769}, {"dt": "2020-06-01T00:00:00", "Total All": -6.526280304830534}, {"dt": "2020-07-01T00:00:00", "Total All": -6.801938907865701}, {"dt": "2020-08-01T00:00:00", "Total All": 0.8792750150200979}, {"dt": "2020-09-01T00:00:00", "Total All": 11.38894969986406}, {"dt": "2020-10-01T00:00:00", "Total All": 8.336971060808018}, {"dt": "2020-11-01T00:00:00", "Total All": 28.058154527721758}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[22]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doYoyChart</span><span class="p">(</span><span class="n">df_ga_ts</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Georgia&#39;</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;Import Empty&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[22]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-e1bea803b1b94aac9777c542141b5e75"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-e1bea803b1b94aac9777c542141b5e75") {
      outputDiv = document.getElementById("altair-viz-e1bea803b1b94aac9777c542141b5e75");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-2d42c1ee29ed3bb964433e22eb5ff765"}, "mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['nolarge'] < 0"}, "value": "royalblue"}, "tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "nolarge", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Year-over-Year Volume Growth [%]"}, "field": "nolarge"}}, "height": 400, "title": "Port of Georgia Import Empty Container Volume Growth", "transform": [{"calculate": "datum['Import Empty'] > 400 ? NaN : datum['Import Empty']", "as": "nolarge"}], "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-2d42c1ee29ed3bb964433e22eb5ff765": [{"dt": "2003-01-01T00:00:00", "Import Empty": null}, {"dt": "2003-02-01T00:00:00", "Import Empty": null}, {"dt": "2003-03-01T00:00:00", "Import Empty": null}, {"dt": "2003-04-01T00:00:00", "Import Empty": null}, {"dt": "2003-05-01T00:00:00", "Import Empty": null}, {"dt": "2003-06-01T00:00:00", "Import Empty": null}, {"dt": "2003-07-01T00:00:00", "Import Empty": null}, {"dt": "2003-08-01T00:00:00", "Import Empty": null}, {"dt": "2003-09-01T00:00:00", "Import Empty": null}, {"dt": "2003-10-01T00:00:00", "Import Empty": null}, {"dt": "2003-11-01T00:00:00", "Import Empty": null}, {"dt": "2003-12-01T00:00:00", "Import Empty": null}, {"dt": "2004-01-01T00:00:00", "Import Empty": 74.28388200085507}, {"dt": "2004-02-01T00:00:00", "Import Empty": 11.265164644714032}, {"dt": "2004-03-01T00:00:00", "Import Empty": -13.839949055402245}, {"dt": "2004-04-01T00:00:00", "Import Empty": -10.465303493801326}, {"dt": "2004-05-01T00:00:00", "Import Empty": 4.218157851375848}, {"dt": "2004-06-01T00:00:00", "Import Empty": -20.257903494176375}, {"dt": "2004-07-01T00:00:00", "Import Empty": -2.1895574950237306}, {"dt": "2004-08-01T00:00:00", "Import Empty": 50.70803500397771}, {"dt": "2004-09-01T00:00:00", "Import Empty": 65.53865259236262}, {"dt": "2004-10-01T00:00:00", "Import Empty": 50.010981770261374}, {"dt": "2004-11-01T00:00:00", "Import Empty": 87.94910179640718}, {"dt": "2004-12-01T00:00:00", "Import Empty": 17.606662770309754}, {"dt": "2005-01-01T00:00:00", "Import Empty": -7.138476634367718}, {"dt": "2005-02-01T00:00:00", "Import Empty": -5.607476635514019}, {"dt": "2005-03-01T00:00:00", "Import Empty": -8.265582655826552}, {"dt": "2005-04-01T00:00:00", "Import Empty": 5.8442726128394185}, {"dt": "2005-05-01T00:00:00", "Import Empty": 5.10671936758893}, {"dt": "2005-06-01T00:00:00", "Import Empty": 27.42131803164667}, {"dt": "2005-07-01T00:00:00", "Import Empty": 16.155291170945517}, {"dt": "2005-08-01T00:00:00", "Import Empty": -22.81461148648649}, {"dt": "2005-09-01T00:00:00", "Import Empty": -23.499624906226558}, {"dt": "2005-10-01T00:00:00", "Import Empty": -11.08345534407028}, {"dt": "2005-11-01T00:00:00", "Import Empty": -28.16938802601885}, {"dt": "2005-12-01T00:00:00", "Import Empty": -17.132563051310722}, {"dt": "2006-01-01T00:00:00", "Import Empty": 9.800554748381973}, {"dt": "2006-02-01T00:00:00", "Import Empty": 7.110711071107101}, {"dt": "2006-03-01T00:00:00", "Import Empty": 79.81737612461394}, {"dt": "2006-04-01T00:00:00", "Import Empty": 102.5993883792049}, {"dt": "2006-05-01T00:00:00", "Import Empty": 24.608904933814692}, {"dt": "2006-06-01T00:00:00", "Import Empty": 29.16211790393013}, {"dt": "2006-07-01T00:00:00", "Import Empty": 9.56873315363882}, {"dt": "2006-08-01T00:00:00", "Import Empty": -16.53672548215018}, {"dt": "2006-09-01T00:00:00", "Import Empty": 48.88453052218682}, {"dt": "2006-10-01T00:00:00", "Import Empty": -4.725835666062905}, {"dt": "2006-11-01T00:00:00", "Import Empty": 20.42136388837552}, {"dt": "2006-12-01T00:00:00", "Import Empty": 1.9940029985007435}, {"dt": "2007-01-01T00:00:00", "Import Empty": 7.193552267532777}, {"dt": "2007-02-01T00:00:00", "Import Empty": -0.4621848739495782}, {"dt": "2007-03-01T00:00:00", "Import Empty": -7.4004928683444104}, {"dt": "2007-04-01T00:00:00", "Import Empty": -9.685534591194966}, {"dt": "2007-05-01T00:00:00", "Import Empty": 36.62481892805407}, {"dt": "2007-06-01T00:00:00", "Import Empty": 46.47649234020075}, {"dt": "2007-07-01T00:00:00", "Import Empty": 33.02583025830259}, {"dt": "2007-08-01T00:00:00", "Import Empty": 62.65158964274009}, {"dt": "2007-09-01T00:00:00", "Import Empty": 107.36044788407706}, {"dt": "2007-10-01T00:00:00", "Import Empty": 80.22813688212929}, {"dt": "2007-11-01T00:00:00", "Import Empty": 18.170656844689994}, {"dt": "2007-12-01T00:00:00", "Import Empty": 50.03674849331177}, {"dt": "2008-01-01T00:00:00", "Import Empty": 62.33868252721355}, {"dt": "2008-02-01T00:00:00", "Import Empty": 45.040101308569014}, {"dt": "2008-03-01T00:00:00", "Import Empty": 37.82258064516129}, {"dt": "2008-04-01T00:00:00", "Import Empty": 4.958217270194987}, {"dt": "2008-05-01T00:00:00", "Import Empty": 23.49355009719032}, {"dt": "2008-06-01T00:00:00", "Import Empty": 3.137622619734559}, {"dt": "2008-07-01T00:00:00", "Import Empty": 38.8534442903375}, {"dt": "2008-08-01T00:00:00", "Import Empty": 38.005037783375315}, {"dt": "2008-09-01T00:00:00", "Import Empty": -3.5654728817597126}, {"dt": "2008-10-01T00:00:00", "Import Empty": -7.364787111622551}, {"dt": "2008-11-01T00:00:00", "Import Empty": 33.961038961038966}, {"dt": "2008-12-01T00:00:00", "Import Empty": 4.526305476633685}, {"dt": "2009-01-01T00:00:00", "Import Empty": -29.406885109912896}, {"dt": "2009-02-01T00:00:00", "Import Empty": -5.335661622041132}, {"dt": "2009-03-01T00:00:00", "Import Empty": -2.7091866588648372}, {"dt": "2009-04-01T00:00:00", "Import Empty": 92.15322009907997}, {"dt": "2009-05-01T00:00:00", "Import Empty": 33.32617872218644}, {"dt": "2009-06-01T00:00:00", "Import Empty": 22.938667039653126}, {"dt": "2009-07-01T00:00:00", "Import Empty": 58.09415995205433}, {"dt": "2009-08-01T00:00:00", "Import Empty": 43.454771117763016}, {"dt": "2009-09-01T00:00:00", "Import Empty": 87.5576416337286}, {"dt": "2009-10-01T00:00:00", "Import Empty": 93.08488612836439}, {"dt": "2009-11-01T00:00:00", "Import Empty": 94.86185167232186}, {"dt": "2009-12-01T00:00:00", "Import Empty": 152.48851813665763}, {"dt": "2010-01-01T00:00:00", "Import Empty": 184.8903251077164}, {"dt": "2010-02-01T00:00:00", "Import Empty": 122.50461160073786}, {"dt": "2010-03-01T00:00:00", "Import Empty": 84.9882720875684}, {"dt": "2010-04-01T00:00:00", "Import Empty": 16.896091340177712}, {"dt": "2010-05-01T00:00:00", "Import Empty": 23.91735980681513}, {"dt": "2010-06-01T00:00:00", "Import Empty": 39.3480857841743}, {"dt": "2010-07-01T00:00:00", "Import Empty": -5.6779411145276075}, {"dt": "2010-08-01T00:00:00", "Import Empty": 14.39767927120974}, {"dt": "2010-09-01T00:00:00", "Import Empty": -7.9773455678974425}, {"dt": "2010-10-01T00:00:00", "Import Empty": 23.697190649796273}, {"dt": "2010-11-01T00:00:00", "Import Empty": -3.0000000000000027}, {"dt": "2010-12-01T00:00:00", "Import Empty": -17.172767094810304}, {"dt": "2011-01-01T00:00:00", "Import Empty": -20.523837349190533}, {"dt": "2011-02-01T00:00:00", "Import Empty": 18.39996315401622}, {"dt": "2011-03-01T00:00:00", "Import Empty": -0.28285324143312307}, {"dt": "2011-04-01T00:00:00", "Import Empty": 25.000984600842813}, {"dt": "2011-05-01T00:00:00", "Import Empty": 31.95912004157284}, {"dt": "2011-06-01T00:00:00", "Import Empty": 12.361201828870016}, {"dt": "2011-07-01T00:00:00", "Import Empty": 20.05090876613227}, {"dt": "2011-08-01T00:00:00", "Import Empty": -7.215944479046177}, {"dt": "2011-09-01T00:00:00", "Import Empty": 23.850190839694662}, {"dt": "2011-10-01T00:00:00", "Import Empty": -8.603502080443825}, {"dt": "2011-11-01T00:00:00", "Import Empty": 22.40857567830947}, {"dt": "2011-12-01T00:00:00", "Import Empty": -22.378092506274648}, {"dt": "2012-01-01T00:00:00", "Import Empty": 13.424444252227307}, {"dt": "2012-02-01T00:00:00", "Import Empty": 10.250126424709215}, {"dt": "2012-03-01T00:00:00", "Import Empty": 0.994424700857488}, {"dt": "2012-04-01T00:00:00", "Import Empty": -8.242225652982139}, {"dt": "2012-05-01T00:00:00", "Import Empty": -22.03334208453662}, {"dt": "2012-06-01T00:00:00", "Import Empty": -6.401685801482337}, {"dt": "2012-07-01T00:00:00", "Import Empty": -3.872335676821781}, {"dt": "2012-08-01T00:00:00", "Import Empty": 31.19006520905254}, {"dt": "2012-09-01T00:00:00", "Import Empty": -11.822489310065876}, {"dt": "2012-10-01T00:00:00", "Import Empty": -21.58201735666524}, {"dt": "2012-11-01T00:00:00", "Import Empty": -16.303528031509263}, {"dt": "2012-12-01T00:00:00", "Import Empty": 9.885097291991451}, {"dt": "2013-01-01T00:00:00", "Import Empty": -9.063524746434837}, {"dt": "2013-02-01T00:00:00", "Import Empty": 2.8967609907557756}, {"dt": "2013-03-01T00:00:00", "Import Empty": -19.302040289256194}, {"dt": "2013-04-01T00:00:00", "Import Empty": 9.10620471792054}, {"dt": "2013-05-01T00:00:00", "Import Empty": 15.864129977270824}, {"dt": "2013-06-01T00:00:00", "Import Empty": 6.4707709028802185}, {"dt": "2013-07-01T00:00:00", "Import Empty": -17.521863632845758}, {"dt": "2013-08-01T00:00:00", "Import Empty": -16.973063850005488}, {"dt": "2013-09-01T00:00:00", "Import Empty": 9.733508082131937}, {"dt": "2013-10-01T00:00:00", "Import Empty": -24.993952588292213}, {"dt": "2013-11-01T00:00:00", "Import Empty": -16.966207759699625}, {"dt": "2013-12-01T00:00:00", "Import Empty": 11.812306237191962}, {"dt": "2014-01-01T00:00:00", "Import Empty": 9.589500607991951}, {"dt": "2014-02-01T00:00:00", "Import Empty": -23.097760861365423}, {"dt": "2014-03-01T00:00:00", "Import Empty": -7.480897707724932}, {"dt": "2014-04-01T00:00:00", "Import Empty": -22.489378442171514}, {"dt": "2014-05-01T00:00:00", "Import Empty": 8.518908707814155}, {"dt": "2014-06-01T00:00:00", "Import Empty": -9.220168434868203}, {"dt": "2014-07-01T00:00:00", "Import Empty": 2.796284132495064}, {"dt": "2014-08-01T00:00:00", "Import Empty": -17.841264251441647}, {"dt": "2014-09-01T00:00:00", "Import Empty": -34.529023011386265}, {"dt": "2014-10-01T00:00:00", "Import Empty": 52.56792711440781}, {"dt": "2014-11-01T00:00:00", "Import Empty": -0.006029181237188208}, {"dt": "2014-12-01T00:00:00", "Import Empty": -35.98383382677758}, {"dt": "2015-01-01T00:00:00", "Import Empty": -24.334251606978885}, {"dt": "2015-02-01T00:00:00", "Import Empty": 1.6542560306773035}, {"dt": "2015-03-01T00:00:00", "Import Empty": -14.122021879188829}, {"dt": "2015-04-01T00:00:00", "Import Empty": 3.1385764748873335}, {"dt": "2015-05-01T00:00:00", "Import Empty": -36.07726298875201}, {"dt": "2015-06-01T00:00:00", "Import Empty": -41.05220883534136}, {"dt": "2015-07-01T00:00:00", "Import Empty": -35.57736193518941}, {"dt": "2015-08-01T00:00:00", "Import Empty": -43.62408915559366}, {"dt": "2015-09-01T00:00:00", "Import Empty": -26.646397081179686}, {"dt": "2015-10-01T00:00:00", "Import Empty": -31.03102045130265}, {"dt": "2015-11-01T00:00:00", "Import Empty": -29.32770575821525}, {"dt": "2015-12-01T00:00:00", "Import Empty": -5.292908530318607}, {"dt": "2016-01-01T00:00:00", "Import Empty": -23.72572815533981}, {"dt": "2016-02-01T00:00:00", "Import Empty": -35.340819370120194}, {"dt": "2016-03-01T00:00:00", "Import Empty": -40.43099541815619}, {"dt": "2016-04-01T00:00:00", "Import Empty": -40.24879930714117}, {"dt": "2016-05-01T00:00:00", "Import Empty": -43.922492799162086}, {"dt": "2016-06-01T00:00:00", "Import Empty": -25.275923150292957}, {"dt": "2016-07-01T00:00:00", "Import Empty": -15.82713425433936}, {"dt": "2016-08-01T00:00:00", "Import Empty": 20.889564721535827}, {"dt": "2016-09-01T00:00:00", "Import Empty": 20.906905413247113}, {"dt": "2016-10-01T00:00:00", "Import Empty": -37.36112175312236}, {"dt": "2016-11-01T00:00:00", "Import Empty": -5.579728692091123}, {"dt": "2016-12-01T00:00:00", "Import Empty": -19.88993101309976}, {"dt": "2017-01-01T00:00:00", "Import Empty": -7.007425086184038}, {"dt": "2017-02-01T00:00:00", "Import Empty": 2.5710603079845296}, {"dt": "2017-03-01T00:00:00", "Import Empty": 31.814724030090446}, {"dt": "2017-04-01T00:00:00", "Import Empty": -8.85492159704836}, {"dt": "2017-05-01T00:00:00", "Import Empty": 21.908853193873746}, {"dt": "2017-06-01T00:00:00", "Import Empty": -24.00619985412108}, {"dt": "2017-07-01T00:00:00", "Import Empty": -17.801531857587747}, {"dt": "2017-08-01T00:00:00", "Import Empty": -33.569182389937104}, {"dt": "2017-09-01T00:00:00", "Import Empty": -37.49742886527254}, {"dt": "2017-10-01T00:00:00", "Import Empty": 31.498470948012237}, {"dt": "2017-11-01T00:00:00", "Import Empty": -43.34507996747086}, {"dt": "2017-12-01T00:00:00", "Import Empty": -36.37155297532656}, {"dt": "2018-01-01T00:00:00", "Import Empty": -39.46674271048691}, {"dt": "2018-02-01T00:00:00", "Import Empty": 0.7605820105820005}, {"dt": "2018-03-01T00:00:00", "Import Empty": -16.069252965694137}, {"dt": "2018-04-01T00:00:00", "Import Empty": 14.211363307792402}, {"dt": "2018-05-01T00:00:00", "Import Empty": -23.00444308258005}, {"dt": "2018-06-01T00:00:00", "Import Empty": 16.868626274745058}, {"dt": "2018-07-01T00:00:00", "Import Empty": -30.309236125332784}, {"dt": "2018-08-01T00:00:00", "Import Empty": -39.396449704142015}, {"dt": "2018-09-01T00:00:00", "Import Empty": -34.54365949978061}, {"dt": "2018-10-01T00:00:00", "Import Empty": -65.30232558139535}, {"dt": "2018-11-01T00:00:00", "Import Empty": -38.229665071770334}, {"dt": "2018-12-01T00:00:00", "Import Empty": -59.899635036496356}, {"dt": "2019-01-01T00:00:00", "Import Empty": -73.90177835355082}, {"dt": "2019-02-01T00:00:00", "Import Empty": -70.69248441089596}, {"dt": "2019-03-01T00:00:00", "Import Empty": -25.24257009702804}, {"dt": "2019-04-01T00:00:00", "Import Empty": -53.25316455696203}, {"dt": "2019-05-01T00:00:00", "Import Empty": -72.41070540244752}, {"dt": "2019-06-01T00:00:00", "Import Empty": -51.17544399958936}, {"dt": "2019-07-01T00:00:00", "Import Empty": -20.643549808992066}, {"dt": "2019-08-01T00:00:00", "Import Empty": 19.019722710408125}, {"dt": "2019-09-01T00:00:00", "Import Empty": 48.801742919389966}, {"dt": "2019-10-01T00:00:00", "Import Empty": 105.84450402144773}, {"dt": "2019-11-01T00:00:00", "Import Empty": 90.6274206041828}, {"dt": "2019-12-01T00:00:00", "Import Empty": 255.8968524838832}, {"dt": "2020-01-01T00:00:00", "Import Empty": 213.62815884476535}, {"dt": "2020-02-01T00:00:00", "Import Empty": 147.30123180291153}, {"dt": "2020-03-01T00:00:00", "Import Empty": 56.32089933571793}, {"dt": "2020-04-01T00:00:00", "Import Empty": 6.607094503114008}, {"dt": "2020-05-01T00:00:00", "Import Empty": 177.49729534799857}, {"dt": "2020-06-01T00:00:00", "Import Empty": 50.18923465096721}, {"dt": "2020-07-01T00:00:00", "Import Empty": 39.02980929457507}, {"dt": "2020-08-01T00:00:00", "Import Empty": -5.184577522559475}, {"dt": "2020-09-01T00:00:00", "Import Empty": -50.44486991778354}, {"dt": "2020-10-01T00:00:00", "Import Empty": -23.756186506902843}, {"dt": "2020-11-01T00:00:00", "Import Empty": -30.13680075849926}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[23]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doYoyChart</span><span class="p">(</span><span class="n">df_ga_ts</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Georgia&#39;</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;Import Full&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[23]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-6c9cc2778699466da28645a6c6c75067"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-6c9cc2778699466da28645a6c6c75067") {
      outputDiv = document.getElementById("altair-viz-6c9cc2778699466da28645a6c6c75067");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-f92cbf653eca034b2056828548c78452"}, "mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['nolarge'] < 0"}, "value": "royalblue"}, "tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "nolarge", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Year-over-Year Volume Growth [%]"}, "field": "nolarge"}}, "height": 400, "title": "Port of Georgia Import Full Container Volume Growth", "transform": [{"calculate": "datum['Import Full'] > 400 ? NaN : datum['Import Full']", "as": "nolarge"}], "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-f92cbf653eca034b2056828548c78452": [{"dt": "2003-01-01T00:00:00", "Import Full": null}, {"dt": "2003-02-01T00:00:00", "Import Full": null}, {"dt": "2003-03-01T00:00:00", "Import Full": null}, {"dt": "2003-04-01T00:00:00", "Import Full": null}, {"dt": "2003-05-01T00:00:00", "Import Full": null}, {"dt": "2003-06-01T00:00:00", "Import Full": null}, {"dt": "2003-07-01T00:00:00", "Import Full": null}, {"dt": "2003-08-01T00:00:00", "Import Full": null}, {"dt": "2003-09-01T00:00:00", "Import Full": null}, {"dt": "2003-10-01T00:00:00", "Import Full": null}, {"dt": "2003-11-01T00:00:00", "Import Full": null}, {"dt": "2003-12-01T00:00:00", "Import Full": null}, {"dt": "2004-01-01T00:00:00", "Import Full": -12.623532247512138}, {"dt": "2004-02-01T00:00:00", "Import Full": 10.492783505154634}, {"dt": "2004-03-01T00:00:00", "Import Full": 17.69131509306039}, {"dt": "2004-04-01T00:00:00", "Import Full": -0.16212589914651465}, {"dt": "2004-05-01T00:00:00", "Import Full": 12.01977612738907}, {"dt": "2004-06-01T00:00:00", "Import Full": 13.41246949190149}, {"dt": "2004-07-01T00:00:00", "Import Full": 13.55309147884778}, {"dt": "2004-08-01T00:00:00", "Import Full": 10.933131302198884}, {"dt": "2004-09-01T00:00:00", "Import Full": 1.8813288944375062}, {"dt": "2004-10-01T00:00:00", "Import Full": 19.232342402774826}, {"dt": "2004-11-01T00:00:00", "Import Full": 27.685432200104888}, {"dt": "2004-12-01T00:00:00", "Import Full": 17.172163230895855}, {"dt": "2005-01-01T00:00:00", "Import Full": 25.881773399014783}, {"dt": "2005-02-01T00:00:00", "Import Full": 18.096997518147372}, {"dt": "2005-03-01T00:00:00", "Import Full": 11.549468520032713}, {"dt": "2005-04-01T00:00:00", "Import Full": 22.809146056929542}, {"dt": "2005-05-01T00:00:00", "Import Full": 20.08253883337474}, {"dt": "2005-06-01T00:00:00", "Import Full": 21.115132544262938}, {"dt": "2005-07-01T00:00:00", "Import Full": 20.48329176175061}, {"dt": "2005-08-01T00:00:00", "Import Full": 18.116036293863225}, {"dt": "2005-09-01T00:00:00", "Import Full": 31.226917643855188}, {"dt": "2005-10-01T00:00:00", "Import Full": 16.630989626214387}, {"dt": "2005-11-01T00:00:00", "Import Full": 16.944945445454373}, {"dt": "2005-12-01T00:00:00", "Import Full": 6.516599856100314}, {"dt": "2006-01-01T00:00:00", "Import Full": 17.007122172653986}, {"dt": "2006-02-01T00:00:00", "Import Full": 4.42112914184587}, {"dt": "2006-03-01T00:00:00", "Import Full": -0.5264297732686996}, {"dt": "2006-04-01T00:00:00", "Import Full": 5.333232008511279}, {"dt": "2006-05-01T00:00:00", "Import Full": 8.762132060461415}, {"dt": "2006-06-01T00:00:00", "Import Full": 8.43994314143568}, {"dt": "2006-07-01T00:00:00", "Import Full": 9.451165795501272}, {"dt": "2006-08-01T00:00:00", "Import Full": 1.3546441993970149}, {"dt": "2006-09-01T00:00:00", "Import Full": 6.44056805654627}, {"dt": "2006-10-01T00:00:00", "Import Full": 5.337898254035478}, {"dt": "2006-11-01T00:00:00", "Import Full": 10.122465184461271}, {"dt": "2006-12-01T00:00:00", "Import Full": 10.978159477628747}, {"dt": "2007-01-01T00:00:00", "Import Full": -2.767892976588626}, {"dt": "2007-02-01T00:00:00", "Import Full": 21.380040856472714}, {"dt": "2007-03-01T00:00:00", "Import Full": 35.22466547202359}, {"dt": "2007-04-01T00:00:00", "Import Full": 17.804167147639394}, {"dt": "2007-05-01T00:00:00", "Import Full": 28.149275129101635}, {"dt": "2007-06-01T00:00:00", "Import Full": 28.421193749720697}, {"dt": "2007-07-01T00:00:00", "Import Full": 30.786773090079823}, {"dt": "2007-08-01T00:00:00", "Import Full": 32.89461173817965}, {"dt": "2007-09-01T00:00:00", "Import Full": 27.88073741029109}, {"dt": "2007-10-01T00:00:00", "Import Full": 23.253995733416733}, {"dt": "2007-11-01T00:00:00", "Import Full": 25.372658319120323}, {"dt": "2007-12-01T00:00:00", "Import Full": 21.550924584082075}, {"dt": "2008-01-01T00:00:00", "Import Full": 28.17655233142087}, {"dt": "2008-02-01T00:00:00", "Import Full": 11.625152716483411}, {"dt": "2008-03-01T00:00:00", "Import Full": 5.29698801149312}, {"dt": "2008-04-01T00:00:00", "Import Full": 11.845473586222944}, {"dt": "2008-05-01T00:00:00", "Import Full": -0.642701400700918}, {"dt": "2008-06-01T00:00:00", "Import Full": -2.878916172734969}, {"dt": "2008-07-01T00:00:00", "Import Full": -6.613672496025435}, {"dt": "2008-08-01T00:00:00", "Import Full": -3.361576435236757}, {"dt": "2008-09-01T00:00:00", "Import Full": 0.6431450268215233}, {"dt": "2008-10-01T00:00:00", "Import Full": -14.145514847806584}, {"dt": "2008-11-01T00:00:00", "Import Full": -6.039927003262735}, {"dt": "2008-12-01T00:00:00", "Import Full": -13.520119225037252}, {"dt": "2009-01-01T00:00:00", "Import Full": -16.382567625590383}, {"dt": "2009-02-01T00:00:00", "Import Full": -23.588603848602286}, {"dt": "2009-03-01T00:00:00", "Import Full": -28.71290622316839}, {"dt": "2009-04-01T00:00:00", "Import Full": -19.286199268458283}, {"dt": "2009-05-01T00:00:00", "Import Full": -22.67797233328738}, {"dt": "2009-06-01T00:00:00", "Import Full": -23.116886218963106}, {"dt": "2009-07-01T00:00:00", "Import Full": -19.21754698122947}, {"dt": "2009-08-01T00:00:00", "Import Full": -18.682841187917766}, {"dt": "2009-09-01T00:00:00", "Import Full": -26.593327526792145}, {"dt": "2009-10-01T00:00:00", "Import Full": -2.6492722417487347}, {"dt": "2009-11-01T00:00:00", "Import Full": -13.756856651835115}, {"dt": "2009-12-01T00:00:00", "Import Full": 7.229613290135806}, {"dt": "2010-01-01T00:00:00", "Import Full": 3.512285296156503}, {"dt": "2010-02-01T00:00:00", "Import Full": 6.311204653746083}, {"dt": "2010-03-01T00:00:00", "Import Full": 34.427230279331454}, {"dt": "2010-04-01T00:00:00", "Import Full": 18.84862217277452}, {"dt": "2010-05-01T00:00:00", "Import Full": 29.849326874498505}, {"dt": "2010-06-01T00:00:00", "Import Full": 38.05669902912621}, {"dt": "2010-07-01T00:00:00", "Import Full": 29.36097892590075}, {"dt": "2010-08-01T00:00:00", "Import Full": 26.147463160222138}, {"dt": "2010-09-01T00:00:00", "Import Full": 22.76045293920401}, {"dt": "2010-10-01T00:00:00", "Import Full": 15.05860158511596}, {"dt": "2010-11-01T00:00:00", "Import Full": 10.790669742175885}, {"dt": "2010-12-01T00:00:00", "Import Full": 0.20828244127593099}, {"dt": "2011-01-01T00:00:00", "Import Full": 9.849443162933746}, {"dt": "2011-02-01T00:00:00", "Import Full": 18.74725032996041}, {"dt": "2011-03-01T00:00:00", "Import Full": -4.449217551396134}, {"dt": "2011-04-01T00:00:00", "Import Full": 4.101832296363939}, {"dt": "2011-05-01T00:00:00", "Import Full": 3.6172842331723576}, {"dt": "2011-06-01T00:00:00", "Import Full": -1.205076850372433}, {"dt": "2011-07-01T00:00:00", "Import Full": 0.12507225813231937}, {"dt": "2011-08-01T00:00:00", "Import Full": -7.152209998865877}, {"dt": "2011-09-01T00:00:00", "Import Full": 5.628979051541183}, {"dt": "2011-10-01T00:00:00", "Import Full": -9.253500687887527}, {"dt": "2011-11-01T00:00:00", "Import Full": 1.5140502383797605}, {"dt": "2011-12-01T00:00:00", "Import Full": 0.45675575114509925}, {"dt": "2012-01-01T00:00:00", "Import Full": 3.69287391618498}, {"dt": "2012-02-01T00:00:00", "Import Full": -0.1586162182188655}, {"dt": "2012-03-01T00:00:00", "Import Full": 12.468850353243411}, {"dt": "2012-04-01T00:00:00", "Import Full": -0.053735140588673236}, {"dt": "2012-05-01T00:00:00", "Import Full": 2.837200569869802}, {"dt": "2012-06-01T00:00:00", "Import Full": 6.892702982813792}, {"dt": "2012-07-01T00:00:00", "Import Full": -1.1462882096069826}, {"dt": "2012-08-01T00:00:00", "Import Full": 11.047815754991452}, {"dt": "2012-09-01T00:00:00", "Import Full": -3.474100891152132}, {"dt": "2012-10-01T00:00:00", "Import Full": -9.882453116238498}, {"dt": "2012-11-01T00:00:00", "Import Full": 2.969588116793287}, {"dt": "2012-12-01T00:00:00", "Import Full": 4.323281862651185}, {"dt": "2013-01-01T00:00:00", "Import Full": -3.891253933171468}, {"dt": "2013-02-01T00:00:00", "Import Full": -0.6841769583115886}, {"dt": "2013-03-01T00:00:00", "Import Full": -8.49275329214112}, {"dt": "2013-04-01T00:00:00", "Import Full": 1.1498919233259075}, {"dt": "2013-05-01T00:00:00", "Import Full": 3.536449160187294}, {"dt": "2013-06-01T00:00:00", "Import Full": 3.9997869053326918}, {"dt": "2013-07-01T00:00:00", "Import Full": 0.8484475215563059}, {"dt": "2013-08-01T00:00:00", "Import Full": 11.352659420217392}, {"dt": "2013-09-01T00:00:00", "Import Full": 5.149869656160155}, {"dt": "2013-10-01T00:00:00", "Import Full": 27.715619058593077}, {"dt": "2013-11-01T00:00:00", "Import Full": 15.023158787964498}, {"dt": "2013-12-01T00:00:00", "Import Full": 8.649396439852119}, {"dt": "2014-01-01T00:00:00", "Import Full": 14.284095929672723}, {"dt": "2014-02-01T00:00:00", "Import Full": 14.19347305738805}, {"dt": "2014-03-01T00:00:00", "Import Full": 23.95252181076122}, {"dt": "2014-04-01T00:00:00", "Import Full": 8.65197912937834}, {"dt": "2014-05-01T00:00:00", "Import Full": 16.42170336794282}, {"dt": "2014-06-01T00:00:00", "Import Full": 4.157403518118197}, {"dt": "2014-07-01T00:00:00", "Import Full": 28.699287150814467}, {"dt": "2014-08-01T00:00:00", "Import Full": 14.540752182190442}, {"dt": "2014-09-01T00:00:00", "Import Full": 20.741996491881352}, {"dt": "2014-10-01T00:00:00", "Import Full": 19.081001100705542}, {"dt": "2014-11-01T00:00:00", "Import Full": 15.01291036517891}, {"dt": "2014-12-01T00:00:00", "Import Full": 33.11999278848863}, {"dt": "2015-01-01T00:00:00", "Import Full": 27.006800023790166}, {"dt": "2015-02-01T00:00:00", "Import Full": 17.104119589779245}, {"dt": "2015-03-01T00:00:00", "Import Full": 52.721725471242145}, {"dt": "2015-04-01T00:00:00", "Import Full": 35.25553348042691}, {"dt": "2015-05-01T00:00:00", "Import Full": 32.316176798139715}, {"dt": "2015-06-01T00:00:00", "Import Full": 38.840528391710194}, {"dt": "2015-07-01T00:00:00", "Import Full": 16.434175754947766}, {"dt": "2015-08-01T00:00:00", "Import Full": 11.4435349829084}, {"dt": "2015-09-01T00:00:00", "Import Full": 13.438189845474625}, {"dt": "2015-10-01T00:00:00", "Import Full": 8.1280732193322}, {"dt": "2015-11-01T00:00:00", "Import Full": 11.158327988026517}, {"dt": "2015-12-01T00:00:00", "Import Full": -5.704249195869304}, {"dt": "2016-01-01T00:00:00", "Import Full": 1.113738712371326}, {"dt": "2016-02-01T00:00:00", "Import Full": 22.78462223541635}, {"dt": "2016-03-01T00:00:00", "Import Full": -15.357583189930835}, {"dt": "2016-04-01T00:00:00", "Import Full": -3.8885116182940105}, {"dt": "2016-05-01T00:00:00", "Import Full": -5.024475971800446}, {"dt": "2016-06-01T00:00:00", "Import Full": -6.273954163862417}, {"dt": "2016-07-01T00:00:00", "Import Full": 2.434756945908334}, {"dt": "2016-08-01T00:00:00", "Import Full": 7.173711166141383}, {"dt": "2016-09-01T00:00:00", "Import Full": 4.849256657175149}, {"dt": "2016-10-01T00:00:00", "Import Full": 5.756227446309081}, {"dt": "2016-11-01T00:00:00", "Import Full": 11.988971973103158}, {"dt": "2016-12-01T00:00:00", "Import Full": 19.768224701753123}, {"dt": "2017-01-01T00:00:00", "Import Full": 19.149543819565594}, {"dt": "2017-02-01T00:00:00", "Import Full": 5.511150301513257}, {"dt": "2017-03-01T00:00:00", "Import Full": 7.021452273754081}, {"dt": "2017-04-01T00:00:00", "Import Full": 14.630437453919875}, {"dt": "2017-05-01T00:00:00", "Import Full": 13.495118786821791}, {"dt": "2017-06-01T00:00:00", "Import Full": 16.9608235889916}, {"dt": "2017-07-01T00:00:00", "Import Full": 9.46021031835862}, {"dt": "2017-08-01T00:00:00", "Import Full": 7.978810694428939}, {"dt": "2017-09-01T00:00:00", "Import Full": 13.874256236694137}, {"dt": "2017-10-01T00:00:00", "Import Full": 24.805538991585507}, {"dt": "2017-11-01T00:00:00", "Import Full": 3.183952136947865}, {"dt": "2017-12-01T00:00:00", "Import Full": 11.016091678346317}, {"dt": "2018-01-01T00:00:00", "Import Full": 9.973244883812837}, {"dt": "2018-02-01T00:00:00", "Import Full": 7.0874951136991715}, {"dt": "2018-03-01T00:00:00", "Import Full": 16.236025387213225}, {"dt": "2018-04-01T00:00:00", "Import Full": 8.329871765667507}, {"dt": "2018-05-01T00:00:00", "Import Full": 3.5868220831303255}, {"dt": "2018-06-01T00:00:00", "Import Full": 13.49313032351458}, {"dt": "2018-07-01T00:00:00", "Import Full": 13.978191389358896}, {"dt": "2018-08-01T00:00:00", "Import Full": 11.177779398891152}, {"dt": "2018-09-01T00:00:00", "Import Full": 4.078257482697656}, {"dt": "2018-10-01T00:00:00", "Import Full": 9.272757194655167}, {"dt": "2018-11-01T00:00:00", "Import Full": 17.32405795493164}, {"dt": "2018-12-01T00:00:00", "Import Full": 19.11950364904369}, {"dt": "2019-01-01T00:00:00", "Import Full": 23.45986639804898}, {"dt": "2019-02-01T00:00:00", "Import Full": -5.793316130656434}, {"dt": "2019-03-01T00:00:00", "Import Full": 16.700167189525295}, {"dt": "2019-04-01T00:00:00", "Import Full": 8.639936669326055}, {"dt": "2019-05-01T00:00:00", "Import Full": 11.721180982704983}, {"dt": "2019-06-01T00:00:00", "Import Full": -3.882312076849048}, {"dt": "2019-07-01T00:00:00", "Import Full": 8.503642611683858}, {"dt": "2019-08-01T00:00:00", "Import Full": 18.664391988320396}, {"dt": "2019-09-01T00:00:00", "Import Full": 5.627810306809211}, {"dt": "2019-10-01T00:00:00", "Import Full": -3.086437746555515}, {"dt": "2019-11-01T00:00:00", "Import Full": 2.7808156822870744}, {"dt": "2019-12-01T00:00:00", "Import Full": -2.446710231748861}, {"dt": "2020-01-01T00:00:00", "Import Full": -9.934488961413857}, {"dt": "2020-02-01T00:00:00", "Import Full": 13.576510672412056}, {"dt": "2020-03-01T00:00:00", "Import Full": -21.105977925513365}, {"dt": "2020-04-01T00:00:00", "Import Full": -5.113257922931103}, {"dt": "2020-05-01T00:00:00", "Import Full": -16.481796345774967}, {"dt": "2020-06-01T00:00:00", "Import Full": -4.405239367531799}, {"dt": "2020-07-01T00:00:00", "Import Full": -5.975950258689277}, {"dt": "2020-08-01T00:00:00", "Import Full": 4.847546505573286}, {"dt": "2020-09-01T00:00:00", "Import Full": 15.834541549932958}, {"dt": "2020-10-01T00:00:00", "Import Full": 16.909711604497634}, {"dt": "2020-11-01T00:00:00", "Import Full": 34.92404939521347}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[24]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doYoyChart</span><span class="p">(</span><span class="n">df_ga_ts</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Georgia&#39;</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;Export Total&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[24]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-581c4442a8794431af1461510a5371d3"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-581c4442a8794431af1461510a5371d3") {
      outputDiv = document.getElementById("altair-viz-581c4442a8794431af1461510a5371d3");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-44df77cc29b0e15d0f632b76c40c9507"}, "mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['nolarge'] < 0"}, "value": "royalblue"}, "tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "nolarge", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Year-over-Year Volume Growth [%]"}, "field": "nolarge"}}, "height": 400, "title": "Port of Georgia Export Total Container Volume Growth", "transform": [{"calculate": "datum['Export Total'] > 400 ? NaN : datum['Export Total']", "as": "nolarge"}], "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-44df77cc29b0e15d0f632b76c40c9507": [{"dt": "2003-01-01T00:00:00", "Export Total": null}, {"dt": "2003-02-01T00:00:00", "Export Total": null}, {"dt": "2003-03-01T00:00:00", "Export Total": null}, {"dt": "2003-04-01T00:00:00", "Export Total": null}, {"dt": "2003-05-01T00:00:00", "Export Total": null}, {"dt": "2003-06-01T00:00:00", "Export Total": null}, {"dt": "2003-07-01T00:00:00", "Export Total": null}, {"dt": "2003-08-01T00:00:00", "Export Total": null}, {"dt": "2003-09-01T00:00:00", "Export Total": null}, {"dt": "2003-10-01T00:00:00", "Export Total": null}, {"dt": "2003-11-01T00:00:00", "Export Total": null}, {"dt": "2003-12-01T00:00:00", "Export Total": null}, {"dt": "2004-01-01T00:00:00", "Export Total": -2.156218552062983}, {"dt": "2004-02-01T00:00:00", "Export Total": 17.45107552967815}, {"dt": "2004-03-01T00:00:00", "Export Total": 4.93131732384624}, {"dt": "2004-04-01T00:00:00", "Export Total": 11.720907369121104}, {"dt": "2004-05-01T00:00:00", "Export Total": 13.172480313260305}, {"dt": "2004-06-01T00:00:00", "Export Total": 3.262119045616396}, {"dt": "2004-07-01T00:00:00", "Export Total": 3.03537284894837}, {"dt": "2004-08-01T00:00:00", "Export Total": 16.469273743016764}, {"dt": "2004-09-01T00:00:00", "Export Total": -3.4007711302690313}, {"dt": "2004-10-01T00:00:00", "Export Total": 5.022442346386002}, {"dt": "2004-11-01T00:00:00", "Export Total": 13.783161158521562}, {"dt": "2004-12-01T00:00:00", "Export Total": 10.467222021006872}, {"dt": "2005-01-01T00:00:00", "Export Total": 20.072600771383197}, {"dt": "2005-02-01T00:00:00", "Export Total": 3.2842192233544454}, {"dt": "2005-03-01T00:00:00", "Export Total": 9.677636358743902}, {"dt": "2005-04-01T00:00:00", "Export Total": 6.4148355203561325}, {"dt": "2005-05-01T00:00:00", "Export Total": 0.8649968834671062}, {"dt": "2005-06-01T00:00:00", "Export Total": 8.601566636347592}, {"dt": "2005-07-01T00:00:00", "Export Total": 18.120539795598134}, {"dt": "2005-08-01T00:00:00", "Export Total": 4.213833461243288}, {"dt": "2005-09-01T00:00:00", "Export Total": 32.406493855951204}, {"dt": "2005-10-01T00:00:00", "Export Total": 22.86370446786039}, {"dt": "2005-11-01T00:00:00", "Export Total": 15.736260377935118}, {"dt": "2005-12-01T00:00:00", "Export Total": 15.199453551912567}, {"dt": "2006-01-01T00:00:00", "Export Total": 19.008389388557177}, {"dt": "2006-02-01T00:00:00", "Export Total": 16.748216785547633}, {"dt": "2006-03-01T00:00:00", "Export Total": 21.555710938554196}, {"dt": "2006-04-01T00:00:00", "Export Total": 12.074521774026836}, {"dt": "2006-05-01T00:00:00", "Export Total": 27.504319422899883}, {"dt": "2006-06-01T00:00:00", "Export Total": 23.52088203307625}, {"dt": "2006-07-01T00:00:00", "Export Total": 15.237908209825912}, {"dt": "2006-08-01T00:00:00", "Export Total": 17.016086346167114}, {"dt": "2006-09-01T00:00:00", "Export Total": 19.076005961251873}, {"dt": "2006-10-01T00:00:00", "Export Total": 12.257729176454134}, {"dt": "2006-11-01T00:00:00", "Export Total": 11.848388161513924}, {"dt": "2006-12-01T00:00:00", "Export Total": 20.893911723549085}, {"dt": "2007-01-01T00:00:00", "Export Total": 1.3971802362504837}, {"dt": "2007-02-01T00:00:00", "Export Total": 16.156771386481218}, {"dt": "2007-03-01T00:00:00", "Export Total": 15.897508350909773}, {"dt": "2007-04-01T00:00:00", "Export Total": 21.875}, {"dt": "2007-05-01T00:00:00", "Export Total": 20.560424126130037}, {"dt": "2007-06-01T00:00:00", "Export Total": 16.505925333711158}, {"dt": "2007-07-01T00:00:00", "Export Total": 23.681308767216656}, {"dt": "2007-08-01T00:00:00", "Export Total": 26.106751627431322}, {"dt": "2007-09-01T00:00:00", "Export Total": 26.108393067091452}, {"dt": "2007-10-01T00:00:00", "Export Total": 14.615425711894293}, {"dt": "2007-11-01T00:00:00", "Export Total": 18.313184272912373}, {"dt": "2007-12-01T00:00:00", "Export Total": 6.85663838344206}, {"dt": "2008-01-01T00:00:00", "Export Total": 21.185644494550914}, {"dt": "2008-02-01T00:00:00", "Export Total": 12.607776630782098}, {"dt": "2008-03-01T00:00:00", "Export Total": 1.0919159903869602}, {"dt": "2008-04-01T00:00:00", "Export Total": 3.1436965811965756}, {"dt": "2008-05-01T00:00:00", "Export Total": -7.320594967552441}, {"dt": "2008-06-01T00:00:00", "Export Total": -3.0228538172215824}, {"dt": "2008-07-01T00:00:00", "Export Total": -7.009936619604151}, {"dt": "2008-08-01T00:00:00", "Export Total": -6.198388995890614}, {"dt": "2008-09-01T00:00:00", "Export Total": -7.996751977384142}, {"dt": "2008-10-01T00:00:00", "Export Total": -2.229645742697328}, {"dt": "2008-11-01T00:00:00", "Export Total": -1.4815923376234608}, {"dt": "2008-12-01T00:00:00", "Export Total": -7.290586129343191}, {"dt": "2009-01-01T00:00:00", "Export Total": -13.861539654236765}, {"dt": "2009-02-01T00:00:00", "Export Total": -21.603995145758216}, {"dt": "2009-03-01T00:00:00", "Export Total": -18.38705231786939}, {"dt": "2009-04-01T00:00:00", "Export Total": -15.050366418934669}, {"dt": "2009-05-01T00:00:00", "Export Total": -11.491068108988545}, {"dt": "2009-06-01T00:00:00", "Export Total": -12.670745143000461}, {"dt": "2009-07-01T00:00:00", "Export Total": -3.431445181421211}, {"dt": "2009-08-01T00:00:00", "Export Total": -7.9555090029427955}, {"dt": "2009-09-01T00:00:00", "Export Total": -16.157819037656907}, {"dt": "2009-10-01T00:00:00", "Export Total": -2.106475963448551}, {"dt": "2009-11-01T00:00:00", "Export Total": -10.588721791820689}, {"dt": "2009-12-01T00:00:00", "Export Total": 11.758240670145458}, {"dt": "2010-01-01T00:00:00", "Export Total": 16.112161121611223}, {"dt": "2010-02-01T00:00:00", "Export Total": 20.410049669242937}, {"dt": "2010-03-01T00:00:00", "Export Total": 22.033540543107733}, {"dt": "2010-04-01T00:00:00", "Export Total": 28.79743941472337}, {"dt": "2010-05-01T00:00:00", "Export Total": 21.3021953292994}, {"dt": "2010-06-01T00:00:00", "Export Total": 30.63478876273116}, {"dt": "2010-07-01T00:00:00", "Export Total": 20.573847431315208}, {"dt": "2010-08-01T00:00:00", "Export Total": 16.50771287164481}, {"dt": "2010-09-01T00:00:00", "Export Total": 23.639323170493974}, {"dt": "2010-10-01T00:00:00", "Export Total": 16.951436294125767}, {"dt": "2010-11-01T00:00:00", "Export Total": 14.78475086599904}, {"dt": "2010-12-01T00:00:00", "Export Total": 4.786121841443092}, {"dt": "2011-01-01T00:00:00", "Export Total": 7.899337702715514}, {"dt": "2011-02-01T00:00:00", "Export Total": 14.283071743694563}, {"dt": "2011-03-01T00:00:00", "Export Total": 11.990175390043945}, {"dt": "2011-04-01T00:00:00", "Export Total": 8.188961469279565}, {"dt": "2011-05-01T00:00:00", "Export Total": 9.917219089080165}, {"dt": "2011-06-01T00:00:00", "Export Total": 2.23923369842578}, {"dt": "2011-07-01T00:00:00", "Export Total": 5.228645642296259}, {"dt": "2011-08-01T00:00:00", "Export Total": -1.6433853738701765}, {"dt": "2011-09-01T00:00:00", "Export Total": 13.011533397977114}, {"dt": "2011-10-01T00:00:00", "Export Total": -4.411346237932301}, {"dt": "2011-11-01T00:00:00", "Export Total": 5.157428193173308}, {"dt": "2011-12-01T00:00:00", "Export Total": 0.4946309292297224}, {"dt": "2012-01-01T00:00:00", "Export Total": 2.990828763679021}, {"dt": "2012-02-01T00:00:00", "Export Total": -0.8619015247159356}, {"dt": "2012-03-01T00:00:00", "Export Total": 9.089364593951753}, {"dt": "2012-04-01T00:00:00", "Export Total": -6.188746937346867}, {"dt": "2012-05-01T00:00:00", "Export Total": 4.758011281805086}, {"dt": "2012-06-01T00:00:00", "Export Total": 7.000622038597104}, {"dt": "2012-07-01T00:00:00", "Export Total": -6.018096972456178}, {"dt": "2012-08-01T00:00:00", "Export Total": 12.897022430289562}, {"dt": "2012-09-01T00:00:00", "Export Total": -4.279615497300393}, {"dt": "2012-10-01T00:00:00", "Export Total": -7.556978660683821}, {"dt": "2012-11-01T00:00:00", "Export Total": -3.536826630592027}, {"dt": "2012-12-01T00:00:00", "Export Total": -0.3701989819527962}, {"dt": "2013-01-01T00:00:00", "Export Total": -8.354646206308614}, {"dt": "2013-02-01T00:00:00", "Export Total": 4.177993289741133}, {"dt": "2013-03-01T00:00:00", "Export Total": -9.793150316433296}, {"dt": "2013-04-01T00:00:00", "Export Total": 4.927360492502864}, {"dt": "2013-05-01T00:00:00", "Export Total": -1.4829401023951916}, {"dt": "2013-06-01T00:00:00", "Export Total": 1.016270373852568}, {"dt": "2013-07-01T00:00:00", "Export Total": -1.3230797178237275}, {"dt": "2013-08-01T00:00:00", "Export Total": 2.4391606048336456}, {"dt": "2013-09-01T00:00:00", "Export Total": -1.8692746631297386}, {"dt": "2013-10-01T00:00:00", "Export Total": 18.66806996599093}, {"dt": "2013-11-01T00:00:00", "Export Total": 4.598735408560306}, {"dt": "2013-12-01T00:00:00", "Export Total": 5.793184985010336}, {"dt": "2014-01-01T00:00:00", "Export Total": 11.689640591966178}, {"dt": "2014-02-01T00:00:00", "Export Total": 0.7091531692486219}, {"dt": "2014-03-01T00:00:00", "Export Total": 8.391405342624857}, {"dt": "2014-04-01T00:00:00", "Export Total": 5.300471152991371}, {"dt": "2014-05-01T00:00:00", "Export Total": 7.8054134201651415}, {"dt": "2014-06-01T00:00:00", "Export Total": 0.5705191511129692}, {"dt": "2014-07-01T00:00:00", "Export Total": 14.868679430535092}, {"dt": "2014-08-01T00:00:00", "Export Total": 6.044704920267141}, {"dt": "2014-09-01T00:00:00", "Export Total": 15.87995900604513}, {"dt": "2014-10-01T00:00:00", "Export Total": 6.4618398670964305}, {"dt": "2014-11-01T00:00:00", "Export Total": 10.4562398766207}, {"dt": "2014-12-01T00:00:00", "Export Total": 16.44222710037917}, {"dt": "2015-01-01T00:00:00", "Export Total": 10.357150969539575}, {"dt": "2015-02-01T00:00:00", "Export Total": 14.15166275034625}, {"dt": "2015-03-01T00:00:00", "Export Total": 16.94383909760282}, {"dt": "2015-04-01T00:00:00", "Export Total": 23.13655966174908}, {"dt": "2015-05-01T00:00:00", "Export Total": 15.018574327649791}, {"dt": "2015-06-01T00:00:00", "Export Total": 23.33771334915791}, {"dt": "2015-07-01T00:00:00", "Export Total": 12.060606870025104}, {"dt": "2015-08-01T00:00:00", "Export Total": 4.433519696677601}, {"dt": "2015-09-01T00:00:00", "Export Total": 6.116498010087357}, {"dt": "2015-10-01T00:00:00", "Export Total": 2.784581908610506}, {"dt": "2015-11-01T00:00:00", "Export Total": 3.597263637958248}, {"dt": "2015-12-01T00:00:00", "Export Total": -6.924516531503433}, {"dt": "2016-01-01T00:00:00", "Export Total": -3.4908611888687657}, {"dt": "2016-02-01T00:00:00", "Export Total": 3.3815009201826784}, {"dt": "2016-03-01T00:00:00", "Export Total": -4.076174438473535}, {"dt": "2016-04-01T00:00:00", "Export Total": -12.783522824658633}, {"dt": "2016-05-01T00:00:00", "Export Total": -5.201085586668153}, {"dt": "2016-06-01T00:00:00", "Export Total": -16.89129202059718}, {"dt": "2016-07-01T00:00:00", "Export Total": -6.411303057570028}, {"dt": "2016-08-01T00:00:00", "Export Total": 2.015888350799022}, {"dt": "2016-09-01T00:00:00", "Export Total": -11.093664128130643}, {"dt": "2016-10-01T00:00:00", "Export Total": -8.492762915157048}, {"dt": "2016-11-01T00:00:00", "Export Total": 1.504212608024269}, {"dt": "2016-12-01T00:00:00", "Export Total": 9.311934714079495}, {"dt": "2017-01-01T00:00:00", "Export Total": 15.934425297162026}, {"dt": "2017-02-01T00:00:00", "Export Total": 10.1370730067053}, {"dt": "2017-03-01T00:00:00", "Export Total": 2.480960371756802}, {"dt": "2017-04-01T00:00:00", "Export Total": 11.305885820968854}, {"dt": "2017-05-01T00:00:00", "Export Total": 9.422727328939073}, {"dt": "2017-06-01T00:00:00", "Export Total": 20.360172849886627}, {"dt": "2017-07-01T00:00:00", "Export Total": 6.181950157270744}, {"dt": "2017-08-01T00:00:00", "Export Total": 5.770123955725781}, {"dt": "2017-09-01T00:00:00", "Export Total": 1.309675841643343}, {"dt": "2017-10-01T00:00:00", "Export Total": 39.26748982073924}, {"dt": "2017-11-01T00:00:00", "Export Total": 5.886984313385324}, {"dt": "2017-12-01T00:00:00", "Export Total": 13.479095778728567}, {"dt": "2018-01-01T00:00:00", "Export Total": -1.5538576632041057}, {"dt": "2018-02-01T00:00:00", "Export Total": -0.046095087580666494}, {"dt": "2018-03-01T00:00:00", "Export Total": 14.886260580411115}, {"dt": "2018-04-01T00:00:00", "Export Total": 5.4804195063385075}, {"dt": "2018-05-01T00:00:00", "Export Total": 4.62464329104626}, {"dt": "2018-06-01T00:00:00", "Export Total": 6.143530368359884}, {"dt": "2018-07-01T00:00:00", "Export Total": 13.986315909404357}, {"dt": "2018-08-01T00:00:00", "Export Total": 7.12228615747843}, {"dt": "2018-09-01T00:00:00", "Export Total": 23.703231862679353}, {"dt": "2018-10-01T00:00:00", "Export Total": -3.0769595861316112}, {"dt": "2018-11-01T00:00:00", "Export Total": 8.051872763018597}, {"dt": "2018-12-01T00:00:00", "Export Total": 2.297233107706931}, {"dt": "2019-01-01T00:00:00", "Export Total": 35.96210384692047}, {"dt": "2019-02-01T00:00:00", "Export Total": -5.435739568422882}, {"dt": "2019-03-01T00:00:00", "Export Total": 17.405342586653937}, {"dt": "2019-04-01T00:00:00", "Export Total": 1.2319641123497815}, {"dt": "2019-05-01T00:00:00", "Export Total": 0.11180184608072796}, {"dt": "2019-06-01T00:00:00", "Export Total": 1.6092313667946945}, {"dt": "2019-07-01T00:00:00", "Export Total": -3.0549169590766367}, {"dt": "2019-08-01T00:00:00", "Export Total": 14.264267461669512}, {"dt": "2019-09-01T00:00:00", "Export Total": -3.705329799285606}, {"dt": "2019-10-01T00:00:00", "Export Total": 8.329089377705511}, {"dt": "2019-11-01T00:00:00", "Export Total": 5.974083534530017}, {"dt": "2019-12-01T00:00:00", "Export Total": 4.084416300518323}, {"dt": "2020-01-01T00:00:00", "Export Total": -16.638797135775775}, {"dt": "2020-02-01T00:00:00", "Export Total": 16.12674406085133}, {"dt": "2020-03-01T00:00:00", "Export Total": -19.00948770147358}, {"dt": "2020-04-01T00:00:00", "Export Total": -9.97442596205783}, {"dt": "2020-05-01T00:00:00", "Export Total": -5.622154125035072}, {"dt": "2020-06-01T00:00:00", "Export Total": -9.859252140949614}, {"dt": "2020-07-01T00:00:00", "Export Total": -9.029737356197087}, {"dt": "2020-08-01T00:00:00", "Export Total": -2.96038838208299}, {"dt": "2020-09-01T00:00:00", "Export Total": 9.887703695364603}, {"dt": "2020-10-01T00:00:00", "Export Total": 1.7199994575560096}, {"dt": "2020-11-01T00:00:00", "Export Total": 23.853443247229222}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[25]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doYoyChart</span><span class="p">(</span><span class="n">df_ga_ts</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Georgia&#39;</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;Export Empty&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[25]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-53d42ac10368454bb64ed6d33abe6cb7"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-53d42ac10368454bb64ed6d33abe6cb7") {
      outputDiv = document.getElementById("altair-viz-53d42ac10368454bb64ed6d33abe6cb7");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-c18a9924c95471347a276de36ead5f15"}, "mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['nolarge'] < 0"}, "value": "royalblue"}, "tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "nolarge", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Year-over-Year Volume Growth [%]"}, "field": "nolarge"}}, "height": 400, "title": "Port of Georgia Export Empty Container Volume Growth", "transform": [{"calculate": "datum['Export Empty'] > 400 ? NaN : datum['Export Empty']", "as": "nolarge"}], "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-c18a9924c95471347a276de36ead5f15": [{"dt": "2003-01-01T00:00:00", "Export Empty": null}, {"dt": "2003-02-01T00:00:00", "Export Empty": null}, {"dt": "2003-03-01T00:00:00", "Export Empty": null}, {"dt": "2003-04-01T00:00:00", "Export Empty": null}, {"dt": "2003-05-01T00:00:00", "Export Empty": null}, {"dt": "2003-06-01T00:00:00", "Export Empty": null}, {"dt": "2003-07-01T00:00:00", "Export Empty": null}, {"dt": "2003-08-01T00:00:00", "Export Empty": null}, {"dt": "2003-09-01T00:00:00", "Export Empty": null}, {"dt": "2003-10-01T00:00:00", "Export Empty": null}, {"dt": "2003-11-01T00:00:00", "Export Empty": null}, {"dt": "2003-12-01T00:00:00", "Export Empty": null}, {"dt": "2004-01-01T00:00:00", "Export Empty": -31.272656967470635}, {"dt": "2004-02-01T00:00:00", "Export Empty": -2.8310232969625426}, {"dt": "2004-03-01T00:00:00", "Export Empty": -15.554976550286604}, {"dt": "2004-04-01T00:00:00", "Export Empty": -17.83030533625035}, {"dt": "2004-05-01T00:00:00", "Export Empty": -17.156256661692602}, {"dt": "2004-06-01T00:00:00", "Export Empty": -3.80105656487566}, {"dt": "2004-07-01T00:00:00", "Export Empty": 2.079770763044775}, {"dt": "2004-08-01T00:00:00", "Export Empty": 2.0447473699807484}, {"dt": "2004-09-01T00:00:00", "Export Empty": -16.11646741226379}, {"dt": "2004-10-01T00:00:00", "Export Empty": -14.563756144868412}, {"dt": "2004-11-01T00:00:00", "Export Empty": 24.133117175538143}, {"dt": "2004-12-01T00:00:00", "Export Empty": 43.03366629670735}, {"dt": "2005-01-01T00:00:00", "Export Empty": 48.74463745692383}, {"dt": "2005-02-01T00:00:00", "Export Empty": 14.34294385432473}, {"dt": "2005-03-01T00:00:00", "Export Empty": 33.25516815797593}, {"dt": "2005-04-01T00:00:00", "Export Empty": 21.861434276784152}, {"dt": "2005-05-01T00:00:00", "Export Empty": -1.9762235602902578}, {"dt": "2005-06-01T00:00:00", "Export Empty": -2.3975354942405547}, {"dt": "2005-07-01T00:00:00", "Export Empty": 8.670258523113139}, {"dt": "2005-08-01T00:00:00", "Export Empty": -0.9909975315812392}, {"dt": "2005-09-01T00:00:00", "Export Empty": 44.5726633258241}, {"dt": "2005-10-01T00:00:00", "Export Empty": 49.146704242993586}, {"dt": "2005-11-01T00:00:00", "Export Empty": 35.443497188463624}, {"dt": "2005-12-01T00:00:00", "Export Empty": 37.01308778645698}, {"dt": "2006-01-01T00:00:00", "Export Empty": 45.85342789598108}, {"dt": "2006-02-01T00:00:00", "Export Empty": 50.281346215097145}, {"dt": "2006-03-01T00:00:00", "Export Empty": 26.160044456793564}, {"dt": "2006-04-01T00:00:00", "Export Empty": 24.760140590861603}, {"dt": "2006-05-01T00:00:00", "Export Empty": 85.96104373392134}, {"dt": "2006-06-01T00:00:00", "Export Empty": 48.43328301541558}, {"dt": "2006-07-01T00:00:00", "Export Empty": 36.338638446796104}, {"dt": "2006-08-01T00:00:00", "Export Empty": 45.72318973418881}, {"dt": "2006-09-01T00:00:00", "Export Empty": 29.96565540927303}, {"dt": "2006-10-01T00:00:00", "Export Empty": 22.847994961158925}, {"dt": "2006-11-01T00:00:00", "Export Empty": 8.236239453595818}, {"dt": "2006-12-01T00:00:00", "Export Empty": 22.695008683832963}, {"dt": "2007-01-01T00:00:00", "Export Empty": -1.5009076763485507}, {"dt": "2007-02-01T00:00:00", "Export Empty": 2.3666548922642194}, {"dt": "2007-03-01T00:00:00", "Export Empty": 27.478618360679818}, {"dt": "2007-04-01T00:00:00", "Export Empty": 12.456694711996041}, {"dt": "2007-05-01T00:00:00", "Export Empty": -5.282326369282886}, {"dt": "2007-06-01T00:00:00", "Export Empty": -11.938734629726644}, {"dt": "2007-07-01T00:00:00", "Export Empty": 5.54638797213054}, {"dt": "2007-08-01T00:00:00", "Export Empty": -0.556030795551754}, {"dt": "2007-09-01T00:00:00", "Export Empty": 5.466245809782477}, {"dt": "2007-10-01T00:00:00", "Export Empty": -15.2317880794702}, {"dt": "2007-11-01T00:00:00", "Export Empty": -16.015837663944566}, {"dt": "2007-12-01T00:00:00", "Export Empty": -31.273656029787368}, {"dt": "2008-01-01T00:00:00", "Export Empty": -14.648675333223625}, {"dt": "2008-02-01T00:00:00", "Export Empty": -15.728088336783985}, {"dt": "2008-03-01T00:00:00", "Export Empty": -36.096633937055486}, {"dt": "2008-04-01T00:00:00", "Export Empty": -23.433426994820405}, {"dt": "2008-05-01T00:00:00", "Export Empty": -45.10715669617574}, {"dt": "2008-06-01T00:00:00", "Export Empty": -38.24321959755031}, {"dt": "2008-07-01T00:00:00", "Export Empty": -47.33489678334636}, {"dt": "2008-08-01T00:00:00", "Export Empty": -45.803921568627445}, {"dt": "2008-09-01T00:00:00", "Export Empty": -45.27295083868872}, {"dt": "2008-10-01T00:00:00", "Export Empty": -0.7762096774193594}, {"dt": "2008-11-01T00:00:00", "Export Empty": 15.731628263303676}, {"dt": "2008-12-01T00:00:00", "Export Empty": 51.77308140055521}, {"dt": "2009-01-01T00:00:00", "Export Empty": 29.906686203439502}, {"dt": "2009-02-01T00:00:00", "Export Empty": -5.081483907951845}, {"dt": "2009-03-01T00:00:00", "Export Empty": -29.329067724057133}, {"dt": "2009-04-01T00:00:00", "Export Empty": -24.12344696467259}, {"dt": "2009-05-01T00:00:00", "Export Empty": -8.00933970460469}, {"dt": "2009-06-01T00:00:00", "Export Empty": -24.2364141213804}, {"dt": "2009-07-01T00:00:00", "Export Empty": 4.249587685541512}, {"dt": "2009-08-01T00:00:00", "Export Empty": -21.436907707389942}, {"dt": "2009-09-01T00:00:00", "Export Empty": -38.70024163805164}, {"dt": "2009-10-01T00:00:00", "Export Empty": -47.66585390632937}, {"dt": "2009-11-01T00:00:00", "Export Empty": -63.0190696845482}, {"dt": "2009-12-01T00:00:00", "Export Empty": -57.64226922736526}, {"dt": "2010-01-01T00:00:00", "Export Empty": -39.41228851291184}, {"dt": "2010-02-01T00:00:00", "Export Empty": -11.776886243043872}, {"dt": "2010-03-01T00:00:00", "Export Empty": 14.320326447334875}, {"dt": "2010-04-01T00:00:00", "Export Empty": 37.363789988928374}, {"dt": "2010-05-01T00:00:00", "Export Empty": 72.4632548255711}, {"dt": "2010-06-01T00:00:00", "Export Empty": 125.04113687359761}, {"dt": "2010-07-01T00:00:00", "Export Empty": 70.50044824131203}, {"dt": "2010-08-01T00:00:00", "Export Empty": 106.6492364371026}, {"dt": "2010-09-01T00:00:00", "Export Empty": 161.38312586445366}, {"dt": "2010-10-01T00:00:00", "Export Empty": 91.7156030089784}, {"dt": "2010-11-01T00:00:00", "Export Empty": 92.23407917383821}, {"dt": "2010-12-01T00:00:00", "Export Empty": 77.28792310906812}, {"dt": "2011-01-01T00:00:00", "Export Empty": -8.480305702527923}, {"dt": "2011-02-01T00:00:00", "Export Empty": -0.7579091486968892}, {"dt": "2011-03-01T00:00:00", "Export Empty": -2.1695482431678736}, {"dt": "2011-04-01T00:00:00", "Export Empty": 9.328469011156827}, {"dt": "2011-05-01T00:00:00", "Export Empty": -12.509840161549779}, {"dt": "2011-06-01T00:00:00", "Export Empty": 1.2928742355756473}, {"dt": "2011-07-01T00:00:00", "Export Empty": 11.666460472596807}, {"dt": "2011-08-01T00:00:00", "Export Empty": -14.705121200793625}, {"dt": "2011-09-01T00:00:00", "Export Empty": 0.293681871097462}, {"dt": "2011-10-01T00:00:00", "Export Empty": -9.118294813052174}, {"dt": "2011-11-01T00:00:00", "Export Empty": 22.559272258434216}, {"dt": "2011-12-01T00:00:00", "Export Empty": -17.98467884502063}, {"dt": "2012-01-01T00:00:00", "Export Empty": 20.73229484502972}, {"dt": "2012-02-01T00:00:00", "Export Empty": -9.405794245171462}, {"dt": "2012-03-01T00:00:00", "Export Empty": 26.92548885468331}, {"dt": "2012-04-01T00:00:00", "Export Empty": -12.17600496663045}, {"dt": "2012-05-01T00:00:00", "Export Empty": 15.867303027932088}, {"dt": "2012-06-01T00:00:00", "Export Empty": -10.785182268595994}, {"dt": "2012-07-01T00:00:00", "Export Empty": -11.040327941502326}, {"dt": "2012-08-01T00:00:00", "Export Empty": 25.884098034588554}, {"dt": "2012-09-01T00:00:00", "Export Empty": -2.685519824834459}, {"dt": "2012-10-01T00:00:00", "Export Empty": 4.456700370463218}, {"dt": "2012-11-01T00:00:00", "Export Empty": -19.116916513252093}, {"dt": "2012-12-01T00:00:00", "Export Empty": -14.925516118216219}, {"dt": "2013-01-01T00:00:00", "Export Empty": 0.394608495167148}, {"dt": "2013-02-01T00:00:00", "Export Empty": 3.9973894599445225}, {"dt": "2013-03-01T00:00:00", "Export Empty": -14.876033057851235}, {"dt": "2013-04-01T00:00:00", "Export Empty": 15.012812582839974}, {"dt": "2013-05-01T00:00:00", "Export Empty": 13.687622391788778}, {"dt": "2013-06-01T00:00:00", "Export Empty": 28.944464876792942}, {"dt": "2013-07-01T00:00:00", "Export Empty": 3.838968802540621}, {"dt": "2013-08-01T00:00:00", "Export Empty": 1.566642564473364}, {"dt": "2013-09-01T00:00:00", "Export Empty": -11.144243541435117}, {"dt": "2013-10-01T00:00:00", "Export Empty": 15.338257646462772}, {"dt": "2013-11-01T00:00:00", "Export Empty": -10.018425521153219}, {"dt": "2013-12-01T00:00:00", "Export Empty": 51.765103316254724}, {"dt": "2014-01-01T00:00:00", "Export Empty": 6.275670185046156}, {"dt": "2014-02-01T00:00:00", "Export Empty": 20.468570233239202}, {"dt": "2014-03-01T00:00:00", "Export Empty": 31.078514140987767}, {"dt": "2014-04-01T00:00:00", "Export Empty": 8.777658266748611}, {"dt": "2014-05-01T00:00:00", "Export Empty": 0.46329294369209517}, {"dt": "2014-06-01T00:00:00", "Export Empty": 7.213348545350828}, {"dt": "2014-07-01T00:00:00", "Export Empty": 24.0802374741387}, {"dt": "2014-08-01T00:00:00", "Export Empty": 28.840373358645778}, {"dt": "2014-09-01T00:00:00", "Export Empty": 57.1389346512905}, {"dt": "2014-10-01T00:00:00", "Export Empty": 15.6474695396851}, {"dt": "2014-11-01T00:00:00", "Export Empty": 65.43403196017023}, {"dt": "2014-12-01T00:00:00", "Export Empty": 39.85902429975885}, {"dt": "2015-01-01T00:00:00", "Export Empty": 72.99285239361701}, {"dt": "2015-02-01T00:00:00", "Export Empty": 75.22573363431151}, {"dt": "2015-03-01T00:00:00", "Export Empty": 101.88793172852426}, {"dt": "2015-04-01T00:00:00", "Export Empty": 100.25426422290495}, {"dt": "2015-05-01T00:00:00", "Export Empty": 77.01312522170983}, {"dt": "2015-06-01T00:00:00", "Export Empty": 76.04884407672456}, {"dt": "2015-07-01T00:00:00", "Export Empty": 63.44545937847372}, {"dt": "2015-08-01T00:00:00", "Export Empty": 26.56556974459725}, {"dt": "2015-09-01T00:00:00", "Export Empty": 25.990642048653577}, {"dt": "2015-10-01T00:00:00", "Export Empty": 24.65564462925571}, {"dt": "2015-11-01T00:00:00", "Export Empty": 21.617357959371898}, {"dt": "2015-12-01T00:00:00", "Export Empty": 21.066871800313013}, {"dt": "2016-01-01T00:00:00", "Export Empty": -4.059669941627231}, {"dt": "2016-02-01T00:00:00", "Export Empty": 13.776786820265086}, {"dt": "2016-03-01T00:00:00", "Export Empty": -14.896416964089887}, {"dt": "2016-04-01T00:00:00", "Export Empty": -26.946002186717454}, {"dt": "2016-05-01T00:00:00", "Export Empty": -16.43453573814295}, {"dt": "2016-06-01T00:00:00", "Export Empty": -39.4000755572346}, {"dt": "2016-07-01T00:00:00", "Export Empty": -20.558274317311533}, {"dt": "2016-08-01T00:00:00", "Export Empty": -8.534238822863616}, {"dt": "2016-09-01T00:00:00", "Export Empty": -32.203285357660185}, {"dt": "2016-10-01T00:00:00", "Export Empty": -18.767039804984442}, {"dt": "2016-11-01T00:00:00", "Export Empty": -14.73159050089803}, {"dt": "2016-12-01T00:00:00", "Export Empty": -2.8899454437895766}, {"dt": "2017-01-01T00:00:00", "Export Empty": 14.396955356919294}, {"dt": "2017-02-01T00:00:00", "Export Empty": 4.420154161041667}, {"dt": "2017-03-01T00:00:00", "Export Empty": -8.317323461880887}, {"dt": "2017-04-01T00:00:00", "Export Empty": 33.635880847776754}, {"dt": "2017-05-01T00:00:00", "Export Empty": 19.31493435120606}, {"dt": "2017-06-01T00:00:00", "Export Empty": 54.092065233654175}, {"dt": "2017-07-01T00:00:00", "Export Empty": 12.867564951983912}, {"dt": "2017-08-01T00:00:00", "Export Empty": 16.86672441529513}, {"dt": "2017-09-01T00:00:00", "Export Empty": 20.05636876079644}, {"dt": "2017-10-01T00:00:00", "Export Empty": 62.46347626944642}, {"dt": "2017-11-01T00:00:00", "Export Empty": 6.29563752106348}, {"dt": "2017-12-01T00:00:00", "Export Empty": 13.081539641712926}, {"dt": "2018-01-01T00:00:00", "Export Empty": 16.100155398454774}, {"dt": "2018-02-01T00:00:00", "Export Empty": -3.5887063141212816}, {"dt": "2018-03-01T00:00:00", "Export Empty": 26.747930082796678}, {"dt": "2018-04-01T00:00:00", "Export Empty": -31.589595375722546}, {"dt": "2018-05-01T00:00:00", "Export Empty": -18.1009647594801}, {"dt": "2018-06-01T00:00:00", "Export Empty": -2.0196135547140504}, {"dt": "2018-07-01T00:00:00", "Export Empty": 17.42901427958976}, {"dt": "2018-08-01T00:00:00", "Export Empty": 0.2269014340170683}, {"dt": "2018-09-01T00:00:00", "Export Empty": 34.729269216205985}, {"dt": "2018-10-01T00:00:00", "Export Empty": 1.8543947697804208}, {"dt": "2018-11-01T00:00:00", "Export Empty": 39.22894006781452}, {"dt": "2018-12-01T00:00:00", "Export Empty": 47.21069433359937}, {"dt": "2019-01-01T00:00:00", "Export Empty": 77.03270807804694}, {"dt": "2019-02-01T00:00:00", "Export Empty": 13.838001514004539}, {"dt": "2019-03-01T00:00:00", "Export Empty": 19.133450271174812}, {"dt": "2019-04-01T00:00:00", "Export Empty": 36.530946345585136}, {"dt": "2019-05-01T00:00:00", "Export Empty": 19.559482176820666}, {"dt": "2019-06-01T00:00:00", "Export Empty": 14.055428930069702}, {"dt": "2019-07-01T00:00:00", "Export Empty": -6.634745001123344}, {"dt": "2019-08-01T00:00:00", "Export Empty": 34.438105587249844}, {"dt": "2019-09-01T00:00:00", "Export Empty": -2.0811084256084578}, {"dt": "2019-10-01T00:00:00", "Export Empty": 11.254280157963192}, {"dt": "2019-11-01T00:00:00", "Export Empty": -1.0168419387997174}, {"dt": "2019-12-01T00:00:00", "Export Empty": -7.833889024423302}, {"dt": "2020-01-01T00:00:00", "Export Empty": -36.10699947820716}, {"dt": "2020-02-01T00:00:00", "Export Empty": 9.064655254308128}, {"dt": "2020-03-01T00:00:00", "Export Empty": -37.915686506794835}, {"dt": "2020-04-01T00:00:00", "Export Empty": -17.833175392113255}, {"dt": "2020-05-01T00:00:00", "Export Empty": -9.91601238432459}, {"dt": "2020-06-01T00:00:00", "Export Empty": -24.181823447636695}, {"dt": "2020-07-01T00:00:00", "Export Empty": -17.018844655667685}, {"dt": "2020-08-01T00:00:00", "Export Empty": 3.9730118101396483}, {"dt": "2020-09-01T00:00:00", "Export Empty": 29.144841639998287}, {"dt": "2020-10-01T00:00:00", "Export Empty": 15.686863270777485}, {"dt": "2020-11-01T00:00:00", "Export Empty": 78.46849437627812}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[26]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doYoyChart</span><span class="p">(</span><span class="n">df_ga_ts</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Georgia&#39;</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;Export Full&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[26]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-34e51a549f694a6491cf028b8bdbfd07"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-34e51a549f694a6491cf028b8bdbfd07") {
      outputDiv = document.getElementById("altair-viz-34e51a549f694a6491cf028b8bdbfd07");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-4df447188a0b70ab66c6afd7fad23644"}, "mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['nolarge'] < 0"}, "value": "royalblue"}, "tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "nolarge", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Year-over-Year Volume Growth [%]"}, "field": "nolarge"}}, "height": 400, "title": "Port of Georgia Export Full Container Volume Growth", "transform": [{"calculate": "datum['Export Full'] > 400 ? NaN : datum['Export Full']", "as": "nolarge"}], "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-4df447188a0b70ab66c6afd7fad23644": [{"dt": "2003-01-01T00:00:00", "Export Full": null}, {"dt": "2003-02-01T00:00:00", "Export Full": null}, {"dt": "2003-03-01T00:00:00", "Export Full": null}, {"dt": "2003-04-01T00:00:00", "Export Full": null}, {"dt": "2003-05-01T00:00:00", "Export Full": null}, {"dt": "2003-06-01T00:00:00", "Export Full": null}, {"dt": "2003-07-01T00:00:00", "Export Full": null}, {"dt": "2003-08-01T00:00:00", "Export Full": null}, {"dt": "2003-09-01T00:00:00", "Export Full": null}, {"dt": "2003-10-01T00:00:00", "Export Full": null}, {"dt": "2003-11-01T00:00:00", "Export Full": null}, {"dt": "2003-12-01T00:00:00", "Export Full": null}, {"dt": "2004-01-01T00:00:00", "Export Full": 10.690214145550714}, {"dt": "2004-02-01T00:00:00", "Export Full": 25.11420612813371}, {"dt": "2004-03-01T00:00:00", "Export Full": 12.543810390566001}, {"dt": "2004-04-01T00:00:00", "Export Full": 24.62765625973702}, {"dt": "2004-05-01T00:00:00", "Export Full": 28.634150582507402}, {"dt": "2004-06-01T00:00:00", "Export Full": 6.6845643170797775}, {"dt": "2004-07-01T00:00:00", "Export Full": 3.4531530985431713}, {"dt": "2004-08-01T00:00:00", "Export Full": 25.19672682434704}, {"dt": "2004-09-01T00:00:00", "Export Full": 4.210623513931533}, {"dt": "2004-10-01T00:00:00", "Export Full": 17.32137983161519}, {"dt": "2004-11-01T00:00:00", "Export Full": 8.871277822873491}, {"dt": "2004-12-01T00:00:00", "Export Full": 2.1213270142180107}, {"dt": "2005-01-01T00:00:00", "Export Full": 12.21674117465701}, {"dt": "2005-02-01T00:00:00", "Export Full": 0.03918425505387013}, {"dt": "2005-03-01T00:00:00", "Export Full": 3.103869513600932}, {"dt": "2005-04-01T00:00:00", "Export Full": 1.965098254912756}, {"dt": "2005-05-01T00:00:00", "Export Full": 1.797843939035526}, {"dt": "2005-06-01T00:00:00", "Export Full": 13.407330823400887}, {"dt": "2005-07-01T00:00:00", "Export Full": 22.199218749999993}, {"dt": "2005-08-01T00:00:00", "Export Full": 6.781391017835392}, {"dt": "2005-09-01T00:00:00", "Export Full": 26.546751434330893}, {"dt": "2005-10-01T00:00:00", "Export Full": 10.844861217988866}, {"dt": "2005-11-01T00:00:00", "Export Full": 5.077795436262678}, {"dt": "2005-12-01T00:00:00", "Export Full": 7.371586626816917}, {"dt": "2006-01-01T00:00:00", "Export Full": 9.258877670169664}, {"dt": "2006-02-01T00:00:00", "Export Full": 5.503231434828271}, {"dt": "2006-03-01T00:00:00", "Export Full": 19.894868585732173}, {"dt": "2006-04-01T00:00:00", "Export Full": 7.710540081077544}, {"dt": "2006-05-01T00:00:00", "Export Full": 9.023005676725425}, {"dt": "2006-06-01T00:00:00", "Export Full": 14.15302050364662}, {"dt": "2006-07-01T00:00:00", "Export Full": 7.139660518492463}, {"dt": "2006-08-01T00:00:00", "Export Full": 3.8855628783686313}, {"dt": "2006-09-01T00:00:00", "Export Full": 13.079629597213227}, {"dt": "2006-10-01T00:00:00", "Export Full": 5.742746896139761}, {"dt": "2006-11-01T00:00:00", "Export Full": 14.366539071982064}, {"dt": "2006-12-01T00:00:00", "Export Full": 20.06915629322268}, {"dt": "2007-01-01T00:00:00", "Export Full": 2.80222543534292}, {"dt": "2007-02-01T00:00:00", "Export Full": 22.742920787066723}, {"dt": "2007-03-01T00:00:00", "Export Full": 11.509179228081901}, {"dt": "2007-04-01T00:00:00", "Export Full": 25.62942952969207}, {"dt": "2007-05-01T00:00:00", "Export Full": 34.49651350446088}, {"dt": "2007-06-01T00:00:00", "Export Full": 30.414079922849744}, {"dt": "2007-07-01T00:00:00", "Export Full": 32.53621350678024}, {"dt": "2007-08-01T00:00:00", "Export Full": 43.213663072254135}, {"dt": "2007-09-01T00:00:00", "Export Full": 39.16778897506153}, {"dt": "2007-10-01T00:00:00", "Export Full": 35.94723341883474}, {"dt": "2007-11-01T00:00:00", "Export Full": 40.96230142532939}, {"dt": "2007-12-01T00:00:00", "Export Full": 24.6990554083631}, {"dt": "2008-01-01T00:00:00", "Export Full": 37.83308617816574}, {"dt": "2008-02-01T00:00:00", "Export Full": 23.89771086822026}, {"dt": "2008-03-01T00:00:00", "Export Full": 17.21129362424485}, {"dt": "2008-04-01T00:00:00", "Export Full": 12.627293702661246}, {"dt": "2008-05-01T00:00:00", "Export Full": 7.03079012904686}, {"dt": "2008-06-01T00:00:00", "Export Full": 8.606784674400325}, {"dt": "2008-07-01T00:00:00", "Export Full": 8.666974325495547}, {"dt": "2008-08-01T00:00:00", "Export Full": 11.44638066683199}, {"dt": "2008-09-01T00:00:00", "Export Full": 9.875307282455136}, {"dt": "2008-10-01T00:00:00", "Export Full": -2.87735849056604}, {"dt": "2008-11-01T00:00:00", "Export Full": -8.247816720331723}, {"dt": "2008-12-01T00:00:00", "Export Full": -22.521679888223}, {"dt": "2009-01-01T00:00:00", "Export Full": -26.45245014308214}, {"dt": "2009-02-01T00:00:00", "Export Full": -26.08275907986285}, {"dt": "2009-03-01T00:00:00", "Export Full": -15.801075555082267}, {"dt": "2009-04-01T00:00:00", "Export Full": -12.849389707617398}, {"dt": "2009-05-01T00:00:00", "Export Full": -12.171209188691812}, {"dt": "2009-06-01T00:00:00", "Export Full": -10.500335117078208}, {"dt": "2009-07-01T00:00:00", "Export Full": -4.879690914929102}, {"dt": "2009-08-01T00:00:00", "Export Full": -5.034741537123377}, {"dt": "2009-09-01T00:00:00", "Export Full": -10.77455734518471}, {"dt": "2009-10-01T00:00:00", "Export Full": 18.637110016420365}, {"dt": "2009-11-01T00:00:00", "Export Full": 15.407046467298692}, {"dt": "2009-12-01T00:00:00", "Export Full": 46.81580398527505}, {"dt": "2010-01-01T00:00:00", "Export Full": 44.32279177788838}, {"dt": "2010-02-01T00:00:00", "Export Full": 31.612922596529145}, {"dt": "2010-03-01T00:00:00", "Export Full": 23.56356001871831}, {"dt": "2010-04-01T00:00:00", "Export Full": 26.98944051985133}, {"dt": "2010-05-01T00:00:00", "Export Full": 10.866659441494164}, {"dt": "2010-06-01T00:00:00", "Export Full": 15.631129126202058}, {"dt": "2010-07-01T00:00:00", "Export Full": 10.265484798327385}, {"dt": "2010-08-01T00:00:00", "Export Full": 0.35252143351616194}, {"dt": "2010-09-01T00:00:00", "Export Full": 1.040437505673042}, {"dt": "2010-10-01T00:00:00", "Export Full": 1.9347921438666704}, {"dt": "2010-11-01T00:00:00", "Export Full": 2.479709479118819}, {"dt": "2010-12-01T00:00:00", "Export Full": -5.780182521393984}, {"dt": "2011-01-01T00:00:00", "Export Full": 11.39301351111297}, {"dt": "2011-02-01T00:00:00", "Export Full": 17.791718946047673}, {"dt": "2011-03-01T00:00:00", "Export Full": 14.588834981268818}, {"dt": "2011-04-01T00:00:00", "Export Full": 7.927585672197246}, {"dt": "2011-05-01T00:00:00", "Export Full": 17.034333691767944}, {"dt": "2011-06-01T00:00:00", "Export Full": 2.5319448584968596}, {"dt": "2011-07-01T00:00:00", "Export Full": 3.173051284330275}, {"dt": "2011-08-01T00:00:00", "Export Full": 3.176405662980497}, {"dt": "2011-09-01T00:00:00", "Export Full": 18.409261900216723}, {"dt": "2011-10-01T00:00:00", "Export Full": -2.633390705679861}, {"dt": "2011-11-01T00:00:00", "Export Full": -0.029886112563903833}, {"dt": "2011-12-01T00:00:00", "Export Full": 5.562678446371816}, {"dt": "2012-01-01T00:00:00", "Export Full": -0.11913472542729453}, {"dt": "2012-02-01T00:00:00", "Export Full": 0.8182592865166427}, {"dt": "2012-03-01T00:00:00", "Export Full": 6.295611472876517}, {"dt": "2012-04-01T00:00:00", "Export Full": -4.8031679896555435}, {"dt": "2012-05-01T00:00:00", "Export Full": 2.123433874709968}, {"dt": "2012-06-01T00:00:00", "Export Full": 12.436334469621023}, {"dt": "2012-07-01T00:00:00", "Export Full": -4.281529979324605}, {"dt": "2012-08-01T00:00:00", "Export Full": 8.935496147872325}, {"dt": "2012-09-01T00:00:00", "Export Full": -4.853623147173458}, {"dt": "2012-10-01T00:00:00", "Export Full": -11.791683852847012}, {"dt": "2012-11-01T00:00:00", "Export Full": 2.15671410725915}, {"dt": "2012-12-01T00:00:00", "Export Full": 2.731225377125468}, {"dt": "2013-01-01T00:00:00", "Export Full": -10.20709086640056}, {"dt": "2013-02-01T00:00:00", "Export Full": 4.208888419313639}, {"dt": "2013-03-01T00:00:00", "Export Full": -8.842931453205495}, {"dt": "2013-04-01T00:00:00", "Export Full": 2.774135735509131}, {"dt": "2013-05-01T00:00:00", "Export Full": -5.566258928733713}, {"dt": "2013-06-01T00:00:00", "Export Full": -5.755992295619916}, {"dt": "2013-07-01T00:00:00", "Export Full": -2.9820298202982043}, {"dt": "2013-08-01T00:00:00", "Export Full": 2.745831208807803}, {"dt": "2013-09-01T00:00:00", "Export Full": 1.541927059972692}, {"dt": "2013-10-01T00:00:00", "Export Full": 20.05700352932007}, {"dt": "2013-11-01T00:00:00", "Export Full": 8.827248879087811}, {"dt": "2013-12-01T00:00:00", "Export Full": -2.318834820275395}, {"dt": "2014-01-01T00:00:00", "Export Full": 12.971853525369493}, {"dt": "2014-02-01T00:00:00", "Export Full": -2.7733996958385188}, {"dt": "2014-03-01T00:00:00", "Export Full": 4.427707511338919}, {"dt": "2014-04-01T00:00:00", "Export Full": 4.469694188479756}, {"dt": "2014-05-01T00:00:00", "Export Full": 10.18448124873692}, {"dt": "2014-06-01T00:00:00", "Export Full": -1.6321471487098949}, {"dt": "2014-07-01T00:00:00", "Export Full": 11.70310357978499}, {"dt": "2014-08-01T00:00:00", "Export Full": -1.9004907456761089}, {"dt": "2014-09-01T00:00:00", "Export Full": 2.605127802426477}, {"dt": "2014-10-01T00:00:00", "Export Full": 2.77741714116142}, {"dt": "2014-11-01T00:00:00", "Export Full": -2.6938258088680223}, {"dt": "2014-12-01T00:00:00", "Export Full": 10.022375915378356}, {"dt": "2015-01-01T00:00:00", "Export Full": -3.5987741762260606}, {"dt": "2015-02-01T00:00:00", "Export Full": 0.8143260717061951}, {"dt": "2015-03-01T00:00:00", "Export Full": -1.6843369026915855}, {"dt": "2015-04-01T00:00:00", "Export Full": 3.9516454939996226}, {"dt": "2015-05-01T00:00:00", "Export Full": -3.2988051984348843}, {"dt": "2015-06-01T00:00:00", "Export Full": 4.278404062944863}, {"dt": "2015-07-01T00:00:00", "Export Full": -7.561986140203558}, {"dt": "2015-08-01T00:00:00", "Export Full": -5.697637382196996}, {"dt": "2015-09-01T00:00:00", "Export Full": -3.6764565196594323}, {"dt": "2015-10-01T00:00:00", "Export Full": -7.086592859269681}, {"dt": "2015-11-01T00:00:00", "Export Full": -3.7306804050453057}, {"dt": "2015-12-01T00:00:00", "Export Full": -16.67960877844954}, {"dt": "2016-01-01T00:00:00", "Export Full": -3.262518968133532}, {"dt": "2016-02-01T00:00:00", "Export Full": -0.5642014199069068}, {"dt": "2016-03-01T00:00:00", "Export Full": 0.7973350333569718}, {"dt": "2016-04-01T00:00:00", "Export Full": -5.996247591359316}, {"dt": "2016-05-01T00:00:00", "Export Full": 0.874285353010773}, {"dt": "2016-06-01T00:00:00", "Export Full": -3.1518651071837045}, {"dt": "2016-07-01T00:00:00", "Export Full": 3.140472767928437}, {"dt": "2016-08-01T00:00:00", "Export Full": 8.497576094730984}, {"dt": "2016-09-01T00:00:00", "Export Full": 2.512737493420203}, {"dt": "2016-10-01T00:00:00", "Export Full": -2.27142510318038}, {"dt": "2016-11-01T00:00:00", "Export Full": 9.84498985052593}, {"dt": "2016-12-01T00:00:00", "Export Full": 15.491895130421284}, {"dt": "2017-01-01T00:00:00", "Export Full": 16.545048399106488}, {"dt": "2017-02-01T00:00:00", "Export Full": 12.619982032247389}, {"dt": "2017-03-01T00:00:00", "Export Full": 6.585663510275341}, {"dt": "2017-04-01T00:00:00", "Export Full": 2.9893283226496647}, {"dt": "2017-05-01T00:00:00", "Export Full": 4.990733030701877}, {"dt": "2017-06-01T00:00:00", "Export Full": 7.476546502214387}, {"dt": "2017-07-01T00:00:00", "Export Full": 2.7051354019473006}, {"dt": "2017-08-01T00:00:00", "Export Full": 0.02288999981687745}, {"dt": "2017-09-01T00:00:00", "Export Full": -6.682038811436097}, {"dt": "2017-10-01T00:00:00", "Export Full": 27.591517945864297}, {"dt": "2017-11-01T00:00:00", "Export Full": 5.724018852956281}, {"dt": "2017-12-01T00:00:00", "Export Full": 13.647280342767122}, {"dt": "2018-01-01T00:00:00", "Export Full": -8.425760286225403}, {"dt": "2018-02-01T00:00:00", "Export Full": 1.380468553195069}, {"dt": "2018-03-01T00:00:00", "Export Full": 11.006920068197768}, {"dt": "2018-04-01T00:00:00", "Export Full": 23.394207098835484}, {"dt": "2018-05-01T00:00:00", "Export Full": 16.195495518544114}, {"dt": "2018-06-01T00:00:00", "Export Full": 10.613673623111342}, {"dt": "2018-07-01T00:00:00", "Export Full": 12.0188094273302}, {"dt": "2018-08-01T00:00:00", "Export Full": 11.295002883479954}, {"dt": "2018-09-01T00:00:00", "Export Full": 17.657807308970106}, {"dt": "2018-10-01T00:00:00", "Export Full": -6.2366144093206515}, {"dt": "2018-11-01T00:00:00", "Export Full": -4.4474655272868535}, {"dt": "2018-12-01T00:00:00", "Export Full": -16.731191885038044}, {"dt": "2019-01-01T00:00:00", "Export Full": 15.69689020362981}, {"dt": "2019-02-01T00:00:00", "Export Full": -12.81660509881226}, {"dt": "2019-03-01T00:00:00", "Export Full": 16.76002469470419}, {"dt": "2019-04-01T00:00:00", "Export Full": -8.225506356426814}, {"dt": "2019-05-01T00:00:00", "Export Full": -6.867422129583423}, {"dt": "2019-06-01T00:00:00", "Export Full": -4.427905337200178}, {"dt": "2019-07-01T00:00:00", "Export Full": -0.9093891697722789}, {"dt": "2019-08-01T00:00:00", "Export Full": 3.270220920860001}, {"dt": "2019-09-01T00:00:00", "Export Full": -4.726104757870964}, {"dt": "2019-10-01T00:00:00", "Export Full": 6.292620125420489}, {"dt": "2019-11-01T00:00:00", "Export Full": 10.05728011825573}, {"dt": "2019-12-01T00:00:00", "Export Full": 13.01125808318191}, {"dt": "2020-01-01T00:00:00", "Export Full": -1.9401317006102592}, {"dt": "2020-02-01T00:00:00", "Export Full": 19.65893976819304}, {"dt": "2020-03-01T00:00:00", "Export Full": -11.80593617611214}, {"dt": "2020-04-01T00:00:00", "Export Full": -6.840571666435413}, {"dt": "2020-05-01T00:00:00", "Export Full": -3.6439576027424203}, {"dt": "2020-06-01T00:00:00", "Export Full": -1.568380904480493}, {"dt": "2020-07-01T00:00:00", "Export Full": -4.521606248408183}, {"dt": "2020-08-01T00:00:00", "Export Full": -7.879227130091271}, {"dt": "2020-09-01T00:00:00", "Export Full": -2.540473456081205}, {"dt": "2020-10-01T00:00:00", "Export Full": -8.457384876261031}, {"dt": "2020-11-01T00:00:00", "Export Full": -4.842771519231737}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Northwest-Seaport-Alliance-(Ports-of-Seattle-and-Tacoma)">Northwest Seaport Alliance (Ports of Seattle and Tacoma)<a class="anchor-link" href="#Northwest-Seaport-Alliance-(Ports-of-Seattle-and-Tacoma)">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[27]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="o">!</span>curl -s <span class="s1">&#39;https://www.nwseaportalliance.com/about-us/cargo-statistics&#39;</span> <span class="p">|</span> grep <span class="s1">&#39;xlsx&#39;</span>

<span class="c1">#pageCount = re.findall(&quot;of ([0-9]+)&quot;, &quot;&quot;.join(rawPg))[0]</span>

<span class="n">currentReport</span> <span class="o">=</span> <span class="p">[</span><span class="n">u</span> <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;href=&quot;([^&quot;]+)&quot;&#39;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">result</span><span class="p">))</span> <span class="k">if</span> <span class="s2">&quot;xls&quot;</span> <span class="ow">in</span> <span class="n">u</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">currentReport</span><span class="p">)</span>

<span class="n">df_nwsea</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">currentReport</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="n">df_nwsea</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Month&quot;</span><span class="p">,</span> <span class="s2">&quot;Measure&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df_nwsea</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()[</span><span class="mi">2</span><span class="p">:]</span>

<span class="n">df_nwsea</span><span class="p">[</span><span class="s1">&#39;Month&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_nwsea</span><span class="p">[</span><span class="s1">&#39;Month&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ffill</span><span class="p">()</span>

<span class="n">df_nwsea</span> <span class="o">=</span> <span class="n">df_nwsea</span><span class="p">[</span><span class="o">~</span><span class="n">pd</span><span class="o">.</span><span class="n">isna</span><span class="p">(</span><span class="n">df_nwsea</span><span class="p">[</span><span class="s1">&#39;Measure&#39;</span><span class="p">])]</span>

<span class="n">df_nwsea</span> <span class="o">=</span> <span class="n">df_nwsea</span><span class="p">[</span><span class="o">~</span><span class="n">df_nwsea</span><span class="p">[</span><span class="s1">&#39;Month&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s2">&quot;%|Total&quot;</span><span class="p">)]</span>

<span class="n">df_nwsea_melt</span> <span class="o">=</span> <span class="n">df_nwsea</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">id_vars</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Month&#39;</span><span class="p">,</span> <span class="s1">&#39;Measure&#39;</span><span class="p">])</span>

<span class="n">df_nwsea_melt</span><span class="p">[</span><span class="s1">&#39;dt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df_nwsea_melt</span><span class="p">[</span><span class="s1">&#39;Month&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="n">df_nwsea_melt</span><span class="p">[</span><span class="s1">&#39;variable&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;%b-%Y&#39;</span><span class="p">)</span>\
                        <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">offsets</span><span class="o">.</span><span class="n">MonthEnd</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="c1">#df_nwsea_melt.tail(25)</span>

<span class="n">df_nwsea_tab</span> <span class="o">=</span> <span class="n">df_nwsea_melt</span><span class="p">[[</span><span class="s1">&#39;dt&#39;</span><span class="p">,</span> <span class="s1">&#39;Measure&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s1">&#39;dt&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;Measure&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">)</span>
<span class="c1">#df_nwsea_tab.head()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>https://s3.us-west-2.amazonaws.com/nwseaportalliance.com.if-us-west-2/prod/2020-12/NWSA%20Historical%20Cargo%20Stats.xlsx
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[28]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doChart</span><span class="p">(</span><span class="n">df_nwsea_tab</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s2">&quot;Seattle/Tacoma&quot;</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s2">&quot;International Exports Full&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[28]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-0d8639c93581496fae61fd475a2ec790"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-0d8639c93581496fae61fd475a2ec790") {
      outputDiv = document.getElementById("altair-viz-0d8639c93581496fae61fd475a2ec790");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-cf06299e237a0efcf116800f1e14909c"}, "mark": {"type": "line", "color": "purple"}, "encoding": {"tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "International Exports Full", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Volume [TEUs]"}, "field": "International Exports Full"}}, "height": 400, "title": "Port of Seattle/Tacoma International Exports Full Container Volume", "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-cf06299e237a0efcf116800f1e14909c": [{"dt": "2015-01-31T00:00:00", "International Exports Full": 56213.5}, {"dt": "2015-02-28T00:00:00", "International Exports Full": 52155.25}, {"dt": "2015-03-31T00:00:00", "International Exports Full": 88440.25}, {"dt": "2015-04-30T00:00:00", "International Exports Full": 71820.5}, {"dt": "2015-05-31T00:00:00", "International Exports Full": 72556.75}, {"dt": "2015-06-30T00:00:00", "International Exports Full": 76442.75}, {"dt": "2015-07-31T00:00:00", "International Exports Full": 62621.0}, {"dt": "2015-08-31T00:00:00", "International Exports Full": 72068.25}, {"dt": "2015-09-30T00:00:00", "International Exports Full": 83267.75}, {"dt": "2015-10-31T00:00:00", "International Exports Full": 76308.25}, {"dt": "2015-11-30T00:00:00", "International Exports Full": 77814.0}, {"dt": "2015-12-31T00:00:00", "International Exports Full": 81767.75}, {"dt": "2016-01-31T00:00:00", "International Exports Full": 65426.75}, {"dt": "2016-02-29T00:00:00", "International Exports Full": 76455.25}, {"dt": "2016-03-31T00:00:00", "International Exports Full": 91211.0}, {"dt": "2016-04-30T00:00:00", "International Exports Full": 76993.0}, {"dt": "2016-05-31T00:00:00", "International Exports Full": 72193.0}, {"dt": "2016-06-30T00:00:00", "International Exports Full": 86881.5}, {"dt": "2016-07-31T00:00:00", "International Exports Full": 73397.75}, {"dt": "2016-08-31T00:00:00", "International Exports Full": 82926.5}, {"dt": "2016-09-30T00:00:00", "International Exports Full": 88310.75}, {"dt": "2016-10-31T00:00:00", "International Exports Full": 88756.0}, {"dt": "2016-11-30T00:00:00", "International Exports Full": 95440.5}, {"dt": "2016-12-31T00:00:00", "International Exports Full": 86488.5}, {"dt": "2017-01-31T00:00:00", "International Exports Full": 77069.5}, {"dt": "2017-02-28T00:00:00", "International Exports Full": 71240.75}, {"dt": "2017-03-31T00:00:00", "International Exports Full": 99598.0}, {"dt": "2017-04-30T00:00:00", "International Exports Full": 77558.0}, {"dt": "2017-05-31T00:00:00", "International Exports Full": 81185.5}, {"dt": "2017-06-30T00:00:00", "International Exports Full": 77908.75}, {"dt": "2017-07-31T00:00:00", "International Exports Full": 66901.25}, {"dt": "2017-08-31T00:00:00", "International Exports Full": 80392.5}, {"dt": "2017-09-30T00:00:00", "International Exports Full": 82146.0}, {"dt": "2017-10-31T00:00:00", "International Exports Full": 81295.0}, {"dt": "2017-11-30T00:00:00", "International Exports Full": 81906.75}, {"dt": "2017-12-31T00:00:00", "International Exports Full": 86843.25}, {"dt": "2018-01-31T00:00:00", "International Exports Full": 67571.25}, {"dt": "2018-02-28T00:00:00", "International Exports Full": 76088.0}, {"dt": "2018-03-31T00:00:00", "International Exports Full": 92105.0}, {"dt": "2018-04-30T00:00:00", "International Exports Full": 78909.0}, {"dt": "2018-05-31T00:00:00", "International Exports Full": 77103.5}, {"dt": "2018-06-30T00:00:00", "International Exports Full": 85088.0}, {"dt": "2018-07-31T00:00:00", "International Exports Full": 70943.5}, {"dt": "2018-08-31T00:00:00", "International Exports Full": 74157.75}, {"dt": "2018-09-30T00:00:00", "International Exports Full": 88416.5}, {"dt": "2018-10-31T00:00:00", "International Exports Full": 74085.5}, {"dt": "2018-11-30T00:00:00", "International Exports Full": 83677.25}, {"dt": "2018-12-31T00:00:00", "International Exports Full": 85349.75}, {"dt": "2019-01-31T00:00:00", "International Exports Full": 72858.5}, {"dt": "2019-02-28T00:00:00", "International Exports Full": 65610.0}, {"dt": "2019-03-31T00:00:00", "International Exports Full": 86856.25}, {"dt": "2019-04-30T00:00:00", "International Exports Full": 81304.75}, {"dt": "2019-05-31T00:00:00", "International Exports Full": 70541.0}, {"dt": "2019-06-30T00:00:00", "International Exports Full": 76558.75}, {"dt": "2019-07-31T00:00:00", "International Exports Full": 73827.5}, {"dt": "2019-08-31T00:00:00", "International Exports Full": 74851.5}, {"dt": "2019-09-30T00:00:00", "International Exports Full": 82147.5}, {"dt": "2019-10-31T00:00:00", "International Exports Full": 79320.5}, {"dt": "2019-11-30T00:00:00", "International Exports Full": 73588.5}, {"dt": "2019-12-31T00:00:00", "International Exports Full": 75867.5}, {"dt": "2020-01-31T00:00:00", "International Exports Full": 66410.25}, {"dt": "2020-02-29T00:00:00", "International Exports Full": 68553.25}, {"dt": "2020-03-31T00:00:00", "International Exports Full": 79395.25}, {"dt": "2020-04-30T00:00:00", "International Exports Full": 66954.75}, {"dt": "2020-05-31T00:00:00", "International Exports Full": 59594.75}, {"dt": "2020-06-30T00:00:00", "International Exports Full": 70431.25}, {"dt": "2020-07-31T00:00:00", "International Exports Full": 56547.0}, {"dt": "2020-08-31T00:00:00", "International Exports Full": 54918.0}, {"dt": "2020-09-30T00:00:00", "International Exports Full": 66939.25}, {"dt": "2020-10-31T00:00:00", "International Exports Full": 64281.75}, {"dt": "2020-11-30T00:00:00", "International Exports Full": 72745.5}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[29]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doYoyChart</span><span class="p">(</span><span class="n">df_nwsea_tab</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s2">&quot;International Exports Full&quot;</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s2">&quot;Seattle/Tacoma&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[29]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-4a1eef8dce8044b5b462ee3527d162a2"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-4a1eef8dce8044b5b462ee3527d162a2") {
      outputDiv = document.getElementById("altair-viz-4a1eef8dce8044b5b462ee3527d162a2");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-72ce1d14ba4e82666ecbb4fb2777ee26"}, "mark": {"type": "bar", "color": "blue", "width": 7}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['nolarge'] < 0"}, "value": "royalblue"}, "tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "nolarge", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Year-over-Year Volume Growth [%]"}, "field": "nolarge"}}, "height": 400, "title": "Port of Seattle/Tacoma International Exports Full Container Volume Growth", "transform": [{"calculate": "datum['International Exports Full'] > 400 ? NaN : datum['International Exports Full']", "as": "nolarge"}], "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-72ce1d14ba4e82666ecbb4fb2777ee26": [{"dt": "2015-01-31T00:00:00", "International Exports Full": null}, {"dt": "2015-02-28T00:00:00", "International Exports Full": null}, {"dt": "2015-03-31T00:00:00", "International Exports Full": null}, {"dt": "2015-04-30T00:00:00", "International Exports Full": null}, {"dt": "2015-05-31T00:00:00", "International Exports Full": null}, {"dt": "2015-06-30T00:00:00", "International Exports Full": null}, {"dt": "2015-07-31T00:00:00", "International Exports Full": null}, {"dt": "2015-08-31T00:00:00", "International Exports Full": null}, {"dt": "2015-09-30T00:00:00", "International Exports Full": null}, {"dt": "2015-10-31T00:00:00", "International Exports Full": null}, {"dt": "2015-11-30T00:00:00", "International Exports Full": null}, {"dt": "2015-12-31T00:00:00", "International Exports Full": null}, {"dt": "2016-01-31T00:00:00", "International Exports Full": 16.389746235334933}, {"dt": "2016-02-29T00:00:00", "International Exports Full": 46.59166622727338}, {"dt": "2016-03-31T00:00:00", "International Exports Full": 3.1329061145801917}, {"dt": "2016-04-30T00:00:00", "International Exports Full": 7.201982720810918}, {"dt": "2016-05-31T00:00:00", "International Exports Full": -0.5013317162083419}, {"dt": "2016-06-30T00:00:00", "International Exports Full": 13.65564425664958}, {"dt": "2016-07-31T00:00:00", "International Exports Full": 17.209482441992296}, {"dt": "2016-08-31T00:00:00", "International Exports Full": 15.06662087673838}, {"dt": "2016-09-30T00:00:00", "International Exports Full": 6.056366360325582}, {"dt": "2016-10-31T00:00:00", "International Exports Full": 16.31245638577743}, {"dt": "2016-11-30T00:00:00", "International Exports Full": 22.652093453620182}, {"dt": "2016-12-31T00:00:00", "International Exports Full": 5.773364193095687}, {"dt": "2017-01-31T00:00:00", "International Exports Full": 17.795091457240343}, {"dt": "2017-02-28T00:00:00", "International Exports Full": -6.820329539174875}, {"dt": "2017-03-31T00:00:00", "International Exports Full": 9.195162864128225}, {"dt": "2017-04-30T00:00:00", "International Exports Full": 0.7338329458522308}, {"dt": "2017-05-31T00:00:00", "International Exports Full": 12.456193813804672}, {"dt": "2017-06-30T00:00:00", "International Exports Full": -10.327572613272096}, {"dt": "2017-07-31T00:00:00", "International Exports Full": -8.851088759532821}, {"dt": "2017-08-31T00:00:00", "International Exports Full": -3.055718015350939}, {"dt": "2017-09-30T00:00:00", "International Exports Full": -6.980746964554141}, {"dt": "2017-10-31T00:00:00", "International Exports Full": -8.406192257424848}, {"dt": "2017-11-30T00:00:00", "International Exports Full": -14.18030081569145}, {"dt": "2017-12-31T00:00:00", "International Exports Full": 0.4101701382264622}, {"dt": "2018-01-31T00:00:00", "International Exports Full": -12.324265760125597}, {"dt": "2018-02-28T00:00:00", "International Exports Full": 6.804041226404833}, {"dt": "2018-03-31T00:00:00", "International Exports Full": -7.523243438623261}, {"dt": "2018-04-30T00:00:00", "International Exports Full": 1.7419221743727231}, {"dt": "2018-05-31T00:00:00", "International Exports Full": -5.027991451675485}, {"dt": "2018-06-30T00:00:00", "International Exports Full": 9.21494697322187}, {"dt": "2018-07-31T00:00:00", "International Exports Full": 6.04211431027073}, {"dt": "2018-08-31T00:00:00", "International Exports Full": -7.755387629443044}, {"dt": "2018-09-30T00:00:00", "International Exports Full": 7.633360114917331}, {"dt": "2018-10-31T00:00:00", "International Exports Full": -8.86831908481457}, {"dt": "2018-11-30T00:00:00", "International Exports Full": 2.161604507564996}, {"dt": "2018-12-31T00:00:00", "International Exports Full": -1.719765209155577}, {"dt": "2019-01-31T00:00:00", "International Exports Full": 7.82470355365632}, {"dt": "2019-02-28T00:00:00", "International Exports Full": -13.770896856271687}, {"dt": "2019-03-31T00:00:00", "International Exports Full": -5.698659139026107}, {"dt": "2019-04-30T00:00:00", "International Exports Full": 3.0360922074795127}, {"dt": "2019-05-31T00:00:00", "International Exports Full": -8.511286776864868}, {"dt": "2019-06-30T00:00:00", "International Exports Full": -10.024033941331323}, {"dt": "2019-07-31T00:00:00", "International Exports Full": 4.065206819511302}, {"dt": "2019-08-31T00:00:00", "International Exports Full": 0.9355057293404911}, {"dt": "2019-09-30T00:00:00", "International Exports Full": -7.090305542517516}, {"dt": "2019-10-31T00:00:00", "International Exports Full": 7.066160044813086}, {"dt": "2019-11-30T00:00:00", "International Exports Full": -12.05674182648211}, {"dt": "2019-12-31T00:00:00", "International Exports Full": -11.109874369872196}, {"dt": "2020-01-31T00:00:00", "International Exports Full": -8.850374355771805}, {"dt": "2020-02-29T00:00:00", "International Exports Full": 4.485977747294623}, {"dt": "2020-03-31T00:00:00", "International Exports Full": -8.59005540764194}, {"dt": "2020-04-30T00:00:00", "International Exports Full": -17.64964531592558}, {"dt": "2020-05-31T00:00:00", "International Exports Full": -15.517571341489344}, {"dt": "2020-06-30T00:00:00", "International Exports Full": -8.003657321991287}, {"dt": "2020-07-31T00:00:00", "International Exports Full": -23.406589685415323}, {"dt": "2020-08-31T00:00:00", "International Exports Full": -26.630728843109353}, {"dt": "2020-09-30T00:00:00", "International Exports Full": -18.513344897897078}, {"dt": "2020-10-31T00:00:00", "International Exports Full": -18.959474536847342}, {"dt": "2020-11-30T00:00:00", "International Exports Full": -1.145559428443299}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[30]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doChart</span><span class="p">(</span><span class="n">df_nwsea_tab</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s2">&quot;Seattle/Tacoma&quot;</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s2">&quot;International Exports Empty&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[30]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-d7234858187d4f93bfc162d57b8a60e1"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-d7234858187d4f93bfc162d57b8a60e1") {
      outputDiv = document.getElementById("altair-viz-d7234858187d4f93bfc162d57b8a60e1");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-73607372f97b588dacb4e936eaade002"}, "mark": {"type": "line", "color": "purple"}, "encoding": {"tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "International Exports Empty", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Volume [TEUs]"}, "field": "International Exports Empty"}}, "height": 400, "title": "Port of Seattle/Tacoma International Exports Empty Container Volume", "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-73607372f97b588dacb4e936eaade002": [{"dt": "2015-01-31T00:00:00", "International Exports Empty": 23372.25}, {"dt": "2015-02-28T00:00:00", "International Exports Empty": 25725.5}, {"dt": "2015-03-31T00:00:00", "International Exports Empty": 40714.25}, {"dt": "2015-04-30T00:00:00", "International Exports Empty": 36066.25}, {"dt": "2015-05-31T00:00:00", "International Exports Empty": 30862.0}, {"dt": "2015-06-30T00:00:00", "International Exports Empty": 52640.5}, {"dt": "2015-07-31T00:00:00", "International Exports Empty": 41800.25}, {"dt": "2015-08-31T00:00:00", "International Exports Empty": 44381.75}, {"dt": "2015-09-30T00:00:00", "International Exports Empty": 49336.75}, {"dt": "2015-10-31T00:00:00", "International Exports Empty": 43662.0}, {"dt": "2015-11-30T00:00:00", "International Exports Empty": 31177.75}, {"dt": "2015-12-31T00:00:00", "International Exports Empty": 27829.5}, {"dt": "2016-01-31T00:00:00", "International Exports Empty": 31048.25}, {"dt": "2016-02-29T00:00:00", "International Exports Empty": 26877.75}, {"dt": "2016-03-31T00:00:00", "International Exports Empty": 26393.0}, {"dt": "2016-04-30T00:00:00", "International Exports Empty": 17319.5}, {"dt": "2016-05-31T00:00:00", "International Exports Empty": 27606.25}, {"dt": "2016-06-30T00:00:00", "International Exports Empty": 29811.5}, {"dt": "2016-07-31T00:00:00", "International Exports Empty": 31266.75}, {"dt": "2016-08-31T00:00:00", "International Exports Empty": 35173.5}, {"dt": "2016-09-30T00:00:00", "International Exports Empty": 31862.0}, {"dt": "2016-10-31T00:00:00", "International Exports Empty": 30065.25}, {"dt": "2016-11-30T00:00:00", "International Exports Empty": 37822.75}, {"dt": "2016-12-31T00:00:00", "International Exports Empty": 35896.75}, {"dt": "2017-01-31T00:00:00", "International Exports Empty": 34263.25}, {"dt": "2017-02-28T00:00:00", "International Exports Empty": 36021.5}, {"dt": "2017-03-31T00:00:00", "International Exports Empty": 39109.75}, {"dt": "2017-04-30T00:00:00", "International Exports Empty": 31443.0}, {"dt": "2017-05-31T00:00:00", "International Exports Empty": 47412.5}, {"dt": "2017-06-30T00:00:00", "International Exports Empty": 47711.0}, {"dt": "2017-07-31T00:00:00", "International Exports Empty": 43488.0}, {"dt": "2017-08-31T00:00:00", "International Exports Empty": 55720.75}, {"dt": "2017-09-30T00:00:00", "International Exports Empty": 50795.75}, {"dt": "2017-10-31T00:00:00", "International Exports Empty": 43757.75}, {"dt": "2017-11-30T00:00:00", "International Exports Empty": 44219.25}, {"dt": "2017-12-31T00:00:00", "International Exports Empty": 44215.75}, {"dt": "2018-01-31T00:00:00", "International Exports Empty": 37676.0}, {"dt": "2018-02-28T00:00:00", "International Exports Empty": 32550.0}, {"dt": "2018-03-31T00:00:00", "International Exports Empty": 36166.0}, {"dt": "2018-04-30T00:00:00", "International Exports Empty": 33736.0}, {"dt": "2018-05-31T00:00:00", "International Exports Empty": 37123.0}, {"dt": "2018-06-30T00:00:00", "International Exports Empty": 58132.0}, {"dt": "2018-07-31T00:00:00", "International Exports Empty": 51627.75}, {"dt": "2018-08-31T00:00:00", "International Exports Empty": 47695.5}, {"dt": "2018-09-30T00:00:00", "International Exports Empty": 55166.25}, {"dt": "2018-10-31T00:00:00", "International Exports Empty": 60010.25}, {"dt": "2018-11-30T00:00:00", "International Exports Empty": 46825.25}, {"dt": "2018-12-31T00:00:00", "International Exports Empty": 55399.25}, {"dt": "2019-01-31T00:00:00", "International Exports Empty": 60043.25}, {"dt": "2019-02-28T00:00:00", "International Exports Empty": 44157.25}, {"dt": "2019-03-31T00:00:00", "International Exports Empty": 52437.0}, {"dt": "2019-04-30T00:00:00", "International Exports Empty": 56604.25}, {"dt": "2019-05-31T00:00:00", "International Exports Empty": 51251.75}, {"dt": "2019-06-30T00:00:00", "International Exports Empty": 59432.0}, {"dt": "2019-07-31T00:00:00", "International Exports Empty": 52580.0}, {"dt": "2019-08-31T00:00:00", "International Exports Empty": 58748.75}, {"dt": "2019-09-30T00:00:00", "International Exports Empty": 56313.0}, {"dt": "2019-10-31T00:00:00", "International Exports Empty": 49467.75}, {"dt": "2019-11-30T00:00:00", "International Exports Empty": 33655.0}, {"dt": "2019-12-31T00:00:00", "International Exports Empty": 43298.75}, {"dt": "2020-01-31T00:00:00", "International Exports Empty": 39247.75}, {"dt": "2020-02-29T00:00:00", "International Exports Empty": 39590.75}, {"dt": "2020-03-31T00:00:00", "International Exports Empty": 22167.25}, {"dt": "2020-04-30T00:00:00", "International Exports Empty": 23846.75}, {"dt": "2020-05-31T00:00:00", "International Exports Empty": 29582.75}, {"dt": "2020-06-30T00:00:00", "International Exports Empty": 40902.5}, {"dt": "2020-07-31T00:00:00", "International Exports Empty": 40351.75}, {"dt": "2020-08-31T00:00:00", "International Exports Empty": 46533.25}, {"dt": "2020-09-30T00:00:00", "International Exports Empty": 50494.0}, {"dt": "2020-10-31T00:00:00", "International Exports Empty": 51634.25}, {"dt": "2020-11-30T00:00:00", "International Exports Empty": 48668.0}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[31]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doYoyChart</span><span class="p">(</span><span class="n">df_nwsea_tab</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s2">&quot;International Exports Empty&quot;</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s2">&quot;Seattle/Tacoma&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[31]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-2188573150be4137b52e1e3b877d26f1"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-2188573150be4137b52e1e3b877d26f1") {
      outputDiv = document.getElementById("altair-viz-2188573150be4137b52e1e3b877d26f1");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-432ebda54efa257deabcbdfa6be762ba"}, "mark": {"type": "bar", "color": "blue", "width": 7}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['nolarge'] < 0"}, "value": "royalblue"}, "tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "nolarge", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Year-over-Year Volume Growth [%]"}, "field": "nolarge"}}, "height": 400, "title": "Port of Seattle/Tacoma International Exports Empty Container Volume Growth", "transform": [{"calculate": "datum['International Exports Empty'] > 400 ? NaN : datum['International Exports Empty']", "as": "nolarge"}], "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-432ebda54efa257deabcbdfa6be762ba": [{"dt": "2015-01-31T00:00:00", "International Exports Empty": null}, {"dt": "2015-02-28T00:00:00", "International Exports Empty": null}, {"dt": "2015-03-31T00:00:00", "International Exports Empty": null}, {"dt": "2015-04-30T00:00:00", "International Exports Empty": null}, {"dt": "2015-05-31T00:00:00", "International Exports Empty": null}, {"dt": "2015-06-30T00:00:00", "International Exports Empty": null}, {"dt": "2015-07-31T00:00:00", "International Exports Empty": null}, {"dt": "2015-08-31T00:00:00", "International Exports Empty": null}, {"dt": "2015-09-30T00:00:00", "International Exports Empty": null}, {"dt": "2015-10-31T00:00:00", "International Exports Empty": null}, {"dt": "2015-11-30T00:00:00", "International Exports Empty": null}, {"dt": "2015-12-31T00:00:00", "International Exports Empty": null}, {"dt": "2016-01-31T00:00:00", "International Exports Empty": 32.84236648161816}, {"dt": "2016-02-29T00:00:00", "International Exports Empty": 4.479018872325136}, {"dt": "2016-03-31T00:00:00", "International Exports Empty": -35.175030855290224}, {"dt": "2016-04-30T00:00:00", "International Exports Empty": -51.97865040030499}, {"dt": "2016-05-31T00:00:00", "International Exports Empty": -10.549381115935452}, {"dt": "2016-06-30T00:00:00", "International Exports Empty": -43.367749166516276}, {"dt": "2016-07-31T00:00:00", "International Exports Empty": -25.19961005017912}, {"dt": "2016-08-31T00:00:00", "International Exports Empty": -20.747829907563354}, {"dt": "2016-09-30T00:00:00", "International Exports Empty": -35.41933751209798}, {"dt": "2016-10-31T00:00:00", "International Exports Empty": -31.140923457468737}, {"dt": "2016-11-30T00:00:00", "International Exports Empty": 21.31327629479356}, {"dt": "2016-12-31T00:00:00", "International Exports Empty": 28.98812411290177}, {"dt": "2017-01-31T00:00:00", "International Exports Empty": 10.354850917523528}, {"dt": "2017-02-28T00:00:00", "International Exports Empty": 34.01977472072626}, {"dt": "2017-03-31T00:00:00", "International Exports Empty": 48.18228318114652}, {"dt": "2017-04-30T00:00:00", "International Exports Empty": 81.54681139755766}, {"dt": "2017-05-31T00:00:00", "International Exports Empty": 71.74552863934798}, {"dt": "2017-06-30T00:00:00", "International Exports Empty": 60.0422655686564}, {"dt": "2017-07-31T00:00:00", "International Exports Empty": 39.08704934155294}, {"dt": "2017-08-31T00:00:00", "International Exports Empty": 58.416847911069404}, {"dt": "2017-09-30T00:00:00", "International Exports Empty": 59.42423576674409}, {"dt": "2017-10-31T00:00:00", "International Exports Empty": 45.54261148668313}, {"dt": "2017-11-30T00:00:00", "International Exports Empty": 16.91177928627612}, {"dt": "2017-12-31T00:00:00", "International Exports Empty": 23.17479994707041}, {"dt": "2018-01-31T00:00:00", "International Exports Empty": 9.96038029083639}, {"dt": "2018-02-28T00:00:00", "International Exports Empty": -9.637299945865664}, {"dt": "2018-03-31T00:00:00", "International Exports Empty": -7.526895467242822}, {"dt": "2018-04-30T00:00:00", "International Exports Empty": 7.292561142384635}, {"dt": "2018-05-31T00:00:00", "International Exports Empty": -21.702082784075927}, {"dt": "2018-06-30T00:00:00", "International Exports Empty": 21.84192324621157}, {"dt": "2018-07-31T00:00:00", "International Exports Empty": 18.717232339955856}, {"dt": "2018-08-31T00:00:00", "International Exports Empty": -14.402623798136238}, {"dt": "2018-09-30T00:00:00", "International Exports Empty": 8.604066285073063}, {"dt": "2018-10-31T00:00:00", "International Exports Empty": 37.14199198999035}, {"dt": "2018-11-30T00:00:00", "International Exports Empty": 5.893360923127378}, {"dt": "2018-12-31T00:00:00", "International Exports Empty": 25.293023413602622}, {"dt": "2019-01-31T00:00:00", "International Exports Empty": 59.367369147467876}, {"dt": "2019-02-28T00:00:00", "International Exports Empty": 35.659754224270344}, {"dt": "2019-03-31T00:00:00", "International Exports Empty": 44.989769396670894}, {"dt": "2019-04-30T00:00:00", "International Exports Empty": 67.78589637182833}, {"dt": "2019-05-31T00:00:00", "International Exports Empty": 38.05928938932737}, {"dt": "2019-06-30T00:00:00", "International Exports Empty": 2.236289823161086}, {"dt": "2019-07-31T00:00:00", "International Exports Empty": 1.8444538063347782}, {"dt": "2019-08-31T00:00:00", "International Exports Empty": 23.17461815055928}, {"dt": "2019-09-30T00:00:00", "International Exports Empty": 2.0787166066208895}, {"dt": "2019-10-31T00:00:00", "International Exports Empty": -17.567832162005658}, {"dt": "2019-11-30T00:00:00", "International Exports Empty": -28.12638480307099}, {"dt": "2019-12-31T00:00:00", "International Exports Empty": -21.842353461463826}, {"dt": "2020-01-31T00:00:00", "International Exports Empty": -34.63420117998276}, {"dt": "2020-02-29T00:00:00", "International Exports Empty": -10.341450158241283}, {"dt": "2020-03-31T00:00:00", "International Exports Empty": -57.72593779201709}, {"dt": "2020-04-30T00:00:00", "International Exports Empty": -57.871096251606545}, {"dt": "2020-05-31T00:00:00", "International Exports Empty": -42.2795319184223}, {"dt": "2020-06-30T00:00:00", "International Exports Empty": -31.177648404899717}, {"dt": "2020-07-31T00:00:00", "International Exports Empty": -23.256466337010274}, {"dt": "2020-08-31T00:00:00", "International Exports Empty": -20.79278282516649}, {"dt": "2020-09-30T00:00:00", "International Exports Empty": -10.333315575444391}, {"dt": "2020-10-31T00:00:00", "International Exports Empty": 4.379621066250228}, {"dt": "2020-11-30T00:00:00", "International Exports Empty": 44.60852770762145}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Port-of-Houston">Port of Houston<a class="anchor-link" href="#Port-of-Houston">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[32]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nd">@memory</span><span class="o">.</span><span class="n">cache</span>
<span class="k">def</span> <span class="nf">fetchHouston</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">retries</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">retries</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">req</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span> <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="n">uaString</span> <span class="p">})</span>

        <span class="n">data</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>

        <span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span> <span class="s2">&quot;Loaded Imports&quot;</span><span class="p">,</span> <span class="s2">&quot;Loaded Exports&quot;</span><span class="p">,</span> <span class="s2">&quot;Loaded Total&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Empty Imports&quot;</span><span class="p">,</span> <span class="s2">&quot;Empty Exports&quot;</span><span class="p">,</span> <span class="s2">&quot;Empty Total&quot;</span><span class="p">,</span> <span class="s2">&quot;Loaded and Empty Total&quot;</span><span class="p">]</span>

        <span class="n">dfs_hs</span> <span class="o">=</span> <span class="n">read_pdf</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">read</span><span class="p">()),</span> <span class="n">pages</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">pandas_options</span><span class="o">=</span><span class="p">{</span> <span class="s1">&#39;names&#39;</span><span class="p">:</span> <span class="n">cols</span> <span class="p">})</span> <span class="c1">#.head(20)</span>

        <span class="n">df_hs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">dfs_hs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5</span><span class="p">:]]</span> <span class="o">+</span> <span class="n">dfs_hs</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>

        <span class="n">df_hs</span><span class="p">[</span><span class="n">df_hs</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">to_list</span><span class="p">()[</span><span class="mi">1</span><span class="p">:]]</span> <span class="o">=</span> <span class="n">df_hs</span><span class="p">[</span><span class="n">df_hs</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">to_list</span><span class="p">()[</span><span class="mi">1</span><span class="p">:]]</span>\
                <span class="o">.</span><span class="n">applymap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">v</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">))</span>

        <span class="n">df_hs</span><span class="p">[</span><span class="s1">&#39;dt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_hs</span><span class="p">[</span><span class="s1">&#39;Date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;%b-%y&#39;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">df_hs</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fetchHouston</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">retries</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

<span class="n">res</span> <span class="o">=</span> <span class="o">!</span>curl -s <span class="s1">&#39;https://porthouston.com/about-us/statistics/&#39;</span> <span class="p">|</span> grep <span class="s1">&#39;TEU-stats&#39;</span>
    
<span class="n">currentUrl</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;href=&quot;([^&quot;]+)&quot;&#39;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">res</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>

<span class="c1">#print(currentUrl)</span>
    
<span class="c1"># TODO - automate detection of this url from here: https://porthouston.com/about-us/statistics/</span>
<span class="n">df_hs</span> <span class="o">=</span> <span class="n">fetchHouston</span><span class="p">(</span><span class="n">currentUrl</span><span class="p">)</span>
<span class="c1">#df_hs.tail()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[33]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doChart</span><span class="p">(</span><span class="n">df_hs</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s2">&quot;Empty Imports&quot;</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s2">&quot;Houston&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[33]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-c0f7beb1f96341d389cb24f347ba6616"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-c0f7beb1f96341d389cb24f347ba6616") {
      outputDiv = document.getElementById("altair-viz-c0f7beb1f96341d389cb24f347ba6616");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-a540ffb0deecc990327321601df65542"}, "mark": {"type": "line", "color": "purple"}, "encoding": {"tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "Empty Imports", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Volume [TEUs]"}, "field": "Empty Imports"}}, "height": 400, "title": "Port of Houston Empty Imports Container Volume", "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-a540ffb0deecc990327321601df65542": [{"dt": "2001-01-01T00:00:00", "Empty Imports": 12618}, {"dt": "2001-02-01T00:00:00", "Empty Imports": 7823}, {"dt": "2001-03-01T00:00:00", "Empty Imports": 9749}, {"dt": "2001-04-01T00:00:00", "Empty Imports": 13525}, {"dt": "2001-05-01T00:00:00", "Empty Imports": 11932}, {"dt": "2001-06-01T00:00:00", "Empty Imports": 12398}, {"dt": "2001-07-01T00:00:00", "Empty Imports": 8108}, {"dt": "2001-08-01T00:00:00", "Empty Imports": 14172}, {"dt": "2001-09-01T00:00:00", "Empty Imports": 11414}, {"dt": "2001-10-01T00:00:00", "Empty Imports": 11172}, {"dt": "2001-11-01T00:00:00", "Empty Imports": 12854}, {"dt": "2001-12-01T00:00:00", "Empty Imports": 15527}, {"dt": "2002-01-01T00:00:00", "Empty Imports": 10915}, {"dt": "2002-02-01T00:00:00", "Empty Imports": 12823}, {"dt": "2002-03-01T00:00:00", "Empty Imports": 13446}, {"dt": "2002-04-01T00:00:00", "Empty Imports": 16098}, {"dt": "2002-05-01T00:00:00", "Empty Imports": 10362}, {"dt": "2002-06-01T00:00:00", "Empty Imports": 10930}, {"dt": "2002-07-01T00:00:00", "Empty Imports": 9162}, {"dt": "2002-08-01T00:00:00", "Empty Imports": 6521}, {"dt": "2002-09-01T00:00:00", "Empty Imports": 7473}, {"dt": "2002-10-01T00:00:00", "Empty Imports": 11570}, {"dt": "2002-11-01T00:00:00", "Empty Imports": 10122}, {"dt": "2002-12-01T00:00:00", "Empty Imports": 10453}, {"dt": "2003-01-01T00:00:00", "Empty Imports": 8325}, {"dt": "2003-02-01T00:00:00", "Empty Imports": 8932}, {"dt": "2003-03-01T00:00:00", "Empty Imports": 12549}, {"dt": "2003-04-01T00:00:00", "Empty Imports": 10012}, {"dt": "2003-05-01T00:00:00", "Empty Imports": 10641}, {"dt": "2003-06-01T00:00:00", "Empty Imports": 7886}, {"dt": "2003-07-01T00:00:00", "Empty Imports": 11789}, {"dt": "2003-08-01T00:00:00", "Empty Imports": 9815}, {"dt": "2003-09-01T00:00:00", "Empty Imports": 12235}, {"dt": "2003-10-01T00:00:00", "Empty Imports": 10533}, {"dt": "2003-11-01T00:00:00", "Empty Imports": 13032}, {"dt": "2003-12-01T00:00:00", "Empty Imports": 14715}, {"dt": "2004-01-01T00:00:00", "Empty Imports": 12241}, {"dt": "2004-02-01T00:00:00", "Empty Imports": 11484}, {"dt": "2004-03-01T00:00:00", "Empty Imports": 13702}, {"dt": "2004-04-01T00:00:00", "Empty Imports": 12248}, {"dt": "2004-05-01T00:00:00", "Empty Imports": 14756}, {"dt": "2004-06-01T00:00:00", "Empty Imports": 13557}, {"dt": "2004-07-01T00:00:00", "Empty Imports": 12147}, {"dt": "2004-08-01T00:00:00", "Empty Imports": 12249}, {"dt": "2004-09-01T00:00:00", "Empty Imports": 11688}, {"dt": "2004-10-01T00:00:00", "Empty Imports": 10704}, {"dt": "2004-11-01T00:00:00", "Empty Imports": 15596}, {"dt": "2004-12-01T00:00:00", "Empty Imports": 11383}, {"dt": "2005-01-01T00:00:00", "Empty Imports": 9071}, {"dt": "2005-02-01T00:00:00", "Empty Imports": 14057}, {"dt": "2005-03-01T00:00:00", "Empty Imports": 14596}, {"dt": "2005-04-01T00:00:00", "Empty Imports": 16718}, {"dt": "2005-05-01T00:00:00", "Empty Imports": 12218}, {"dt": "2005-06-01T00:00:00", "Empty Imports": 12477}, {"dt": "2005-07-01T00:00:00", "Empty Imports": 15708}, {"dt": "2005-08-01T00:00:00", "Empty Imports": 14917}, {"dt": "2005-09-01T00:00:00", "Empty Imports": 14194}, {"dt": "2005-10-01T00:00:00", "Empty Imports": 13399}, {"dt": "2005-11-01T00:00:00", "Empty Imports": 16158}, {"dt": "2005-12-01T00:00:00", "Empty Imports": 13676}, {"dt": "2006-01-01T00:00:00", "Empty Imports": 12748}, {"dt": "2006-02-01T00:00:00", "Empty Imports": 11822}, {"dt": "2006-03-01T00:00:00", "Empty Imports": 15620}, {"dt": "2006-04-01T00:00:00", "Empty Imports": 11440}, {"dt": "2006-05-01T00:00:00", "Empty Imports": 13144}, {"dt": "2006-06-01T00:00:00", "Empty Imports": 12982}, {"dt": "2006-07-01T00:00:00", "Empty Imports": 8840}, {"dt": "2006-08-01T00:00:00", "Empty Imports": 7876}, {"dt": "2006-09-01T00:00:00", "Empty Imports": 7136}, {"dt": "2006-10-01T00:00:00", "Empty Imports": 9657}, {"dt": "2006-11-01T00:00:00", "Empty Imports": 13092}, {"dt": "2006-12-01T00:00:00", "Empty Imports": 13775}, {"dt": "2007-01-01T00:00:00", "Empty Imports": 18507}, {"dt": "2007-02-01T00:00:00", "Empty Imports": 17114}, {"dt": "2007-03-01T00:00:00", "Empty Imports": 23202}, {"dt": "2007-04-01T00:00:00", "Empty Imports": 19695}, {"dt": "2007-05-01T00:00:00", "Empty Imports": 19957}, {"dt": "2007-06-01T00:00:00", "Empty Imports": 23917}, {"dt": "2007-07-01T00:00:00", "Empty Imports": 21370}, {"dt": "2007-08-01T00:00:00", "Empty Imports": 26714}, {"dt": "2007-09-01T00:00:00", "Empty Imports": 26593}, {"dt": "2007-10-01T00:00:00", "Empty Imports": 25445}, {"dt": "2007-11-01T00:00:00", "Empty Imports": 26572}, {"dt": "2007-12-01T00:00:00", "Empty Imports": 31699}, {"dt": "2008-01-01T00:00:00", "Empty Imports": 24098}, {"dt": "2008-02-01T00:00:00", "Empty Imports": 27284}, {"dt": "2008-03-01T00:00:00", "Empty Imports": 29517}, {"dt": "2008-04-01T00:00:00", "Empty Imports": 29980}, {"dt": "2008-05-01T00:00:00", "Empty Imports": 36510}, {"dt": "2008-06-01T00:00:00", "Empty Imports": 36378}, {"dt": "2008-07-01T00:00:00", "Empty Imports": 34714}, {"dt": "2008-08-01T00:00:00", "Empty Imports": 29317}, {"dt": "2008-09-01T00:00:00", "Empty Imports": 22446}, {"dt": "2008-10-01T00:00:00", "Empty Imports": 22563}, {"dt": "2008-11-01T00:00:00", "Empty Imports": 11685}, {"dt": "2008-12-01T00:00:00", "Empty Imports": 10633}, {"dt": "2009-01-01T00:00:00", "Empty Imports": 19533}, {"dt": "2009-02-01T00:00:00", "Empty Imports": 27745}, {"dt": "2009-03-01T00:00:00", "Empty Imports": 39329}, {"dt": "2009-04-01T00:00:00", "Empty Imports": 35915}, {"dt": "2009-05-01T00:00:00", "Empty Imports": 45550}, {"dt": "2009-06-01T00:00:00", "Empty Imports": 49793}, {"dt": "2009-07-01T00:00:00", "Empty Imports": 46395}, {"dt": "2009-08-01T00:00:00", "Empty Imports": 30924}, {"dt": "2009-09-01T00:00:00", "Empty Imports": 41507}, {"dt": "2009-10-01T00:00:00", "Empty Imports": 37453}, {"dt": "2009-11-01T00:00:00", "Empty Imports": 33131}, {"dt": "2009-12-01T00:00:00", "Empty Imports": 40703}, {"dt": "2010-01-01T00:00:00", "Empty Imports": 35951}, {"dt": "2010-02-01T00:00:00", "Empty Imports": 39206}, {"dt": "2010-03-01T00:00:00", "Empty Imports": 46854}, {"dt": "2010-04-01T00:00:00", "Empty Imports": 25786}, {"dt": "2010-05-01T00:00:00", "Empty Imports": 29952}, {"dt": "2010-06-01T00:00:00", "Empty Imports": 27843}, {"dt": "2010-07-01T00:00:00", "Empty Imports": 19165}, {"dt": "2010-08-01T00:00:00", "Empty Imports": 29893}, {"dt": "2010-09-01T00:00:00", "Empty Imports": 36807}, {"dt": "2010-10-01T00:00:00", "Empty Imports": 28292}, {"dt": "2010-11-01T00:00:00", "Empty Imports": 31181}, {"dt": "2010-12-01T00:00:00", "Empty Imports": 34177}, {"dt": "2011-01-01T00:00:00", "Empty Imports": 39797}, {"dt": "2011-02-01T00:00:00", "Empty Imports": 32669}, {"dt": "2011-03-01T00:00:00", "Empty Imports": 53494}, {"dt": "2011-04-01T00:00:00", "Empty Imports": 35148}, {"dt": "2011-05-01T00:00:00", "Empty Imports": 28349}, {"dt": "2011-06-01T00:00:00", "Empty Imports": 22807}, {"dt": "2011-07-01T00:00:00", "Empty Imports": 18145}, {"dt": "2011-08-01T00:00:00", "Empty Imports": 26759}, {"dt": "2011-09-01T00:00:00", "Empty Imports": 33904}, {"dt": "2011-10-01T00:00:00", "Empty Imports": 22684}, {"dt": "2011-11-01T00:00:00", "Empty Imports": 30988}, {"dt": "2011-12-01T00:00:00", "Empty Imports": 32700}, {"dt": "2012-01-01T00:00:00", "Empty Imports": 30828}, {"dt": "2012-02-01T00:00:00", "Empty Imports": 21199}, {"dt": "2012-03-01T00:00:00", "Empty Imports": 28275}, {"dt": "2012-04-01T00:00:00", "Empty Imports": 23947}, {"dt": "2012-05-01T00:00:00", "Empty Imports": 19011}, {"dt": "2012-06-01T00:00:00", "Empty Imports": 23373}, {"dt": "2012-07-01T00:00:00", "Empty Imports": 28486}, {"dt": "2012-08-01T00:00:00", "Empty Imports": 32603}, {"dt": "2012-09-01T00:00:00", "Empty Imports": 26176}, {"dt": "2012-10-01T00:00:00", "Empty Imports": 25752}, {"dt": "2012-11-01T00:00:00", "Empty Imports": 24546}, {"dt": "2012-12-01T00:00:00", "Empty Imports": 29863}, {"dt": "2013-01-01T00:00:00", "Empty Imports": 30728}, {"dt": "2013-02-01T00:00:00", "Empty Imports": 29916}, {"dt": "2013-03-01T00:00:00", "Empty Imports": 25254}, {"dt": "2013-04-01T00:00:00", "Empty Imports": 27048}, {"dt": "2013-05-01T00:00:00", "Empty Imports": 26821}, {"dt": "2013-06-01T00:00:00", "Empty Imports": 27014}, {"dt": "2013-07-01T00:00:00", "Empty Imports": 40084}, {"dt": "2013-08-01T00:00:00", "Empty Imports": 23116}, {"dt": "2013-09-01T00:00:00", "Empty Imports": 20994}, {"dt": "2013-10-01T00:00:00", "Empty Imports": 20611}, {"dt": "2013-11-01T00:00:00", "Empty Imports": 10421}, {"dt": "2013-12-01T00:00:00", "Empty Imports": 24467}, {"dt": "2014-01-01T00:00:00", "Empty Imports": 27402}, {"dt": "2014-02-01T00:00:00", "Empty Imports": 20616}, {"dt": "2014-03-01T00:00:00", "Empty Imports": 19146}, {"dt": "2014-04-01T00:00:00", "Empty Imports": 10396}, {"dt": "2014-05-01T00:00:00", "Empty Imports": 15059}, {"dt": "2014-06-01T00:00:00", "Empty Imports": 19990}, {"dt": "2014-07-01T00:00:00", "Empty Imports": 17206}, {"dt": "2014-08-01T00:00:00", "Empty Imports": 14918}, {"dt": "2014-09-01T00:00:00", "Empty Imports": 12302}, {"dt": "2014-10-01T00:00:00", "Empty Imports": 9446}, {"dt": "2014-11-01T00:00:00", "Empty Imports": 9521}, {"dt": "2014-12-01T00:00:00", "Empty Imports": 11907}, {"dt": "2015-01-01T00:00:00", "Empty Imports": 12771}, {"dt": "2015-02-01T00:00:00", "Empty Imports": 11309}, {"dt": "2015-03-01T00:00:00", "Empty Imports": 14415}, {"dt": "2015-04-01T00:00:00", "Empty Imports": 17359}, {"dt": "2015-05-01T00:00:00", "Empty Imports": 14081}, {"dt": "2015-06-01T00:00:00", "Empty Imports": 8530}, {"dt": "2015-07-01T00:00:00", "Empty Imports": 12095}, {"dt": "2015-08-01T00:00:00", "Empty Imports": 11604}, {"dt": "2015-09-01T00:00:00", "Empty Imports": 10335}, {"dt": "2015-10-01T00:00:00", "Empty Imports": 10145}, {"dt": "2015-11-01T00:00:00", "Empty Imports": 11190}, {"dt": "2015-12-01T00:00:00", "Empty Imports": 15631}, {"dt": "2016-01-01T00:00:00", "Empty Imports": 12515}, {"dt": "2016-02-01T00:00:00", "Empty Imports": 17436}, {"dt": "2016-03-01T00:00:00", "Empty Imports": 19876}, {"dt": "2016-04-01T00:00:00", "Empty Imports": 31987}, {"dt": "2016-05-01T00:00:00", "Empty Imports": 18838}, {"dt": "2016-06-01T00:00:00", "Empty Imports": 18961}, {"dt": "2016-07-01T00:00:00", "Empty Imports": 12890}, {"dt": "2016-08-01T00:00:00", "Empty Imports": 11740}, {"dt": "2016-09-01T00:00:00", "Empty Imports": 14848}, {"dt": "2016-10-01T00:00:00", "Empty Imports": 11804}, {"dt": "2016-11-01T00:00:00", "Empty Imports": 9729}, {"dt": "2016-12-01T00:00:00", "Empty Imports": 11485}, {"dt": "2017-01-01T00:00:00", "Empty Imports": 14930}, {"dt": "2017-02-01T00:00:00", "Empty Imports": 15915}, {"dt": "2017-03-01T00:00:00", "Empty Imports": 25739}, {"dt": "2017-04-01T00:00:00", "Empty Imports": 16204}, {"dt": "2017-05-01T00:00:00", "Empty Imports": 14714}, {"dt": "2017-06-01T00:00:00", "Empty Imports": 12190}, {"dt": "2017-07-01T00:00:00", "Empty Imports": 11408}, {"dt": "2017-08-01T00:00:00", "Empty Imports": 5301}, {"dt": "2017-09-01T00:00:00", "Empty Imports": 11170}, {"dt": "2017-10-01T00:00:00", "Empty Imports": 7751}, {"dt": "2017-11-01T00:00:00", "Empty Imports": 9848}, {"dt": "2017-12-01T00:00:00", "Empty Imports": 7739}, {"dt": "2018-01-01T00:00:00", "Empty Imports": 7370}, {"dt": "2018-02-01T00:00:00", "Empty Imports": 8881}, {"dt": "2018-03-01T00:00:00", "Empty Imports": 21121}, {"dt": "2018-04-01T00:00:00", "Empty Imports": 18604}, {"dt": "2018-05-01T00:00:00", "Empty Imports": 24652}, {"dt": "2018-06-01T00:00:00", "Empty Imports": 15624}, {"dt": "2018-07-01T00:00:00", "Empty Imports": 16351}, {"dt": "2018-08-01T00:00:00", "Empty Imports": 14405}, {"dt": "2018-09-01T00:00:00", "Empty Imports": 10599}, {"dt": "2018-10-01T00:00:00", "Empty Imports": 9101}, {"dt": "2018-11-01T00:00:00", "Empty Imports": 13233}, {"dt": "2018-12-01T00:00:00", "Empty Imports": 9528}, {"dt": "2019-01-01T00:00:00", "Empty Imports": 10975}, {"dt": "2019-02-01T00:00:00", "Empty Imports": 9759}, {"dt": "2019-03-01T00:00:00", "Empty Imports": 35333}, {"dt": "2019-04-01T00:00:00", "Empty Imports": 27182}, {"dt": "2019-05-01T00:00:00", "Empty Imports": 21289}, {"dt": "2019-06-01T00:00:00", "Empty Imports": 20003}, {"dt": "2019-07-01T00:00:00", "Empty Imports": 20426}, {"dt": "2019-08-01T00:00:00", "Empty Imports": 16986}, {"dt": "2019-09-01T00:00:00", "Empty Imports": 22168}, {"dt": "2019-10-01T00:00:00", "Empty Imports": 17720}, {"dt": "2019-11-01T00:00:00", "Empty Imports": 22188}, {"dt": "2019-12-01T00:00:00", "Empty Imports": 27529}, {"dt": "2020-01-01T00:00:00", "Empty Imports": 30252}, {"dt": "2020-02-01T00:00:00", "Empty Imports": 44560}, {"dt": "2020-03-01T00:00:00", "Empty Imports": 37448}, {"dt": "2020-04-01T00:00:00", "Empty Imports": 18422}, {"dt": "2020-05-01T00:00:00", "Empty Imports": 8959}, {"dt": "2020-06-01T00:00:00", "Empty Imports": 17002}, {"dt": "2020-07-01T00:00:00", "Empty Imports": 21677}, {"dt": "2020-08-01T00:00:00", "Empty Imports": 11970}, {"dt": "2020-09-01T00:00:00", "Empty Imports": 10701}, {"dt": "2020-10-01T00:00:00", "Empty Imports": 12871}, {"dt": "2020-11-01T00:00:00", "Empty Imports": 8018}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[34]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doChart</span><span class="p">(</span><span class="n">df_hs</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s2">&quot;Empty Exports&quot;</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s2">&quot;Houston&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[34]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-f85da887d59b4beaae10e46e75d87692"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-f85da887d59b4beaae10e46e75d87692") {
      outputDiv = document.getElementById("altair-viz-f85da887d59b4beaae10e46e75d87692");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-6810ecb8d6b9bf73b0fe5eb571e33449"}, "mark": {"type": "line", "color": "purple"}, "encoding": {"tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "Empty Exports", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Volume [TEUs]"}, "field": "Empty Exports"}}, "height": 400, "title": "Port of Houston Empty Exports Container Volume", "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-6810ecb8d6b9bf73b0fe5eb571e33449": [{"dt": "2001-01-01T00:00:00", "Empty Exports": 7326}, {"dt": "2001-02-01T00:00:00", "Empty Exports": 4293}, {"dt": "2001-03-01T00:00:00", "Empty Exports": 4698}, {"dt": "2001-04-01T00:00:00", "Empty Exports": 6298}, {"dt": "2001-05-01T00:00:00", "Empty Exports": 6406}, {"dt": "2001-06-01T00:00:00", "Empty Exports": 7153}, {"dt": "2001-07-01T00:00:00", "Empty Exports": 7916}, {"dt": "2001-08-01T00:00:00", "Empty Exports": 7843}, {"dt": "2001-09-01T00:00:00", "Empty Exports": 6664}, {"dt": "2001-10-01T00:00:00", "Empty Exports": 9886}, {"dt": "2001-11-01T00:00:00", "Empty Exports": 8125}, {"dt": "2001-12-01T00:00:00", "Empty Exports": 9875}, {"dt": "2002-01-01T00:00:00", "Empty Exports": 7618}, {"dt": "2002-02-01T00:00:00", "Empty Exports": 7285}, {"dt": "2002-03-01T00:00:00", "Empty Exports": 8384}, {"dt": "2002-04-01T00:00:00", "Empty Exports": 8458}, {"dt": "2002-05-01T00:00:00", "Empty Exports": 11614}, {"dt": "2002-06-01T00:00:00", "Empty Exports": 9083}, {"dt": "2002-07-01T00:00:00", "Empty Exports": 11678}, {"dt": "2002-08-01T00:00:00", "Empty Exports": 13697}, {"dt": "2002-09-01T00:00:00", "Empty Exports": 12234}, {"dt": "2002-10-01T00:00:00", "Empty Exports": 10128}, {"dt": "2002-11-01T00:00:00", "Empty Exports": 12971}, {"dt": "2002-12-01T00:00:00", "Empty Exports": 9813}, {"dt": "2003-01-01T00:00:00", "Empty Exports": 7025}, {"dt": "2003-02-01T00:00:00", "Empty Exports": 4769}, {"dt": "2003-03-01T00:00:00", "Empty Exports": 4940}, {"dt": "2003-04-01T00:00:00", "Empty Exports": 5933}, {"dt": "2003-05-01T00:00:00", "Empty Exports": 9983}, {"dt": "2003-06-01T00:00:00", "Empty Exports": 10134}, {"dt": "2003-07-01T00:00:00", "Empty Exports": 11892}, {"dt": "2003-08-01T00:00:00", "Empty Exports": 12403}, {"dt": "2003-09-01T00:00:00", "Empty Exports": 13067}, {"dt": "2003-10-01T00:00:00", "Empty Exports": 14263}, {"dt": "2003-11-01T00:00:00", "Empty Exports": 11536}, {"dt": "2003-12-01T00:00:00", "Empty Exports": 11819}, {"dt": "2004-01-01T00:00:00", "Empty Exports": 10556}, {"dt": "2004-02-01T00:00:00", "Empty Exports": 9526}, {"dt": "2004-03-01T00:00:00", "Empty Exports": 9013}, {"dt": "2004-04-01T00:00:00", "Empty Exports": 6857}, {"dt": "2004-05-01T00:00:00", "Empty Exports": 9566}, {"dt": "2004-06-01T00:00:00", "Empty Exports": 8212}, {"dt": "2004-07-01T00:00:00", "Empty Exports": 10033}, {"dt": "2004-08-01T00:00:00", "Empty Exports": 10566}, {"dt": "2004-09-01T00:00:00", "Empty Exports": 7719}, {"dt": "2004-10-01T00:00:00", "Empty Exports": 13158}, {"dt": "2004-11-01T00:00:00", "Empty Exports": 5817}, {"dt": "2004-12-01T00:00:00", "Empty Exports": 8345}, {"dt": "2005-01-01T00:00:00", "Empty Exports": 9824}, {"dt": "2005-02-01T00:00:00", "Empty Exports": 6198}, {"dt": "2005-03-01T00:00:00", "Empty Exports": 10661}, {"dt": "2005-04-01T00:00:00", "Empty Exports": 5366}, {"dt": "2005-05-01T00:00:00", "Empty Exports": 6542}, {"dt": "2005-06-01T00:00:00", "Empty Exports": 5417}, {"dt": "2005-07-01T00:00:00", "Empty Exports": 6182}, {"dt": "2005-08-01T00:00:00", "Empty Exports": 11789}, {"dt": "2005-09-01T00:00:00", "Empty Exports": 6704}, {"dt": "2005-10-01T00:00:00", "Empty Exports": 17323}, {"dt": "2005-11-01T00:00:00", "Empty Exports": 17648}, {"dt": "2005-12-01T00:00:00", "Empty Exports": 18303}, {"dt": "2006-01-01T00:00:00", "Empty Exports": 11687}, {"dt": "2006-02-01T00:00:00", "Empty Exports": 9167}, {"dt": "2006-03-01T00:00:00", "Empty Exports": 10848}, {"dt": "2006-04-01T00:00:00", "Empty Exports": 7847}, {"dt": "2006-05-01T00:00:00", "Empty Exports": 6712}, {"dt": "2006-06-01T00:00:00", "Empty Exports": 7069}, {"dt": "2006-07-01T00:00:00", "Empty Exports": 9587}, {"dt": "2006-08-01T00:00:00", "Empty Exports": 8723}, {"dt": "2006-09-01T00:00:00", "Empty Exports": 7002}, {"dt": "2006-10-01T00:00:00", "Empty Exports": 8212}, {"dt": "2006-11-01T00:00:00", "Empty Exports": 9600}, {"dt": "2006-12-01T00:00:00", "Empty Exports": 4965}, {"dt": "2007-01-01T00:00:00", "Empty Exports": 3466}, {"dt": "2007-02-01T00:00:00", "Empty Exports": 7007}, {"dt": "2007-03-01T00:00:00", "Empty Exports": 5523}, {"dt": "2007-04-01T00:00:00", "Empty Exports": 5728}, {"dt": "2007-05-01T00:00:00", "Empty Exports": 4224}, {"dt": "2007-06-01T00:00:00", "Empty Exports": 2174}, {"dt": "2007-07-01T00:00:00", "Empty Exports": 4037}, {"dt": "2007-08-01T00:00:00", "Empty Exports": 6059}, {"dt": "2007-09-01T00:00:00", "Empty Exports": 4865}, {"dt": "2007-10-01T00:00:00", "Empty Exports": 7633}, {"dt": "2007-11-01T00:00:00", "Empty Exports": 9955}, {"dt": "2007-12-01T00:00:00", "Empty Exports": 2748}, {"dt": "2008-01-01T00:00:00", "Empty Exports": 5121}, {"dt": "2008-02-01T00:00:00", "Empty Exports": 2391}, {"dt": "2008-03-01T00:00:00", "Empty Exports": 2357}, {"dt": "2008-04-01T00:00:00", "Empty Exports": 2882}, {"dt": "2008-05-01T00:00:00", "Empty Exports": 2811}, {"dt": "2008-06-01T00:00:00", "Empty Exports": 2005}, {"dt": "2008-07-01T00:00:00", "Empty Exports": 3313}, {"dt": "2008-08-01T00:00:00", "Empty Exports": 4449}, {"dt": "2008-09-01T00:00:00", "Empty Exports": 6349}, {"dt": "2008-10-01T00:00:00", "Empty Exports": 16135}, {"dt": "2008-11-01T00:00:00", "Empty Exports": 11331}, {"dt": "2008-12-01T00:00:00", "Empty Exports": 6195}, {"dt": "2009-01-01T00:00:00", "Empty Exports": 4547}, {"dt": "2009-02-01T00:00:00", "Empty Exports": 4189}, {"dt": "2009-03-01T00:00:00", "Empty Exports": 2768}, {"dt": "2009-04-01T00:00:00", "Empty Exports": 19855}, {"dt": "2009-05-01T00:00:00", "Empty Exports": 3763}, {"dt": "2009-06-01T00:00:00", "Empty Exports": 2953}, {"dt": "2009-07-01T00:00:00", "Empty Exports": 4067}, {"dt": "2009-08-01T00:00:00", "Empty Exports": 3106}, {"dt": "2009-09-01T00:00:00", "Empty Exports": 2750}, {"dt": "2009-10-01T00:00:00", "Empty Exports": 7810}, {"dt": "2009-11-01T00:00:00", "Empty Exports": 7756}, {"dt": "2009-12-01T00:00:00", "Empty Exports": 3939}, {"dt": "2010-01-01T00:00:00", "Empty Exports": 6353}, {"dt": "2010-02-01T00:00:00", "Empty Exports": 6320}, {"dt": "2010-03-01T00:00:00", "Empty Exports": 4980}, {"dt": "2010-04-01T00:00:00", "Empty Exports": 6234}, {"dt": "2010-05-01T00:00:00", "Empty Exports": 5758}, {"dt": "2010-06-01T00:00:00", "Empty Exports": 8921}, {"dt": "2010-07-01T00:00:00", "Empty Exports": 7931}, {"dt": "2010-08-01T00:00:00", "Empty Exports": 6404}, {"dt": "2010-09-01T00:00:00", "Empty Exports": 6804}, {"dt": "2010-10-01T00:00:00", "Empty Exports": 7589}, {"dt": "2010-11-01T00:00:00", "Empty Exports": 6857}, {"dt": "2010-12-01T00:00:00", "Empty Exports": 4106}, {"dt": "2011-01-01T00:00:00", "Empty Exports": 5249}, {"dt": "2011-02-01T00:00:00", "Empty Exports": 5994}, {"dt": "2011-03-01T00:00:00", "Empty Exports": 7365}, {"dt": "2011-04-01T00:00:00", "Empty Exports": 4979}, {"dt": "2011-05-01T00:00:00", "Empty Exports": 7737}, {"dt": "2011-06-01T00:00:00", "Empty Exports": 4955}, {"dt": "2011-07-01T00:00:00", "Empty Exports": 7641}, {"dt": "2011-08-01T00:00:00", "Empty Exports": 7272}, {"dt": "2011-09-01T00:00:00", "Empty Exports": 6443}, {"dt": "2011-10-01T00:00:00", "Empty Exports": 7033}, {"dt": "2011-11-01T00:00:00", "Empty Exports": 9272}, {"dt": "2011-12-01T00:00:00", "Empty Exports": 8232}, {"dt": "2012-01-01T00:00:00", "Empty Exports": 8420}, {"dt": "2012-02-01T00:00:00", "Empty Exports": 11147}, {"dt": "2012-03-01T00:00:00", "Empty Exports": 8692}, {"dt": "2012-04-01T00:00:00", "Empty Exports": 10548}, {"dt": "2012-05-01T00:00:00", "Empty Exports": 9912}, {"dt": "2012-06-01T00:00:00", "Empty Exports": 12200}, {"dt": "2012-07-01T00:00:00", "Empty Exports": 9202}, {"dt": "2012-08-01T00:00:00", "Empty Exports": 12403}, {"dt": "2012-09-01T00:00:00", "Empty Exports": 13361}, {"dt": "2012-10-01T00:00:00", "Empty Exports": 10793}, {"dt": "2012-11-01T00:00:00", "Empty Exports": 11467}, {"dt": "2012-12-01T00:00:00", "Empty Exports": 10535}, {"dt": "2013-01-01T00:00:00", "Empty Exports": 8273}, {"dt": "2013-02-01T00:00:00", "Empty Exports": 6753}, {"dt": "2013-03-01T00:00:00", "Empty Exports": 9801}, {"dt": "2013-04-01T00:00:00", "Empty Exports": 8549}, {"dt": "2013-05-01T00:00:00", "Empty Exports": 9874}, {"dt": "2013-06-01T00:00:00", "Empty Exports": 10903}, {"dt": "2013-07-01T00:00:00", "Empty Exports": 13114}, {"dt": "2013-08-01T00:00:00", "Empty Exports": 14450}, {"dt": "2013-09-01T00:00:00", "Empty Exports": 11126}, {"dt": "2013-10-01T00:00:00", "Empty Exports": 12088}, {"dt": "2013-11-01T00:00:00", "Empty Exports": 9139}, {"dt": "2013-12-01T00:00:00", "Empty Exports": 8219}, {"dt": "2014-01-01T00:00:00", "Empty Exports": 9957}, {"dt": "2014-02-01T00:00:00", "Empty Exports": 7075}, {"dt": "2014-03-01T00:00:00", "Empty Exports": 9743}, {"dt": "2014-04-01T00:00:00", "Empty Exports": 10205}, {"dt": "2014-05-01T00:00:00", "Empty Exports": 14660}, {"dt": "2014-06-01T00:00:00", "Empty Exports": 15550}, {"dt": "2014-07-01T00:00:00", "Empty Exports": 16465}, {"dt": "2014-08-01T00:00:00", "Empty Exports": 15560}, {"dt": "2014-09-01T00:00:00", "Empty Exports": 15981}, {"dt": "2014-10-01T00:00:00", "Empty Exports": 20443}, {"dt": "2014-11-01T00:00:00", "Empty Exports": 18852}, {"dt": "2014-12-01T00:00:00", "Empty Exports": 17738}, {"dt": "2015-01-01T00:00:00", "Empty Exports": 21250}, {"dt": "2015-02-01T00:00:00", "Empty Exports": 18840}, {"dt": "2015-03-01T00:00:00", "Empty Exports": 16507}, {"dt": "2015-04-01T00:00:00", "Empty Exports": 13661}, {"dt": "2015-05-01T00:00:00", "Empty Exports": 22548}, {"dt": "2015-06-01T00:00:00", "Empty Exports": 17804}, {"dt": "2015-07-01T00:00:00", "Empty Exports": 12405}, {"dt": "2015-08-01T00:00:00", "Empty Exports": 15956}, {"dt": "2015-09-01T00:00:00", "Empty Exports": 14298}, {"dt": "2015-10-01T00:00:00", "Empty Exports": 16198}, {"dt": "2015-11-01T00:00:00", "Empty Exports": 10649}, {"dt": "2015-12-01T00:00:00", "Empty Exports": 12737}, {"dt": "2016-01-01T00:00:00", "Empty Exports": 11982}, {"dt": "2016-02-01T00:00:00", "Empty Exports": 13266}, {"dt": "2016-03-01T00:00:00", "Empty Exports": 12868}, {"dt": "2016-04-01T00:00:00", "Empty Exports": 13270}, {"dt": "2016-05-01T00:00:00", "Empty Exports": 14063}, {"dt": "2016-06-01T00:00:00", "Empty Exports": 20884}, {"dt": "2016-07-01T00:00:00", "Empty Exports": 22640}, {"dt": "2016-08-01T00:00:00", "Empty Exports": 15592}, {"dt": "2016-09-01T00:00:00", "Empty Exports": 14888}, {"dt": "2016-10-01T00:00:00", "Empty Exports": 18270}, {"dt": "2016-11-01T00:00:00", "Empty Exports": 16197}, {"dt": "2016-12-01T00:00:00", "Empty Exports": 15780}, {"dt": "2017-01-01T00:00:00", "Empty Exports": 9018}, {"dt": "2017-02-01T00:00:00", "Empty Exports": 11004}, {"dt": "2017-03-01T00:00:00", "Empty Exports": 16482}, {"dt": "2017-04-01T00:00:00", "Empty Exports": 16930}, {"dt": "2017-05-01T00:00:00", "Empty Exports": 26817}, {"dt": "2017-06-01T00:00:00", "Empty Exports": 24944}, {"dt": "2017-07-01T00:00:00", "Empty Exports": 24036}, {"dt": "2017-08-01T00:00:00", "Empty Exports": 25232}, {"dt": "2017-09-01T00:00:00", "Empty Exports": 28494}, {"dt": "2017-10-01T00:00:00", "Empty Exports": 35214}, {"dt": "2017-11-01T00:00:00", "Empty Exports": 23930}, {"dt": "2017-12-01T00:00:00", "Empty Exports": 21867}, {"dt": "2018-01-01T00:00:00", "Empty Exports": 21737}, {"dt": "2018-02-01T00:00:00", "Empty Exports": 19335}, {"dt": "2018-03-01T00:00:00", "Empty Exports": 17221}, {"dt": "2018-04-01T00:00:00", "Empty Exports": 16305}, {"dt": "2018-05-01T00:00:00", "Empty Exports": 20475}, {"dt": "2018-06-01T00:00:00", "Empty Exports": 18216}, {"dt": "2018-07-01T00:00:00", "Empty Exports": 25574}, {"dt": "2018-08-01T00:00:00", "Empty Exports": 28957}, {"dt": "2018-09-01T00:00:00", "Empty Exports": 31283}, {"dt": "2018-10-01T00:00:00", "Empty Exports": 27342}, {"dt": "2018-11-01T00:00:00", "Empty Exports": 22390}, {"dt": "2018-12-01T00:00:00", "Empty Exports": 26783}, {"dt": "2019-01-01T00:00:00", "Empty Exports": 20698}, {"dt": "2019-02-01T00:00:00", "Empty Exports": 15322}, {"dt": "2019-03-01T00:00:00", "Empty Exports": 17489}, {"dt": "2019-04-01T00:00:00", "Empty Exports": 18230}, {"dt": "2019-05-01T00:00:00", "Empty Exports": 17953}, {"dt": "2019-06-01T00:00:00", "Empty Exports": 19897}, {"dt": "2019-07-01T00:00:00", "Empty Exports": 24035}, {"dt": "2019-08-01T00:00:00", "Empty Exports": 22418}, {"dt": "2019-09-01T00:00:00", "Empty Exports": 20777}, {"dt": "2019-10-01T00:00:00", "Empty Exports": 20904}, {"dt": "2019-11-01T00:00:00", "Empty Exports": 14129}, {"dt": "2019-12-01T00:00:00", "Empty Exports": 15338}, {"dt": "2020-01-01T00:00:00", "Empty Exports": 14692}, {"dt": "2020-02-01T00:00:00", "Empty Exports": 10137}, {"dt": "2020-03-01T00:00:00", "Empty Exports": 8118}, {"dt": "2020-04-01T00:00:00", "Empty Exports": 11276}, {"dt": "2020-05-01T00:00:00", "Empty Exports": 13244}, {"dt": "2020-06-01T00:00:00", "Empty Exports": 9392}, {"dt": "2020-07-01T00:00:00", "Empty Exports": 12212}, {"dt": "2020-08-01T00:00:00", "Empty Exports": 21394}, {"dt": "2020-09-01T00:00:00", "Empty Exports": 29781}, {"dt": "2020-10-01T00:00:00", "Empty Exports": 50979}, {"dt": "2020-11-01T00:00:00", "Empty Exports": 29682}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[35]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doYoyChart</span><span class="p">(</span><span class="n">df_hs</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s2">&quot;Empty Imports&quot;</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s2">&quot;Houston&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[35]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-8a89a0fc9b7b470b9a8ecba0f5cb7c9f"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-8a89a0fc9b7b470b9a8ecba0f5cb7c9f") {
      outputDiv = document.getElementById("altair-viz-8a89a0fc9b7b470b9a8ecba0f5cb7c9f");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-013b277ba251654dd1b75624681768ae"}, "mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['nolarge'] < 0"}, "value": "royalblue"}, "tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "nolarge", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Year-over-Year Volume Growth [%]"}, "field": "nolarge"}}, "height": 400, "title": "Port of Houston Empty Imports Container Volume Growth", "transform": [{"calculate": "datum['Empty Imports'] > 400 ? NaN : datum['Empty Imports']", "as": "nolarge"}], "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-013b277ba251654dd1b75624681768ae": [{"dt": "2001-01-01T00:00:00", "Empty Imports": null}, {"dt": "2001-02-01T00:00:00", "Empty Imports": null}, {"dt": "2001-03-01T00:00:00", "Empty Imports": null}, {"dt": "2001-04-01T00:00:00", "Empty Imports": null}, {"dt": "2001-05-01T00:00:00", "Empty Imports": null}, {"dt": "2001-06-01T00:00:00", "Empty Imports": null}, {"dt": "2001-07-01T00:00:00", "Empty Imports": null}, {"dt": "2001-08-01T00:00:00", "Empty Imports": null}, {"dt": "2001-09-01T00:00:00", "Empty Imports": null}, {"dt": "2001-10-01T00:00:00", "Empty Imports": null}, {"dt": "2001-11-01T00:00:00", "Empty Imports": null}, {"dt": "2001-12-01T00:00:00", "Empty Imports": null}, {"dt": "2002-01-01T00:00:00", "Empty Imports": -13.496592169915989}, {"dt": "2002-02-01T00:00:00", "Empty Imports": 63.914099450338746}, {"dt": "2002-03-01T00:00:00", "Empty Imports": 37.921838137244855}, {"dt": "2002-04-01T00:00:00", "Empty Imports": 19.02402957486138}, {"dt": "2002-05-01T00:00:00", "Empty Imports": -13.157894736842103}, {"dt": "2002-06-01T00:00:00", "Empty Imports": -11.840619454750767}, {"dt": "2002-07-01T00:00:00", "Empty Imports": 12.9995066600888}, {"dt": "2002-08-01T00:00:00", "Empty Imports": -53.98673440587073}, {"dt": "2002-09-01T00:00:00", "Empty Imports": -34.52777291046084}, {"dt": "2002-10-01T00:00:00", "Empty Imports": 3.562477622628002}, {"dt": "2002-11-01T00:00:00", "Empty Imports": -21.25408433172553}, {"dt": "2002-12-01T00:00:00", "Empty Imports": -32.67855992786759}, {"dt": "2003-01-01T00:00:00", "Empty Imports": -23.728813559322038}, {"dt": "2003-02-01T00:00:00", "Empty Imports": -30.34391328082352}, {"dt": "2003-03-01T00:00:00", "Empty Imports": -6.671128960285588}, {"dt": "2003-04-01T00:00:00", "Empty Imports": -37.805938625916255}, {"dt": "2003-05-01T00:00:00", "Empty Imports": 2.6925303995367633}, {"dt": "2003-06-01T00:00:00", "Empty Imports": -27.849954254345832}, {"dt": "2003-07-01T00:00:00", "Empty Imports": 28.67277886924253}, {"dt": "2003-08-01T00:00:00", "Empty Imports": 50.51372488882073}, {"dt": "2003-09-01T00:00:00", "Empty Imports": 63.72273517998126}, {"dt": "2003-10-01T00:00:00", "Empty Imports": -8.962834917891094}, {"dt": "2003-11-01T00:00:00", "Empty Imports": 28.74925903971548}, {"dt": "2003-12-01T00:00:00", "Empty Imports": 40.772983832392605}, {"dt": "2004-01-01T00:00:00", "Empty Imports": 47.03903903903903}, {"dt": "2004-02-01T00:00:00", "Empty Imports": 28.57142857142858}, {"dt": "2004-03-01T00:00:00", "Empty Imports": 9.187983106223596}, {"dt": "2004-04-01T00:00:00", "Empty Imports": 22.33320015980822}, {"dt": "2004-05-01T00:00:00", "Empty Imports": 38.671177520909694}, {"dt": "2004-06-01T00:00:00", "Empty Imports": 71.9122495561755}, {"dt": "2004-07-01T00:00:00", "Empty Imports": 3.0367291542963804}, {"dt": "2004-08-01T00:00:00", "Empty Imports": 24.798777381558846}, {"dt": "2004-09-01T00:00:00", "Empty Imports": -4.470780547609321}, {"dt": "2004-10-01T00:00:00", "Empty Imports": 1.62346909712332}, {"dt": "2004-11-01T00:00:00", "Empty Imports": 19.67464702271333}, {"dt": "2004-12-01T00:00:00", "Empty Imports": -22.64356099218484}, {"dt": "2005-01-01T00:00:00", "Empty Imports": -25.896577077036188}, {"dt": "2005-02-01T00:00:00", "Empty Imports": 22.405085336119825}, {"dt": "2005-03-01T00:00:00", "Empty Imports": 6.524594949642393}, {"dt": "2005-04-01T00:00:00", "Empty Imports": 36.49575440888309}, {"dt": "2005-05-01T00:00:00", "Empty Imports": -17.199783139062074}, {"dt": "2005-06-01T00:00:00", "Empty Imports": -7.966364239876079}, {"dt": "2005-07-01T00:00:00", "Empty Imports": 29.315880464312173}, {"dt": "2005-08-01T00:00:00", "Empty Imports": 21.78136990774757}, {"dt": "2005-09-01T00:00:00", "Empty Imports": 21.440793976728266}, {"dt": "2005-10-01T00:00:00", "Empty Imports": 25.17750373692078}, {"dt": "2005-11-01T00:00:00", "Empty Imports": 3.603488073865102}, {"dt": "2005-12-01T00:00:00", "Empty Imports": 20.14407449705702}, {"dt": "2006-01-01T00:00:00", "Empty Imports": 40.53577334362253}, {"dt": "2006-02-01T00:00:00", "Empty Imports": -15.899551824713665}, {"dt": "2006-03-01T00:00:00", "Empty Imports": 7.015620718004922}, {"dt": "2006-04-01T00:00:00", "Empty Imports": -31.570762052877143}, {"dt": "2006-05-01T00:00:00", "Empty Imports": 7.578981830086762}, {"dt": "2006-06-01T00:00:00", "Empty Imports": 4.047447303037588}, {"dt": "2006-07-01T00:00:00", "Empty Imports": -43.72294372294372}, {"dt": "2006-08-01T00:00:00", "Empty Imports": -47.20117986190253}, {"dt": "2006-09-01T00:00:00", "Empty Imports": -49.7252360152177}, {"dt": "2006-10-01T00:00:00", "Empty Imports": -27.927457272930813}, {"dt": "2006-11-01T00:00:00", "Empty Imports": -18.97512068325288}, {"dt": "2006-12-01T00:00:00", "Empty Imports": 0.723895875987135}, {"dt": "2007-01-01T00:00:00", "Empty Imports": 45.175713837464706}, {"dt": "2007-02-01T00:00:00", "Empty Imports": 44.76399932329556}, {"dt": "2007-03-01T00:00:00", "Empty Imports": 48.54033290653008}, {"dt": "2007-04-01T00:00:00", "Empty Imports": 72.15909090909092}, {"dt": "2007-05-01T00:00:00", "Empty Imports": 51.83353621424225}, {"dt": "2007-06-01T00:00:00", "Empty Imports": 84.23201355723309}, {"dt": "2007-07-01T00:00:00", "Empty Imports": 141.74208144796378}, {"dt": "2007-08-01T00:00:00", "Empty Imports": 239.18232605383443}, {"dt": "2007-09-01T00:00:00", "Empty Imports": 272.65975336322873}, {"dt": "2007-10-01T00:00:00", "Empty Imports": 163.4876255565911}, {"dt": "2007-11-01T00:00:00", "Empty Imports": 102.96364191872898}, {"dt": "2007-12-01T00:00:00", "Empty Imports": 130.1197822141561}, {"dt": "2008-01-01T00:00:00", "Empty Imports": 30.21019073863944}, {"dt": "2008-02-01T00:00:00", "Empty Imports": 59.42503213743133}, {"dt": "2008-03-01T00:00:00", "Empty Imports": 27.21748125161625}, {"dt": "2008-04-01T00:00:00", "Empty Imports": 52.221375983752225}, {"dt": "2008-05-01T00:00:00", "Empty Imports": 82.9433281555344}, {"dt": "2008-06-01T00:00:00", "Empty Imports": 52.10101601371409}, {"dt": "2008-07-01T00:00:00", "Empty Imports": 62.44267664950867}, {"dt": "2008-08-01T00:00:00", "Empty Imports": 9.74395448079659}, {"dt": "2008-09-01T00:00:00", "Empty Imports": -15.59432933478735}, {"dt": "2008-10-01T00:00:00", "Empty Imports": -11.326390253487917}, {"dt": "2008-11-01T00:00:00", "Empty Imports": -56.02513924431734}, {"dt": "2008-12-01T00:00:00", "Empty Imports": -66.45635509006593}, {"dt": "2009-01-01T00:00:00", "Empty Imports": -18.94348078678728}, {"dt": "2009-02-01T00:00:00", "Empty Imports": 1.6896349508869646}, {"dt": "2009-03-01T00:00:00", "Empty Imports": 33.24186062269201}, {"dt": "2009-04-01T00:00:00", "Empty Imports": 19.79653102068046}, {"dt": "2009-05-01T00:00:00", "Empty Imports": 24.760339632977256}, {"dt": "2009-06-01T00:00:00", "Empty Imports": 36.876683709934575}, {"dt": "2009-07-01T00:00:00", "Empty Imports": 33.64924814196002}, {"dt": "2009-08-01T00:00:00", "Empty Imports": 5.481461268206167}, {"dt": "2009-09-01T00:00:00", "Empty Imports": 84.91936202441414}, {"dt": "2009-10-01T00:00:00", "Empty Imports": 65.9929973850995}, {"dt": "2009-11-01T00:00:00", "Empty Imports": 183.53444587077448}, {"dt": "2009-12-01T00:00:00", "Empty Imports": 282.79883381924196}, {"dt": "2010-01-01T00:00:00", "Empty Imports": 84.05262888445195}, {"dt": "2010-02-01T00:00:00", "Empty Imports": 41.30834384573796}, {"dt": "2010-03-01T00:00:00", "Empty Imports": 19.13346385618755}, {"dt": "2010-04-01T00:00:00", "Empty Imports": -28.202700821383818}, {"dt": "2010-05-01T00:00:00", "Empty Imports": -34.24368825466521}, {"dt": "2010-06-01T00:00:00", "Empty Imports": -44.082501556443674}, {"dt": "2010-07-01T00:00:00", "Empty Imports": -58.69166936092252}, {"dt": "2010-08-01T00:00:00", "Empty Imports": -3.333980080196608}, {"dt": "2010-09-01T00:00:00", "Empty Imports": -11.323391235213343}, {"dt": "2010-10-01T00:00:00", "Empty Imports": -24.459989853950283}, {"dt": "2010-11-01T00:00:00", "Empty Imports": -5.885726358999122}, {"dt": "2010-12-01T00:00:00", "Empty Imports": -16.03321622484829}, {"dt": "2011-01-01T00:00:00", "Empty Imports": 10.69789435620705}, {"dt": "2011-02-01T00:00:00", "Empty Imports": -16.67346834668163}, {"dt": "2011-03-01T00:00:00", "Empty Imports": 14.171682246979977}, {"dt": "2011-04-01T00:00:00", "Empty Imports": 36.30652291941363}, {"dt": "2011-05-01T00:00:00", "Empty Imports": -5.35189636752137}, {"dt": "2011-06-01T00:00:00", "Empty Imports": -18.087131415436552}, {"dt": "2011-07-01T00:00:00", "Empty Imports": -5.322201930602666}, {"dt": "2011-08-01T00:00:00", "Empty Imports": -10.484059813334223}, {"dt": "2011-09-01T00:00:00", "Empty Imports": -7.887086695465539}, {"dt": "2011-10-01T00:00:00", "Empty Imports": -19.82185776898063}, {"dt": "2011-11-01T00:00:00", "Empty Imports": -0.6189666784259695}, {"dt": "2011-12-01T00:00:00", "Empty Imports": -4.321619802791354}, {"dt": "2012-01-01T00:00:00", "Empty Imports": -22.536874638791872}, {"dt": "2012-02-01T00:00:00", "Empty Imports": -35.10973705959778}, {"dt": "2012-03-01T00:00:00", "Empty Imports": -47.143604890268065}, {"dt": "2012-04-01T00:00:00", "Empty Imports": -31.86810060316376}, {"dt": "2012-05-01T00:00:00", "Empty Imports": -32.93943348971745}, {"dt": "2012-06-01T00:00:00", "Empty Imports": 2.4816942166878686}, {"dt": "2012-07-01T00:00:00", "Empty Imports": 56.99090658583632}, {"dt": "2012-08-01T00:00:00", "Empty Imports": 21.83938114279307}, {"dt": "2012-09-01T00:00:00", "Empty Imports": -22.793770646531385}, {"dt": "2012-10-01T00:00:00", "Empty Imports": 13.524951507670613}, {"dt": "2012-11-01T00:00:00", "Empty Imports": -20.78869239705693}, {"dt": "2012-12-01T00:00:00", "Empty Imports": -8.675840978593275}, {"dt": "2013-01-01T00:00:00", "Empty Imports": -0.3243804333722622}, {"dt": "2013-02-01T00:00:00", "Empty Imports": 41.11986414453512}, {"dt": "2013-03-01T00:00:00", "Empty Imports": -10.684350132625998}, {"dt": "2013-04-01T00:00:00", "Empty Imports": 12.949429991230632}, {"dt": "2013-05-01T00:00:00", "Empty Imports": 41.081479143653674}, {"dt": "2013-06-01T00:00:00", "Empty Imports": 15.577803448423388}, {"dt": "2013-07-01T00:00:00", "Empty Imports": 40.71473706382083}, {"dt": "2013-08-01T00:00:00", "Empty Imports": -29.09854921326258}, {"dt": "2013-09-01T00:00:00", "Empty Imports": -19.796760391198042}, {"dt": "2013-10-01T00:00:00", "Empty Imports": -19.963497980739366}, {"dt": "2013-11-01T00:00:00", "Empty Imports": -57.54501751812923}, {"dt": "2013-12-01T00:00:00", "Empty Imports": -18.069182600542476}, {"dt": "2014-01-01T00:00:00", "Empty Imports": -10.82400416558188}, {"dt": "2014-02-01T00:00:00", "Empty Imports": -31.08704372242278}, {"dt": "2014-03-01T00:00:00", "Empty Imports": -24.186267521976713}, {"dt": "2014-04-01T00:00:00", "Empty Imports": -61.564625850340136}, {"dt": "2014-05-01T00:00:00", "Empty Imports": -43.85369673017412}, {"dt": "2014-06-01T00:00:00", "Empty Imports": -26.001332642333608}, {"dt": "2014-07-01T00:00:00", "Empty Imports": -57.075142201377105}, {"dt": "2014-08-01T00:00:00", "Empty Imports": -35.46461325488839}, {"dt": "2014-09-01T00:00:00", "Empty Imports": -41.40230542059636}, {"dt": "2014-10-01T00:00:00", "Empty Imports": -54.170103342875166}, {"dt": "2014-11-01T00:00:00", "Empty Imports": -8.63640725458209}, {"dt": "2014-12-01T00:00:00", "Empty Imports": -51.334450484325835}, {"dt": "2015-01-01T00:00:00", "Empty Imports": -53.39391285307642}, {"dt": "2015-02-01T00:00:00", "Empty Imports": -45.14454792394257}, {"dt": "2015-03-01T00:00:00", "Empty Imports": -24.710122218740203}, {"dt": "2015-04-01T00:00:00", "Empty Imports": 66.97768372450943}, {"dt": "2015-05-01T00:00:00", "Empty Imports": -6.494455143103794}, {"dt": "2015-06-01T00:00:00", "Empty Imports": -57.32866433216608}, {"dt": "2015-07-01T00:00:00", "Empty Imports": -29.704754155527148}, {"dt": "2015-08-01T00:00:00", "Empty Imports": -22.21477409840461}, {"dt": "2015-09-01T00:00:00", "Empty Imports": -15.98927003739229}, {"dt": "2015-10-01T00:00:00", "Empty Imports": 7.399957654033451}, {"dt": "2015-11-01T00:00:00", "Empty Imports": 17.52967125301963}, {"dt": "2015-12-01T00:00:00", "Empty Imports": 31.275720164609044}, {"dt": "2016-01-01T00:00:00", "Empty Imports": -2.004541539425264}, {"dt": "2016-02-01T00:00:00", "Empty Imports": 54.17808824829782}, {"dt": "2016-03-01T00:00:00", "Empty Imports": 37.88414845646895}, {"dt": "2016-04-01T00:00:00", "Empty Imports": 84.26752693127484}, {"dt": "2016-05-01T00:00:00", "Empty Imports": 33.783111994886724}, {"dt": "2016-06-01T00:00:00", "Empty Imports": 122.28604923798359}, {"dt": "2016-07-01T00:00:00", "Empty Imports": 6.572964034725093}, {"dt": "2016-08-01T00:00:00", "Empty Imports": 1.1720096518441858}, {"dt": "2016-09-01T00:00:00", "Empty Imports": 43.6671504596033}, {"dt": "2016-10-01T00:00:00", "Empty Imports": 16.352883193691483}, {"dt": "2016-11-01T00:00:00", "Empty Imports": -13.05630026809651}, {"dt": "2016-12-01T00:00:00", "Empty Imports": -26.524214701554605}, {"dt": "2017-01-01T00:00:00", "Empty Imports": 19.296843787455064}, {"dt": "2017-02-01T00:00:00", "Empty Imports": -8.723331039229176}, {"dt": "2017-03-01T00:00:00", "Empty Imports": 29.497886898772396}, {"dt": "2017-04-01T00:00:00", "Empty Imports": -49.341920155062994}, {"dt": "2017-05-01T00:00:00", "Empty Imports": -21.891920586049473}, {"dt": "2017-06-01T00:00:00", "Empty Imports": -35.71014187015453}, {"dt": "2017-07-01T00:00:00", "Empty Imports": -11.497284716834756}, {"dt": "2017-08-01T00:00:00", "Empty Imports": -54.84667802385008}, {"dt": "2017-09-01T00:00:00", "Empty Imports": -24.771012931034488}, {"dt": "2017-10-01T00:00:00", "Empty Imports": -34.33581836665537}, {"dt": "2017-11-01T00:00:00", "Empty Imports": 1.2231472916024222}, {"dt": "2017-12-01T00:00:00", "Empty Imports": -32.61645624727906}, {"dt": "2018-01-01T00:00:00", "Empty Imports": -50.6363027461487}, {"dt": "2018-02-01T00:00:00", "Empty Imports": -44.197298146402765}, {"dt": "2018-03-01T00:00:00", "Empty Imports": -17.94164497455224}, {"dt": "2018-04-01T00:00:00", "Empty Imports": 14.811157738829927}, {"dt": "2018-05-01T00:00:00", "Empty Imports": 67.54111730324861}, {"dt": "2018-06-01T00:00:00", "Empty Imports": 28.170631665299428}, {"dt": "2018-07-01T00:00:00", "Empty Imports": 43.32924263674614}, {"dt": "2018-08-01T00:00:00", "Empty Imports": 171.74118090926243}, {"dt": "2018-09-01T00:00:00", "Empty Imports": -5.111906893464635}, {"dt": "2018-10-01T00:00:00", "Empty Imports": 17.417107470003867}, {"dt": "2018-11-01T00:00:00", "Empty Imports": 34.37246141348498}, {"dt": "2018-12-01T00:00:00", "Empty Imports": 23.116681741827104}, {"dt": "2019-01-01T00:00:00", "Empty Imports": 48.91451831750339}, {"dt": "2019-02-01T00:00:00", "Empty Imports": 9.886274068235569}, {"dt": "2019-03-01T00:00:00", "Empty Imports": 67.2884806590597}, {"dt": "2019-04-01T00:00:00", "Empty Imports": 46.10836379273275}, {"dt": "2019-05-01T00:00:00", "Empty Imports": -13.641895180918384}, {"dt": "2019-06-01T00:00:00", "Empty Imports": 28.0273937532002}, {"dt": "2019-07-01T00:00:00", "Empty Imports": 24.92202311785212}, {"dt": "2019-08-01T00:00:00", "Empty Imports": 17.917389795210003}, {"dt": "2019-09-01T00:00:00", "Empty Imports": 109.151806774224}, {"dt": "2019-10-01T00:00:00", "Empty Imports": 94.70387869464894}, {"dt": "2019-11-01T00:00:00", "Empty Imports": 67.67172976649285}, {"dt": "2019-12-01T00:00:00", "Empty Imports": 188.92737195633921}, {"dt": "2020-01-01T00:00:00", "Empty Imports": 175.64464692482917}, {"dt": "2020-02-01T00:00:00", "Empty Imports": 356.604160262322}, {"dt": "2020-03-01T00:00:00", "Empty Imports": 5.985905527410629}, {"dt": "2020-04-01T00:00:00", "Empty Imports": -32.22720918254728}, {"dt": "2020-05-01T00:00:00", "Empty Imports": -57.91723425243083}, {"dt": "2020-06-01T00:00:00", "Empty Imports": -15.002749587561869}, {"dt": "2020-07-01T00:00:00", "Empty Imports": 6.124547145794579}, {"dt": "2020-08-01T00:00:00", "Empty Imports": -29.53020134228188}, {"dt": "2020-09-01T00:00:00", "Empty Imports": -51.72771562612775}, {"dt": "2020-10-01T00:00:00", "Empty Imports": -27.364559819413092}, {"dt": "2020-11-01T00:00:00", "Empty Imports": -63.86334955831982}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[36]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doYoyChart</span><span class="p">(</span><span class="n">df_hs</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s2">&quot;Empty Exports&quot;</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s2">&quot;Houston&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[36]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-af67bdf41cca4d7abe09b2111ef3040a"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-af67bdf41cca4d7abe09b2111ef3040a") {
      outputDiv = document.getElementById("altair-viz-af67bdf41cca4d7abe09b2111ef3040a");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-c11fb1d022ec7c6049d1e69215e27f56"}, "mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['nolarge'] < 0"}, "value": "royalblue"}, "tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "nolarge", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Year-over-Year Volume Growth [%]"}, "field": "nolarge"}}, "height": 400, "title": "Port of Houston Empty Exports Container Volume Growth", "transform": [{"calculate": "datum['Empty Exports'] > 400 ? NaN : datum['Empty Exports']", "as": "nolarge"}], "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-c11fb1d022ec7c6049d1e69215e27f56": [{"dt": "2001-01-01T00:00:00", "Empty Exports": null}, {"dt": "2001-02-01T00:00:00", "Empty Exports": null}, {"dt": "2001-03-01T00:00:00", "Empty Exports": null}, {"dt": "2001-04-01T00:00:00", "Empty Exports": null}, {"dt": "2001-05-01T00:00:00", "Empty Exports": null}, {"dt": "2001-06-01T00:00:00", "Empty Exports": null}, {"dt": "2001-07-01T00:00:00", "Empty Exports": null}, {"dt": "2001-08-01T00:00:00", "Empty Exports": null}, {"dt": "2001-09-01T00:00:00", "Empty Exports": null}, {"dt": "2001-10-01T00:00:00", "Empty Exports": null}, {"dt": "2001-11-01T00:00:00", "Empty Exports": null}, {"dt": "2001-12-01T00:00:00", "Empty Exports": null}, {"dt": "2002-01-01T00:00:00", "Empty Exports": 3.985803985803993}, {"dt": "2002-02-01T00:00:00", "Empty Exports": 69.69485208478918}, {"dt": "2002-03-01T00:00:00", "Empty Exports": 78.45891868880375}, {"dt": "2002-04-01T00:00:00", "Empty Exports": 34.29660209590346}, {"dt": "2002-05-01T00:00:00", "Empty Exports": 81.29878239150796}, {"dt": "2002-06-01T00:00:00", "Empty Exports": 26.98168600587165}, {"dt": "2002-07-01T00:00:00", "Empty Exports": 47.52400202122284}, {"dt": "2002-08-01T00:00:00", "Empty Exports": 74.63980619660843}, {"dt": "2002-09-01T00:00:00", "Empty Exports": 83.58343337334935}, {"dt": "2002-10-01T00:00:00", "Empty Exports": 2.4479061298806393}, {"dt": "2002-11-01T00:00:00", "Empty Exports": 59.64307692307693}, {"dt": "2002-12-01T00:00:00", "Empty Exports": -0.6278481012658266}, {"dt": "2003-01-01T00:00:00", "Empty Exports": -7.784195326857446}, {"dt": "2003-02-01T00:00:00", "Empty Exports": -34.53671928620453}, {"dt": "2003-03-01T00:00:00", "Empty Exports": -41.07824427480916}, {"dt": "2003-04-01T00:00:00", "Empty Exports": -29.85339323717191}, {"dt": "2003-05-01T00:00:00", "Empty Exports": -14.04339590149819}, {"dt": "2003-06-01T00:00:00", "Empty Exports": 11.571066828140486}, {"dt": "2003-07-01T00:00:00", "Empty Exports": 1.8325055660215694}, {"dt": "2003-08-01T00:00:00", "Empty Exports": -9.447324231583554}, {"dt": "2003-09-01T00:00:00", "Empty Exports": 6.808893248324344}, {"dt": "2003-10-01T00:00:00", "Empty Exports": 40.82740916271721}, {"dt": "2003-11-01T00:00:00", "Empty Exports": -11.06314085267135}, {"dt": "2003-12-01T00:00:00", "Empty Exports": 20.44227045755631}, {"dt": "2004-01-01T00:00:00", "Empty Exports": 50.26334519572955}, {"dt": "2004-02-01T00:00:00", "Empty Exports": 99.74837492136717}, {"dt": "2004-03-01T00:00:00", "Empty Exports": 82.4493927125506}, {"dt": "2004-04-01T00:00:00", "Empty Exports": 15.57390864655317}, {"dt": "2004-05-01T00:00:00", "Empty Exports": -4.177101071822098}, {"dt": "2004-06-01T00:00:00", "Empty Exports": -18.965857509374384}, {"dt": "2004-07-01T00:00:00", "Empty Exports": -15.632357887655568}, {"dt": "2004-08-01T00:00:00", "Empty Exports": -14.810932838829316}, {"dt": "2004-09-01T00:00:00", "Empty Exports": -40.92752735899594}, {"dt": "2004-10-01T00:00:00", "Empty Exports": -7.7473182359952375}, {"dt": "2004-11-01T00:00:00", "Empty Exports": -49.5752427184466}, {"dt": "2004-12-01T00:00:00", "Empty Exports": -29.39334969117523}, {"dt": "2005-01-01T00:00:00", "Empty Exports": -6.93444486547935}, {"dt": "2005-02-01T00:00:00", "Empty Exports": -34.93596472811254}, {"dt": "2005-03-01T00:00:00", "Empty Exports": 18.28469987795407}, {"dt": "2005-04-01T00:00:00", "Empty Exports": -21.744203004229256}, {"dt": "2005-05-01T00:00:00", "Empty Exports": -31.611959021534595}, {"dt": "2005-06-01T00:00:00", "Empty Exports": -34.03555772040916}, {"dt": "2005-07-01T00:00:00", "Empty Exports": -38.383334994518094}, {"dt": "2005-08-01T00:00:00", "Empty Exports": 11.574862767367033}, {"dt": "2005-09-01T00:00:00", "Empty Exports": -13.14937168026946}, {"dt": "2005-10-01T00:00:00", "Empty Exports": 31.653746770025837}, {"dt": "2005-11-01T00:00:00", "Empty Exports": 203.38662540828608}, {"dt": "2005-12-01T00:00:00", "Empty Exports": 119.3289394847214}, {"dt": "2006-01-01T00:00:00", "Empty Exports": 18.963762214983703}, {"dt": "2006-02-01T00:00:00", "Empty Exports": 47.90254920942238}, {"dt": "2006-03-01T00:00:00", "Empty Exports": 1.7540568426976932}, {"dt": "2006-04-01T00:00:00", "Empty Exports": 46.23555721207604}, {"dt": "2006-05-01T00:00:00", "Empty Exports": 2.598593702231744}, {"dt": "2006-06-01T00:00:00", "Empty Exports": 30.4965848255492}, {"dt": "2006-07-01T00:00:00", "Empty Exports": 55.07926237463605}, {"dt": "2006-08-01T00:00:00", "Empty Exports": -26.007294935957248}, {"dt": "2006-09-01T00:00:00", "Empty Exports": 4.445107398568027}, {"dt": "2006-10-01T00:00:00", "Empty Exports": -52.59481614039139}, {"dt": "2006-11-01T00:00:00", "Empty Exports": -45.60290117860381}, {"dt": "2006-12-01T00:00:00", "Empty Exports": -72.87329945910506}, {"dt": "2007-01-01T00:00:00", "Empty Exports": -70.34311628304954}, {"dt": "2007-02-01T00:00:00", "Empty Exports": -23.562779535289625}, {"dt": "2007-03-01T00:00:00", "Empty Exports": -49.08738938053098}, {"dt": "2007-04-01T00:00:00", "Empty Exports": -27.003950554351984}, {"dt": "2007-05-01T00:00:00", "Empty Exports": -37.06793802145412}, {"dt": "2007-06-01T00:00:00", "Empty Exports": -69.24600367803085}, {"dt": "2007-07-01T00:00:00", "Empty Exports": -57.89089391884844}, {"dt": "2007-08-01T00:00:00", "Empty Exports": -30.53995185142726}, {"dt": "2007-09-01T00:00:00", "Empty Exports": -30.519851471008288}, {"dt": "2007-10-01T00:00:00", "Empty Exports": -7.050657574281538}, {"dt": "2007-11-01T00:00:00", "Empty Exports": 3.6979166666666563}, {"dt": "2007-12-01T00:00:00", "Empty Exports": -44.65256797583081}, {"dt": "2008-01-01T00:00:00", "Empty Exports": 47.74956722446624}, {"dt": "2008-02-01T00:00:00", "Empty Exports": -65.87698016269445}, {"dt": "2008-03-01T00:00:00", "Empty Exports": -57.323918160420064}, {"dt": "2008-04-01T00:00:00", "Empty Exports": -49.685754189944134}, {"dt": "2008-05-01T00:00:00", "Empty Exports": -33.45170454545454}, {"dt": "2008-06-01T00:00:00", "Empty Exports": -7.773689052437904}, {"dt": "2008-07-01T00:00:00", "Empty Exports": -17.934109487243}, {"dt": "2008-08-01T00:00:00", "Empty Exports": -26.572041591021623}, {"dt": "2008-09-01T00:00:00", "Empty Exports": 30.50359712230215}, {"dt": "2008-10-01T00:00:00", "Empty Exports": 111.38477662780035}, {"dt": "2008-11-01T00:00:00", "Empty Exports": 13.822199899547961}, {"dt": "2008-12-01T00:00:00", "Empty Exports": 125.43668122270742}, {"dt": "2009-01-01T00:00:00", "Empty Exports": -11.208748291349346}, {"dt": "2009-02-01T00:00:00", "Empty Exports": 75.1986616478461}, {"dt": "2009-03-01T00:00:00", "Empty Exports": 17.43742044972423}, {"dt": "2009-04-01T00:00:00", "Empty Exports": 588.9312977099237}, {"dt": "2009-05-01T00:00:00", "Empty Exports": 33.86695126289576}, {"dt": "2009-06-01T00:00:00", "Empty Exports": 47.28179551122194}, {"dt": "2009-07-01T00:00:00", "Empty Exports": 22.75882885602174}, {"dt": "2009-08-01T00:00:00", "Empty Exports": -30.186558777253314}, {"dt": "2009-09-01T00:00:00", "Empty Exports": -56.68609229799968}, {"dt": "2009-10-01T00:00:00", "Empty Exports": -51.59590951348001}, {"dt": "2009-11-01T00:00:00", "Empty Exports": -31.55061336157444}, {"dt": "2009-12-01T00:00:00", "Empty Exports": -36.416464891041166}, {"dt": "2010-01-01T00:00:00", "Empty Exports": 39.71849571145811}, {"dt": "2010-02-01T00:00:00", "Empty Exports": 50.87132967295298}, {"dt": "2010-03-01T00:00:00", "Empty Exports": 79.91329479768785}, {"dt": "2010-04-01T00:00:00", "Empty Exports": -68.60236716192395}, {"dt": "2010-05-01T00:00:00", "Empty Exports": 53.016210470369394}, {"dt": "2010-06-01T00:00:00", "Empty Exports": 202.09955976972572}, {"dt": "2010-07-01T00:00:00", "Empty Exports": 95.00860585197934}, {"dt": "2010-08-01T00:00:00", "Empty Exports": 106.18158403090794}, {"dt": "2010-09-01T00:00:00", "Empty Exports": 147.4181818181818}, {"dt": "2010-10-01T00:00:00", "Empty Exports": -2.829705505761848}, {"dt": "2010-11-01T00:00:00", "Empty Exports": -11.591026302217633}, {"dt": "2010-12-01T00:00:00", "Empty Exports": 4.239654734704246}, {"dt": "2011-01-01T00:00:00", "Empty Exports": -17.377616873917834}, {"dt": "2011-02-01T00:00:00", "Empty Exports": -5.158227848101271}, {"dt": "2011-03-01T00:00:00", "Empty Exports": 47.891566265060234}, {"dt": "2011-04-01T00:00:00", "Empty Exports": -20.131536734039134}, {"dt": "2011-05-01T00:00:00", "Empty Exports": 34.36957276832233}, {"dt": "2011-06-01T00:00:00", "Empty Exports": -44.45689945073422}, {"dt": "2011-07-01T00:00:00", "Empty Exports": -3.6565376371201608}, {"dt": "2011-08-01T00:00:00", "Empty Exports": 13.554028732042479}, {"dt": "2011-09-01T00:00:00", "Empty Exports": -5.305702527924749}, {"dt": "2011-10-01T00:00:00", "Empty Exports": -7.326393464224534}, {"dt": "2011-11-01T00:00:00", "Empty Exports": 35.21948373924457}, {"dt": "2011-12-01T00:00:00", "Empty Exports": 100.48709206039943}, {"dt": "2012-01-01T00:00:00", "Empty Exports": 60.41150695370548}, {"dt": "2012-02-01T00:00:00", "Empty Exports": 85.96930263596931}, {"dt": "2012-03-01T00:00:00", "Empty Exports": 18.017651052274264}, {"dt": "2012-04-01T00:00:00", "Empty Exports": 111.8497690299257}, {"dt": "2012-05-01T00:00:00", "Empty Exports": 28.11167119038387}, {"dt": "2012-06-01T00:00:00", "Empty Exports": 146.2159434914228}, {"dt": "2012-07-01T00:00:00", "Empty Exports": 20.429263185446935}, {"dt": "2012-08-01T00:00:00", "Empty Exports": 70.55830583058307}, {"dt": "2012-09-01T00:00:00", "Empty Exports": 107.37234207667234}, {"dt": "2012-10-01T00:00:00", "Empty Exports": 53.46224939570596}, {"dt": "2012-11-01T00:00:00", "Empty Exports": 23.673425366695433}, {"dt": "2012-12-01T00:00:00", "Empty Exports": 27.976190476190467}, {"dt": "2013-01-01T00:00:00", "Empty Exports": -1.7458432304037985}, {"dt": "2013-02-01T00:00:00", "Empty Exports": -39.41867767112227}, {"dt": "2013-03-01T00:00:00", "Empty Exports": 12.75885872066267}, {"dt": "2013-04-01T00:00:00", "Empty Exports": -18.95145999241562}, {"dt": "2013-05-01T00:00:00", "Empty Exports": -0.38337368845843267}, {"dt": "2013-06-01T00:00:00", "Empty Exports": -10.63114754098361}, {"dt": "2013-07-01T00:00:00", "Empty Exports": 42.5124972831993}, {"dt": "2013-08-01T00:00:00", "Empty Exports": 16.504071595581713}, {"dt": "2013-09-01T00:00:00", "Empty Exports": -16.72778983609011}, {"dt": "2013-10-01T00:00:00", "Empty Exports": 11.99851755767627}, {"dt": "2013-11-01T00:00:00", "Empty Exports": -20.301735414668176}, {"dt": "2013-12-01T00:00:00", "Empty Exports": -21.98386331276697}, {"dt": "2014-01-01T00:00:00", "Empty Exports": 20.35537289979452}, {"dt": "2014-02-01T00:00:00", "Empty Exports": 4.768251147638081}, {"dt": "2014-03-01T00:00:00", "Empty Exports": -0.5917763493521022}, {"dt": "2014-04-01T00:00:00", "Empty Exports": 19.3706866300152}, {"dt": "2014-05-01T00:00:00", "Empty Exports": 48.47073121328742}, {"dt": "2014-06-01T00:00:00", "Empty Exports": 42.621296890764015}, {"dt": "2014-07-01T00:00:00", "Empty Exports": 25.552844288546584}, {"dt": "2014-08-01T00:00:00", "Empty Exports": 7.681660899653986}, {"dt": "2014-09-01T00:00:00", "Empty Exports": 43.63652705374798}, {"dt": "2014-10-01T00:00:00", "Empty Exports": 69.11813368630047}, {"dt": "2014-11-01T00:00:00", "Empty Exports": 106.28077470182733}, {"dt": "2014-12-01T00:00:00", "Empty Exports": 115.81700936853632}, {"dt": "2015-01-01T00:00:00", "Empty Exports": 113.41769609320079}, {"dt": "2015-02-01T00:00:00", "Empty Exports": 166.28975265017667}, {"dt": "2015-03-01T00:00:00", "Empty Exports": 69.42420199117313}, {"dt": "2015-04-01T00:00:00", "Empty Exports": 33.865752082312596}, {"dt": "2015-05-01T00:00:00", "Empty Exports": 53.806275579809}, {"dt": "2015-06-01T00:00:00", "Empty Exports": 14.495176848874603}, {"dt": "2015-07-01T00:00:00", "Empty Exports": -24.658366231399942}, {"dt": "2015-08-01T00:00:00", "Empty Exports": 2.5449871465295537}, {"dt": "2015-09-01T00:00:00", "Empty Exports": -10.531255866341283}, {"dt": "2015-10-01T00:00:00", "Empty Exports": -20.76505405273199}, {"dt": "2015-11-01T00:00:00", "Empty Exports": -43.512624655208995}, {"dt": "2015-12-01T00:00:00", "Empty Exports": -28.193708422595552}, {"dt": "2016-01-01T00:00:00", "Empty Exports": -43.614117647058826}, {"dt": "2016-02-01T00:00:00", "Empty Exports": -29.585987261146496}, {"dt": "2016-03-01T00:00:00", "Empty Exports": -22.045192948446115}, {"dt": "2016-04-01T00:00:00", "Empty Exports": -2.862162360002929}, {"dt": "2016-05-01T00:00:00", "Empty Exports": -37.63083200283839}, {"dt": "2016-06-01T00:00:00", "Empty Exports": 17.299483262188264}, {"dt": "2016-07-01T00:00:00", "Empty Exports": 82.50705360741637}, {"dt": "2016-08-01T00:00:00", "Empty Exports": -2.281273502130865}, {"dt": "2016-09-01T00:00:00", "Empty Exports": 4.1264512519233465}, {"dt": "2016-10-01T00:00:00", "Empty Exports": 12.791702679343132}, {"dt": "2016-11-01T00:00:00", "Empty Exports": 52.09878861864963}, {"dt": "2016-12-01T00:00:00", "Empty Exports": 23.891026144304007}, {"dt": "2017-01-01T00:00:00", "Empty Exports": -24.737105658487735}, {"dt": "2017-02-01T00:00:00", "Empty Exports": -17.051108095884217}, {"dt": "2017-03-01T00:00:00", "Empty Exports": 28.085172520982283}, {"dt": "2017-04-01T00:00:00", "Empty Exports": 27.58100979653353}, {"dt": "2017-05-01T00:00:00", "Empty Exports": 90.69188651070183}, {"dt": "2017-06-01T00:00:00", "Empty Exports": 19.440720168550097}, {"dt": "2017-07-01T00:00:00", "Empty Exports": 6.166077738515896}, {"dt": "2017-08-01T00:00:00", "Empty Exports": 61.82657773217035}, {"dt": "2017-09-01T00:00:00", "Empty Exports": 91.38903815153144}, {"dt": "2017-10-01T00:00:00", "Empty Exports": 92.74220032840724}, {"dt": "2017-11-01T00:00:00", "Empty Exports": 47.743409273322214}, {"dt": "2017-12-01T00:00:00", "Empty Exports": 38.574144486692006}, {"dt": "2018-01-01T00:00:00", "Empty Exports": 141.04014193834553}, {"dt": "2018-02-01T00:00:00", "Empty Exports": 75.70883315158123}, {"dt": "2018-03-01T00:00:00", "Empty Exports": 4.4836791651498675}, {"dt": "2018-04-01T00:00:00", "Empty Exports": -3.691671588895451}, {"dt": "2018-05-01T00:00:00", "Empty Exports": -23.649177760375885}, {"dt": "2018-06-01T00:00:00", "Empty Exports": -26.97241821680565}, {"dt": "2018-07-01T00:00:00", "Empty Exports": 6.3987352304875955}, {"dt": "2018-08-01T00:00:00", "Empty Exports": 14.762999365884589}, {"dt": "2018-09-01T00:00:00", "Empty Exports": 9.788025549238434}, {"dt": "2018-10-01T00:00:00", "Empty Exports": -22.35474527176691}, {"dt": "2018-11-01T00:00:00", "Empty Exports": -6.43543669034684}, {"dt": "2018-12-01T00:00:00", "Empty Exports": 22.48136461334431}, {"dt": "2019-01-01T00:00:00", "Empty Exports": -4.7798684271058605}, {"dt": "2019-02-01T00:00:00", "Empty Exports": -20.75510731833463}, {"dt": "2019-03-01T00:00:00", "Empty Exports": 1.5562394750595177}, {"dt": "2019-04-01T00:00:00", "Empty Exports": 11.806194418889904}, {"dt": "2019-05-01T00:00:00", "Empty Exports": -12.317460317460316}, {"dt": "2019-06-01T00:00:00", "Empty Exports": 9.228151075977165}, {"dt": "2019-07-01T00:00:00", "Empty Exports": -6.017830609212482}, {"dt": "2019-08-01T00:00:00", "Empty Exports": -22.581759160133995}, {"dt": "2019-09-01T00:00:00", "Empty Exports": -33.58373557523255}, {"dt": "2019-10-01T00:00:00", "Empty Exports": -23.54619267061664}, {"dt": "2019-11-01T00:00:00", "Empty Exports": -36.895935685573924}, {"dt": "2019-12-01T00:00:00", "Empty Exports": -42.732330209461225}, {"dt": "2020-01-01T00:00:00", "Empty Exports": -29.017296357135958}, {"dt": "2020-02-01T00:00:00", "Empty Exports": -33.840229735021545}, {"dt": "2020-03-01T00:00:00", "Empty Exports": -53.582251701069254}, {"dt": "2020-04-01T00:00:00", "Empty Exports": -38.14591332967636}, {"dt": "2020-05-01T00:00:00", "Empty Exports": -26.229599509831225}, {"dt": "2020-06-01T00:00:00", "Empty Exports": -52.796904055887815}, {"dt": "2020-07-01T00:00:00", "Empty Exports": -49.19076346993967}, {"dt": "2020-08-01T00:00:00", "Empty Exports": -4.567758051565707}, {"dt": "2020-09-01T00:00:00", "Empty Exports": 43.336381575780905}, {"dt": "2020-10-01T00:00:00", "Empty Exports": 143.8719862227325}, {"dt": "2020-11-01T00:00:00", "Empty Exports": 110.07856182320053}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[37]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doYoyChart</span><span class="p">(</span><span class="n">df_hs</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s2">&quot;Loaded Total&quot;</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s2">&quot;Houston&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[37]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-249fd3397fa44ae0a52efd8c21883bab"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-249fd3397fa44ae0a52efd8c21883bab") {
      outputDiv = document.getElementById("altair-viz-249fd3397fa44ae0a52efd8c21883bab");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-c6cd9abdba6dc86c0afd1bd1f9da181f"}, "mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['nolarge'] < 0"}, "value": "royalblue"}, "tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "nolarge", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Year-over-Year Volume Growth [%]"}, "field": "nolarge"}}, "height": 400, "title": "Port of Houston Loaded Total Container Volume Growth", "transform": [{"calculate": "datum['Loaded Total'] > 400 ? NaN : datum['Loaded Total']", "as": "nolarge"}], "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-c6cd9abdba6dc86c0afd1bd1f9da181f": [{"dt": "2001-01-01T00:00:00", "Loaded Total": null}, {"dt": "2001-02-01T00:00:00", "Loaded Total": null}, {"dt": "2001-03-01T00:00:00", "Loaded Total": null}, {"dt": "2001-04-01T00:00:00", "Loaded Total": null}, {"dt": "2001-05-01T00:00:00", "Loaded Total": null}, {"dt": "2001-06-01T00:00:00", "Loaded Total": null}, {"dt": "2001-07-01T00:00:00", "Loaded Total": null}, {"dt": "2001-08-01T00:00:00", "Loaded Total": null}, {"dt": "2001-09-01T00:00:00", "Loaded Total": null}, {"dt": "2001-10-01T00:00:00", "Loaded Total": null}, {"dt": "2001-11-01T00:00:00", "Loaded Total": null}, {"dt": "2001-12-01T00:00:00", "Loaded Total": null}, {"dt": "2002-01-01T00:00:00", "Loaded Total": -13.468327719839301}, {"dt": "2002-02-01T00:00:00", "Loaded Total": 28.849259869790366}, {"dt": "2002-03-01T00:00:00", "Loaded Total": -9.50209045990118}, {"dt": "2002-04-01T00:00:00", "Loaded Total": 14.450858452108184}, {"dt": "2002-05-01T00:00:00", "Loaded Total": 14.239993048716904}, {"dt": "2002-06-01T00:00:00", "Loaded Total": 6.677339543006844}, {"dt": "2002-07-01T00:00:00", "Loaded Total": 29.989782513501684}, {"dt": "2002-08-01T00:00:00", "Loaded Total": 6.7220499619727425}, {"dt": "2002-09-01T00:00:00", "Loaded Total": 8.011329755515796}, {"dt": "2002-10-01T00:00:00", "Loaded Total": 13.915782706525226}, {"dt": "2002-11-01T00:00:00", "Loaded Total": 4.451742382776858}, {"dt": "2002-12-01T00:00:00", "Loaded Total": -7.387859179644662}, {"dt": "2003-01-01T00:00:00", "Loaded Total": 19.83992996936159}, {"dt": "2003-02-01T00:00:00", "Loaded Total": 0.7430572606386354}, {"dt": "2003-03-01T00:00:00", "Loaded Total": 11.065378692426142}, {"dt": "2003-04-01T00:00:00", "Loaded Total": 12.032186358495721}, {"dt": "2003-05-01T00:00:00", "Loaded Total": -5.961843189452997}, {"dt": "2003-06-01T00:00:00", "Loaded Total": -2.9605173401729967}, {"dt": "2003-07-01T00:00:00", "Loaded Total": 5.766034854473601}, {"dt": "2003-08-01T00:00:00", "Loaded Total": 15.95630961517378}, {"dt": "2003-09-01T00:00:00", "Loaded Total": 19.054848593590414}, {"dt": "2003-10-01T00:00:00", "Loaded Total": 4.820650579019836}, {"dt": "2003-11-01T00:00:00", "Loaded Total": 13.269734632180041}, {"dt": "2003-12-01T00:00:00", "Loaded Total": 29.636592406187546}, {"dt": "2004-01-01T00:00:00", "Loaded Total": -5.475842638004802}, {"dt": "2004-02-01T00:00:00", "Loaded Total": 5.999384283845144}, {"dt": "2004-03-01T00:00:00", "Loaded Total": 17.480525373736345}, {"dt": "2004-04-01T00:00:00", "Loaded Total": -3.0295998050659634}, {"dt": "2004-05-01T00:00:00", "Loaded Total": 31.56965301555634}, {"dt": "2004-06-01T00:00:00", "Loaded Total": 26.96265886851872}, {"dt": "2004-07-01T00:00:00", "Loaded Total": -3.328343472306272}, {"dt": "2004-08-01T00:00:00", "Loaded Total": 16.938695914242818}, {"dt": "2004-09-01T00:00:00", "Loaded Total": 19.92580570368654}, {"dt": "2004-10-01T00:00:00", "Loaded Total": 5.377467184959461}, {"dt": "2004-11-01T00:00:00", "Loaded Total": 16.060307706907384}, {"dt": "2004-12-01T00:00:00", "Loaded Total": 26.22636338722937}, {"dt": "2005-01-01T00:00:00", "Loaded Total": 36.62407197858306}, {"dt": "2005-02-01T00:00:00", "Loaded Total": 11.294245779633316}, {"dt": "2005-03-01T00:00:00", "Loaded Total": 13.757215510396769}, {"dt": "2005-04-01T00:00:00", "Loaded Total": 29.265782798066333}, {"dt": "2005-05-01T00:00:00", "Loaded Total": 8.15565414288788}, {"dt": "2005-06-01T00:00:00", "Loaded Total": 25.447921511305992}, {"dt": "2005-07-01T00:00:00", "Loaded Total": 26.000483219117896}, {"dt": "2005-08-01T00:00:00", "Loaded Total": 15.099602801613043}, {"dt": "2005-09-01T00:00:00", "Loaded Total": -8.148055061480164}, {"dt": "2005-10-01T00:00:00", "Loaded Total": 22.793088296904852}, {"dt": "2005-11-01T00:00:00", "Loaded Total": 14.561529026982821}, {"dt": "2005-12-01T00:00:00", "Loaded Total": 2.3755246779562977}, {"dt": "2006-01-01T00:00:00", "Loaded Total": 7.953053350302008}, {"dt": "2006-02-01T00:00:00", "Loaded Total": 7.637439109255384}, {"dt": "2006-03-01T00:00:00", "Loaded Total": -2.0202972911793515}, {"dt": "2006-04-01T00:00:00", "Loaded Total": 3.386096454688503}, {"dt": "2006-05-01T00:00:00", "Loaded Total": 9.995168670247544}, {"dt": "2006-06-01T00:00:00", "Loaded Total": 4.157582070316979}, {"dt": "2006-07-01T00:00:00", "Loaded Total": 3.4210457504946445}, {"dt": "2006-08-01T00:00:00", "Loaded Total": 4.541503121624824}, {"dt": "2006-09-01T00:00:00", "Loaded Total": 3.5245582462454905}, {"dt": "2006-10-01T00:00:00", "Loaded Total": 0.1339779810100694}, {"dt": "2006-11-01T00:00:00", "Loaded Total": 6.858065609749575}, {"dt": "2006-12-01T00:00:00", "Loaded Total": -2.908898117875758}, {"dt": "2007-01-01T00:00:00", "Loaded Total": -1.1246257485029942}, {"dt": "2007-02-01T00:00:00", "Loaded Total": 5.159002747696784}, {"dt": "2007-03-01T00:00:00", "Loaded Total": 17.603627192391368}, {"dt": "2007-04-01T00:00:00", "Loaded Total": -0.9947353341451137}, {"dt": "2007-05-01T00:00:00", "Loaded Total": 6.13287171007304}, {"dt": "2007-06-01T00:00:00", "Loaded Total": -4.534013576616358}, {"dt": "2007-07-01T00:00:00", "Loaded Total": 3.2185477346278413}, {"dt": "2007-08-01T00:00:00", "Loaded Total": 8.665742723951109}, {"dt": "2007-09-01T00:00:00", "Loaded Total": 18.838443396226424}, {"dt": "2007-10-01T00:00:00", "Loaded Total": 2.3136374968835804}, {"dt": "2007-11-01T00:00:00", "Loaded Total": 3.0699484028253288}, {"dt": "2007-12-01T00:00:00", "Loaded Total": 4.927282986585113}, {"dt": "2008-01-01T00:00:00", "Loaded Total": 4.143719601052243}, {"dt": "2008-02-01T00:00:00", "Loaded Total": 14.209550524020397}, {"dt": "2008-03-01T00:00:00", "Loaded Total": -0.22673509646473633}, {"dt": "2008-04-01T00:00:00", "Loaded Total": 12.105591578718911}, {"dt": "2008-05-01T00:00:00", "Loaded Total": 0.3903175285840721}, {"dt": "2008-06-01T00:00:00", "Loaded Total": 11.462355855016115}, {"dt": "2008-07-01T00:00:00", "Loaded Total": 8.952847519902019}, {"dt": "2008-08-01T00:00:00", "Loaded Total": -7.060260334539159}, {"dt": "2008-09-01T00:00:00", "Loaded Total": -16.23880443801915}, {"dt": "2008-10-01T00:00:00", "Loaded Total": 7.177087902269452}, {"dt": "2008-11-01T00:00:00", "Loaded Total": -19.04399316327936}, {"dt": "2008-12-01T00:00:00", "Loaded Total": -7.8106026437220315}, {"dt": "2009-01-01T00:00:00", "Loaded Total": -14.440698910564532}, {"dt": "2009-02-01T00:00:00", "Loaded Total": -17.491652017394088}, {"dt": "2009-03-01T00:00:00", "Loaded Total": -14.484953893610742}, {"dt": "2009-04-01T00:00:00", "Loaded Total": -6.572929019142803}, {"dt": "2009-05-01T00:00:00", "Loaded Total": -14.132596149182797}, {"dt": "2009-06-01T00:00:00", "Loaded Total": -18.650196322047808}, {"dt": "2009-07-01T00:00:00", "Loaded Total": -12.491007194244608}, {"dt": "2009-08-01T00:00:00", "Loaded Total": -11.45394966649479}, {"dt": "2009-09-01T00:00:00", "Loaded Total": 19.49834552065035}, {"dt": "2009-10-01T00:00:00", "Loaded Total": -9.162561576354678}, {"dt": "2009-11-01T00:00:00", "Loaded Total": 8.723146656527359}, {"dt": "2009-12-01T00:00:00", "Loaded Total": -1.2692050768203123}, {"dt": "2010-01-01T00:00:00", "Loaded Total": 4.9881058578649995}, {"dt": "2010-02-01T00:00:00", "Loaded Total": 3.93496100718691}, {"dt": "2010-03-01T00:00:00", "Loaded Total": 18.843777581641664}, {"dt": "2010-04-01T00:00:00", "Loaded Total": -9.861416914907394}, {"dt": "2010-05-01T00:00:00", "Loaded Total": 9.06241174809377}, {"dt": "2010-06-01T00:00:00", "Loaded Total": 13.408783849934402}, {"dt": "2010-07-01T00:00:00", "Loaded Total": -2.033877984448329}, {"dt": "2010-08-01T00:00:00", "Loaded Total": 8.748332801082025}, {"dt": "2010-09-01T00:00:00", "Loaded Total": -0.47261725693970025}, {"dt": "2010-10-01T00:00:00", "Loaded Total": -2.452027365259468}, {"dt": "2010-11-01T00:00:00", "Loaded Total": -0.08006699859192112}, {"dt": "2010-12-01T00:00:00", "Loaded Total": 10.537650803331488}, {"dt": "2011-01-01T00:00:00", "Loaded Total": 4.922062289477136}, {"dt": "2011-02-01T00:00:00", "Loaded Total": -2.409886714727083}, {"dt": "2011-03-01T00:00:00", "Loaded Total": 15.500734593713172}, {"dt": "2011-04-01T00:00:00", "Loaded Total": 17.614997030480684}, {"dt": "2011-05-01T00:00:00", "Loaded Total": 3.9445178107494483}, {"dt": "2011-06-01T00:00:00", "Loaded Total": -0.4722111914915672}, {"dt": "2011-07-01T00:00:00", "Loaded Total": -5.4345830747309805}, {"dt": "2011-08-01T00:00:00", "Loaded Total": 3.5861115909483487}, {"dt": "2011-09-01T00:00:00", "Loaded Total": 2.363144562277264}, {"dt": "2011-10-01T00:00:00", "Loaded Total": -0.43448140197227536}, {"dt": "2011-11-01T00:00:00", "Loaded Total": 9.39837158751795}, {"dt": "2011-12-01T00:00:00", "Loaded Total": 3.028552708714094}, {"dt": "2012-01-01T00:00:00", "Loaded Total": 8.485736597028737}, {"dt": "2012-02-01T00:00:00", "Loaded Total": 7.886590685239914}, {"dt": "2012-03-01T00:00:00", "Loaded Total": -12.595750629018731}, {"dt": "2012-04-01T00:00:00", "Loaded Total": -6.915452464917782}, {"dt": "2012-05-01T00:00:00", "Loaded Total": 5.830087937090522}, {"dt": "2012-06-01T00:00:00", "Loaded Total": 4.363740448083542}, {"dt": "2012-07-01T00:00:00", "Loaded Total": 22.082640044370482}, {"dt": "2012-08-01T00:00:00", "Loaded Total": 17.309808891705302}, {"dt": "2012-09-01T00:00:00", "Loaded Total": 8.994438246076154}, {"dt": "2012-10-01T00:00:00", "Loaded Total": 6.739797101698275}, {"dt": "2012-11-01T00:00:00", "Loaded Total": 6.581295884690519}, {"dt": "2012-12-01T00:00:00", "Loaded Total": -0.25521090461806395}, {"dt": "2013-01-01T00:00:00", "Loaded Total": 6.58763518737393}, {"dt": "2013-02-01T00:00:00", "Loaded Total": 8.63570729889609}, {"dt": "2013-03-01T00:00:00", "Loaded Total": 6.052391690255732}, {"dt": "2013-04-01T00:00:00", "Loaded Total": 7.164980926049069}, {"dt": "2013-05-01T00:00:00", "Loaded Total": 8.115466700144381}, {"dt": "2013-06-01T00:00:00", "Loaded Total": 6.527484583035514}, {"dt": "2013-07-01T00:00:00", "Loaded Total": 1.2841772103975968}, {"dt": "2013-08-01T00:00:00", "Loaded Total": -0.9652290108890349}, {"dt": "2013-09-01T00:00:00", "Loaded Total": -8.533121935826493}, {"dt": "2013-10-01T00:00:00", "Loaded Total": 8.718885553561506}, {"dt": "2013-11-01T00:00:00", "Loaded Total": -6.0564170214782775}, {"dt": "2013-12-01T00:00:00", "Loaded Total": -1.248280259051715}, {"dt": "2014-01-01T00:00:00", "Loaded Total": 7.689549949142083}, {"dt": "2014-02-01T00:00:00", "Loaded Total": -6.301076190884536}, {"dt": "2014-03-01T00:00:00", "Loaded Total": 4.351301017138298}, {"dt": "2014-04-01T00:00:00", "Loaded Total": 2.1007339913945877}, {"dt": "2014-05-01T00:00:00", "Loaded Total": 2.8347279575589024}, {"dt": "2014-06-01T00:00:00", "Loaded Total": 6.790662838596928}, {"dt": "2014-07-01T00:00:00", "Loaded Total": 5.241281351624116}, {"dt": "2014-08-01T00:00:00", "Loaded Total": 2.4652992090946846}, {"dt": "2014-09-01T00:00:00", "Loaded Total": 12.905370155332285}, {"dt": "2014-10-01T00:00:00", "Loaded Total": -0.28498885952640274}, {"dt": "2014-11-01T00:00:00", "Loaded Total": 9.956611674486648}, {"dt": "2014-12-01T00:00:00", "Loaded Total": 8.133133983485674}, {"dt": "2015-01-01T00:00:00", "Loaded Total": 4.233344946386408}, {"dt": "2015-02-01T00:00:00", "Loaded Total": 27.698207143968446}, {"dt": "2015-03-01T00:00:00", "Loaded Total": 12.574603679243923}, {"dt": "2015-04-01T00:00:00", "Loaded Total": 45.259647832136515}, {"dt": "2015-05-01T00:00:00", "Loaded Total": 24.379485804216028}, {"dt": "2015-06-01T00:00:00", "Loaded Total": 11.89143775569843}, {"dt": "2015-07-01T00:00:00", "Loaded Total": 8.975251463317612}, {"dt": "2015-08-01T00:00:00", "Loaded Total": 3.2514061175745512}, {"dt": "2015-09-01T00:00:00", "Loaded Total": 1.63438391998747}, {"dt": "2015-10-01T00:00:00", "Loaded Total": 7.2408468687828575}, {"dt": "2015-11-01T00:00:00", "Loaded Total": -4.101187608494494}, {"dt": "2015-12-01T00:00:00", "Loaded Total": 10.09820095844136}, {"dt": "2016-01-01T00:00:00", "Loaded Total": -1.7402865567877068}, {"dt": "2016-02-01T00:00:00", "Loaded Total": 1.0133876100105965}, {"dt": "2016-03-01T00:00:00", "Loaded Total": -4.069935366268506}, {"dt": "2016-04-01T00:00:00", "Loaded Total": -9.737246288252877}, {"dt": "2016-05-01T00:00:00", "Loaded Total": -20.38730836009578}, {"dt": "2016-06-01T00:00:00", "Loaded Total": -0.10185626513968815}, {"dt": "2016-07-01T00:00:00", "Loaded Total": 1.646557287287087}, {"dt": "2016-08-01T00:00:00", "Loaded Total": 6.068068190297882}, {"dt": "2016-09-01T00:00:00", "Loaded Total": 14.17739711964332}, {"dt": "2016-10-01T00:00:00", "Loaded Total": 6.727720784704627}, {"dt": "2016-11-01T00:00:00", "Loaded Total": 21.819878153806904}, {"dt": "2016-12-01T00:00:00", "Loaded Total": 4.172137230277428}, {"dt": "2017-01-01T00:00:00", "Loaded Total": 30.767253760677306}, {"dt": "2017-02-01T00:00:00", "Loaded Total": 14.89648517872093}, {"dt": "2017-03-01T00:00:00", "Loaded Total": 20.0588786297337}, {"dt": "2017-04-01T00:00:00", "Loaded Total": 2.869514835483189}, {"dt": "2017-05-01T00:00:00", "Loaded Total": 22.842827718425497}, {"dt": "2017-06-01T00:00:00", "Loaded Total": 14.841733060568242}, {"dt": "2017-07-01T00:00:00", "Loaded Total": 7.457498861719802}, {"dt": "2017-08-01T00:00:00", "Loaded Total": -13.134129806339379}, {"dt": "2017-09-01T00:00:00", "Loaded Total": 19.981888944549354}, {"dt": "2017-10-01T00:00:00", "Loaded Total": 16.850973855403705}, {"dt": "2017-11-01T00:00:00", "Loaded Total": 6.107339935980938}, {"dt": "2017-12-01T00:00:00", "Loaded Total": 22.37124206286689}, {"dt": "2018-01-01T00:00:00", "Loaded Total": -7.169695708472068}, {"dt": "2018-02-01T00:00:00", "Loaded Total": 5.2259450914524885}, {"dt": "2018-03-01T00:00:00", "Loaded Total": 6.339723584485069}, {"dt": "2018-04-01T00:00:00", "Loaded Total": 9.023537084247346}, {"dt": "2018-05-01T00:00:00", "Loaded Total": 16.539028324108564}, {"dt": "2018-06-01T00:00:00", "Loaded Total": 8.161790232714328}, {"dt": "2018-07-01T00:00:00", "Loaded Total": 15.83913204349332}, {"dt": "2018-08-01T00:00:00", "Loaded Total": 43.78000294507436}, {"dt": "2018-09-01T00:00:00", "Loaded Total": 0.87250226154727}, {"dt": "2018-10-01T00:00:00", "Loaded Total": 13.530600237563961}, {"dt": "2018-11-01T00:00:00", "Loaded Total": 17.657945551120633}, {"dt": "2018-12-01T00:00:00", "Loaded Total": 3.580164678619213}, {"dt": "2019-01-01T00:00:00", "Loaded Total": 14.129236747224283}, {"dt": "2019-02-01T00:00:00", "Loaded Total": 1.765206419999421}, {"dt": "2019-03-01T00:00:00", "Loaded Total": 19.43390491363408}, {"dt": "2019-04-01T00:00:00", "Loaded Total": 12.720104410245249}, {"dt": "2019-05-01T00:00:00", "Loaded Total": 11.425356824597133}, {"dt": "2019-06-01T00:00:00", "Loaded Total": 11.33280715601157}, {"dt": "2019-07-01T00:00:00", "Loaded Total": 11.037726614702192}, {"dt": "2019-08-01T00:00:00", "Loaded Total": 12.507041099538107}, {"dt": "2019-09-01T00:00:00", "Loaded Total": 10.681935165482436}, {"dt": "2019-10-01T00:00:00", "Loaded Total": 7.533037709189938}, {"dt": "2019-11-01T00:00:00", "Loaded Total": 9.805473993288594}, {"dt": "2019-12-01T00:00:00", "Loaded Total": 12.446567628764594}, {"dt": "2020-01-01T00:00:00", "Loaded Total": 22.124738786222096}, {"dt": "2020-02-01T00:00:00", "Loaded Total": 15.779670497598207}, {"dt": "2020-03-01T00:00:00", "Loaded Total": -10.805225121654772}, {"dt": "2020-04-01T00:00:00", "Loaded Total": -7.448343070517804}, {"dt": "2020-05-01T00:00:00", "Loaded Total": -10.621082213753075}, {"dt": "2020-06-01T00:00:00", "Loaded Total": -12.784278881600086}, {"dt": "2020-07-01T00:00:00", "Loaded Total": -6.812909451960724}, {"dt": "2020-08-01T00:00:00", "Loaded Total": -2.020882452004047}, {"dt": "2020-09-01T00:00:00", "Loaded Total": 2.5620987731267197}, {"dt": "2020-10-01T00:00:00", "Loaded Total": 5.643632329606674}, {"dt": "2020-11-01T00:00:00", "Loaded Total": 7.548908657679987}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Port-of-Charleston">Port of Charleston<a class="anchor-link" href="#Port-of-Charleston">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[38]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">fetchCharleston</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">retries</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">retries</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">req</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span> <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="n">uaString</span> <span class="p">})</span>

        <span class="n">data</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>

        <span class="n">dfs_ch</span> <span class="o">=</span> <span class="n">read_pdf</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">read</span><span class="p">()),</span> <span class="n">pages</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>

        <span class="c1"># noop</span>
        <span class="n">dfs_ch</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        
        <span class="k">return</span> <span class="n">dfs_ch</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Response code: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">getcode</span><span class="p">()))</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fetchCharleston</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">retries</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">URLError</span><span class="p">:</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fetchCharleston</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">retries</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

<span class="n">dfs_ch</span> <span class="o">=</span> <span class="n">fetchCharleston</span><span class="p">(</span><span class="s2">&quot;http://scspa.com/wp-content/uploads/gl078-pc-teu-history.pdf&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[39]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">fixColumns</span><span class="p">(</span><span class="n">df_</span><span class="p">):</span>
    <span class="n">firstDataRow</span> <span class="o">=</span> <span class="mi">2</span>
    
    <span class="n">df</span> <span class="o">=</span> <span class="n">df_</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
     
    <span class="c1"># Standardize column count</span>
    <span class="k">if</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span>
        <span class="c1"># Standardize rail moves column location</span>
        <span class="k">if</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
            <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    
    <span class="n">res</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">firstDataRow</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    
    <span class="c1">#print(df.iloc[firstDataRow:, 2].values)</span>
    
    <span class="c1"># split rail column </span>
    <span class="n">_</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">firstDataRow</span><span class="p">:,</span> <span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">expand</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
    
    <span class="c1">#print(_)</span>

    <span class="n">res</span><span class="p">[</span><span class="s2">&quot;RAIL-MOVES&quot;</span><span class="p">]</span><span class="o">=</span> <span class="n">_</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="n">res</span><span class="p">[</span><span class="s2">&quot;RAIL-RATIO&quot;</span><span class="p">]</span><span class="o">=</span> <span class="n">_</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="c1">#res = pd.concat([df.iloc[firstDataRow:, 0:4], res.iloc[:, 2:]], axis=1)</span>

    <span class="c1"># split pier loaded column </span>
    <span class="n">_</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">firstDataRow</span><span class="p">:,</span> <span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">expand</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> 

    <span class="n">res</span><span class="p">[</span><span class="s2">&quot;PIER-LOADED-EXPORT&quot;</span><span class="p">]</span><span class="o">=</span> <span class="n">_</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">_</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> 

    <span class="n">res</span><span class="p">[</span><span class="s2">&quot;PIER-LOADED-IMPORT&quot;</span><span class="p">]</span><span class="o">=</span> <span class="n">_</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> 

    <span class="c1">#res = pd.concat([res, res.iloc[:, -2:]], axis=1)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># split pier empty column </span>
        <span class="n">_</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">firstDataRow</span><span class="p">:,</span> <span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">expand</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> 

        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;PIER-EMPTY-EXPORT&quot;</span><span class="p">]</span><span class="o">=</span> <span class="n">_</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">_</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;PIER-EMPTY-IMPORT&quot;</span><span class="p">]</span><span class="o">=</span> <span class="n">_</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;PIER-EMPTY-EXPORT&quot;</span><span class="p">]</span><span class="o">=</span> <span class="n">_</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;PIER-EMPTY-IMPORT&quot;</span><span class="p">]</span><span class="o">=</span> <span class="n">_</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        
    <span class="c1">#res[&quot;PIER-TOTAL&quot;]= _[2] </span>

    <span class="c1">#res = pd.concat([df.iloc[firstDataRow:, 0], res.iloc[:, 2:]], axis=1)</span>

    <span class="c1"># split loaded teu column </span>
    <span class="n">_</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">firstDataRow</span><span class="p">:,</span> <span class="mi">6</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">expand</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> 

    <span class="n">res</span><span class="p">[</span><span class="s2">&quot;TEU-LOADED-EXPORT&quot;</span><span class="p">]</span><span class="o">=</span> <span class="n">_</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">_</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="n">res</span><span class="p">[</span><span class="s2">&quot;TEU-LOADED-IMPORT&quot;</span><span class="p">]</span><span class="o">=</span> <span class="n">_</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

    <span class="c1">#res = pd.concat([df.iloc[firstDataRow:, 0], df.iloc[firstDataRow:, 4:6], res.iloc[:, 8:10], df.iloc[firstDataRow:, -1]], axis=1)</span>

    <span class="c1">#print(res)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># split empty teu column </span>
        <span class="n">_</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">firstDataRow</span><span class="p">:,</span> <span class="mi">7</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">expand</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> 

        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;TEU-EMPTY-EXPORT&quot;</span><span class="p">]</span><span class="o">=</span> <span class="n">_</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">_</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;TEU-EMPTY-IMPORT&quot;</span><span class="p">]</span><span class="o">=</span> <span class="n">_</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;TEU-EMPTY-EXPORT&quot;</span><span class="p">]</span><span class="o">=</span> <span class="n">_</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">res</span><span class="p">[</span><span class="s2">&quot;TEU-EMPTY-IMPORT&quot;</span><span class="p">]</span><span class="o">=</span> <span class="n">_</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="c1">#res = pd.concat([df.iloc[firstDataRow:, 0], df.iloc[firstDataRow:, 4:6], res.iloc[:, 8:], df.iloc[firstDataRow:, -1]], axis=1)</span>

    <span class="n">res</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">res</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span>
                     <span class="n">res</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span>
                     <span class="n">res</span><span class="p">[</span><span class="s2">&quot;RAIL-MOVES&quot;</span><span class="p">],</span>
                     <span class="n">res</span><span class="p">[</span><span class="s2">&quot;RAIL-RATIO&quot;</span><span class="p">],</span>
                     <span class="n">res</span><span class="p">[</span><span class="s2">&quot;PIER-LOADED-EXPORT&quot;</span><span class="p">],</span>
                     <span class="n">res</span><span class="p">[</span><span class="s2">&quot;PIER-LOADED-IMPORT&quot;</span><span class="p">],</span>
                     <span class="n">res</span><span class="p">[</span><span class="s2">&quot;PIER-EMPTY-EXPORT&quot;</span><span class="p">],</span>
                     <span class="n">res</span><span class="p">[</span><span class="s2">&quot;PIER-EMPTY-IMPORT&quot;</span><span class="p">],</span>
                     <span class="n">res</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">5</span><span class="p">],</span>
                     <span class="n">res</span><span class="p">[</span><span class="s2">&quot;TEU-LOADED-EXPORT&quot;</span><span class="p">],</span>
                     <span class="n">res</span><span class="p">[</span><span class="s2">&quot;TEU-LOADED-IMPORT&quot;</span><span class="p">],</span>
                     <span class="n">res</span><span class="p">[</span><span class="s2">&quot;TEU-EMPTY-EXPORT&quot;</span><span class="p">],</span>
                     <span class="n">res</span><span class="p">[</span><span class="s2">&quot;TEU-EMPTY-IMPORT&quot;</span><span class="p">],</span>
                     <span class="n">res</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">8</span><span class="p">],</span>
                    <span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    
    <span class="n">res</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;DATE&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;RAIL-DRAYS&#39;</span><span class="p">,</span> <span class="s1">&#39;RAIL-MOVES&#39;</span><span class="p">,</span> <span class="s1">&#39;RAIL-RATIO&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;PIER-LOADED-EXPORT&#39;</span><span class="p">,</span> <span class="s1">&#39;PIER-LOADED-IMPORT&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;PIER-EMPTY-EXPORT&#39;</span><span class="p">,</span> <span class="s1">&#39;PIER-EMPTY-IMPORT&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;PIER-TOTAL&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;TEU-LOADED-EXPORT&#39;</span><span class="p">,</span> <span class="s1">&#39;TEU-LOADED-IMPORT&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;TEU-EMPTY-EXPORT&#39;</span><span class="p">,</span> <span class="s1">&#39;TEU-EMPTY-IMPORT&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;TEU-TOTAL&#39;</span><span class="p">]</span>
    <span class="c1">#print(res)</span>
    
    <span class="c1"># fix remaining column labels</span>
    <span class="c1">#res.columns = [&#39;DATE&#39;, &#39;RAIL-DRAYS&#39;, &#39;RAIL-MOVES&#39;] + res.columns.to_list()[3:-1] + [&quot;TEU-TOTAL&quot;]</span>

    <span class="c1"># convert all columns to numeric</span>
    <span class="n">res</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>\
            <span class="o">.</span><span class="n">applymap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">v</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">))</span>

    
    <span class="n">res</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">4</span><span class="p">:]</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">4</span><span class="p">:]</span>\
            <span class="o">.</span><span class="n">applymap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">v</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">))</span>

    <span class="n">res</span><span class="p">[</span><span class="s1">&#39;dt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s1">&#39;DATE&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;%B, %Y&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">res</span>

<span class="n">df_ch</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">fixColumns</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dfs_ch</span><span class="p">])</span>

<span class="c1">#df_ch.head()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[40]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doChart</span><span class="p">(</span><span class="n">df_ch</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;TEU-EMPTY-EXPORT&#39;</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Charleston&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[40]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-63710d98e48c4fff87d9c79469d8e135"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-63710d98e48c4fff87d9c79469d8e135") {
      outputDiv = document.getElementById("altair-viz-63710d98e48c4fff87d9c79469d8e135");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-8fe28fd05a3809f6eebdf4821772242c"}, "mark": {"type": "line", "color": "purple"}, "encoding": {"tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "TEU-EMPTY-EXPORT", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Volume [TEUs]"}, "field": "TEU-EMPTY-EXPORT"}}, "height": 400, "title": "Port of Charleston TEU-EMPTY-EXPORT Container Volume", "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-8fe28fd05a3809f6eebdf4821772242c": [{"dt": "1997-07-01T00:00:00", "TEU-EMPTY-EXPORT": 5010}, {"dt": "1997-08-01T00:00:00", "TEU-EMPTY-EXPORT": 5028}, {"dt": "1997-09-01T00:00:00", "TEU-EMPTY-EXPORT": 5561}, {"dt": "1997-10-01T00:00:00", "TEU-EMPTY-EXPORT": 4418}, {"dt": "1997-11-01T00:00:00", "TEU-EMPTY-EXPORT": 3328}, {"dt": "1997-12-01T00:00:00", "TEU-EMPTY-EXPORT": 5917}, {"dt": "1998-01-01T00:00:00", "TEU-EMPTY-EXPORT": 6241}, {"dt": "1998-02-01T00:00:00", "TEU-EMPTY-EXPORT": 5496}, {"dt": "1998-03-01T00:00:00", "TEU-EMPTY-EXPORT": 4393}, {"dt": "1998-04-01T00:00:00", "TEU-EMPTY-EXPORT": 3104}, {"dt": "1998-05-01T00:00:00", "TEU-EMPTY-EXPORT": 5360}, {"dt": "1998-06-01T00:00:00", "TEU-EMPTY-EXPORT": 5073}, {"dt": "1998-07-01T00:00:00", "TEU-EMPTY-EXPORT": 8125}, {"dt": "1998-08-01T00:00:00", "TEU-EMPTY-EXPORT": 11096}, {"dt": "1998-09-01T00:00:00", "TEU-EMPTY-EXPORT": 8281}, {"dt": "1998-10-01T00:00:00", "TEU-EMPTY-EXPORT": 7170}, {"dt": "1998-11-01T00:00:00", "TEU-EMPTY-EXPORT": 8144}, {"dt": "1998-12-01T00:00:00", "TEU-EMPTY-EXPORT": 9913}, {"dt": "1999-01-01T00:00:00", "TEU-EMPTY-EXPORT": 7278}, {"dt": "1999-02-01T00:00:00", "TEU-EMPTY-EXPORT": 8863}, {"dt": "1999-03-01T00:00:00", "TEU-EMPTY-EXPORT": 6987}, {"dt": "1999-04-01T00:00:00", "TEU-EMPTY-EXPORT": 9858}, {"dt": "1999-05-01T00:00:00", "TEU-EMPTY-EXPORT": 11613}, {"dt": "1999-06-01T00:00:00", "TEU-EMPTY-EXPORT": 13197}, {"dt": "1999-07-01T00:00:00", "TEU-EMPTY-EXPORT": 11949}, {"dt": "1999-08-01T00:00:00", "TEU-EMPTY-EXPORT": 11875}, {"dt": "1999-09-01T00:00:00", "TEU-EMPTY-EXPORT": 14154}, {"dt": "1999-10-01T00:00:00", "TEU-EMPTY-EXPORT": 9076}, {"dt": "1999-11-01T00:00:00", "TEU-EMPTY-EXPORT": 10827}, {"dt": "1999-12-01T00:00:00", "TEU-EMPTY-EXPORT": 11413}, {"dt": "2000-01-01T00:00:00", "TEU-EMPTY-EXPORT": 11514}, {"dt": "2000-02-01T00:00:00", "TEU-EMPTY-EXPORT": 7080}, {"dt": "2000-03-01T00:00:00", "TEU-EMPTY-EXPORT": 9037}, {"dt": "2000-04-01T00:00:00", "TEU-EMPTY-EXPORT": 10069}, {"dt": "2000-05-01T00:00:00", "TEU-EMPTY-EXPORT": 13702}, {"dt": "2000-06-01T00:00:00", "TEU-EMPTY-EXPORT": 14674}, {"dt": "2000-07-01T00:00:00", "TEU-EMPTY-EXPORT": 23260}, {"dt": "2000-08-01T00:00:00", "TEU-EMPTY-EXPORT": 21374}, {"dt": "2000-09-01T00:00:00", "TEU-EMPTY-EXPORT": 19584}, {"dt": "2000-10-01T00:00:00", "TEU-EMPTY-EXPORT": 18460}, {"dt": "2000-11-01T00:00:00", "TEU-EMPTY-EXPORT": 17882}, {"dt": "2000-12-01T00:00:00", "TEU-EMPTY-EXPORT": 20743}, {"dt": "2001-01-01T00:00:00", "TEU-EMPTY-EXPORT": 14402}, {"dt": "2001-02-01T00:00:00", "TEU-EMPTY-EXPORT": 17827}, {"dt": "2001-03-01T00:00:00", "TEU-EMPTY-EXPORT": 13869}, {"dt": "2001-04-01T00:00:00", "TEU-EMPTY-EXPORT": 12258}, {"dt": "2001-05-01T00:00:00", "TEU-EMPTY-EXPORT": 21456}, {"dt": "2001-06-01T00:00:00", "TEU-EMPTY-EXPORT": 18466}, {"dt": "2001-07-01T00:00:00", "TEU-EMPTY-EXPORT": 18784}, {"dt": "2001-08-01T00:00:00", "TEU-EMPTY-EXPORT": 21960}, {"dt": "2001-09-01T00:00:00", "TEU-EMPTY-EXPORT": 17970}, {"dt": "2001-10-01T00:00:00", "TEU-EMPTY-EXPORT": 21311}, {"dt": "2001-11-01T00:00:00", "TEU-EMPTY-EXPORT": 22899}, {"dt": "2001-12-01T00:00:00", "TEU-EMPTY-EXPORT": 13646}, {"dt": "2002-01-01T00:00:00", "TEU-EMPTY-EXPORT": 12080}, {"dt": "2002-02-01T00:00:00", "TEU-EMPTY-EXPORT": 18380}, {"dt": "2002-03-01T00:00:00", "TEU-EMPTY-EXPORT": 17584}, {"dt": "2002-04-01T00:00:00", "TEU-EMPTY-EXPORT": 17166}, {"dt": "2002-05-01T00:00:00", "TEU-EMPTY-EXPORT": 19582}, {"dt": "2002-06-01T00:00:00", "TEU-EMPTY-EXPORT": 26876}, {"dt": "2002-07-01T00:00:00", "TEU-EMPTY-EXPORT": 26527}, {"dt": "2002-08-01T00:00:00", "TEU-EMPTY-EXPORT": 31204}, {"dt": "2002-09-01T00:00:00", "TEU-EMPTY-EXPORT": 27668}, {"dt": "2002-10-01T00:00:00", "TEU-EMPTY-EXPORT": 27325}, {"dt": "2002-11-01T00:00:00", "TEU-EMPTY-EXPORT": 24241}, {"dt": "2002-12-01T00:00:00", "TEU-EMPTY-EXPORT": 28167}, {"dt": "2003-01-01T00:00:00", "TEU-EMPTY-EXPORT": 22283}, {"dt": "2003-02-01T00:00:00", "TEU-EMPTY-EXPORT": 19478}, {"dt": "2003-03-01T00:00:00", "TEU-EMPTY-EXPORT": 27365}, {"dt": "2003-04-01T00:00:00", "TEU-EMPTY-EXPORT": 25260}, {"dt": "2003-05-01T00:00:00", "TEU-EMPTY-EXPORT": 26327}, {"dt": "2003-06-01T00:00:00", "TEU-EMPTY-EXPORT": 36913}, {"dt": "2003-07-01T00:00:00", "TEU-EMPTY-EXPORT": 26716}, {"dt": "2003-08-01T00:00:00", "TEU-EMPTY-EXPORT": 30309}, {"dt": "2003-09-01T00:00:00", "TEU-EMPTY-EXPORT": 28538}, {"dt": "2003-10-01T00:00:00", "TEU-EMPTY-EXPORT": 25929}, {"dt": "2003-11-01T00:00:00", "TEU-EMPTY-EXPORT": 28493}, {"dt": "2003-12-01T00:00:00", "TEU-EMPTY-EXPORT": 15477}, {"dt": "2004-01-01T00:00:00", "TEU-EMPTY-EXPORT": 20598}, {"dt": "2004-02-01T00:00:00", "TEU-EMPTY-EXPORT": 15434}, {"dt": "2004-03-01T00:00:00", "TEU-EMPTY-EXPORT": 20479}, {"dt": "2004-04-01T00:00:00", "TEU-EMPTY-EXPORT": 32062}, {"dt": "2004-05-01T00:00:00", "TEU-EMPTY-EXPORT": 29011}, {"dt": "2004-06-01T00:00:00", "TEU-EMPTY-EXPORT": 22707}, {"dt": "2004-07-01T00:00:00", "TEU-EMPTY-EXPORT": 26912}, {"dt": "2004-08-01T00:00:00", "TEU-EMPTY-EXPORT": 29393}, {"dt": "2004-09-01T00:00:00", "TEU-EMPTY-EXPORT": 26580}, {"dt": "2004-10-01T00:00:00", "TEU-EMPTY-EXPORT": 33462}, {"dt": "2004-11-01T00:00:00", "TEU-EMPTY-EXPORT": 24927}, {"dt": "2004-12-01T00:00:00", "TEU-EMPTY-EXPORT": 31028}, {"dt": "2005-01-01T00:00:00", "TEU-EMPTY-EXPORT": 27090}, {"dt": "2005-02-01T00:00:00", "TEU-EMPTY-EXPORT": 21533}, {"dt": "2005-03-01T00:00:00", "TEU-EMPTY-EXPORT": 21390}, {"dt": "2005-04-01T00:00:00", "TEU-EMPTY-EXPORT": 25366}, {"dt": "2005-05-01T00:00:00", "TEU-EMPTY-EXPORT": 33478}, {"dt": "2005-06-01T00:00:00", "TEU-EMPTY-EXPORT": 29408}, {"dt": "2005-07-01T00:00:00", "TEU-EMPTY-EXPORT": 35469}, {"dt": "2005-08-01T00:00:00", "TEU-EMPTY-EXPORT": 26935}, {"dt": "2005-09-01T00:00:00", "TEU-EMPTY-EXPORT": 30707}, {"dt": "2005-10-01T00:00:00", "TEU-EMPTY-EXPORT": 32148}, {"dt": "2005-11-01T00:00:00", "TEU-EMPTY-EXPORT": 30443}, {"dt": "2005-12-01T00:00:00", "TEU-EMPTY-EXPORT": 29531}, {"dt": "2006-01-01T00:00:00", "TEU-EMPTY-EXPORT": 28701}, {"dt": "2006-02-01T00:00:00", "TEU-EMPTY-EXPORT": 26349}, {"dt": "2006-03-01T00:00:00", "TEU-EMPTY-EXPORT": 20683}, {"dt": "2006-04-01T00:00:00", "TEU-EMPTY-EXPORT": 26621}, {"dt": "2006-05-01T00:00:00", "TEU-EMPTY-EXPORT": 30849}, {"dt": "2006-06-01T00:00:00", "TEU-EMPTY-EXPORT": 32547}, {"dt": "2006-07-01T00:00:00", "TEU-EMPTY-EXPORT": 31511}, {"dt": "2006-08-01T00:00:00", "TEU-EMPTY-EXPORT": 33848}, {"dt": "2006-09-01T00:00:00", "TEU-EMPTY-EXPORT": 29917}, {"dt": "2006-10-01T00:00:00", "TEU-EMPTY-EXPORT": 34956}, {"dt": "2006-11-01T00:00:00", "TEU-EMPTY-EXPORT": 25661}, {"dt": "2006-12-01T00:00:00", "TEU-EMPTY-EXPORT": 25886}, {"dt": "2007-01-01T00:00:00", "TEU-EMPTY-EXPORT": 20213}, {"dt": "2007-02-01T00:00:00", "TEU-EMPTY-EXPORT": 20090}, {"dt": "2007-03-01T00:00:00", "TEU-EMPTY-EXPORT": 22290}, {"dt": "2007-04-01T00:00:00", "TEU-EMPTY-EXPORT": 23076}, {"dt": "2007-05-01T00:00:00", "TEU-EMPTY-EXPORT": 20705}, {"dt": "2007-06-01T00:00:00", "TEU-EMPTY-EXPORT": 20043}, {"dt": "2007-07-01T00:00:00", "TEU-EMPTY-EXPORT": 20938}, {"dt": "2007-08-01T00:00:00", "TEU-EMPTY-EXPORT": 21867}, {"dt": "2007-09-01T00:00:00", "TEU-EMPTY-EXPORT": 19339}, {"dt": "2007-10-01T00:00:00", "TEU-EMPTY-EXPORT": 17770}, {"dt": "2007-11-01T00:00:00", "TEU-EMPTY-EXPORT": 15614}, {"dt": "2007-12-01T00:00:00", "TEU-EMPTY-EXPORT": 10936}, {"dt": "2008-01-01T00:00:00", "TEU-EMPTY-EXPORT": 13623}, {"dt": "2008-02-01T00:00:00", "TEU-EMPTY-EXPORT": 11593}, {"dt": "2008-03-01T00:00:00", "TEU-EMPTY-EXPORT": 12006}, {"dt": "2008-04-01T00:00:00", "TEU-EMPTY-EXPORT": 10724}, {"dt": "2008-05-01T00:00:00", "TEU-EMPTY-EXPORT": 16634}, {"dt": "2008-06-01T00:00:00", "TEU-EMPTY-EXPORT": 11922}, {"dt": "2008-07-01T00:00:00", "TEU-EMPTY-EXPORT": 11587}, {"dt": "2008-08-01T00:00:00", "TEU-EMPTY-EXPORT": 15442}, {"dt": "2008-09-01T00:00:00", "TEU-EMPTY-EXPORT": 10135}, {"dt": "2008-10-01T00:00:00", "TEU-EMPTY-EXPORT": 21174}, {"dt": "2008-11-01T00:00:00", "TEU-EMPTY-EXPORT": 19243}, {"dt": "2008-12-01T00:00:00", "TEU-EMPTY-EXPORT": 18203}, {"dt": "2009-01-01T00:00:00", "TEU-EMPTY-EXPORT": 15532}, {"dt": "2009-02-01T00:00:00", "TEU-EMPTY-EXPORT": 9922}, {"dt": "2009-03-01T00:00:00", "TEU-EMPTY-EXPORT": 7991}, {"dt": "2009-04-01T00:00:00", "TEU-EMPTY-EXPORT": 10568}, {"dt": "2009-05-01T00:00:00", "TEU-EMPTY-EXPORT": 7298}, {"dt": "2009-06-01T00:00:00", "TEU-EMPTY-EXPORT": 7377}, {"dt": "2009-07-01T00:00:00", "TEU-EMPTY-EXPORT": 9011}, {"dt": "2009-08-01T00:00:00", "TEU-EMPTY-EXPORT": 10089}, {"dt": "2009-09-01T00:00:00", "TEU-EMPTY-EXPORT": 7248}, {"dt": "2009-10-01T00:00:00", "TEU-EMPTY-EXPORT": 9694}, {"dt": "2009-11-01T00:00:00", "TEU-EMPTY-EXPORT": 7549}, {"dt": "2009-12-01T00:00:00", "TEU-EMPTY-EXPORT": 5474}, {"dt": "2010-01-01T00:00:00", "TEU-EMPTY-EXPORT": 9667}, {"dt": "2010-02-01T00:00:00", "TEU-EMPTY-EXPORT": 7018}, {"dt": "2010-03-01T00:00:00", "TEU-EMPTY-EXPORT": 6336}, {"dt": "2010-04-01T00:00:00", "TEU-EMPTY-EXPORT": 9061}, {"dt": "2010-05-01T00:00:00", "TEU-EMPTY-EXPORT": 14049}, {"dt": "2010-06-01T00:00:00", "TEU-EMPTY-EXPORT": 13897}, {"dt": "2010-07-01T00:00:00", "TEU-EMPTY-EXPORT": 17170}, {"dt": "2010-08-01T00:00:00", "TEU-EMPTY-EXPORT": 17368}, {"dt": "2010-09-01T00:00:00", "TEU-EMPTY-EXPORT": 12331}, {"dt": "2010-10-01T00:00:00", "TEU-EMPTY-EXPORT": 13573}, {"dt": "2010-11-01T00:00:00", "TEU-EMPTY-EXPORT": 11803}, {"dt": "2010-12-01T00:00:00", "TEU-EMPTY-EXPORT": 10711}, {"dt": "2011-01-01T00:00:00", "TEU-EMPTY-EXPORT": 9176}, {"dt": "2011-02-01T00:00:00", "TEU-EMPTY-EXPORT": 8759}, {"dt": "2011-03-01T00:00:00", "TEU-EMPTY-EXPORT": 6832}, {"dt": "2011-04-01T00:00:00", "TEU-EMPTY-EXPORT": 10394}, {"dt": "2011-05-01T00:00:00", "TEU-EMPTY-EXPORT": 12716}, {"dt": "2011-06-01T00:00:00", "TEU-EMPTY-EXPORT": 12140}, {"dt": "2011-07-01T00:00:00", "TEU-EMPTY-EXPORT": 14010}, {"dt": "2011-08-01T00:00:00", "TEU-EMPTY-EXPORT": 14374}, {"dt": "2011-09-01T00:00:00", "TEU-EMPTY-EXPORT": 14972}, {"dt": "2011-10-01T00:00:00", "TEU-EMPTY-EXPORT": 11343}, {"dt": "2011-11-01T00:00:00", "TEU-EMPTY-EXPORT": 11754}, {"dt": "2011-12-01T00:00:00", "TEU-EMPTY-EXPORT": 7503}, {"dt": "2012-01-01T00:00:00", "TEU-EMPTY-EXPORT": 12169}, {"dt": "2012-02-01T00:00:00", "TEU-EMPTY-EXPORT": 8938}, {"dt": "2012-03-01T00:00:00", "TEU-EMPTY-EXPORT": 14564}, {"dt": "2012-04-01T00:00:00", "TEU-EMPTY-EXPORT": 16333}, {"dt": "2012-05-01T00:00:00", "TEU-EMPTY-EXPORT": 15971}, {"dt": "2012-06-01T00:00:00", "TEU-EMPTY-EXPORT": 15459}, {"dt": "2012-07-01T00:00:00", "TEU-EMPTY-EXPORT": 19200}, {"dt": "2012-08-01T00:00:00", "TEU-EMPTY-EXPORT": 18584}, {"dt": "2012-09-01T00:00:00", "TEU-EMPTY-EXPORT": 18194}, {"dt": "2012-10-01T00:00:00", "TEU-EMPTY-EXPORT": 18189}, {"dt": "2012-11-01T00:00:00", "TEU-EMPTY-EXPORT": 12105}, {"dt": "2012-12-01T00:00:00", "TEU-EMPTY-EXPORT": 10849}, {"dt": "2013-01-01T00:00:00", "TEU-EMPTY-EXPORT": 16224}, {"dt": "2013-02-01T00:00:00", "TEU-EMPTY-EXPORT": 9954}, {"dt": "2013-03-01T00:00:00", "TEU-EMPTY-EXPORT": 12210}, {"dt": "2013-04-01T00:00:00", "TEU-EMPTY-EXPORT": 17058}, {"dt": "2013-05-01T00:00:00", "TEU-EMPTY-EXPORT": 17035}, {"dt": "2013-06-01T00:00:00", "TEU-EMPTY-EXPORT": 13937}, {"dt": "2013-07-01T00:00:00", "TEU-EMPTY-EXPORT": 19942}, {"dt": "2013-08-01T00:00:00", "TEU-EMPTY-EXPORT": 20893}, {"dt": "2013-09-01T00:00:00", "TEU-EMPTY-EXPORT": 17863}, {"dt": "2013-10-01T00:00:00", "TEU-EMPTY-EXPORT": 20085}, {"dt": "2013-11-01T00:00:00", "TEU-EMPTY-EXPORT": 15034}, {"dt": "2013-12-01T00:00:00", "TEU-EMPTY-EXPORT": 13928}, {"dt": "2014-01-01T00:00:00", "TEU-EMPTY-EXPORT": 13266}, {"dt": "2014-02-01T00:00:00", "TEU-EMPTY-EXPORT": 12641}, {"dt": "2014-03-01T00:00:00", "TEU-EMPTY-EXPORT": 12341}, {"dt": "2014-04-01T00:00:00", "TEU-EMPTY-EXPORT": 18995}, {"dt": "2014-05-01T00:00:00", "TEU-EMPTY-EXPORT": 19394}, {"dt": "2014-06-01T00:00:00", "TEU-EMPTY-EXPORT": 23037}, {"dt": "2014-07-01T00:00:00", "TEU-EMPTY-EXPORT": 23450}, {"dt": "2014-08-01T00:00:00", "TEU-EMPTY-EXPORT": 25878}, {"dt": "2014-09-01T00:00:00", "TEU-EMPTY-EXPORT": 22486}, {"dt": "2014-10-01T00:00:00", "TEU-EMPTY-EXPORT": 25990}, {"dt": "2014-11-01T00:00:00", "TEU-EMPTY-EXPORT": 20376}, {"dt": "2014-12-01T00:00:00", "TEU-EMPTY-EXPORT": 20993}, {"dt": "2015-01-01T00:00:00", "TEU-EMPTY-EXPORT": 22982}, {"dt": "2015-02-01T00:00:00", "TEU-EMPTY-EXPORT": 17835}, {"dt": "2015-03-01T00:00:00", "TEU-EMPTY-EXPORT": 24985}, {"dt": "2015-04-01T00:00:00", "TEU-EMPTY-EXPORT": 24167}, {"dt": "2015-05-01T00:00:00", "TEU-EMPTY-EXPORT": 32991}, {"dt": "2015-06-01T00:00:00", "TEU-EMPTY-EXPORT": 29627}, {"dt": "2015-07-01T00:00:00", "TEU-EMPTY-EXPORT": 33751}, {"dt": "2015-08-01T00:00:00", "TEU-EMPTY-EXPORT": 31363}, {"dt": "2015-09-01T00:00:00", "TEU-EMPTY-EXPORT": 32088}, {"dt": "2015-10-01T00:00:00", "TEU-EMPTY-EXPORT": 25535}, {"dt": "2015-11-01T00:00:00", "TEU-EMPTY-EXPORT": 25518}, {"dt": "2015-12-01T00:00:00", "TEU-EMPTY-EXPORT": 21158}, {"dt": "2016-01-01T00:00:00", "TEU-EMPTY-EXPORT": 23083}, {"dt": "2016-02-01T00:00:00", "TEU-EMPTY-EXPORT": 19286}, {"dt": "2016-03-01T00:00:00", "TEU-EMPTY-EXPORT": 27458}, {"dt": "2016-04-01T00:00:00", "TEU-EMPTY-EXPORT": 24527}, {"dt": "2016-05-01T00:00:00", "TEU-EMPTY-EXPORT": 30398}, {"dt": "2016-06-01T00:00:00", "TEU-EMPTY-EXPORT": 23768}, {"dt": "2016-07-01T00:00:00", "TEU-EMPTY-EXPORT": 29410}, {"dt": "2016-08-01T00:00:00", "TEU-EMPTY-EXPORT": 33198}, {"dt": "2016-09-01T00:00:00", "TEU-EMPTY-EXPORT": 21130}, {"dt": "2016-10-01T00:00:00", "TEU-EMPTY-EXPORT": 20217}, {"dt": "2016-11-01T00:00:00", "TEU-EMPTY-EXPORT": 28225}, {"dt": "2016-12-01T00:00:00", "TEU-EMPTY-EXPORT": 24214}, {"dt": "2017-01-01T00:00:00", "TEU-EMPTY-EXPORT": 29299}, {"dt": "2017-02-01T00:00:00", "TEU-EMPTY-EXPORT": 28682}, {"dt": "2017-03-01T00:00:00", "TEU-EMPTY-EXPORT": 32265}, {"dt": "2017-04-01T00:00:00", "TEU-EMPTY-EXPORT": 33717}, {"dt": "2017-05-01T00:00:00", "TEU-EMPTY-EXPORT": 28207}, {"dt": "2017-06-01T00:00:00", "TEU-EMPTY-EXPORT": 32209}, {"dt": "2017-07-01T00:00:00", "TEU-EMPTY-EXPORT": 34839}, {"dt": "2017-08-01T00:00:00", "TEU-EMPTY-EXPORT": 31296}, {"dt": "2017-09-01T00:00:00", "TEU-EMPTY-EXPORT": 31389}, {"dt": "2017-10-01T00:00:00", "TEU-EMPTY-EXPORT": 24740}, {"dt": "2017-11-01T00:00:00", "TEU-EMPTY-EXPORT": 17760}, {"dt": "2017-12-01T00:00:00", "TEU-EMPTY-EXPORT": 27823}, {"dt": "2018-01-01T00:00:00", "TEU-EMPTY-EXPORT": 24725}, {"dt": "2018-02-01T00:00:00", "TEU-EMPTY-EXPORT": 23031}, {"dt": "2018-03-01T00:00:00", "TEU-EMPTY-EXPORT": 28328}, {"dt": "2018-04-01T00:00:00", "TEU-EMPTY-EXPORT": 30300}, {"dt": "2018-05-01T00:00:00", "TEU-EMPTY-EXPORT": 31234}, {"dt": "2018-06-01T00:00:00", "TEU-EMPTY-EXPORT": 40583}, {"dt": "2018-07-01T00:00:00", "TEU-EMPTY-EXPORT": 36617}, {"dt": "2018-08-01T00:00:00", "TEU-EMPTY-EXPORT": 40506}, {"dt": "2018-09-01T00:00:00", "TEU-EMPTY-EXPORT": 33003}, {"dt": "2018-10-01T00:00:00", "TEU-EMPTY-EXPORT": 43091}, {"dt": "2018-11-01T00:00:00", "TEU-EMPTY-EXPORT": 36894}, {"dt": "2018-12-01T00:00:00", "TEU-EMPTY-EXPORT": 43309}, {"dt": "2019-01-01T00:00:00", "TEU-EMPTY-EXPORT": 45712}, {"dt": "2019-02-01T00:00:00", "TEU-EMPTY-EXPORT": 31869}, {"dt": "2019-03-01T00:00:00", "TEU-EMPTY-EXPORT": 37439}, {"dt": "2019-04-01T00:00:00", "TEU-EMPTY-EXPORT": 35969}, {"dt": "2019-05-01T00:00:00", "TEU-EMPTY-EXPORT": 38875}, {"dt": "2019-06-01T00:00:00", "TEU-EMPTY-EXPORT": 39463}, {"dt": "2019-07-01T00:00:00", "TEU-EMPTY-EXPORT": 38174}, {"dt": "2019-08-01T00:00:00", "TEU-EMPTY-EXPORT": 48363}, {"dt": "2019-09-01T00:00:00", "TEU-EMPTY-EXPORT": 39408}, {"dt": "2019-10-01T00:00:00", "TEU-EMPTY-EXPORT": 45191}, {"dt": "2019-11-01T00:00:00", "TEU-EMPTY-EXPORT": 34357}, {"dt": "2019-12-01T00:00:00", "TEU-EMPTY-EXPORT": 37829}, {"dt": "2020-01-01T00:00:00", "TEU-EMPTY-EXPORT": 44752}, {"dt": "2020-02-01T00:00:00", "TEU-EMPTY-EXPORT": 29117}, {"dt": "2020-03-01T00:00:00", "TEU-EMPTY-EXPORT": 28911}, {"dt": "2020-04-01T00:00:00", "TEU-EMPTY-EXPORT": 31463}, {"dt": "2020-05-01T00:00:00", "TEU-EMPTY-EXPORT": 32400}, {"dt": "2020-06-01T00:00:00", "TEU-EMPTY-EXPORT": 25021}, {"dt": "2020-07-01T00:00:00", "TEU-EMPTY-EXPORT": 35140}, {"dt": "2020-08-01T00:00:00", "TEU-EMPTY-EXPORT": 42817}, {"dt": "2020-09-01T00:00:00", "TEU-EMPTY-EXPORT": 38804}, {"dt": "2020-10-01T00:00:00", "TEU-EMPTY-EXPORT": 44717}, {"dt": "2020-11-01T00:00:00", "TEU-EMPTY-EXPORT": 45090}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[41]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doChart</span><span class="p">(</span><span class="n">df_ch</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;TEU-LOADED-IMPORT&#39;</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Charleston&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[41]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-b7f6bd1b5dc54c2384ff76eb03a93d86"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-b7f6bd1b5dc54c2384ff76eb03a93d86") {
      outputDiv = document.getElementById("altair-viz-b7f6bd1b5dc54c2384ff76eb03a93d86");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-1036279a9bfdf6cebb2d526dc84df727"}, "mark": {"type": "line", "color": "purple"}, "encoding": {"tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "TEU-LOADED-IMPORT", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Volume [TEUs]"}, "field": "TEU-LOADED-IMPORT"}}, "height": 400, "title": "Port of Charleston TEU-LOADED-IMPORT Container Volume", "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-1036279a9bfdf6cebb2d526dc84df727": [{"dt": "1997-07-01T00:00:00", "TEU-LOADED-IMPORT": 38533}, {"dt": "1997-08-01T00:00:00", "TEU-LOADED-IMPORT": 35836}, {"dt": "1997-09-01T00:00:00", "TEU-LOADED-IMPORT": 35943}, {"dt": "1997-10-01T00:00:00", "TEU-LOADED-IMPORT": 40723}, {"dt": "1997-11-01T00:00:00", "TEU-LOADED-IMPORT": 32463}, {"dt": "1997-12-01T00:00:00", "TEU-LOADED-IMPORT": 39316}, {"dt": "1998-01-01T00:00:00", "TEU-LOADED-IMPORT": 36497}, {"dt": "1998-02-01T00:00:00", "TEU-LOADED-IMPORT": 36994}, {"dt": "1998-03-01T00:00:00", "TEU-LOADED-IMPORT": 41411}, {"dt": "1998-04-01T00:00:00", "TEU-LOADED-IMPORT": 41318}, {"dt": "1998-05-01T00:00:00", "TEU-LOADED-IMPORT": 41284}, {"dt": "1998-06-01T00:00:00", "TEU-LOADED-IMPORT": 39215}, {"dt": "1998-07-01T00:00:00", "TEU-LOADED-IMPORT": 40646}, {"dt": "1998-08-01T00:00:00", "TEU-LOADED-IMPORT": 43165}, {"dt": "1998-09-01T00:00:00", "TEU-LOADED-IMPORT": 39674}, {"dt": "1998-10-01T00:00:00", "TEU-LOADED-IMPORT": 43177}, {"dt": "1998-11-01T00:00:00", "TEU-LOADED-IMPORT": 40883}, {"dt": "1998-12-01T00:00:00", "TEU-LOADED-IMPORT": 39883}, {"dt": "1999-01-01T00:00:00", "TEU-LOADED-IMPORT": 36988}, {"dt": "1999-02-01T00:00:00", "TEU-LOADED-IMPORT": 38478}, {"dt": "1999-03-01T00:00:00", "TEU-LOADED-IMPORT": 46461}, {"dt": "1999-04-01T00:00:00", "TEU-LOADED-IMPORT": 45685}, {"dt": "1999-05-01T00:00:00", "TEU-LOADED-IMPORT": 49707}, {"dt": "1999-06-01T00:00:00", "TEU-LOADED-IMPORT": 51527}, {"dt": "1999-07-01T00:00:00", "TEU-LOADED-IMPORT": 50749}, {"dt": "1999-08-01T00:00:00", "TEU-LOADED-IMPORT": 50077}, {"dt": "1999-09-01T00:00:00", "TEU-LOADED-IMPORT": 48775}, {"dt": "1999-10-01T00:00:00", "TEU-LOADED-IMPORT": 47523}, {"dt": "1999-11-01T00:00:00", "TEU-LOADED-IMPORT": 48524}, {"dt": "1999-12-01T00:00:00", "TEU-LOADED-IMPORT": 45136}, {"dt": "2000-01-01T00:00:00", "TEU-LOADED-IMPORT": 46789}, {"dt": "2000-02-01T00:00:00", "TEU-LOADED-IMPORT": 44971}, {"dt": "2000-03-01T00:00:00", "TEU-LOADED-IMPORT": 52092}, {"dt": "2000-04-01T00:00:00", "TEU-LOADED-IMPORT": 55329}, {"dt": "2000-05-01T00:00:00", "TEU-LOADED-IMPORT": 51596}, {"dt": "2000-06-01T00:00:00", "TEU-LOADED-IMPORT": 55823}, {"dt": "2000-07-01T00:00:00", "TEU-LOADED-IMPORT": 56508}, {"dt": "2000-08-01T00:00:00", "TEU-LOADED-IMPORT": 56109}, {"dt": "2000-09-01T00:00:00", "TEU-LOADED-IMPORT": 52058}, {"dt": "2000-10-01T00:00:00", "TEU-LOADED-IMPORT": 52729}, {"dt": "2000-11-01T00:00:00", "TEU-LOADED-IMPORT": 52925}, {"dt": "2000-12-01T00:00:00", "TEU-LOADED-IMPORT": 55555}, {"dt": "2001-01-01T00:00:00", "TEU-LOADED-IMPORT": 46228}, {"dt": "2001-02-01T00:00:00", "TEU-LOADED-IMPORT": 50980}, {"dt": "2001-03-01T00:00:00", "TEU-LOADED-IMPORT": 55879}, {"dt": "2001-04-01T00:00:00", "TEU-LOADED-IMPORT": 48437}, {"dt": "2001-05-01T00:00:00", "TEU-LOADED-IMPORT": 53250}, {"dt": "2001-06-01T00:00:00", "TEU-LOADED-IMPORT": 51506}, {"dt": "2001-07-01T00:00:00", "TEU-LOADED-IMPORT": 53072}, {"dt": "2001-08-01T00:00:00", "TEU-LOADED-IMPORT": 54386}, {"dt": "2001-09-01T00:00:00", "TEU-LOADED-IMPORT": 50708}, {"dt": "2001-10-01T00:00:00", "TEU-LOADED-IMPORT": 53854}, {"dt": "2001-11-01T00:00:00", "TEU-LOADED-IMPORT": 49606}, {"dt": "2001-12-01T00:00:00", "TEU-LOADED-IMPORT": 50367}, {"dt": "2002-01-01T00:00:00", "TEU-LOADED-IMPORT": 44309}, {"dt": "2002-02-01T00:00:00", "TEU-LOADED-IMPORT": 48187}, {"dt": "2002-03-01T00:00:00", "TEU-LOADED-IMPORT": 55409}, {"dt": "2002-04-01T00:00:00", "TEU-LOADED-IMPORT": 53407}, {"dt": "2002-05-01T00:00:00", "TEU-LOADED-IMPORT": 59426}, {"dt": "2002-06-01T00:00:00", "TEU-LOADED-IMPORT": 59002}, {"dt": "2002-07-01T00:00:00", "TEU-LOADED-IMPORT": 60968}, {"dt": "2002-08-01T00:00:00", "TEU-LOADED-IMPORT": 63076}, {"dt": "2002-09-01T00:00:00", "TEU-LOADED-IMPORT": 56972}, {"dt": "2002-10-01T00:00:00", "TEU-LOADED-IMPORT": 59045}, {"dt": "2002-11-01T00:00:00", "TEU-LOADED-IMPORT": 59311}, {"dt": "2002-12-01T00:00:00", "TEU-LOADED-IMPORT": 61217}, {"dt": "2003-01-01T00:00:00", "TEU-LOADED-IMPORT": 57181}, {"dt": "2003-02-01T00:00:00", "TEU-LOADED-IMPORT": 58144}, {"dt": "2003-03-01T00:00:00", "TEU-LOADED-IMPORT": 61758}, {"dt": "2003-04-01T00:00:00", "TEU-LOADED-IMPORT": 62275}, {"dt": "2003-05-01T00:00:00", "TEU-LOADED-IMPORT": 61109}, {"dt": "2003-06-01T00:00:00", "TEU-LOADED-IMPORT": 62376}, {"dt": "2003-07-01T00:00:00", "TEU-LOADED-IMPORT": 65937}, {"dt": "2003-08-01T00:00:00", "TEU-LOADED-IMPORT": 67680}, {"dt": "2003-09-01T00:00:00", "TEU-LOADED-IMPORT": 59802}, {"dt": "2003-10-01T00:00:00", "TEU-LOADED-IMPORT": 67918}, {"dt": "2003-11-01T00:00:00", "TEU-LOADED-IMPORT": 60746}, {"dt": "2003-12-01T00:00:00", "TEU-LOADED-IMPORT": 58692}, {"dt": "2004-01-01T00:00:00", "TEU-LOADED-IMPORT": 60706}, {"dt": "2004-02-01T00:00:00", "TEU-LOADED-IMPORT": 60766}, {"dt": "2004-03-01T00:00:00", "TEU-LOADED-IMPORT": 68309}, {"dt": "2004-04-01T00:00:00", "TEU-LOADED-IMPORT": 68138}, {"dt": "2004-05-01T00:00:00", "TEU-LOADED-IMPORT": 72149}, {"dt": "2004-06-01T00:00:00", "TEU-LOADED-IMPORT": 64929}, {"dt": "2004-07-01T00:00:00", "TEU-LOADED-IMPORT": 78833}, {"dt": "2004-08-01T00:00:00", "TEU-LOADED-IMPORT": 75337}, {"dt": "2004-09-01T00:00:00", "TEU-LOADED-IMPORT": 69584}, {"dt": "2004-10-01T00:00:00", "TEU-LOADED-IMPORT": 78513}, {"dt": "2004-11-01T00:00:00", "TEU-LOADED-IMPORT": 69612}, {"dt": "2004-12-01T00:00:00", "TEU-LOADED-IMPORT": 73223}, {"dt": "2005-01-01T00:00:00", "TEU-LOADED-IMPORT": 70756}, {"dt": "2005-02-01T00:00:00", "TEU-LOADED-IMPORT": 68919}, {"dt": "2005-03-01T00:00:00", "TEU-LOADED-IMPORT": 78397}, {"dt": "2005-04-01T00:00:00", "TEU-LOADED-IMPORT": 80140}, {"dt": "2005-05-01T00:00:00", "TEU-LOADED-IMPORT": 81708}, {"dt": "2005-06-01T00:00:00", "TEU-LOADED-IMPORT": 70036}, {"dt": "2005-07-01T00:00:00", "TEU-LOADED-IMPORT": 79870}, {"dt": "2005-08-01T00:00:00", "TEU-LOADED-IMPORT": 77988}, {"dt": "2005-09-01T00:00:00", "TEU-LOADED-IMPORT": 69599}, {"dt": "2005-10-01T00:00:00", "TEU-LOADED-IMPORT": 76536}, {"dt": "2005-11-01T00:00:00", "TEU-LOADED-IMPORT": 75257}, {"dt": "2005-12-01T00:00:00", "TEU-LOADED-IMPORT": 71670}, {"dt": "2006-01-01T00:00:00", "TEU-LOADED-IMPORT": 75312}, {"dt": "2006-02-01T00:00:00", "TEU-LOADED-IMPORT": 69972}, {"dt": "2006-03-01T00:00:00", "TEU-LOADED-IMPORT": 75007}, {"dt": "2006-04-01T00:00:00", "TEU-LOADED-IMPORT": 80395}, {"dt": "2006-05-01T00:00:00", "TEU-LOADED-IMPORT": 76101}, {"dt": "2006-06-01T00:00:00", "TEU-LOADED-IMPORT": 78504}, {"dt": "2006-07-01T00:00:00", "TEU-LOADED-IMPORT": 78549}, {"dt": "2006-08-01T00:00:00", "TEU-LOADED-IMPORT": 74756}, {"dt": "2006-09-01T00:00:00", "TEU-LOADED-IMPORT": 77593}, {"dt": "2006-10-01T00:00:00", "TEU-LOADED-IMPORT": 75818}, {"dt": "2006-11-01T00:00:00", "TEU-LOADED-IMPORT": 64669}, {"dt": "2006-12-01T00:00:00", "TEU-LOADED-IMPORT": 69556}, {"dt": "2007-01-01T00:00:00", "TEU-LOADED-IMPORT": 62981}, {"dt": "2007-02-01T00:00:00", "TEU-LOADED-IMPORT": 60109}, {"dt": "2007-03-01T00:00:00", "TEU-LOADED-IMPORT": 71351}, {"dt": "2007-04-01T00:00:00", "TEU-LOADED-IMPORT": 67630}, {"dt": "2007-05-01T00:00:00", "TEU-LOADED-IMPORT": 63664}, {"dt": "2007-06-01T00:00:00", "TEU-LOADED-IMPORT": 69010}, {"dt": "2007-07-01T00:00:00", "TEU-LOADED-IMPORT": 62877}, {"dt": "2007-08-01T00:00:00", "TEU-LOADED-IMPORT": 67641}, {"dt": "2007-09-01T00:00:00", "TEU-LOADED-IMPORT": 64723}, {"dt": "2007-10-01T00:00:00", "TEU-LOADED-IMPORT": 61404}, {"dt": "2007-11-01T00:00:00", "TEU-LOADED-IMPORT": 59831}, {"dt": "2007-12-01T00:00:00", "TEU-LOADED-IMPORT": 59525}, {"dt": "2008-01-01T00:00:00", "TEU-LOADED-IMPORT": 54027}, {"dt": "2008-02-01T00:00:00", "TEU-LOADED-IMPORT": 60573}, {"dt": "2008-03-01T00:00:00", "TEU-LOADED-IMPORT": 62682}, {"dt": "2008-04-01T00:00:00", "TEU-LOADED-IMPORT": 59653}, {"dt": "2008-05-01T00:00:00", "TEU-LOADED-IMPORT": 66335}, {"dt": "2008-06-01T00:00:00", "TEU-LOADED-IMPORT": 57055}, {"dt": "2008-07-01T00:00:00", "TEU-LOADED-IMPORT": 60131}, {"dt": "2008-08-01T00:00:00", "TEU-LOADED-IMPORT": 62454}, {"dt": "2008-09-01T00:00:00", "TEU-LOADED-IMPORT": 54680}, {"dt": "2008-10-01T00:00:00", "TEU-LOADED-IMPORT": 63890}, {"dt": "2008-11-01T00:00:00", "TEU-LOADED-IMPORT": 50779}, {"dt": "2008-12-01T00:00:00", "TEU-LOADED-IMPORT": 44378}, {"dt": "2009-01-01T00:00:00", "TEU-LOADED-IMPORT": 44577}, {"dt": "2009-02-01T00:00:00", "TEU-LOADED-IMPORT": 41790}, {"dt": "2009-03-01T00:00:00", "TEU-LOADED-IMPORT": 39113}, {"dt": "2009-04-01T00:00:00", "TEU-LOADED-IMPORT": 38650}, {"dt": "2009-05-01T00:00:00", "TEU-LOADED-IMPORT": 40454}, {"dt": "2009-06-01T00:00:00", "TEU-LOADED-IMPORT": 38179}, {"dt": "2009-07-01T00:00:00", "TEU-LOADED-IMPORT": 46992}, {"dt": "2009-08-01T00:00:00", "TEU-LOADED-IMPORT": 39696}, {"dt": "2009-09-01T00:00:00", "TEU-LOADED-IMPORT": 40551}, {"dt": "2009-10-01T00:00:00", "TEU-LOADED-IMPORT": 46823}, {"dt": "2009-11-01T00:00:00", "TEU-LOADED-IMPORT": 39867}, {"dt": "2009-12-01T00:00:00", "TEU-LOADED-IMPORT": 40572}, {"dt": "2010-01-01T00:00:00", "TEU-LOADED-IMPORT": 40088}, {"dt": "2010-02-01T00:00:00", "TEU-LOADED-IMPORT": 41044}, {"dt": "2010-03-01T00:00:00", "TEU-LOADED-IMPORT": 42533}, {"dt": "2010-04-01T00:00:00", "TEU-LOADED-IMPORT": 48127}, {"dt": "2010-05-01T00:00:00", "TEU-LOADED-IMPORT": 48487}, {"dt": "2010-06-01T00:00:00", "TEU-LOADED-IMPORT": 46044}, {"dt": "2010-07-01T00:00:00", "TEU-LOADED-IMPORT": 53611}, {"dt": "2010-08-01T00:00:00", "TEU-LOADED-IMPORT": 50959}, {"dt": "2010-09-01T00:00:00", "TEU-LOADED-IMPORT": 48182}, {"dt": "2010-10-01T00:00:00", "TEU-LOADED-IMPORT": 50210}, {"dt": "2010-11-01T00:00:00", "TEU-LOADED-IMPORT": 44968}, {"dt": "2010-12-01T00:00:00", "TEU-LOADED-IMPORT": 43466}, {"dt": "2011-01-01T00:00:00", "TEU-LOADED-IMPORT": 46757}, {"dt": "2011-02-01T00:00:00", "TEU-LOADED-IMPORT": 43254}, {"dt": "2011-03-01T00:00:00", "TEU-LOADED-IMPORT": 49143}, {"dt": "2011-04-01T00:00:00", "TEU-LOADED-IMPORT": 48818}, {"dt": "2011-05-01T00:00:00", "TEU-LOADED-IMPORT": 49589}, {"dt": "2011-06-01T00:00:00", "TEU-LOADED-IMPORT": 51459}, {"dt": "2011-07-01T00:00:00", "TEU-LOADED-IMPORT": 51477}, {"dt": "2011-08-01T00:00:00", "TEU-LOADED-IMPORT": 52896}, {"dt": "2011-09-01T00:00:00", "TEU-LOADED-IMPORT": 53511}, {"dt": "2011-10-01T00:00:00", "TEU-LOADED-IMPORT": 50041}, {"dt": "2011-11-01T00:00:00", "TEU-LOADED-IMPORT": 50331}, {"dt": "2011-12-01T00:00:00", "TEU-LOADED-IMPORT": 48218}, {"dt": "2012-01-01T00:00:00", "TEU-LOADED-IMPORT": 49100}, {"dt": "2012-02-01T00:00:00", "TEU-LOADED-IMPORT": 49706}, {"dt": "2012-03-01T00:00:00", "TEU-LOADED-IMPORT": 56104}, {"dt": "2012-04-01T00:00:00", "TEU-LOADED-IMPORT": 52895}, {"dt": "2012-05-01T00:00:00", "TEU-LOADED-IMPORT": 59830}, {"dt": "2012-06-01T00:00:00", "TEU-LOADED-IMPORT": 51457}, {"dt": "2012-07-01T00:00:00", "TEU-LOADED-IMPORT": 58853}, {"dt": "2012-08-01T00:00:00", "TEU-LOADED-IMPORT": 60670}, {"dt": "2012-09-01T00:00:00", "TEU-LOADED-IMPORT": 53272}, {"dt": "2012-10-01T00:00:00", "TEU-LOADED-IMPORT": 52202}, {"dt": "2012-11-01T00:00:00", "TEU-LOADED-IMPORT": 54458}, {"dt": "2012-12-01T00:00:00", "TEU-LOADED-IMPORT": 48425}, {"dt": "2013-01-01T00:00:00", "TEU-LOADED-IMPORT": 49992}, {"dt": "2013-02-01T00:00:00", "TEU-LOADED-IMPORT": 55083}, {"dt": "2013-03-01T00:00:00", "TEU-LOADED-IMPORT": 54886}, {"dt": "2013-04-01T00:00:00", "TEU-LOADED-IMPORT": 53650}, {"dt": "2013-05-01T00:00:00", "TEU-LOADED-IMPORT": 58371}, {"dt": "2013-06-01T00:00:00", "TEU-LOADED-IMPORT": 51365}, {"dt": "2013-07-01T00:00:00", "TEU-LOADED-IMPORT": 56631}, {"dt": "2013-08-01T00:00:00", "TEU-LOADED-IMPORT": 60021}, {"dt": "2013-09-01T00:00:00", "TEU-LOADED-IMPORT": 54943}, {"dt": "2013-10-01T00:00:00", "TEU-LOADED-IMPORT": 58825}, {"dt": "2013-11-01T00:00:00", "TEU-LOADED-IMPORT": 54663}, {"dt": "2013-12-01T00:00:00", "TEU-LOADED-IMPORT": 52103}, {"dt": "2014-01-01T00:00:00", "TEU-LOADED-IMPORT": 54425}, {"dt": "2014-02-01T00:00:00", "TEU-LOADED-IMPORT": 53169}, {"dt": "2014-03-01T00:00:00", "TEU-LOADED-IMPORT": 62980}, {"dt": "2014-04-01T00:00:00", "TEU-LOADED-IMPORT": 62982}, {"dt": "2014-05-01T00:00:00", "TEU-LOADED-IMPORT": 64704}, {"dt": "2014-06-01T00:00:00", "TEU-LOADED-IMPORT": 62107}, {"dt": "2014-07-01T00:00:00", "TEU-LOADED-IMPORT": 65888}, {"dt": "2014-08-01T00:00:00", "TEU-LOADED-IMPORT": 65453}, {"dt": "2014-09-01T00:00:00", "TEU-LOADED-IMPORT": 62655}, {"dt": "2014-10-01T00:00:00", "TEU-LOADED-IMPORT": 70326}, {"dt": "2014-11-01T00:00:00", "TEU-LOADED-IMPORT": 60087}, {"dt": "2014-12-01T00:00:00", "TEU-LOADED-IMPORT": 60804}, {"dt": "2015-01-01T00:00:00", "TEU-LOADED-IMPORT": 65101}, {"dt": "2015-02-01T00:00:00", "TEU-LOADED-IMPORT": 61486}, {"dt": "2015-03-01T00:00:00", "TEU-LOADED-IMPORT": 69414}, {"dt": "2015-04-01T00:00:00", "TEU-LOADED-IMPORT": 70763}, {"dt": "2015-05-01T00:00:00", "TEU-LOADED-IMPORT": 76069}, {"dt": "2015-06-01T00:00:00", "TEU-LOADED-IMPORT": 71535}, {"dt": "2015-07-01T00:00:00", "TEU-LOADED-IMPORT": 75666}, {"dt": "2015-08-01T00:00:00", "TEU-LOADED-IMPORT": 70827}, {"dt": "2015-09-01T00:00:00", "TEU-LOADED-IMPORT": 70426}, {"dt": "2015-10-01T00:00:00", "TEU-LOADED-IMPORT": 74046}, {"dt": "2015-11-01T00:00:00", "TEU-LOADED-IMPORT": 63485}, {"dt": "2015-12-01T00:00:00", "TEU-LOADED-IMPORT": 66381}, {"dt": "2016-01-01T00:00:00", "TEU-LOADED-IMPORT": 66295}, {"dt": "2016-02-01T00:00:00", "TEU-LOADED-IMPORT": 69477}, {"dt": "2016-03-01T00:00:00", "TEU-LOADED-IMPORT": 74288}, {"dt": "2016-04-01T00:00:00", "TEU-LOADED-IMPORT": 68813}, {"dt": "2016-05-01T00:00:00", "TEU-LOADED-IMPORT": 77225}, {"dt": "2016-06-01T00:00:00", "TEU-LOADED-IMPORT": 71822}, {"dt": "2016-07-01T00:00:00", "TEU-LOADED-IMPORT": 81120}, {"dt": "2016-08-01T00:00:00", "TEU-LOADED-IMPORT": 77223}, {"dt": "2016-09-01T00:00:00", "TEU-LOADED-IMPORT": 74009}, {"dt": "2016-10-01T00:00:00", "TEU-LOADED-IMPORT": 78341}, {"dt": "2016-11-01T00:00:00", "TEU-LOADED-IMPORT": 73910}, {"dt": "2016-12-01T00:00:00", "TEU-LOADED-IMPORT": 70813}, {"dt": "2017-01-01T00:00:00", "TEU-LOADED-IMPORT": 83098}, {"dt": "2017-02-01T00:00:00", "TEU-LOADED-IMPORT": 73855}, {"dt": "2017-03-01T00:00:00", "TEU-LOADED-IMPORT": 81137}, {"dt": "2017-04-01T00:00:00", "TEU-LOADED-IMPORT": 82897}, {"dt": "2017-05-01T00:00:00", "TEU-LOADED-IMPORT": 78398}, {"dt": "2017-06-01T00:00:00", "TEU-LOADED-IMPORT": 81307}, {"dt": "2017-07-01T00:00:00", "TEU-LOADED-IMPORT": 79631}, {"dt": "2017-08-01T00:00:00", "TEU-LOADED-IMPORT": 78083}, {"dt": "2017-09-01T00:00:00", "TEU-LOADED-IMPORT": 79150}, {"dt": "2017-10-01T00:00:00", "TEU-LOADED-IMPORT": 80728}, {"dt": "2017-11-01T00:00:00", "TEU-LOADED-IMPORT": 76580}, {"dt": "2017-12-01T00:00:00", "TEU-LOADED-IMPORT": 80423}, {"dt": "2018-01-01T00:00:00", "TEU-LOADED-IMPORT": 78169}, {"dt": "2018-02-01T00:00:00", "TEU-LOADED-IMPORT": 70397}, {"dt": "2018-03-01T00:00:00", "TEU-LOADED-IMPORT": 88483}, {"dt": "2018-04-01T00:00:00", "TEU-LOADED-IMPORT": 78275}, {"dt": "2018-05-01T00:00:00", "TEU-LOADED-IMPORT": 85277}, {"dt": "2018-06-01T00:00:00", "TEU-LOADED-IMPORT": 85416}, {"dt": "2018-07-01T00:00:00", "TEU-LOADED-IMPORT": 87549}, {"dt": "2018-08-01T00:00:00", "TEU-LOADED-IMPORT": 90569}, {"dt": "2018-09-01T00:00:00", "TEU-LOADED-IMPORT": 80182}, {"dt": "2018-10-01T00:00:00", "TEU-LOADED-IMPORT": 92947}, {"dt": "2018-11-01T00:00:00", "TEU-LOADED-IMPORT": 84125}, {"dt": "2018-12-01T00:00:00", "TEU-LOADED-IMPORT": 89079}, {"dt": "2019-01-01T00:00:00", "TEU-LOADED-IMPORT": 88107}, {"dt": "2019-02-01T00:00:00", "TEU-LOADED-IMPORT": 77667}, {"dt": "2019-03-01T00:00:00", "TEU-LOADED-IMPORT": 92875}, {"dt": "2019-04-01T00:00:00", "TEU-LOADED-IMPORT": 87675}, {"dt": "2019-05-01T00:00:00", "TEU-LOADED-IMPORT": 88009}, {"dt": "2019-06-01T00:00:00", "TEU-LOADED-IMPORT": 86076}, {"dt": "2019-07-01T00:00:00", "TEU-LOADED-IMPORT": 92707}, {"dt": "2019-08-01T00:00:00", "TEU-LOADED-IMPORT": 103221}, {"dt": "2019-09-01T00:00:00", "TEU-LOADED-IMPORT": 90111}, {"dt": "2019-10-01T00:00:00", "TEU-LOADED-IMPORT": 95302}, {"dt": "2019-11-01T00:00:00", "TEU-LOADED-IMPORT": 82785}, {"dt": "2019-12-01T00:00:00", "TEU-LOADED-IMPORT": 81779}, {"dt": "2020-01-01T00:00:00", "TEU-LOADED-IMPORT": 90665}, {"dt": "2020-02-01T00:00:00", "TEU-LOADED-IMPORT": 88178}, {"dt": "2020-03-01T00:00:00", "TEU-LOADED-IMPORT": 76019}, {"dt": "2020-04-01T00:00:00", "TEU-LOADED-IMPORT": 82899}, {"dt": "2020-05-01T00:00:00", "TEU-LOADED-IMPORT": 73072}, {"dt": "2020-06-01T00:00:00", "TEU-LOADED-IMPORT": 69775}, {"dt": "2020-07-01T00:00:00", "TEU-LOADED-IMPORT": 81530}, {"dt": "2020-08-01T00:00:00", "TEU-LOADED-IMPORT": 96965}, {"dt": "2020-09-01T00:00:00", "TEU-LOADED-IMPORT": 90399}, {"dt": "2020-10-01T00:00:00", "TEU-LOADED-IMPORT": 96563}, {"dt": "2020-11-01T00:00:00", "TEU-LOADED-IMPORT": 93369}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[42]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doChart</span><span class="p">(</span><span class="n">df_ch</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;TEU-TOTAL&#39;</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Charleston&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[42]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-2e9d9b48be1448348ded6050c73ee6e3"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-2e9d9b48be1448348ded6050c73ee6e3") {
      outputDiv = document.getElementById("altair-viz-2e9d9b48be1448348ded6050c73ee6e3");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-7dfcce966f44117eae00df20349eca69"}, "mark": {"type": "line", "color": "purple"}, "encoding": {"tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "TEU-TOTAL", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Volume [TEUs]"}, "field": "TEU-TOTAL"}}, "height": 400, "title": "Port of Charleston TEU-TOTAL Container Volume", "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-7dfcce966f44117eae00df20349eca69": [{"dt": "1997-07-01T00:00:00", "TEU-TOTAL": 100518}, {"dt": "1997-08-01T00:00:00", "TEU-TOTAL": 99734}, {"dt": "1997-09-01T00:00:00", "TEU-TOTAL": 99161}, {"dt": "1997-10-01T00:00:00", "TEU-TOTAL": 105290}, {"dt": "1997-11-01T00:00:00", "TEU-TOTAL": 96651}, {"dt": "1997-12-01T00:00:00", "TEU-TOTAL": 111312}, {"dt": "1998-01-01T00:00:00", "TEU-TOTAL": 106689}, {"dt": "1998-02-01T00:00:00", "TEU-TOTAL": 104517}, {"dt": "1998-03-01T00:00:00", "TEU-TOTAL": 116459}, {"dt": "1998-04-01T00:00:00", "TEU-TOTAL": 106329}, {"dt": "1998-05-01T00:00:00", "TEU-TOTAL": 110705}, {"dt": "1998-06-01T00:00:00", "TEU-TOTAL": 101894}, {"dt": "1998-07-01T00:00:00", "TEU-TOTAL": 101510}, {"dt": "1998-08-01T00:00:00", "TEU-TOTAL": 110132}, {"dt": "1998-09-01T00:00:00", "TEU-TOTAL": 97899}, {"dt": "1998-10-01T00:00:00", "TEU-TOTAL": 108101}, {"dt": "1998-11-01T00:00:00", "TEU-TOTAL": 107626}, {"dt": "1998-12-01T00:00:00", "TEU-TOTAL": 105653}, {"dt": "1999-01-01T00:00:00", "TEU-TOTAL": 106752}, {"dt": "1999-02-01T00:00:00", "TEU-TOTAL": 106428}, {"dt": "1999-03-01T00:00:00", "TEU-TOTAL": 120958}, {"dt": "1999-04-01T00:00:00", "TEU-TOTAL": 124223}, {"dt": "1999-05-01T00:00:00", "TEU-TOTAL": 127222}, {"dt": "1999-06-01T00:00:00", "TEU-TOTAL": 131114}, {"dt": "1999-07-01T00:00:00", "TEU-TOTAL": 124533}, {"dt": "1999-08-01T00:00:00", "TEU-TOTAL": 128500}, {"dt": "1999-09-01T00:00:00", "TEU-TOTAL": 126151}, {"dt": "1999-10-01T00:00:00", "TEU-TOTAL": 133002}, {"dt": "1999-11-01T00:00:00", "TEU-TOTAL": 129754}, {"dt": "1999-12-01T00:00:00", "TEU-TOTAL": 128007}, {"dt": "2000-01-01T00:00:00", "TEU-TOTAL": 129412}, {"dt": "2000-02-01T00:00:00", "TEU-TOTAL": 123147}, {"dt": "2000-03-01T00:00:00", "TEU-TOTAL": 140750}, {"dt": "2000-04-01T00:00:00", "TEU-TOTAL": 135976}, {"dt": "2000-05-01T00:00:00", "TEU-TOTAL": 131121}, {"dt": "2000-06-01T00:00:00", "TEU-TOTAL": 144114}, {"dt": "2000-07-01T00:00:00", "TEU-TOTAL": 142801}, {"dt": "2000-08-01T00:00:00", "TEU-TOTAL": 138864}, {"dt": "2000-09-01T00:00:00", "TEU-TOTAL": 137687}, {"dt": "2000-10-01T00:00:00", "TEU-TOTAL": 134857}, {"dt": "2000-11-01T00:00:00", "TEU-TOTAL": 137261}, {"dt": "2000-12-01T00:00:00", "TEU-TOTAL": 139985}, {"dt": "2001-01-01T00:00:00", "TEU-TOTAL": 121575}, {"dt": "2001-02-01T00:00:00", "TEU-TOTAL": 130857}, {"dt": "2001-03-01T00:00:00", "TEU-TOTAL": 141422}, {"dt": "2001-04-01T00:00:00", "TEU-TOTAL": 126237}, {"dt": "2001-05-01T00:00:00", "TEU-TOTAL": 139990}, {"dt": "2001-06-01T00:00:00", "TEU-TOTAL": 128042}, {"dt": "2001-07-01T00:00:00", "TEU-TOTAL": 118683}, {"dt": "2001-08-01T00:00:00", "TEU-TOTAL": 129607}, {"dt": "2001-09-01T00:00:00", "TEU-TOTAL": 118778}, {"dt": "2001-10-01T00:00:00", "TEU-TOTAL": 133368}, {"dt": "2001-11-01T00:00:00", "TEU-TOTAL": 127718}, {"dt": "2001-12-01T00:00:00", "TEU-TOTAL": 115494}, {"dt": "2002-01-01T00:00:00", "TEU-TOTAL": 101724}, {"dt": "2002-02-01T00:00:00", "TEU-TOTAL": 119610}, {"dt": "2002-03-01T00:00:00", "TEU-TOTAL": 140645}, {"dt": "2002-04-01T00:00:00", "TEU-TOTAL": 125433}, {"dt": "2002-05-01T00:00:00", "TEU-TOTAL": 137556}, {"dt": "2002-06-01T00:00:00", "TEU-TOTAL": 140768}, {"dt": "2002-07-01T00:00:00", "TEU-TOTAL": 128973}, {"dt": "2002-08-01T00:00:00", "TEU-TOTAL": 149138}, {"dt": "2002-09-01T00:00:00", "TEU-TOTAL": 131065}, {"dt": "2002-10-01T00:00:00", "TEU-TOTAL": 136749}, {"dt": "2002-11-01T00:00:00", "TEU-TOTAL": 137881}, {"dt": "2002-12-01T00:00:00", "TEU-TOTAL": 143294}, {"dt": "2003-01-01T00:00:00", "TEU-TOTAL": 132010}, {"dt": "2003-02-01T00:00:00", "TEU-TOTAL": 131391}, {"dt": "2003-03-01T00:00:00", "TEU-TOTAL": 156648}, {"dt": "2003-04-01T00:00:00", "TEU-TOTAL": 141656}, {"dt": "2003-05-01T00:00:00", "TEU-TOTAL": 139100}, {"dt": "2003-06-01T00:00:00", "TEU-TOTAL": 153819}, {"dt": "2003-07-01T00:00:00", "TEU-TOTAL": 138807}, {"dt": "2003-08-01T00:00:00", "TEU-TOTAL": 150770}, {"dt": "2003-09-01T00:00:00", "TEU-TOTAL": 132881}, {"dt": "2003-10-01T00:00:00", "TEU-TOTAL": 148191}, {"dt": "2003-11-01T00:00:00", "TEU-TOTAL": 142738}, {"dt": "2003-12-01T00:00:00", "TEU-TOTAL": 122838}, {"dt": "2004-01-01T00:00:00", "TEU-TOTAL": 136891}, {"dt": "2004-02-01T00:00:00", "TEU-TOTAL": 137882}, {"dt": "2004-03-01T00:00:00", "TEU-TOTAL": 155606}, {"dt": "2004-04-01T00:00:00", "TEU-TOTAL": 154258}, {"dt": "2004-05-01T00:00:00", "TEU-TOTAL": 162527}, {"dt": "2004-06-01T00:00:00", "TEU-TOTAL": 141199}, {"dt": "2004-07-01T00:00:00", "TEU-TOTAL": 161715}, {"dt": "2004-08-01T00:00:00", "TEU-TOTAL": 165008}, {"dt": "2004-09-01T00:00:00", "TEU-TOTAL": 151332}, {"dt": "2004-10-01T00:00:00", "TEU-TOTAL": 175402}, {"dt": "2004-11-01T00:00:00", "TEU-TOTAL": 155260}, {"dt": "2004-12-01T00:00:00", "TEU-TOTAL": 166838}, {"dt": "2005-01-01T00:00:00", "TEU-TOTAL": 163108}, {"dt": "2005-02-01T00:00:00", "TEU-TOTAL": 151592}, {"dt": "2005-03-01T00:00:00", "TEU-TOTAL": 166235}, {"dt": "2005-04-01T00:00:00", "TEU-TOTAL": 172388}, {"dt": "2005-05-01T00:00:00", "TEU-TOTAL": 182214}, {"dt": "2005-06-01T00:00:00", "TEU-TOTAL": 159784}, {"dt": "2005-07-01T00:00:00", "TEU-TOTAL": 176361}, {"dt": "2005-08-01T00:00:00", "TEU-TOTAL": 166396}, {"dt": "2005-09-01T00:00:00", "TEU-TOTAL": 155790}, {"dt": "2005-10-01T00:00:00", "TEU-TOTAL": 169034}, {"dt": "2005-11-01T00:00:00", "TEU-TOTAL": 163121}, {"dt": "2005-12-01T00:00:00", "TEU-TOTAL": 158865}, {"dt": "2006-01-01T00:00:00", "TEU-TOTAL": 166094}, {"dt": "2006-02-01T00:00:00", "TEU-TOTAL": 151593}, {"dt": "2006-03-01T00:00:00", "TEU-TOTAL": 160807}, {"dt": "2006-04-01T00:00:00", "TEU-TOTAL": 166156}, {"dt": "2006-05-01T00:00:00", "TEU-TOTAL": 169831}, {"dt": "2006-06-01T00:00:00", "TEU-TOTAL": 174760}, {"dt": "2006-07-01T00:00:00", "TEU-TOTAL": 166038}, {"dt": "2006-08-01T00:00:00", "TEU-TOTAL": 167541}, {"dt": "2006-09-01T00:00:00", "TEU-TOTAL": 163173}, {"dt": "2006-10-01T00:00:00", "TEU-TOTAL": 170577}, {"dt": "2006-11-01T00:00:00", "TEU-TOTAL": 151748}, {"dt": "2006-12-01T00:00:00", "TEU-TOTAL": 160157}, {"dt": "2007-01-01T00:00:00", "TEU-TOTAL": 144169}, {"dt": "2007-02-01T00:00:00", "TEU-TOTAL": 141954}, {"dt": "2007-03-01T00:00:00", "TEU-TOTAL": 163956}, {"dt": "2007-04-01T00:00:00", "TEU-TOTAL": 153114}, {"dt": "2007-05-01T00:00:00", "TEU-TOTAL": 147191}, {"dt": "2007-06-01T00:00:00", "TEU-TOTAL": 154033}, {"dt": "2007-07-01T00:00:00", "TEU-TOTAL": 137748}, {"dt": "2007-08-01T00:00:00", "TEU-TOTAL": 151233}, {"dt": "2007-09-01T00:00:00", "TEU-TOTAL": 145544}, {"dt": "2007-10-01T00:00:00", "TEU-TOTAL": 139132}, {"dt": "2007-11-01T00:00:00", "TEU-TOTAL": 141573}, {"dt": "2007-12-01T00:00:00", "TEU-TOTAL": 134729}, {"dt": "2008-01-01T00:00:00", "TEU-TOTAL": 128874}, {"dt": "2008-02-01T00:00:00", "TEU-TOTAL": 140913}, {"dt": "2008-03-01T00:00:00", "TEU-TOTAL": 139474}, {"dt": "2008-04-01T00:00:00", "TEU-TOTAL": 137695}, {"dt": "2008-05-01T00:00:00", "TEU-TOTAL": 157553}, {"dt": "2008-06-01T00:00:00", "TEU-TOTAL": 140036}, {"dt": "2008-07-01T00:00:00", "TEU-TOTAL": 138191}, {"dt": "2008-08-01T00:00:00", "TEU-TOTAL": 149195}, {"dt": "2008-09-01T00:00:00", "TEU-TOTAL": 126156}, {"dt": "2008-10-01T00:00:00", "TEU-TOTAL": 146878}, {"dt": "2008-11-01T00:00:00", "TEU-TOTAL": 123231}, {"dt": "2008-12-01T00:00:00", "TEU-TOTAL": 107339}, {"dt": "2009-01-01T00:00:00", "TEU-TOTAL": 106423}, {"dt": "2009-02-01T00:00:00", "TEU-TOTAL": 97547}, {"dt": "2009-03-01T00:00:00", "TEU-TOTAL": 93540}, {"dt": "2009-04-01T00:00:00", "TEU-TOTAL": 93932}, {"dt": "2009-05-01T00:00:00", "TEU-TOTAL": 97603}, {"dt": "2009-06-01T00:00:00", "TEU-TOTAL": 87945}, {"dt": "2009-07-01T00:00:00", "TEU-TOTAL": 102205}, {"dt": "2009-08-01T00:00:00", "TEU-TOTAL": 98674}, {"dt": "2009-09-01T00:00:00", "TEU-TOTAL": 98653}, {"dt": "2009-10-01T00:00:00", "TEU-TOTAL": 109305}, {"dt": "2009-11-01T00:00:00", "TEU-TOTAL": 98313}, {"dt": "2009-12-01T00:00:00", "TEU-TOTAL": 97217}, {"dt": "2010-01-01T00:00:00", "TEU-TOTAL": 105822}, {"dt": "2010-02-01T00:00:00", "TEU-TOTAL": 101900}, {"dt": "2010-03-01T00:00:00", "TEU-TOTAL": 113750}, {"dt": "2010-04-01T00:00:00", "TEU-TOTAL": 117556}, {"dt": "2010-05-01T00:00:00", "TEU-TOTAL": 118070}, {"dt": "2010-06-01T00:00:00", "TEU-TOTAL": 116297}, {"dt": "2010-07-01T00:00:00", "TEU-TOTAL": 127963}, {"dt": "2010-08-01T00:00:00", "TEU-TOTAL": 118053}, {"dt": "2010-09-01T00:00:00", "TEU-TOTAL": 106279}, {"dt": "2010-10-01T00:00:00", "TEU-TOTAL": 121229}, {"dt": "2010-11-01T00:00:00", "TEU-TOTAL": 110716}, {"dt": "2010-12-01T00:00:00", "TEU-TOTAL": 106866}, {"dt": "2011-01-01T00:00:00", "TEU-TOTAL": 112699}, {"dt": "2011-02-01T00:00:00", "TEU-TOTAL": 108994}, {"dt": "2011-03-01T00:00:00", "TEU-TOTAL": 120265}, {"dt": "2011-04-01T00:00:00", "TEU-TOTAL": 114664}, {"dt": "2011-05-01T00:00:00", "TEU-TOTAL": 120539}, {"dt": "2011-06-01T00:00:00", "TEU-TOTAL": 115268}, {"dt": "2011-07-01T00:00:00", "TEU-TOTAL": 113503}, {"dt": "2011-08-01T00:00:00", "TEU-TOTAL": 114833}, {"dt": "2011-09-01T00:00:00", "TEU-TOTAL": 125032}, {"dt": "2011-10-01T00:00:00", "TEU-TOTAL": 113650}, {"dt": "2011-11-01T00:00:00", "TEU-TOTAL": 112431}, {"dt": "2011-12-01T00:00:00", "TEU-TOTAL": 109472}, {"dt": "2012-01-01T00:00:00", "TEU-TOTAL": 112575}, {"dt": "2012-02-01T00:00:00", "TEU-TOTAL": 119052}, {"dt": "2012-03-01T00:00:00", "TEU-TOTAL": 134857}, {"dt": "2012-04-01T00:00:00", "TEU-TOTAL": 123439}, {"dt": "2012-05-01T00:00:00", "TEU-TOTAL": 132498}, {"dt": "2012-06-01T00:00:00", "TEU-TOTAL": 120964}, {"dt": "2012-07-01T00:00:00", "TEU-TOTAL": 131767}, {"dt": "2012-08-01T00:00:00", "TEU-TOTAL": 137039}, {"dt": "2012-09-01T00:00:00", "TEU-TOTAL": 131686}, {"dt": "2012-10-01T00:00:00", "TEU-TOTAL": 120810}, {"dt": "2012-11-01T00:00:00", "TEU-TOTAL": 125780}, {"dt": "2012-12-01T00:00:00", "TEU-TOTAL": 124120}, {"dt": "2013-01-01T00:00:00", "TEU-TOTAL": 121286}, {"dt": "2013-02-01T00:00:00", "TEU-TOTAL": 131634}, {"dt": "2013-03-01T00:00:00", "TEU-TOTAL": 136877}, {"dt": "2013-04-01T00:00:00", "TEU-TOTAL": 134718}, {"dt": "2013-05-01T00:00:00", "TEU-TOTAL": 139143}, {"dt": "2013-06-01T00:00:00", "TEU-TOTAL": 125257}, {"dt": "2013-07-01T00:00:00", "TEU-TOTAL": 136159}, {"dt": "2013-08-01T00:00:00", "TEU-TOTAL": 144649}, {"dt": "2013-09-01T00:00:00", "TEU-TOTAL": 133011}, {"dt": "2013-10-01T00:00:00", "TEU-TOTAL": 141049}, {"dt": "2013-11-01T00:00:00", "TEU-TOTAL": 133481}, {"dt": "2013-12-01T00:00:00", "TEU-TOTAL": 124103}, {"dt": "2014-01-01T00:00:00", "TEU-TOTAL": 129562}, {"dt": "2014-02-01T00:00:00", "TEU-TOTAL": 129747}, {"dt": "2014-03-01T00:00:00", "TEU-TOTAL": 150516}, {"dt": "2014-04-01T00:00:00", "TEU-TOTAL": 151790}, {"dt": "2014-05-01T00:00:00", "TEU-TOTAL": 161658}, {"dt": "2014-06-01T00:00:00", "TEU-TOTAL": 149183}, {"dt": "2014-07-01T00:00:00", "TEU-TOTAL": 153916}, {"dt": "2014-08-01T00:00:00", "TEU-TOTAL": 163970}, {"dt": "2014-09-01T00:00:00", "TEU-TOTAL": 150790}, {"dt": "2014-10-01T00:00:00", "TEU-TOTAL": 164672}, {"dt": "2014-11-01T00:00:00", "TEU-TOTAL": 144218}, {"dt": "2014-12-01T00:00:00", "TEU-TOTAL": 141956}, {"dt": "2015-01-01T00:00:00", "TEU-TOTAL": 152917}, {"dt": "2015-02-01T00:00:00", "TEU-TOTAL": 152925}, {"dt": "2015-03-01T00:00:00", "TEU-TOTAL": 171113}, {"dt": "2015-04-01T00:00:00", "TEU-TOTAL": 168182}, {"dt": "2015-05-01T00:00:00", "TEU-TOTAL": 181809}, {"dt": "2015-06-01T00:00:00", "TEU-TOTAL": 169913}, {"dt": "2015-07-01T00:00:00", "TEU-TOTAL": 175223}, {"dt": "2015-08-01T00:00:00", "TEU-TOTAL": 170528}, {"dt": "2015-09-01T00:00:00", "TEU-TOTAL": 167549}, {"dt": "2015-10-01T00:00:00", "TEU-TOTAL": 164734}, {"dt": "2015-11-01T00:00:00", "TEU-TOTAL": 153594}, {"dt": "2015-12-01T00:00:00", "TEU-TOTAL": 144718}, {"dt": "2016-01-01T00:00:00", "TEU-TOTAL": 145092}, {"dt": "2016-02-01T00:00:00", "TEU-TOTAL": 157962}, {"dt": "2016-03-01T00:00:00", "TEU-TOTAL": 170740}, {"dt": "2016-04-01T00:00:00", "TEU-TOTAL": 157959}, {"dt": "2016-05-01T00:00:00", "TEU-TOTAL": 177865}, {"dt": "2016-06-01T00:00:00", "TEU-TOTAL": 157207}, {"dt": "2016-07-01T00:00:00", "TEU-TOTAL": 177265}, {"dt": "2016-08-01T00:00:00", "TEU-TOTAL": 180153}, {"dt": "2016-09-01T00:00:00", "TEU-TOTAL": 162858}, {"dt": "2016-10-01T00:00:00", "TEU-TOTAL": 169477}, {"dt": "2016-11-01T00:00:00", "TEU-TOTAL": 175217}, {"dt": "2016-12-01T00:00:00", "TEU-TOTAL": 164480}, {"dt": "2017-01-01T00:00:00", "TEU-TOTAL": 185018}, {"dt": "2017-02-01T00:00:00", "TEU-TOTAL": 175820}, {"dt": "2017-03-01T00:00:00", "TEU-TOTAL": 192411}, {"dt": "2017-04-01T00:00:00", "TEU-TOTAL": 189315}, {"dt": "2017-05-01T00:00:00", "TEU-TOTAL": 182452}, {"dt": "2017-06-01T00:00:00", "TEU-TOTAL": 183237}, {"dt": "2017-07-01T00:00:00", "TEU-TOTAL": 182411}, {"dt": "2017-08-01T00:00:00", "TEU-TOTAL": 177728}, {"dt": "2017-09-01T00:00:00", "TEU-TOTAL": 179856}, {"dt": "2017-10-01T00:00:00", "TEU-TOTAL": 182827}, {"dt": "2017-11-01T00:00:00", "TEU-TOTAL": 163592}, {"dt": "2017-12-01T00:00:00", "TEU-TOTAL": 182884}, {"dt": "2018-01-01T00:00:00", "TEU-TOTAL": 167398}, {"dt": "2018-02-01T00:00:00", "TEU-TOTAL": 168480}, {"dt": "2018-03-01T00:00:00", "TEU-TOTAL": 199659}, {"dt": "2018-04-01T00:00:00", "TEU-TOTAL": 196439}, {"dt": "2018-05-01T00:00:00", "TEU-TOTAL": 197437}, {"dt": "2018-06-01T00:00:00", "TEU-TOTAL": 201163}, {"dt": "2018-07-01T00:00:00", "TEU-TOTAL": 200594}, {"dt": "2018-08-01T00:00:00", "TEU-TOTAL": 206541}, {"dt": "2018-09-01T00:00:00", "TEU-TOTAL": 173226}, {"dt": "2018-10-01T00:00:00", "TEU-TOTAL": 217035}, {"dt": "2018-11-01T00:00:00", "TEU-TOTAL": 188583}, {"dt": "2018-12-01T00:00:00", "TEU-TOTAL": 199701}, {"dt": "2019-01-01T00:00:00", "TEU-TOTAL": 205689}, {"dt": "2019-02-01T00:00:00", "TEU-TOTAL": 178131}, {"dt": "2019-03-01T00:00:00", "TEU-TOTAL": 214113}, {"dt": "2019-04-01T00:00:00", "TEU-TOTAL": 204621}, {"dt": "2019-05-01T00:00:00", "TEU-TOTAL": 204457}, {"dt": "2019-06-01T00:00:00", "TEU-TOTAL": 200406}, {"dt": "2019-07-01T00:00:00", "TEU-TOTAL": 210542}, {"dt": "2019-08-01T00:00:00", "TEU-TOTAL": 233110}, {"dt": "2019-09-01T00:00:00", "TEU-TOTAL": 194948}, {"dt": "2019-10-01T00:00:00", "TEU-TOTAL": 217360}, {"dt": "2019-11-01T00:00:00", "TEU-TOTAL": 184928}, {"dt": "2019-12-01T00:00:00", "TEU-TOTAL": 187882}, {"dt": "2020-01-01T00:00:00", "TEU-TOTAL": 211020}, {"dt": "2020-02-01T00:00:00", "TEU-TOTAL": 197214}, {"dt": "2020-03-01T00:00:00", "TEU-TOTAL": 185631}, {"dt": "2020-04-01T00:00:00", "TEU-TOTAL": 176152}, {"dt": "2020-05-01T00:00:00", "TEU-TOTAL": 169705}, {"dt": "2020-06-01T00:00:00", "TEU-TOTAL": 156494}, {"dt": "2020-07-01T00:00:00", "TEU-TOTAL": 176974}, {"dt": "2020-08-01T00:00:00", "TEU-TOTAL": 208837}, {"dt": "2020-09-01T00:00:00", "TEU-TOTAL": 195101}, {"dt": "2020-10-01T00:00:00", "TEU-TOTAL": 216196}, {"dt": "2020-11-01T00:00:00", "TEU-TOTAL": 207066}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[43]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doYoyChart</span><span class="p">(</span><span class="n">df_ch</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;TEU-LOADED-EXPORT&#39;</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Charleston&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[43]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-be6f6d87706540fb94ce9fd2a68de0fc"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-be6f6d87706540fb94ce9fd2a68de0fc") {
      outputDiv = document.getElementById("altair-viz-be6f6d87706540fb94ce9fd2a68de0fc");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-2621935f198317463a212ca70c01505a"}, "mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['nolarge'] < 0"}, "value": "royalblue"}, "tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "nolarge", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Year-over-Year Volume Growth [%]"}, "field": "nolarge"}}, "height": 400, "title": "Port of Charleston TEU-LOADED-EXPORT Container Volume Growth", "transform": [{"calculate": "datum['TEU-LOADED-EXPORT'] > 400 ? NaN : datum['TEU-LOADED-EXPORT']", "as": "nolarge"}], "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-2621935f198317463a212ca70c01505a": [{"dt": "1997-07-01T00:00:00", "TEU-LOADED-EXPORT": null}, {"dt": "1997-08-01T00:00:00", "TEU-LOADED-EXPORT": null}, {"dt": "1997-09-01T00:00:00", "TEU-LOADED-EXPORT": null}, {"dt": "1997-10-01T00:00:00", "TEU-LOADED-EXPORT": null}, {"dt": "1997-11-01T00:00:00", "TEU-LOADED-EXPORT": null}, {"dt": "1997-12-01T00:00:00", "TEU-LOADED-EXPORT": null}, {"dt": "1998-01-01T00:00:00", "TEU-LOADED-EXPORT": null}, {"dt": "1998-02-01T00:00:00", "TEU-LOADED-EXPORT": null}, {"dt": "1998-03-01T00:00:00", "TEU-LOADED-EXPORT": null}, {"dt": "1998-04-01T00:00:00", "TEU-LOADED-EXPORT": null}, {"dt": "1998-05-01T00:00:00", "TEU-LOADED-EXPORT": null}, {"dt": "1998-06-01T00:00:00", "TEU-LOADED-EXPORT": null}, {"dt": "1998-07-01T00:00:00", "TEU-LOADED-EXPORT": -5.393972652855905}, {"dt": "1998-08-01T00:00:00", "TEU-LOADED-EXPORT": -0.2801764693583175}, {"dt": "1998-09-01T00:00:00", "TEU-LOADED-EXPORT": -4.159733777038266}, {"dt": "1998-10-01T00:00:00", "TEU-LOADED-EXPORT": 5.502909026798308}, {"dt": "1998-11-01T00:00:00", "TEU-LOADED-EXPORT": 1.942354538987212}, {"dt": "1998-12-01T00:00:00", "TEU-LOADED-EXPORT": -5.319058362777229}, {"dt": "1999-01-01T00:00:00", "TEU-LOADED-EXPORT": 3.0492708265414725}, {"dt": "1999-02-01T00:00:00", "TEU-LOADED-EXPORT": -2.1004454251971727}, {"dt": "1999-03-01T00:00:00", "TEU-LOADED-EXPORT": -0.4793719095610216}, {"dt": "1999-04-01T00:00:00", "TEU-LOADED-EXPORT": 7.930129240710815}, {"dt": "1999-05-01T00:00:00", "TEU-LOADED-EXPORT": 5.516845480818722}, {"dt": "1999-06-01T00:00:00", "TEU-LOADED-EXPORT": 17.73427188737351}, {"dt": "1999-07-01T00:00:00", "TEU-LOADED-EXPORT": 26.131722054380656}, {"dt": "1999-08-01T00:00:00", "TEU-LOADED-EXPORT": 13.555448388652414}, {"dt": "1999-09-01T00:00:00", "TEU-LOADED-EXPORT": 26.131944444444443}, {"dt": "1999-10-01T00:00:00", "TEU-LOADED-EXPORT": 27.91552649719049}, {"dt": "1999-11-01T00:00:00", "TEU-LOADED-EXPORT": 24.124513618677046}, {"dt": "1999-12-01T00:00:00", "TEU-LOADED-EXPORT": 28.570465121507095}, {"dt": "2000-01-01T00:00:00", "TEU-LOADED-EXPORT": 19.61445986417514}, {"dt": "2000-02-01T00:00:00", "TEU-LOADED-EXPORT": 19.393079267020074}, {"dt": "2000-03-01T00:00:00", "TEU-LOADED-EXPORT": 19.927178942577562}, {"dt": "2000-04-01T00:00:00", "TEU-LOADED-EXPORT": 17.093569330364655}, {"dt": "2000-05-01T00:00:00", "TEU-LOADED-EXPORT": 3.678829378107129}, {"dt": "2000-06-01T00:00:00", "TEU-LOADED-EXPORT": 16.701543290609465}, {"dt": "2000-07-01T00:00:00", "TEU-LOADED-EXPORT": -1.6000153294881914}, {"dt": "2000-08-01T00:00:00", "TEU-LOADED-EXPORT": 3.316222903356847}, {"dt": "2000-09-01T00:00:00", "TEU-LOADED-EXPORT": 3.3162656683000336}, {"dt": "2000-10-01T00:00:00", "TEU-LOADED-EXPORT": -15.714355699985305}, {"dt": "2000-11-01T00:00:00", "TEU-LOADED-EXPORT": -2.846872018536184}, {"dt": "2000-12-01T00:00:00", "TEU-LOADED-EXPORT": -9.646454049517416}, {"dt": "2001-01-01T00:00:00", "TEU-LOADED-EXPORT": -12.245653630496879}, {"dt": "2001-02-01T00:00:00", "TEU-LOADED-EXPORT": -4.8438974932699335}, {"dt": "2001-03-01T00:00:00", "TEU-LOADED-EXPORT": -6.198608475648326}, {"dt": "2001-04-01T00:00:00", "TEU-LOADED-EXPORT": -15.125513318313278}, {"dt": "2001-05-01T00:00:00", "TEU-LOADED-EXPORT": -0.7020591321970082}, {"dt": "2001-06-01T00:00:00", "TEU-LOADED-EXPORT": -21.40215494468548}, {"dt": "2001-07-01T00:00:00", "TEU-LOADED-EXPORT": -15.51643558186634}, {"dt": "2001-08-01T00:00:00", "TEU-LOADED-EXPORT": -13.382421274618439}, {"dt": "2001-09-01T00:00:00", "TEU-LOADED-EXPORT": -20.95353133437544}, {"dt": "2001-10-01T00:00:00", "TEU-LOADED-EXPORT": -4.8785213314217035}, {"dt": "2001-11-01T00:00:00", "TEU-LOADED-EXPORT": -16.059622972380538}, {"dt": "2001-12-01T00:00:00", "TEU-LOADED-EXPORT": -7.6594097726173205}, {"dt": "2002-01-01T00:00:00", "TEU-LOADED-EXPORT": -16.343507002350865}, {"dt": "2002-02-01T00:00:00", "TEU-LOADED-EXPORT": -13.895471663451819}, {"dt": "2002-03-01T00:00:00", "TEU-LOADED-EXPORT": 1.3351314902225297}, {"dt": "2002-04-01T00:00:00", "TEU-LOADED-EXPORT": -7.905190428676323}, {"dt": "2002-05-01T00:00:00", "TEU-LOADED-EXPORT": -5.421115929880827}, {"dt": "2002-06-01T00:00:00", "TEU-LOADED-EXPORT": 4.365184445847681}, {"dt": "2002-07-01T00:00:00", "TEU-LOADED-EXPORT": -8.701364558362535}, {"dt": "2002-08-01T00:00:00", "TEU-LOADED-EXPORT": 5.991829323649567}, {"dt": "2002-09-01T00:00:00", "TEU-LOADED-EXPORT": -3.305617977528086}, {"dt": "2002-10-01T00:00:00", "TEU-LOADED-EXPORT": -4.963744500570311}, {"dt": "2002-11-01T00:00:00", "TEU-LOADED-EXPORT": 1.3641966281571882}, {"dt": "2002-12-01T00:00:00", "TEU-LOADED-EXPORT": 3.7890060146279048}, {"dt": "2003-01-01T00:00:00", "TEU-LOADED-EXPORT": 15.249189383931782}, {"dt": "2003-02-01T00:00:00", "TEU-LOADED-EXPORT": 6.886987689616175}, {"dt": "2003-03-01T00:00:00", "TEU-LOADED-EXPORT": 2.7947830715996824}, {"dt": "2003-04-01T00:00:00", "TEU-LOADED-EXPORT": 3.146081197105355}, {"dt": "2003-05-01T00:00:00", "TEU-LOADED-EXPORT": -5.055584455619133}, {"dt": "2003-06-01T00:00:00", "TEU-LOADED-EXPORT": -2.4143180576157386}, {"dt": "2003-07-01T00:00:00", "TEU-LOADED-EXPORT": 7.503345199323386}, {"dt": "2003-08-01T00:00:00", "TEU-LOADED-EXPORT": -3.3346311076503765}, {"dt": "2003-09-01T00:00:00", "TEU-LOADED-EXPORT": -0.7041762532245643}, {"dt": "2003-10-01T00:00:00", "TEU-LOADED-EXPORT": 6.3503289826185805}, {"dt": "2003-11-01T00:00:00", "TEU-LOADED-EXPORT": -2.1022258862324783}, {"dt": "2003-12-01T00:00:00", "TEU-LOADED-EXPORT": -8.66229177183241}, {"dt": "2004-01-01T00:00:00", "TEU-LOADED-EXPORT": 6.5125875291763835}, {"dt": "2004-02-01T00:00:00", "TEU-LOADED-EXPORT": 6.497135671370691}, {"dt": "2004-03-01T00:00:00", "TEU-LOADED-EXPORT": -6.125388399792852}, {"dt": "2004-04-01T00:00:00", "TEU-LOADED-EXPORT": 0.7669897140139215}, {"dt": "2004-05-01T00:00:00", "TEU-LOADED-EXPORT": 14.653300594573748}, {"dt": "2004-06-01T00:00:00", "TEU-LOADED-EXPORT": -2.6280525610512195}, {"dt": "2004-07-01T00:00:00", "TEU-LOADED-EXPORT": 20.09346891806205}, {"dt": "2004-08-01T00:00:00", "TEU-LOADED-EXPORT": 10.620859093380597}, {"dt": "2004-09-01T00:00:00", "TEU-LOADED-EXPORT": 17.176894630903906}, {"dt": "2004-10-01T00:00:00", "TEU-LOADED-EXPORT": 15.458869050018142}, {"dt": "2004-11-01T00:00:00", "TEU-LOADED-EXPORT": 14.23368421052631}, {"dt": "2004-12-01T00:00:00", "TEU-LOADED-EXPORT": 25.52669393169007}, {"dt": "2005-01-01T00:00:00", "TEU-LOADED-EXPORT": 14.169715705648711}, {"dt": "2005-02-01T00:00:00", "TEU-LOADED-EXPORT": 5.4278966900326076}, {"dt": "2005-03-01T00:00:00", "TEU-LOADED-EXPORT": 3.8340200320650997}, {"dt": "2005-04-01T00:00:00", "TEU-LOADED-EXPORT": 17.412084021713483}, {"dt": "2005-05-01T00:00:00", "TEU-LOADED-EXPORT": 9.350442477876108}, {"dt": "2005-06-01T00:00:00", "TEU-LOADED-EXPORT": 14.213823559617955}, {"dt": "2005-07-01T00:00:00", "TEU-LOADED-EXPORT": 11.291237264602927}, {"dt": "2005-08-01T00:00:00", "TEU-LOADED-EXPORT": -0.020025122426314823}, {"dt": "2005-09-01T00:00:00", "TEU-LOADED-EXPORT": 3.964845700589237}, {"dt": "2005-10-01T00:00:00", "TEU-LOADED-EXPORT": -2.539577260747383}, {"dt": "2005-11-01T00:00:00", "TEU-LOADED-EXPORT": -1.863216674959911}, {"dt": "2005-12-01T00:00:00", "TEU-LOADED-EXPORT": -5.063224261209543}, {"dt": "2006-01-01T00:00:00", "TEU-LOADED-EXPORT": -2.3084437284708104}, {"dt": "2006-02-01T00:00:00", "TEU-LOADED-EXPORT": -11.326222222222226}, {"dt": "2006-03-01T00:00:00", "TEU-LOADED-EXPORT": -0.996164765652241}, {"dt": "2006-04-01T00:00:00", "TEU-LOADED-EXPORT": -6.837864549307337}, {"dt": "2006-05-01T00:00:00", "TEU-LOADED-EXPORT": -4.417072657527155}, {"dt": "2006-06-01T00:00:00", "TEU-LOADED-EXPORT": 3.7244852081647295}, {"dt": "2006-07-01T00:00:00", "TEU-LOADED-EXPORT": -8.69603415859851}, {"dt": "2006-08-01T00:00:00", "TEU-LOADED-EXPORT": 0.6937363437727662}, {"dt": "2006-09-01T00:00:00", "TEU-LOADED-EXPORT": 2.6224783861671375}, {"dt": "2006-10-01T00:00:00", "TEU-LOADED-EXPORT": 0.9044020201296687}, {"dt": "2006-11-01T00:00:00", "TEU-LOADED-EXPORT": 0.4319248826291089}, {"dt": "2006-12-01T00:00:00", "TEU-LOADED-EXPORT": 8.635242176340729}, {"dt": "2007-01-01T00:00:00", "TEU-LOADED-EXPORT": -5.766262016700585}, {"dt": "2007-02-01T00:00:00", "TEU-LOADED-EXPORT": 10.756029591611703}, {"dt": "2007-03-01T00:00:00", "TEU-LOADED-EXPORT": 7.098656738944498}, {"dt": "2007-04-01T00:00:00", "TEU-LOADED-EXPORT": 2.711498696394865}, {"dt": "2007-05-01T00:00:00", "TEU-LOADED-EXPORT": -4.153825312425918}, {"dt": "2007-06-01T00:00:00", "TEU-LOADED-EXPORT": 3.148623344198631}, {"dt": "2007-07-01T00:00:00", "TEU-LOADED-EXPORT": -4.951695469766371}, {"dt": "2007-08-01T00:00:00", "TEU-LOADED-EXPORT": 2.2693983833927067}, {"dt": "2007-09-01T00:00:00", "TEU-LOADED-EXPORT": 4.472526443882807}, {"dt": "2007-10-01T00:00:00", "TEU-LOADED-EXPORT": -2.7829544042738186}, {"dt": "2007-11-01T00:00:00", "TEU-LOADED-EXPORT": 9.712041884816758}, {"dt": "2007-12-01T00:00:00", "TEU-LOADED-EXPORT": -2.9353505686281256}, {"dt": "2008-01-01T00:00:00", "TEU-LOADED-EXPORT": -0.10238844313718021}, {"dt": "2008-02-01T00:00:00", "TEU-LOADED-EXPORT": 14.081167185576703}, {"dt": "2008-03-01T00:00:00", "TEU-LOADED-EXPORT": -8.115683327070023}, {"dt": "2008-04-01T00:00:00", "TEU-LOADED-EXPORT": 6.177896819144646}, {"dt": "2008-05-01T00:00:00", "TEU-LOADED-EXPORT": 15.757672125934175}, {"dt": "2008-06-01T00:00:00", "TEU-LOADED-EXPORT": 2.955019162240302}, {"dt": "2008-07-01T00:00:00", "TEU-LOADED-EXPORT": 14.847435663811769}, {"dt": "2008-08-01T00:00:00", "TEU-LOADED-EXPORT": 11.722894122639516}, {"dt": "2008-09-01T00:00:00", "TEU-LOADED-EXPORT": 0.20249444484266022}, {"dt": "2008-10-01T00:00:00", "TEU-LOADED-EXPORT": -0.8781378366042869}, {"dt": "2008-11-01T00:00:00", "TEU-LOADED-EXPORT": -22.314824283328218}, {"dt": "2008-12-01T00:00:00", "TEU-LOADED-EXPORT": -30.01600900726563}, {"dt": "2009-01-01T00:00:00", "TEU-LOADED-EXPORT": -23.810144981551197}, {"dt": "2009-02-01T00:00:00", "TEU-LOADED-EXPORT": -37.65768052933056}, {"dt": "2009-03-01T00:00:00", "TEU-LOADED-EXPORT": -30.831103764421197}, {"dt": "2009-04-01T00:00:00", "TEU-LOADED-EXPORT": -36.9402492910374}, {"dt": "2009-05-01T00:00:00", "TEU-LOADED-EXPORT": -35.67155067155067}, {"dt": "2009-06-01T00:00:00", "TEU-LOADED-EXPORT": -38.10285714285714}, {"dt": "2009-07-01T00:00:00", "TEU-LOADED-EXPORT": -27.9362504848207}, {"dt": "2009-08-01T00:00:00", "TEU-LOADED-EXPORT": -36.37514639318836}, {"dt": "2009-09-01T00:00:00", "TEU-LOADED-EXPORT": -25.577194770821045}, {"dt": "2009-10-01T00:00:00", "TEU-LOADED-EXPORT": -15.430802666961362}, {"dt": "2009-11-01T00:00:00", "TEU-LOADED-EXPORT": -6.256993045347848}, {"dt": "2009-12-01T00:00:00", "TEU-LOADED-EXPORT": 5.442296573741223}, {"dt": "2010-01-01T00:00:00", "TEU-LOADED-EXPORT": 8.981288981288982}, {"dt": "2010-02-01T00:00:00", "TEU-LOADED-EXPORT": 13.703232374650032}, {"dt": "2010-03-01T00:00:00", "TEU-LOADED-EXPORT": 20.47599103205302}, {"dt": "2010-04-01T00:00:00", "TEU-LOADED-EXPORT": 35.9505320678746}, {"dt": "2010-05-01T00:00:00", "TEU-LOADED-EXPORT": 9.39071842080288}, {"dt": "2010-06-01T00:00:00", "TEU-LOADED-EXPORT": 20.15193078708588}, {"dt": "2010-07-01T00:00:00", "TEU-LOADED-EXPORT": 15.877287405812712}, {"dt": "2010-08-01T00:00:00", "TEU-LOADED-EXPORT": 11.5740510422367}, {"dt": "2010-09-01T00:00:00", "TEU-LOADED-EXPORT": -1.6268172533942082}, {"dt": "2010-10-01T00:00:00", "TEU-LOADED-EXPORT": 7.731509713389673}, {"dt": "2010-11-01T00:00:00", "TEU-LOADED-EXPORT": 5.504458330407913}, {"dt": "2010-12-01T00:00:00", "TEU-LOADED-EXPORT": 1.1085681590616403}, {"dt": "2011-01-01T00:00:00", "TEU-LOADED-EXPORT": 8.983998025001693}, {"dt": "2011-02-01T00:00:00", "TEU-LOADED-EXPORT": 5.202130993418996}, {"dt": "2011-03-01T00:00:00", "TEU-LOADED-EXPORT": 9.879345603271993}, {"dt": "2011-04-01T00:00:00", "TEU-LOADED-EXPORT": -8.896667115410505}, {"dt": "2011-05-01T00:00:00", "TEU-LOADED-EXPORT": 6.832082592287336}, {"dt": "2011-06-01T00:00:00", "TEU-LOADED-EXPORT": -2.726554267650161}, {"dt": "2011-07-01T00:00:00", "TEU-LOADED-EXPORT": -8.860786217962247}, {"dt": "2011-08-01T00:00:00", "TEU-LOADED-EXPORT": 0.5952513655110847}, {"dt": "2011-09-01T00:00:00", "TEU-LOADED-EXPORT": 20.135326591430935}, {"dt": "2011-10-01T00:00:00", "TEU-LOADED-EXPORT": -6.744026199814012}, {"dt": "2011-11-01T00:00:00", "TEU-LOADED-EXPORT": -2.0074976154033863}, {"dt": "2011-12-01T00:00:00", "TEU-LOADED-EXPORT": 11.176345759354888}, {"dt": "2012-01-01T00:00:00", "TEU-LOADED-EXPORT": -10.776359143327841}, {"dt": "2012-02-01T00:00:00", "TEU-LOADED-EXPORT": 7.321588152687353}, {"dt": "2012-03-01T00:00:00", "TEU-LOADED-EXPORT": -0.5322811784630899}, {"dt": "2012-04-01T00:00:00", "TEU-LOADED-EXPORT": -0.29765046125266315}, {"dt": "2012-05-01T00:00:00", "TEU-LOADED-EXPORT": 2.219019002761091}, {"dt": "2012-06-01T00:00:00", "TEU-LOADED-EXPORT": 3.0895960279846646}, {"dt": "2012-07-01T00:00:00", "TEU-LOADED-EXPORT": 12.983854154601682}, {"dt": "2012-08-01T00:00:00", "TEU-LOADED-EXPORT": 12.355392048224822}, {"dt": "2012-09-01T00:00:00", "TEU-LOADED-EXPORT": 7.730627681421698}, {"dt": "2012-10-01T00:00:00", "TEU-LOADED-EXPORT": -1.6193366572729295}, {"dt": "2012-11-01T00:00:00", "TEU-LOADED-EXPORT": 14.480713509597965}, {"dt": "2012-12-01T00:00:00", "TEU-LOADED-EXPORT": 19.09609552289453}, {"dt": "2013-01-01T00:00:00", "TEU-LOADED-EXPORT": 8.043483278325292}, {"dt": "2013-02-01T00:00:00", "TEU-LOADED-EXPORT": 15.034001467118706}, {"dt": "2013-03-01T00:00:00", "TEU-LOADED-EXPORT": 7.012816914585085}, {"dt": "2013-04-01T00:00:00", "TEU-LOADED-EXPORT": 16.09570188439551}, {"dt": "2013-05-01T00:00:00", "TEU-LOADED-EXPORT": 10.89991856839263}, {"dt": "2013-06-01T00:00:00", "TEU-LOADED-EXPORT": 15.022220276275755}, {"dt": "2013-07-01T00:00:00", "TEU-LOADED-EXPORT": -0.36084799278304214}, {"dt": "2013-08-01T00:00:00", "TEU-LOADED-EXPORT": 12.560901039509243}, {"dt": "2013-09-01T00:00:00", "TEU-LOADED-EXPORT": -1.2494573731196779}, {"dt": "2013-10-01T00:00:00", "TEU-LOADED-EXPORT": 16.80585241169601}, {"dt": "2013-11-01T00:00:00", "TEU-LOADED-EXPORT": 9.63953097502619}, {"dt": "2013-12-01T00:00:00", "TEU-LOADED-EXPORT": -12.347965452764665}, {"dt": "2014-01-01T00:00:00", "TEU-LOADED-EXPORT": 13.246603435016668}, {"dt": "2014-02-01T00:00:00", "TEU-LOADED-EXPORT": -7.516114577229327}, {"dt": "2014-03-01T00:00:00", "TEU-LOADED-EXPORT": 12.377388841291758}, {"dt": "2014-04-01T00:00:00", "TEU-LOADED-EXPORT": 10.594178581850011}, {"dt": "2014-05-01T00:00:00", "TEU-LOADED-EXPORT": 14.802013002131197}, {"dt": "2014-06-01T00:00:00", "TEU-LOADED-EXPORT": 8.109857064007153}, {"dt": "2014-07-01T00:00:00", "TEU-LOADED-EXPORT": 14.694020330054736}, {"dt": "2014-08-01T00:00:00", "TEU-LOADED-EXPORT": 6.417243494260938}, {"dt": "2014-09-01T00:00:00", "TEU-LOADED-EXPORT": 7.444429578945355}, {"dt": "2014-10-01T00:00:00", "TEU-LOADED-EXPORT": 13.514431239388802}, {"dt": "2014-11-01T00:00:00", "TEU-LOADED-EXPORT": 3.7350310200548353}, {"dt": "2014-12-01T00:00:00", "TEU-LOADED-EXPORT": 10.883565957619723}, {"dt": "2015-01-01T00:00:00", "TEU-LOADED-EXPORT": 5.368494520212019}, {"dt": "2015-02-01T00:00:00", "TEU-LOADED-EXPORT": 19.38465552263282}, {"dt": "2015-03-01T00:00:00", "TEU-LOADED-EXPORT": 3.3544934030370843}, {"dt": "2015-04-01T00:00:00", "TEU-LOADED-EXPORT": 3.801058689665404}, {"dt": "2015-05-01T00:00:00", "TEU-LOADED-EXPORT": 2.4258213472278634}, {"dt": "2015-06-01T00:00:00", "TEU-LOADED-EXPORT": 9.10883419597901}, {"dt": "2015-07-01T00:00:00", "TEU-LOADED-EXPORT": 7.712732557096458}, {"dt": "2015-08-01T00:00:00", "TEU-LOADED-EXPORT": 3.35106295387555}, {"dt": "2015-09-01T00:00:00", "TEU-LOADED-EXPORT": 7.627721645083252}, {"dt": "2015-10-01T00:00:00", "TEU-LOADED-EXPORT": -0.3539734769169356}, {"dt": "2015-11-01T00:00:00", "TEU-LOADED-EXPORT": 3.4127853404961828}, {"dt": "2015-12-01T00:00:00", "TEU-LOADED-EXPORT": -1.5372494411667659}, {"dt": "2016-01-01T00:00:00", "TEU-LOADED-EXPORT": -6.389301634472511}, {"dt": "2016-02-01T00:00:00", "TEU-LOADED-EXPORT": -0.1592182695159483}, {"dt": "2016-03-01T00:00:00", "TEU-LOADED-EXPORT": -6.066718853495512}, {"dt": "2016-04-01T00:00:00", "TEU-LOADED-EXPORT": -2.201887331998853}, {"dt": "2016-05-01T00:00:00", "TEU-LOADED-EXPORT": 1.3631448284265213}, {"dt": "2016-06-01T00:00:00", "TEU-LOADED-EXPORT": -6.30566670969408}, {"dt": "2016-07-01T00:00:00", "TEU-LOADED-EXPORT": 3.5344281954762025}, {"dt": "2016-08-01T00:00:00", "TEU-LOADED-EXPORT": 3.9163825244574735}, {"dt": "2016-09-01T00:00:00", "TEU-LOADED-EXPORT": 3.4609282030940047}, {"dt": "2016-10-01T00:00:00", "TEU-LOADED-EXPORT": 10.383415886993209}, {"dt": "2016-11-01T00:00:00", "TEU-LOADED-EXPORT": 9.443192898692043}, {"dt": "2016-12-01T00:00:00", "TEU-LOADED-EXPORT": 16.522451106272907}, {"dt": "2017-01-01T00:00:00", "TEU-LOADED-EXPORT": 27.879135589978965}, {"dt": "2017-02-01T00:00:00", "TEU-LOADED-EXPORT": 3.65066212223073}, {"dt": "2017-03-01T00:00:00", "TEU-LOADED-EXPORT": 12.739190358665331}, {"dt": "2017-04-01T00:00:00", "TEU-LOADED-EXPORT": 8.692332683560755}, {"dt": "2017-05-01T00:00:00", "TEU-LOADED-EXPORT": 4.973554513763667}, {"dt": "2017-06-01T00:00:00", "TEU-LOADED-EXPORT": 12.865950265206315}, {"dt": "2017-07-01T00:00:00", "TEU-LOADED-EXPORT": 2.0817245817245755}, {"dt": "2017-08-01T00:00:00", "TEU-LOADED-EXPORT": -0.4001839926402906}, {"dt": "2017-09-01T00:00:00", "TEU-LOADED-EXPORT": 3.608741493338452}, {"dt": "2017-10-01T00:00:00", "TEU-LOADED-EXPORT": 8.234245395621498}, {"dt": "2017-11-01T00:00:00", "TEU-LOADED-EXPORT": -2.0230725510376524}, {"dt": "2017-12-01T00:00:00", "TEU-LOADED-EXPORT": 11.29866811459963}, {"dt": "2018-01-01T00:00:00", "TEU-LOADED-EXPORT": -10.650834479870785}, {"dt": "2018-02-01T00:00:00", "TEU-LOADED-EXPORT": 4.173705804271743}, {"dt": "2018-03-01T00:00:00", "TEU-LOADED-EXPORT": 4.676816353220459}, {"dt": "2018-04-01T00:00:00", "TEU-LOADED-EXPORT": 19.748621302924786}, {"dt": "2018-05-01T00:00:00", "TEU-LOADED-EXPORT": 6.747588102258728}, {"dt": "2018-06-01T00:00:00", "TEU-LOADED-EXPORT": 3.846564640900829}, {"dt": "2018-07-01T00:00:00", "TEU-LOADED-EXPORT": 9.515554574967688}, {"dt": "2018-08-01T00:00:00", "TEU-LOADED-EXPORT": 2.7401899659785345}, {"dt": "2018-09-01T00:00:00", "TEU-LOADED-EXPORT": -15.113249148125874}, {"dt": "2018-10-01T00:00:00", "TEU-LOADED-EXPORT": -1.440596339880229}, {"dt": "2018-11-01T00:00:00", "TEU-LOADED-EXPORT": -2.94597221786711}, {"dt": "2018-12-01T00:00:00", "TEU-LOADED-EXPORT": -12.65837315081859}, {"dt": "2019-01-01T00:00:00", "TEU-LOADED-EXPORT": 6.701703879757637}, {"dt": "2019-02-01T00:00:00", "TEU-LOADED-EXPORT": -10.102370299581542}, {"dt": "2019-03-01T00:00:00", "TEU-LOADED-EXPORT": 5.523038689789095}, {"dt": "2019-04-01T00:00:00", "TEU-LOADED-EXPORT": -8.524180967238692}, {"dt": "2019-05-01T00:00:00", "TEU-LOADED-EXPORT": -4.260083673031534}, {"dt": "2019-06-01T00:00:00", "TEU-LOADED-EXPORT": -2.297972377314139}, {"dt": "2019-07-01T00:00:00", "TEU-LOADED-EXPORT": 3.790364358487297}, {"dt": "2019-08-01T00:00:00", "TEU-LOADED-EXPORT": 10.770314209083143}, {"dt": "2019-09-01T00:00:00", "TEU-LOADED-EXPORT": 11.695577150122594}, {"dt": "2019-10-01T00:00:00", "TEU-LOADED-EXPORT": -0.924863678209753}, {"dt": "2019-11-01T00:00:00", "TEU-LOADED-EXPORT": 1.4991195903268029}, {"dt": "2019-12-01T00:00:00", "TEU-LOADED-EXPORT": 1.6953886086970904}, {"dt": "2020-01-01T00:00:00", "TEU-LOADED-EXPORT": 7.458823529411762}, {"dt": "2020-02-01T00:00:00", "TEU-LOADED-EXPORT": 19.568018554907706}, {"dt": "2020-03-01T00:00:00", "TEU-LOADED-EXPORT": -5.954648409348295}, {"dt": "2020-04-01T00:00:00", "TEU-LOADED-EXPORT": -22.762807831366395}, {"dt": "2020-05-01T00:00:00", "TEU-LOADED-EXPORT": -17.405005672348352}, {"dt": "2020-06-01T00:00:00", "TEU-LOADED-EXPORT": -12.874458614051976}, {"dt": "2020-07-01T00:00:00", "TEU-LOADED-EXPORT": -20.100934475778498}, {"dt": "2020-08-01T00:00:00", "TEU-LOADED-EXPORT": -9.606774250273919}, {"dt": "2020-09-01T00:00:00", "TEU-LOADED-EXPORT": -2.0310924643054618}, {"dt": "2020-10-01T00:00:00", "TEU-LOADED-EXPORT": -1.2279849039341317}, {"dt": "2020-11-01T00:00:00", "TEU-LOADED-EXPORT": 2.5719788002737554}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[44]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doYoyChart</span><span class="p">(</span><span class="n">df_ch</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;TEU-LOADED-IMPORT&#39;</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Charleston&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[44]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-fd020922777a4506addccb0285270b4e"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-fd020922777a4506addccb0285270b4e") {
      outputDiv = document.getElementById("altair-viz-fd020922777a4506addccb0285270b4e");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-31e4bb0f9d9b375349e892793c098fc4"}, "mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['nolarge'] < 0"}, "value": "royalblue"}, "tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "nolarge", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Year-over-Year Volume Growth [%]"}, "field": "nolarge"}}, "height": 400, "title": "Port of Charleston TEU-LOADED-IMPORT Container Volume Growth", "transform": [{"calculate": "datum['TEU-LOADED-IMPORT'] > 400 ? NaN : datum['TEU-LOADED-IMPORT']", "as": "nolarge"}], "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-31e4bb0f9d9b375349e892793c098fc4": [{"dt": "1997-07-01T00:00:00", "TEU-LOADED-IMPORT": null}, {"dt": "1997-08-01T00:00:00", "TEU-LOADED-IMPORT": null}, {"dt": "1997-09-01T00:00:00", "TEU-LOADED-IMPORT": null}, {"dt": "1997-10-01T00:00:00", "TEU-LOADED-IMPORT": null}, {"dt": "1997-11-01T00:00:00", "TEU-LOADED-IMPORT": null}, {"dt": "1997-12-01T00:00:00", "TEU-LOADED-IMPORT": null}, {"dt": "1998-01-01T00:00:00", "TEU-LOADED-IMPORT": null}, {"dt": "1998-02-01T00:00:00", "TEU-LOADED-IMPORT": null}, {"dt": "1998-03-01T00:00:00", "TEU-LOADED-IMPORT": null}, {"dt": "1998-04-01T00:00:00", "TEU-LOADED-IMPORT": null}, {"dt": "1998-05-01T00:00:00", "TEU-LOADED-IMPORT": null}, {"dt": "1998-06-01T00:00:00", "TEU-LOADED-IMPORT": null}, {"dt": "1998-07-01T00:00:00", "TEU-LOADED-IMPORT": 5.48361144992604}, {"dt": "1998-08-01T00:00:00", "TEU-LOADED-IMPORT": 20.451501283625404}, {"dt": "1998-09-01T00:00:00", "TEU-LOADED-IMPORT": 10.380324402526231}, {"dt": "1998-10-01T00:00:00", "TEU-LOADED-IMPORT": 6.026078628784726}, {"dt": "1998-11-01T00:00:00", "TEU-LOADED-IMPORT": 25.937220836028718}, {"dt": "1998-12-01T00:00:00", "TEU-LOADED-IMPORT": 1.4421609522840662}, {"dt": "1999-01-01T00:00:00", "TEU-LOADED-IMPORT": 1.3453160533742459}, {"dt": "1999-02-01T00:00:00", "TEU-LOADED-IMPORT": 4.011461318051568}, {"dt": "1999-03-01T00:00:00", "TEU-LOADED-IMPORT": 12.194827461302559}, {"dt": "1999-04-01T00:00:00", "TEU-LOADED-IMPORT": 10.569243429013998}, {"dt": "1999-05-01T00:00:00", "TEU-LOADED-IMPORT": 20.402577269644407}, {"dt": "1999-06-01T00:00:00", "TEU-LOADED-IMPORT": 31.39614943261506}, {"dt": "1999-07-01T00:00:00", "TEU-LOADED-IMPORT": 24.8560743984648}, {"dt": "1999-08-01T00:00:00", "TEU-LOADED-IMPORT": 16.01297347387931}, {"dt": "1999-09-01T00:00:00", "TEU-LOADED-IMPORT": 22.939456571054095}, {"dt": "1999-10-01T00:00:00", "TEU-LOADED-IMPORT": 10.065544155453132}, {"dt": "1999-11-01T00:00:00", "TEU-LOADED-IMPORT": 18.689920015654437}, {"dt": "1999-12-01T00:00:00", "TEU-LOADED-IMPORT": 13.171025248852896}, {"dt": "2000-01-01T00:00:00", "TEU-LOADED-IMPORT": 26.49778306477777}, {"dt": "2000-02-01T00:00:00", "TEU-LOADED-IMPORT": 16.874577680752644}, {"dt": "2000-03-01T00:00:00", "TEU-LOADED-IMPORT": 12.119842448505192}, {"dt": "2000-04-01T00:00:00", "TEU-LOADED-IMPORT": 21.10977344861551}, {"dt": "2000-05-01T00:00:00", "TEU-LOADED-IMPORT": 3.80026957973727}, {"dt": "2000-06-01T00:00:00", "TEU-LOADED-IMPORT": 8.337376521047224}, {"dt": "2000-07-01T00:00:00", "TEU-LOADED-IMPORT": 11.34800685727797}, {"dt": "2000-08-01T00:00:00", "TEU-LOADED-IMPORT": 12.045450006989245}, {"dt": "2000-09-01T00:00:00", "TEU-LOADED-IMPORT": 6.730907227063043}, {"dt": "2000-10-01T00:00:00", "TEU-LOADED-IMPORT": 10.9546956210677}, {"dt": "2000-11-01T00:00:00", "TEU-LOADED-IMPORT": 9.069738686011043}, {"dt": "2000-12-01T00:00:00", "TEU-LOADED-IMPORT": 23.083569656150303}, {"dt": "2001-01-01T00:00:00", "TEU-LOADED-IMPORT": -1.198999764902009}, {"dt": "2001-02-01T00:00:00", "TEU-LOADED-IMPORT": 13.361944364145772}, {"dt": "2001-03-01T00:00:00", "TEU-LOADED-IMPORT": 7.269830300238045}, {"dt": "2001-04-01T00:00:00", "TEU-LOADED-IMPORT": -12.456397187731572}, {"dt": "2001-05-01T00:00:00", "TEU-LOADED-IMPORT": 3.205674858516172}, {"dt": "2001-06-01T00:00:00", "TEU-LOADED-IMPORT": -7.733371549361379}, {"dt": "2001-07-01T00:00:00", "TEU-LOADED-IMPORT": -6.080554965668583}, {"dt": "2001-08-01T00:00:00", "TEU-LOADED-IMPORT": -3.0708086046801752}, {"dt": "2001-09-01T00:00:00", "TEU-LOADED-IMPORT": -2.5932613623266376}, {"dt": "2001-10-01T00:00:00", "TEU-LOADED-IMPORT": 2.133550797473882}, {"dt": "2001-11-01T00:00:00", "TEU-LOADED-IMPORT": -6.271138403401045}, {"dt": "2001-12-01T00:00:00", "TEU-LOADED-IMPORT": -9.338493384933855}, {"dt": "2002-01-01T00:00:00", "TEU-LOADED-IMPORT": -4.151163796833091}, {"dt": "2002-02-01T00:00:00", "TEU-LOADED-IMPORT": -5.478619066300505}, {"dt": "2002-03-01T00:00:00", "TEU-LOADED-IMPORT": -0.8411030977648171}, {"dt": "2002-04-01T00:00:00", "TEU-LOADED-IMPORT": 10.26075107872082}, {"dt": "2002-05-01T00:00:00", "TEU-LOADED-IMPORT": 11.5981220657277}, {"dt": "2002-06-01T00:00:00", "TEU-LOADED-IMPORT": 14.553644235623043}, {"dt": "2002-07-01T00:00:00", "TEU-LOADED-IMPORT": 14.87790171842025}, {"dt": "2002-08-01T00:00:00", "TEU-LOADED-IMPORT": 15.978376788144}, {"dt": "2002-09-01T00:00:00", "TEU-LOADED-IMPORT": 12.353080381793792}, {"dt": "2002-10-01T00:00:00", "TEU-LOADED-IMPORT": 9.639024027927356}, {"dt": "2002-11-01T00:00:00", "TEU-LOADED-IMPORT": 19.564165625125995}, {"dt": "2002-12-01T00:00:00", "TEU-LOADED-IMPORT": 21.541882581849237}, {"dt": "2003-01-01T00:00:00", "TEU-LOADED-IMPORT": 29.05053149473018}, {"dt": "2003-02-01T00:00:00", "TEU-LOADED-IMPORT": 20.663249424118547}, {"dt": "2003-03-01T00:00:00", "TEU-LOADED-IMPORT": 11.458427331299958}, {"dt": "2003-04-01T00:00:00", "TEU-LOADED-IMPORT": 16.604564944670173}, {"dt": "2003-05-01T00:00:00", "TEU-LOADED-IMPORT": 2.8320936963618593}, {"dt": "2003-06-01T00:00:00", "TEU-LOADED-IMPORT": 5.718450222026372}, {"dt": "2003-07-01T00:00:00", "TEU-LOADED-IMPORT": 8.150177142107328}, {"dt": "2003-08-01T00:00:00", "TEU-LOADED-IMPORT": 7.299131206798148}, {"dt": "2003-09-01T00:00:00", "TEU-LOADED-IMPORT": 4.967352383627044}, {"dt": "2003-10-01T00:00:00", "TEU-LOADED-IMPORT": 15.027521381996788}, {"dt": "2003-11-01T00:00:00", "TEU-LOADED-IMPORT": 2.419450017703295}, {"dt": "2003-12-01T00:00:00", "TEU-LOADED-IMPORT": -4.124671251449763}, {"dt": "2004-01-01T00:00:00", "TEU-LOADED-IMPORT": 6.164635106066707}, {"dt": "2004-02-01T00:00:00", "TEU-LOADED-IMPORT": 4.509493670886067}, {"dt": "2004-03-01T00:00:00", "TEU-LOADED-IMPORT": 10.607532627351922}, {"dt": "2004-04-01T00:00:00", "TEU-LOADED-IMPORT": 9.414692894419918}, {"dt": "2004-05-01T00:00:00", "TEU-LOADED-IMPORT": 18.066078646353233}, {"dt": "2004-06-01T00:00:00", "TEU-LOADED-IMPORT": 4.092920353982299}, {"dt": "2004-07-01T00:00:00", "TEU-LOADED-IMPORT": 19.558062999529845}, {"dt": "2004-08-01T00:00:00", "TEU-LOADED-IMPORT": 11.313534278959803}, {"dt": "2004-09-01T00:00:00", "TEU-LOADED-IMPORT": 16.357312464466077}, {"dt": "2004-10-01T00:00:00", "TEU-LOADED-IMPORT": 15.5996937483436}, {"dt": "2004-11-01T00:00:00", "TEU-LOADED-IMPORT": 14.595199683929817}, {"dt": "2004-12-01T00:00:00", "TEU-LOADED-IMPORT": 24.75805901996866}, {"dt": "2005-01-01T00:00:00", "TEU-LOADED-IMPORT": 16.555200474417674}, {"dt": "2005-02-01T00:00:00", "TEU-LOADED-IMPORT": 13.417042425040314}, {"dt": "2005-03-01T00:00:00", "TEU-LOADED-IMPORT": 14.76818574419183}, {"dt": "2005-04-01T00:00:00", "TEU-LOADED-IMPORT": 17.614253426869}, {"dt": "2005-05-01T00:00:00", "TEU-LOADED-IMPORT": 13.248970879707267}, {"dt": "2005-06-01T00:00:00", "TEU-LOADED-IMPORT": 7.865514639067284}, {"dt": "2005-07-01T00:00:00", "TEU-LOADED-IMPORT": 1.3154389659152832}, {"dt": "2005-08-01T00:00:00", "TEU-LOADED-IMPORT": 3.518855276955546}, {"dt": "2005-09-01T00:00:00", "TEU-LOADED-IMPORT": 0.021556679696477232}, {"dt": "2005-10-01T00:00:00", "TEU-LOADED-IMPORT": -2.5180543349509033}, {"dt": "2005-11-01T00:00:00", "TEU-LOADED-IMPORT": 8.109234040108038}, {"dt": "2005-12-01T00:00:00", "TEU-LOADED-IMPORT": -2.1209182907010127}, {"dt": "2006-01-01T00:00:00", "TEU-LOADED-IMPORT": 6.439029905591043}, {"dt": "2006-02-01T00:00:00", "TEU-LOADED-IMPORT": 1.5278805554346464}, {"dt": "2006-03-01T00:00:00", "TEU-LOADED-IMPORT": -4.324145056571038}, {"dt": "2006-04-01T00:00:00", "TEU-LOADED-IMPORT": 0.31819316196655123}, {"dt": "2006-05-01T00:00:00", "TEU-LOADED-IMPORT": -6.862241151417237}, {"dt": "2006-06-01T00:00:00", "TEU-LOADED-IMPORT": 12.090924667313963}, {"dt": "2006-07-01T00:00:00", "TEU-LOADED-IMPORT": -1.6539376486791046}, {"dt": "2006-08-01T00:00:00", "TEU-LOADED-IMPORT": -4.14422731702313}, {"dt": "2006-09-01T00:00:00", "TEU-LOADED-IMPORT": 11.48579720973002}, {"dt": "2006-10-01T00:00:00", "TEU-LOADED-IMPORT": -0.938120622974814}, {"dt": "2006-11-01T00:00:00", "TEU-LOADED-IMPORT": -14.069123138046958}, {"dt": "2006-12-01T00:00:00", "TEU-LOADED-IMPORT": -2.94963024975583}, {"dt": "2007-01-01T00:00:00", "TEU-LOADED-IMPORT": -16.37322073507542}, {"dt": "2007-02-01T00:00:00", "TEU-LOADED-IMPORT": -14.095638255302124}, {"dt": "2007-03-01T00:00:00", "TEU-LOADED-IMPORT": -4.874211740237577}, {"dt": "2007-04-01T00:00:00", "TEU-LOADED-IMPORT": -15.877853100317186}, {"dt": "2007-05-01T00:00:00", "TEU-LOADED-IMPORT": -16.342755022930056}, {"dt": "2007-06-01T00:00:00", "TEU-LOADED-IMPORT": -12.093651278915729}, {"dt": "2007-07-01T00:00:00", "TEU-LOADED-IMPORT": -19.951877172210974}, {"dt": "2007-08-01T00:00:00", "TEU-LOADED-IMPORT": -9.51763069185082}, {"dt": "2007-09-01T00:00:00", "TEU-LOADED-IMPORT": -16.586547755596513}, {"dt": "2007-10-01T00:00:00", "TEU-LOADED-IMPORT": -19.01131657390066}, {"dt": "2007-11-01T00:00:00", "TEU-LOADED-IMPORT": -7.481173359724136}, {"dt": "2007-12-01T00:00:00", "TEU-LOADED-IMPORT": -14.421473345218239}, {"dt": "2008-01-01T00:00:00", "TEU-LOADED-IMPORT": -14.216986075165527}, {"dt": "2008-02-01T00:00:00", "TEU-LOADED-IMPORT": 0.7719309920311446}, {"dt": "2008-03-01T00:00:00", "TEU-LOADED-IMPORT": -12.149794677019244}, {"dt": "2008-04-01T00:00:00", "TEU-LOADED-IMPORT": -11.795061363300308}, {"dt": "2008-05-01T00:00:00", "TEU-LOADED-IMPORT": 4.195463684342804}, {"dt": "2008-06-01T00:00:00", "TEU-LOADED-IMPORT": -17.32357629329083}, {"dt": "2008-07-01T00:00:00", "TEU-LOADED-IMPORT": -4.367256707540113}, {"dt": "2008-08-01T00:00:00", "TEU-LOADED-IMPORT": -7.668425954672465}, {"dt": "2008-09-01T00:00:00", "TEU-LOADED-IMPORT": -15.516895075938997}, {"dt": "2008-10-01T00:00:00", "TEU-LOADED-IMPORT": 4.048596182659114}, {"dt": "2008-11-01T00:00:00", "TEU-LOADED-IMPORT": -15.129280807608092}, {"dt": "2008-12-01T00:00:00", "TEU-LOADED-IMPORT": -25.446451070978583}, {"dt": "2009-01-01T00:00:00", "TEU-LOADED-IMPORT": -17.491254372813593}, {"dt": "2009-02-01T00:00:00", "TEU-LOADED-IMPORT": -31.008865336040813}, {"dt": "2009-03-01T00:00:00", "TEU-LOADED-IMPORT": -37.60090616125842}, {"dt": "2009-04-01T00:00:00", "TEU-LOADED-IMPORT": -35.20862320419761}, {"dt": "2009-05-01T00:00:00", "TEU-LOADED-IMPORT": -39.01560262304967}, {"dt": "2009-06-01T00:00:00", "TEU-LOADED-IMPORT": -33.08386644465866}, {"dt": "2009-07-01T00:00:00", "TEU-LOADED-IMPORT": -21.850626132943074}, {"dt": "2009-08-01T00:00:00", "TEU-LOADED-IMPORT": -36.43961955999616}, {"dt": "2009-09-01T00:00:00", "TEU-LOADED-IMPORT": -25.83942940746159}, {"dt": "2009-10-01T00:00:00", "TEU-LOADED-IMPORT": -26.713100641727973}, {"dt": "2009-11-01T00:00:00", "TEU-LOADED-IMPORT": -21.48919829063195}, {"dt": "2009-12-01T00:00:00", "TEU-LOADED-IMPORT": -8.576321600793191}, {"dt": "2010-01-01T00:00:00", "TEU-LOADED-IMPORT": -10.07021558202661}, {"dt": "2010-02-01T00:00:00", "TEU-LOADED-IMPORT": -1.7851160564728352}, {"dt": "2010-03-01T00:00:00", "TEU-LOADED-IMPORT": 8.743895891391617}, {"dt": "2010-04-01T00:00:00", "TEU-LOADED-IMPORT": 24.520051746442427}, {"dt": "2010-05-01T00:00:00", "TEU-LOADED-IMPORT": 19.85712166905622}, {"dt": "2010-06-01T00:00:00", "TEU-LOADED-IMPORT": 20.600330024358946}, {"dt": "2010-07-01T00:00:00", "TEU-LOADED-IMPORT": 14.085376234252633}, {"dt": "2010-08-01T00:00:00", "TEU-LOADED-IMPORT": 28.37313583232568}, {"dt": "2010-09-01T00:00:00", "TEU-LOADED-IMPORT": 18.818278217553196}, {"dt": "2010-10-01T00:00:00", "TEU-LOADED-IMPORT": 7.233624500779534}, {"dt": "2010-11-01T00:00:00", "TEU-LOADED-IMPORT": 12.79504351970302}, {"dt": "2010-12-01T00:00:00", "TEU-LOADED-IMPORT": 7.132998126786938}, {"dt": "2011-01-01T00:00:00", "TEU-LOADED-IMPORT": 16.635901017760936}, {"dt": "2011-02-01T00:00:00", "TEU-LOADED-IMPORT": 5.384465451710363}, {"dt": "2011-03-01T00:00:00", "TEU-LOADED-IMPORT": 15.540874144781691}, {"dt": "2011-04-01T00:00:00", "TEU-LOADED-IMPORT": 1.4357844868784664}, {"dt": "2011-05-01T00:00:00", "TEU-LOADED-IMPORT": 2.2727741456472828}, {"dt": "2011-06-01T00:00:00", "TEU-LOADED-IMPORT": 11.760489966119358}, {"dt": "2011-07-01T00:00:00", "TEU-LOADED-IMPORT": -3.980526384510641}, {"dt": "2011-08-01T00:00:00", "TEU-LOADED-IMPORT": 3.8010949979395248}, {"dt": "2011-09-01T00:00:00", "TEU-LOADED-IMPORT": 11.060146942841719}, {"dt": "2011-10-01T00:00:00", "TEU-LOADED-IMPORT": -0.3365863373829936}, {"dt": "2011-11-01T00:00:00", "TEU-LOADED-IMPORT": 11.926258672834011}, {"dt": "2011-12-01T00:00:00", "TEU-LOADED-IMPORT": 10.932683016610678}, {"dt": "2012-01-01T00:00:00", "TEU-LOADED-IMPORT": 5.011014393566748}, {"dt": "2012-02-01T00:00:00", "TEU-LOADED-IMPORT": 14.9165395107967}, {"dt": "2012-03-01T00:00:00", "TEU-LOADED-IMPORT": 14.164784404696507}, {"dt": "2012-04-01T00:00:00", "TEU-LOADED-IMPORT": 8.35142775205866}, {"dt": "2012-05-01T00:00:00", "TEU-LOADED-IMPORT": 20.651757446207817}, {"dt": "2012-06-01T00:00:00", "TEU-LOADED-IMPORT": -0.0038865893235429105}, {"dt": "2012-07-01T00:00:00", "TEU-LOADED-IMPORT": 14.328729335431367}, {"dt": "2012-08-01T00:00:00", "TEU-LOADED-IMPORT": 14.696763460375074}, {"dt": "2012-09-01T00:00:00", "TEU-LOADED-IMPORT": -0.44663714002728394}, {"dt": "2012-10-01T00:00:00", "TEU-LOADED-IMPORT": 4.3184588637317445}, {"dt": "2012-11-01T00:00:00", "TEU-LOADED-IMPORT": 8.199717867715716}, {"dt": "2012-12-01T00:00:00", "TEU-LOADED-IMPORT": 0.42930026131320353}, {"dt": "2013-01-01T00:00:00", "TEU-LOADED-IMPORT": 1.8167006109979678}, {"dt": "2013-02-01T00:00:00", "TEU-LOADED-IMPORT": 10.817607532289863}, {"dt": "2013-03-01T00:00:00", "TEU-LOADED-IMPORT": -2.170968201910739}, {"dt": "2013-04-01T00:00:00", "TEU-LOADED-IMPORT": 1.4273560828055532}, {"dt": "2013-05-01T00:00:00", "TEU-LOADED-IMPORT": -2.438575965234835}, {"dt": "2013-06-01T00:00:00", "TEU-LOADED-IMPORT": -0.1787900577180923}, {"dt": "2013-07-01T00:00:00", "TEU-LOADED-IMPORT": -3.7755084702564057}, {"dt": "2013-08-01T00:00:00", "TEU-LOADED-IMPORT": -1.0697214438767144}, {"dt": "2013-09-01T00:00:00", "TEU-LOADED-IMPORT": 3.1367322420783994}, {"dt": "2013-10-01T00:00:00", "TEU-LOADED-IMPORT": 12.687253361940165}, {"dt": "2013-11-01T00:00:00", "TEU-LOADED-IMPORT": 0.3764368871423951}, {"dt": "2013-12-01T00:00:00", "TEU-LOADED-IMPORT": 7.595250387196706}, {"dt": "2014-01-01T00:00:00", "TEU-LOADED-IMPORT": 8.86741878700592}, {"dt": "2014-02-01T00:00:00", "TEU-LOADED-IMPORT": -3.4747562768912332}, {"dt": "2014-03-01T00:00:00", "TEU-LOADED-IMPORT": 14.7469300003644}, {"dt": "2014-04-01T00:00:00", "TEU-LOADED-IMPORT": 17.39422180801491}, {"dt": "2014-05-01T00:00:00", "TEU-LOADED-IMPORT": 10.849565708999332}, {"dt": "2014-06-01T00:00:00", "TEU-LOADED-IMPORT": 20.913073104253876}, {"dt": "2014-07-01T00:00:00", "TEU-LOADED-IMPORT": 16.34617082516643}, {"dt": "2014-08-01T00:00:00", "TEU-LOADED-IMPORT": 9.050165775311969}, {"dt": "2014-09-01T00:00:00", "TEU-LOADED-IMPORT": 14.036364960049497}, {"dt": "2014-10-01T00:00:00", "TEU-LOADED-IMPORT": 19.551211219719498}, {"dt": "2014-11-01T00:00:00", "TEU-LOADED-IMPORT": 9.92261676088031}, {"dt": "2014-12-01T00:00:00", "TEU-LOADED-IMPORT": 16.69961422566839}, {"dt": "2015-01-01T00:00:00", "TEU-LOADED-IMPORT": 19.61598530087276}, {"dt": "2015-02-01T00:00:00", "TEU-LOADED-IMPORT": 15.642573680151962}, {"dt": "2015-03-01T00:00:00", "TEU-LOADED-IMPORT": 10.215941568751985}, {"dt": "2015-04-01T00:00:00", "TEU-LOADED-IMPORT": 12.354323457495786}, {"dt": "2015-05-01T00:00:00", "TEU-LOADED-IMPORT": 17.5646018793274}, {"dt": "2015-06-01T00:00:00", "TEU-LOADED-IMPORT": 15.18025343359042}, {"dt": "2015-07-01T00:00:00", "TEU-LOADED-IMPORT": 14.840335114133074}, {"dt": "2015-08-01T00:00:00", "TEU-LOADED-IMPORT": 8.210471636135864}, {"dt": "2015-09-01T00:00:00", "TEU-LOADED-IMPORT": 12.402840954433003}, {"dt": "2015-10-01T00:00:00", "TEU-LOADED-IMPORT": 5.289651053664368}, {"dt": "2015-11-01T00:00:00", "TEU-LOADED-IMPORT": 5.6551333899179435}, {"dt": "2015-12-01T00:00:00", "TEU-LOADED-IMPORT": 9.172093941188075}, {"dt": "2016-01-01T00:00:00", "TEU-LOADED-IMPORT": 1.8340732093208967}, {"dt": "2016-02-01T00:00:00", "TEU-LOADED-IMPORT": 12.996454477442022}, {"dt": "2016-03-01T00:00:00", "TEU-LOADED-IMPORT": 7.021638286224685}, {"dt": "2016-04-01T00:00:00", "TEU-LOADED-IMPORT": -2.7556774020321306}, {"dt": "2016-05-01T00:00:00", "TEU-LOADED-IMPORT": 1.5196729285254174}, {"dt": "2016-06-01T00:00:00", "TEU-LOADED-IMPORT": 0.40120220870902834}, {"dt": "2016-07-01T00:00:00", "TEU-LOADED-IMPORT": 7.2079930219649535}, {"dt": "2016-08-01T00:00:00", "TEU-LOADED-IMPORT": 9.030454487695373}, {"dt": "2016-09-01T00:00:00", "TEU-LOADED-IMPORT": 5.087609689603267}, {"dt": "2016-10-01T00:00:00", "TEU-LOADED-IMPORT": 5.80044836993221}, {"dt": "2016-11-01T00:00:00", "TEU-LOADED-IMPORT": 16.42120185870679}, {"dt": "2016-12-01T00:00:00", "TEU-LOADED-IMPORT": 6.676609270725065}, {"dt": "2017-01-01T00:00:00", "TEU-LOADED-IMPORT": 25.34580285089374}, {"dt": "2017-02-01T00:00:00", "TEU-LOADED-IMPORT": 6.301365919656865}, {"dt": "2017-03-01T00:00:00", "TEU-LOADED-IMPORT": 9.219524014645696}, {"dt": "2017-04-01T00:00:00", "TEU-LOADED-IMPORT": 20.467062909624634}, {"dt": "2017-05-01T00:00:00", "TEU-LOADED-IMPORT": 1.518938167691819}, {"dt": "2017-06-01T00:00:00", "TEU-LOADED-IMPORT": 13.206259920358665}, {"dt": "2017-07-01T00:00:00", "TEU-LOADED-IMPORT": -1.835552268244578}, {"dt": "2017-08-01T00:00:00", "TEU-LOADED-IMPORT": 1.1136578480504422}, {"dt": "2017-09-01T00:00:00", "TEU-LOADED-IMPORT": 6.946452458484775}, {"dt": "2017-10-01T00:00:00", "TEU-LOADED-IMPORT": 3.046935831812214}, {"dt": "2017-11-01T00:00:00", "TEU-LOADED-IMPORT": 3.612501691246117}, {"dt": "2017-12-01T00:00:00", "TEU-LOADED-IMPORT": 13.570954485758268}, {"dt": "2018-01-01T00:00:00", "TEU-LOADED-IMPORT": -5.931550699174471}, {"dt": "2018-02-01T00:00:00", "TEU-LOADED-IMPORT": -4.6821474510865935}, {"dt": "2018-03-01T00:00:00", "TEU-LOADED-IMPORT": 9.05382254705005}, {"dt": "2018-04-01T00:00:00", "TEU-LOADED-IMPORT": -5.575593809184887}, {"dt": "2018-05-01T00:00:00", "TEU-LOADED-IMPORT": 8.774458532105411}, {"dt": "2018-06-01T00:00:00", "TEU-LOADED-IMPORT": 5.0536854145399435}, {"dt": "2018-07-01T00:00:00", "TEU-LOADED-IMPORT": 9.943363765367753}, {"dt": "2018-08-01T00:00:00", "TEU-LOADED-IMPORT": 15.990676587733565}, {"dt": "2018-09-01T00:00:00", "TEU-LOADED-IMPORT": 1.3038534428300608}, {"dt": "2018-10-01T00:00:00", "TEU-LOADED-IMPORT": 15.13601228817758}, {"dt": "2018-11-01T00:00:00", "TEU-LOADED-IMPORT": 9.85244189083312}, {"dt": "2018-12-01T00:00:00", "TEU-LOADED-IMPORT": 10.763090160774901}, {"dt": "2019-01-01T00:00:00", "TEU-LOADED-IMPORT": 12.713479768194546}, {"dt": "2019-02-01T00:00:00", "TEU-LOADED-IMPORT": 10.327144622640173}, {"dt": "2019-03-01T00:00:00", "TEU-LOADED-IMPORT": 4.963665336844358}, {"dt": "2019-04-01T00:00:00", "TEU-LOADED-IMPORT": 12.008942829766855}, {"dt": "2019-05-01T00:00:00", "TEU-LOADED-IMPORT": 3.2036774276768654}, {"dt": "2019-06-01T00:00:00", "TEU-LOADED-IMPORT": 0.7726889575723428}, {"dt": "2019-07-01T00:00:00", "TEU-LOADED-IMPORT": 5.891557870449682}, {"dt": "2019-08-01T00:00:00", "TEU-LOADED-IMPORT": 13.96945974892072}, {"dt": "2019-09-01T00:00:00", "TEU-LOADED-IMPORT": 12.38307849642064}, {"dt": "2019-10-01T00:00:00", "TEU-LOADED-IMPORT": 2.5337020022163204}, {"dt": "2019-11-01T00:00:00", "TEU-LOADED-IMPORT": -1.5928677563150084}, {"dt": "2019-12-01T00:00:00", "TEU-LOADED-IMPORT": -8.194973001493056}, {"dt": "2020-01-01T00:00:00", "TEU-LOADED-IMPORT": 2.9032880474877176}, {"dt": "2020-02-01T00:00:00", "TEU-LOADED-IMPORT": 13.533418311509383}, {"dt": "2020-03-01T00:00:00", "TEU-LOADED-IMPORT": -18.14912516823688}, {"dt": "2020-04-01T00:00:00", "TEU-LOADED-IMPORT": -5.44739093242087}, {"dt": "2020-05-01T00:00:00", "TEU-LOADED-IMPORT": -16.972127850560735}, {"dt": "2020-06-01T00:00:00", "TEU-LOADED-IMPORT": -18.937915330638045}, {"dt": "2020-07-01T00:00:00", "TEU-LOADED-IMPORT": -12.056263281089885}, {"dt": "2020-08-01T00:00:00", "TEU-LOADED-IMPORT": -6.060782205171433}, {"dt": "2020-09-01T00:00:00", "TEU-LOADED-IMPORT": 0.3196058194892881}, {"dt": "2020-10-01T00:00:00", "TEU-LOADED-IMPORT": 1.3231621581918596}, {"dt": "2020-11-01T00:00:00", "TEU-LOADED-IMPORT": 12.784924805218335}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[45]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doYoyChart</span><span class="p">(</span><span class="n">df_ch</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;TEU-TOTAL&#39;</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Charleston&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[45]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-78f3726b603047a1a22ff78513d9856d"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-78f3726b603047a1a22ff78513d9856d") {
      outputDiv = document.getElementById("altair-viz-78f3726b603047a1a22ff78513d9856d");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-92973e689b8090c10b6f5cb5c12544f5"}, "mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['nolarge'] < 0"}, "value": "royalblue"}, "tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "nolarge", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Year-over-Year Volume Growth [%]"}, "field": "nolarge"}}, "height": 400, "title": "Port of Charleston TEU-TOTAL Container Volume Growth", "transform": [{"calculate": "datum['TEU-TOTAL'] > 400 ? NaN : datum['TEU-TOTAL']", "as": "nolarge"}], "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-92973e689b8090c10b6f5cb5c12544f5": [{"dt": "1997-07-01T00:00:00", "TEU-TOTAL": null}, {"dt": "1997-08-01T00:00:00", "TEU-TOTAL": null}, {"dt": "1997-09-01T00:00:00", "TEU-TOTAL": null}, {"dt": "1997-10-01T00:00:00", "TEU-TOTAL": null}, {"dt": "1997-11-01T00:00:00", "TEU-TOTAL": null}, {"dt": "1997-12-01T00:00:00", "TEU-TOTAL": null}, {"dt": "1998-01-01T00:00:00", "TEU-TOTAL": null}, {"dt": "1998-02-01T00:00:00", "TEU-TOTAL": null}, {"dt": "1998-03-01T00:00:00", "TEU-TOTAL": null}, {"dt": "1998-04-01T00:00:00", "TEU-TOTAL": null}, {"dt": "1998-05-01T00:00:00", "TEU-TOTAL": null}, {"dt": "1998-06-01T00:00:00", "TEU-TOTAL": null}, {"dt": "1998-07-01T00:00:00", "TEU-TOTAL": 0.9868879205714443}, {"dt": "1998-08-01T00:00:00", "TEU-TOTAL": 10.425732448312509}, {"dt": "1998-09-01T00:00:00", "TEU-TOTAL": -1.272677766460606}, {"dt": "1998-10-01T00:00:00", "TEU-TOTAL": 2.6697692088517355}, {"dt": "1998-11-01T00:00:00", "TEU-TOTAL": 11.355288615741177}, {"dt": "1998-12-01T00:00:00", "TEU-TOTAL": -5.083908293804806}, {"dt": "1999-01-01T00:00:00", "TEU-TOTAL": 0.059050136377702955}, {"dt": "1999-02-01T00:00:00", "TEU-TOTAL": 1.8284106891701901}, {"dt": "1999-03-01T00:00:00", "TEU-TOTAL": 3.8631621429000784}, {"dt": "1999-04-01T00:00:00", "TEU-TOTAL": 16.828898983344143}, {"dt": "1999-05-01T00:00:00", "TEU-TOTAL": 14.919831985908495}, {"dt": "1999-06-01T00:00:00", "TEU-TOTAL": 28.676860266551518}, {"dt": "1999-07-01T00:00:00", "TEU-TOTAL": 22.680524086296927}, {"dt": "1999-08-01T00:00:00", "TEU-TOTAL": 16.678168016561944}, {"dt": "1999-09-01T00:00:00", "TEU-TOTAL": 28.858313159480687}, {"dt": "1999-10-01T00:00:00", "TEU-TOTAL": 23.034939547275222}, {"dt": "1999-11-01T00:00:00", "TEU-TOTAL": 20.560087711147858}, {"dt": "1999-12-01T00:00:00", "TEU-TOTAL": 21.15794156341988}, {"dt": "2000-01-01T00:00:00", "TEU-TOTAL": 21.226768585131907}, {"dt": "2000-02-01T00:00:00", "TEU-TOTAL": 15.709211861540195}, {"dt": "2000-03-01T00:00:00", "TEU-TOTAL": 16.362704409795125}, {"dt": "2000-04-01T00:00:00", "TEU-TOTAL": 9.461210886872795}, {"dt": "2000-05-01T00:00:00", "TEU-TOTAL": 3.064721510430579}, {"dt": "2000-06-01T00:00:00", "TEU-TOTAL": 9.915035770398273}, {"dt": "2000-07-01T00:00:00", "TEU-TOTAL": 14.669204146692039}, {"dt": "2000-08-01T00:00:00", "TEU-TOTAL": 8.065369649805444}, {"dt": "2000-09-01T00:00:00", "TEU-TOTAL": 9.14459655492228}, {"dt": "2000-10-01T00:00:00", "TEU-TOTAL": 1.3947158689342931}, {"dt": "2000-11-01T00:00:00", "TEU-TOTAL": 5.7855634508377385}, {"dt": "2000-12-01T00:00:00", "TEU-TOTAL": 9.357300772614007}, {"dt": "2001-01-01T00:00:00", "TEU-TOTAL": -6.055852625722502}, {"dt": "2001-02-01T00:00:00", "TEU-TOTAL": 6.260810251163251}, {"dt": "2001-03-01T00:00:00", "TEU-TOTAL": 0.477442273534634}, {"dt": "2001-04-01T00:00:00", "TEU-TOTAL": -7.162293345884563}, {"dt": "2001-05-01T00:00:00", "TEU-TOTAL": 6.7639813607278665}, {"dt": "2001-06-01T00:00:00", "TEU-TOTAL": -11.152282221019473}, {"dt": "2001-07-01T00:00:00", "TEU-TOTAL": -16.889237470325835}, {"dt": "2001-08-01T00:00:00", "TEU-TOTAL": -6.666234589238396}, {"dt": "2001-09-01T00:00:00", "TEU-TOTAL": -13.733322681153625}, {"dt": "2001-10-01T00:00:00", "TEU-TOTAL": -1.1041325255641166}, {"dt": "2001-11-01T00:00:00", "TEU-TOTAL": -6.952448255513222}, {"dt": "2001-12-01T00:00:00", "TEU-TOTAL": -17.4954459406365}, {"dt": "2002-01-01T00:00:00", "TEU-TOTAL": -16.328192473781613}, {"dt": "2002-02-01T00:00:00", "TEU-TOTAL": -8.594878378688186}, {"dt": "2002-03-01T00:00:00", "TEU-TOTAL": -0.5494194679752762}, {"dt": "2002-04-01T00:00:00", "TEU-TOTAL": -0.6368972646688342}, {"dt": "2002-05-01T00:00:00", "TEU-TOTAL": -1.7386956211157933}, {"dt": "2002-06-01T00:00:00", "TEU-TOTAL": 9.938926289811146}, {"dt": "2002-07-01T00:00:00", "TEU-TOTAL": 8.670154950582653}, {"dt": "2002-08-01T00:00:00", "TEU-TOTAL": 15.069402115626463}, {"dt": "2002-09-01T00:00:00", "TEU-TOTAL": 10.344508242267093}, {"dt": "2002-10-01T00:00:00", "TEU-TOTAL": 2.535090876372137}, {"dt": "2002-11-01T00:00:00", "TEU-TOTAL": 7.957374841447562}, {"dt": "2002-12-01T00:00:00", "TEU-TOTAL": 24.07051448560098}, {"dt": "2003-01-01T00:00:00", "TEU-TOTAL": 29.77271833588926}, {"dt": "2003-02-01T00:00:00", "TEU-TOTAL": 9.849510910458982}, {"dt": "2003-03-01T00:00:00", "TEU-TOTAL": 11.37829286501475}, {"dt": "2003-04-01T00:00:00", "TEU-TOTAL": 12.933598016470938}, {"dt": "2003-05-01T00:00:00", "TEU-TOTAL": 1.1224519468434613}, {"dt": "2003-06-01T00:00:00", "TEU-TOTAL": 9.271283246192308}, {"dt": "2003-07-01T00:00:00", "TEU-TOTAL": 7.624851713149261}, {"dt": "2003-08-01T00:00:00", "TEU-TOTAL": 1.0942885113116807}, {"dt": "2003-09-01T00:00:00", "TEU-TOTAL": 1.3855720444054587}, {"dt": "2003-10-01T00:00:00", "TEU-TOTAL": 8.367154421604539}, {"dt": "2003-11-01T00:00:00", "TEU-TOTAL": 3.52260282417447}, {"dt": "2003-12-01T00:00:00", "TEU-TOTAL": -14.275545382221166}, {"dt": "2004-01-01T00:00:00", "TEU-TOTAL": 3.6974471630937034}, {"dt": "2004-02-01T00:00:00", "TEU-TOTAL": 4.940216605399161}, {"dt": "2004-03-01T00:00:00", "TEU-TOTAL": -0.6651856391399869}, {"dt": "2004-04-01T00:00:00", "TEU-TOTAL": 8.896199243237145}, {"dt": "2004-05-01T00:00:00", "TEU-TOTAL": 16.84184040258807}, {"dt": "2004-06-01T00:00:00", "TEU-TOTAL": -8.204448085087012}, {"dt": "2004-07-01T00:00:00", "TEU-TOTAL": 16.503490457974014}, {"dt": "2004-08-01T00:00:00", "TEU-TOTAL": 9.443523247330376}, {"dt": "2004-09-01T00:00:00", "TEU-TOTAL": 13.885356070469058}, {"dt": "2004-10-01T00:00:00", "TEU-TOTAL": 18.362113758595335}, {"dt": "2004-11-01T00:00:00", "TEU-TOTAL": 8.77271644551556}, {"dt": "2004-12-01T00:00:00", "TEU-TOTAL": 35.819534671681396}, {"dt": "2005-01-01T00:00:00", "TEU-TOTAL": 19.151733861247266}, {"dt": "2005-02-01T00:00:00", "TEU-TOTAL": 9.943284837759814}, {"dt": "2005-03-01T00:00:00", "TEU-TOTAL": 6.83071346863231}, {"dt": "2005-04-01T00:00:00", "TEU-TOTAL": 11.753037119630738}, {"dt": "2005-05-01T00:00:00", "TEU-TOTAL": 12.11306429085628}, {"dt": "2005-06-01T00:00:00", "TEU-TOTAL": 13.162274520357787}, {"dt": "2005-07-01T00:00:00", "TEU-TOTAL": 9.056673777942681}, {"dt": "2005-08-01T00:00:00", "TEU-TOTAL": 0.8411713371472951}, {"dt": "2005-09-01T00:00:00", "TEU-TOTAL": 2.945840932519239}, {"dt": "2005-10-01T00:00:00", "TEU-TOTAL": -3.6305173259141843}, {"dt": "2005-11-01T00:00:00", "TEU-TOTAL": 5.063119927862947}, {"dt": "2005-12-01T00:00:00", "TEU-TOTAL": -4.778887303851642}, {"dt": "2006-01-01T00:00:00", "TEU-TOTAL": 1.8306888687250167}, {"dt": "2006-02-01T00:00:00", "TEU-TOTAL": 0.0006596654176904693}, {"dt": "2006-03-01T00:00:00", "TEU-TOTAL": -3.2652570156705862}, {"dt": "2006-04-01T00:00:00", "TEU-TOTAL": -3.6151008190825396}, {"dt": "2006-05-01T00:00:00", "TEU-TOTAL": -6.79585542274469}, {"dt": "2006-06-01T00:00:00", "TEU-TOTAL": 9.372653081660243}, {"dt": "2006-07-01T00:00:00", "TEU-TOTAL": -5.853334920985931}, {"dt": "2006-08-01T00:00:00", "TEU-TOTAL": 0.6881175028245812}, {"dt": "2006-09-01T00:00:00", "TEU-TOTAL": 4.739071827460051}, {"dt": "2006-10-01T00:00:00", "TEU-TOTAL": 0.9128341043813659}, {"dt": "2006-11-01T00:00:00", "TEU-TOTAL": -6.972124986972861}, {"dt": "2006-12-01T00:00:00", "TEU-TOTAL": 0.8132691278758708}, {"dt": "2007-01-01T00:00:00", "TEU-TOTAL": -13.200356424675185}, {"dt": "2007-02-01T00:00:00", "TEU-TOTAL": -6.358473016564092}, {"dt": "2007-03-01T00:00:00", "TEU-TOTAL": 1.958248086215142}, {"dt": "2007-04-01T00:00:00", "TEU-TOTAL": -7.849250102313487}, {"dt": "2007-05-01T00:00:00", "TEU-TOTAL": -13.330899541308716}, {"dt": "2007-06-01T00:00:00", "TEU-TOTAL": -11.860265506981005}, {"dt": "2007-07-01T00:00:00", "TEU-TOTAL": -17.03826834820945}, {"dt": "2007-08-01T00:00:00", "TEU-TOTAL": -9.7337368166598}, {"dt": "2007-09-01T00:00:00", "TEU-TOTAL": -10.80387073841873}, {"dt": "2007-10-01T00:00:00", "TEU-TOTAL": -18.434489995720405}, {"dt": "2007-11-01T00:00:00", "TEU-TOTAL": -6.7051954556238025}, {"dt": "2007-12-01T00:00:00", "TEU-TOTAL": -15.876920771492975}, {"dt": "2008-01-01T00:00:00", "TEU-TOTAL": -10.609076847311139}, {"dt": "2008-02-01T00:00:00", "TEU-TOTAL": -0.7333361511475567}, {"dt": "2008-03-01T00:00:00", "TEU-TOTAL": -14.932054941569694}, {"dt": "2008-04-01T00:00:00", "TEU-TOTAL": -10.070274436041116}, {"dt": "2008-05-01T00:00:00", "TEU-TOTAL": 7.039832598460505}, {"dt": "2008-06-01T00:00:00", "TEU-TOTAL": -9.08701382171353}, {"dt": "2008-07-01T00:00:00", "TEU-TOTAL": 0.3216017655428782}, {"dt": "2008-08-01T00:00:00", "TEU-TOTAL": -1.3475894811317612}, {"dt": "2008-09-01T00:00:00", "TEU-TOTAL": -13.321057549606996}, {"dt": "2008-10-01T00:00:00", "TEU-TOTAL": 5.567374867032737}, {"dt": "2008-11-01T00:00:00", "TEU-TOTAL": -12.95586022758577}, {"dt": "2008-12-01T00:00:00", "TEU-TOTAL": -20.329698877004954}, {"dt": "2009-01-01T00:00:00", "TEU-TOTAL": -17.420891723699118}, {"dt": "2009-02-01T00:00:00", "TEU-TOTAL": -30.775017209200005}, {"dt": "2009-03-01T00:00:00", "TEU-TOTAL": -32.93373675380358}, {"dt": "2009-04-01T00:00:00", "TEU-TOTAL": -31.782562910781074}, {"dt": "2009-05-01T00:00:00", "TEU-TOTAL": -38.050687705089715}, {"dt": "2009-06-01T00:00:00", "TEU-TOTAL": -37.19829186780542}, {"dt": "2009-07-01T00:00:00", "TEU-TOTAL": -26.040769659384477}, {"dt": "2009-08-01T00:00:00", "TEU-TOTAL": -33.86239485237441}, {"dt": "2009-09-01T00:00:00", "TEU-TOTAL": -21.800786328038303}, {"dt": "2009-10-01T00:00:00", "TEU-TOTAL": -25.581094513814186}, {"dt": "2009-11-01T00:00:00", "TEU-TOTAL": -20.220561384716508}, {"dt": "2009-12-01T00:00:00", "TEU-TOTAL": -9.42993692879569}, {"dt": "2010-01-01T00:00:00", "TEU-TOTAL": -0.5647275494958803}, {"dt": "2010-02-01T00:00:00", "TEU-TOTAL": 4.462464248003517}, {"dt": "2010-03-01T00:00:00", "TEU-TOTAL": 21.6057301689117}, {"dt": "2010-04-01T00:00:00", "TEU-TOTAL": 25.15010858919218}, {"dt": "2010-05-01T00:00:00", "TEU-TOTAL": 20.96964232656784}, {"dt": "2010-06-01T00:00:00", "TEU-TOTAL": 32.238330774916136}, {"dt": "2010-07-01T00:00:00", "TEU-TOTAL": 25.202289516168474}, {"dt": "2010-08-01T00:00:00", "TEU-TOTAL": 19.639418691853994}, {"dt": "2010-09-01T00:00:00", "TEU-TOTAL": 7.730124780797332}, {"dt": "2010-10-01T00:00:00", "TEU-TOTAL": 10.90892456886694}, {"dt": "2010-11-01T00:00:00", "TEU-TOTAL": 12.615829035834537}, {"dt": "2010-12-01T00:00:00", "TEU-TOTAL": 9.925218840326288}, {"dt": "2011-01-01T00:00:00", "TEU-TOTAL": 6.498648674188723}, {"dt": "2011-02-01T00:00:00", "TEU-TOTAL": 6.961727183513244}, {"dt": "2011-03-01T00:00:00", "TEU-TOTAL": 5.727472527472521}, {"dt": "2011-04-01T00:00:00", "TEU-TOTAL": -2.460104120589335}, {"dt": "2011-05-01T00:00:00", "TEU-TOTAL": 2.091132379097149}, {"dt": "2011-06-01T00:00:00", "TEU-TOTAL": -0.8848035632905371}, {"dt": "2011-07-01T00:00:00", "TEU-TOTAL": -11.300141447137058}, {"dt": "2011-08-01T00:00:00", "TEU-TOTAL": -2.7275884560324593}, {"dt": "2011-09-01T00:00:00", "TEU-TOTAL": 17.64506628778968}, {"dt": "2011-10-01T00:00:00", "TEU-TOTAL": -6.251804436232256}, {"dt": "2011-11-01T00:00:00", "TEU-TOTAL": 1.5490082734202826}, {"dt": "2011-12-01T00:00:00", "TEU-TOTAL": 2.438567926187929}, {"dt": "2012-01-01T00:00:00", "TEU-TOTAL": -0.11002759563083497}, {"dt": "2012-02-01T00:00:00", "TEU-TOTAL": 9.228030900783523}, {"dt": "2012-03-01T00:00:00", "TEU-TOTAL": 12.133205837109706}, {"dt": "2012-04-01T00:00:00", "TEU-TOTAL": 7.652794251029094}, {"dt": "2012-05-01T00:00:00", "TEU-TOTAL": 9.92127029426162}, {"dt": "2012-06-01T00:00:00", "TEU-TOTAL": 4.941527570531279}, {"dt": "2012-07-01T00:00:00", "TEU-TOTAL": 16.09120463776288}, {"dt": "2012-08-01T00:00:00", "TEU-TOTAL": 19.337646843677337}, {"dt": "2012-09-01T00:00:00", "TEU-TOTAL": 5.321837609571944}, {"dt": "2012-10-01T00:00:00", "TEU-TOTAL": 6.300043994720639}, {"dt": "2012-11-01T00:00:00", "TEU-TOTAL": 11.873059921196116}, {"dt": "2012-12-01T00:00:00", "TEU-TOTAL": 13.380590470622632}, {"dt": "2013-01-01T00:00:00", "TEU-TOTAL": 7.73795247612703}, {"dt": "2013-02-01T00:00:00", "TEU-TOTAL": 10.568491079528265}, {"dt": "2013-03-01T00:00:00", "TEU-TOTAL": 1.4978829426726126}, {"dt": "2013-04-01T00:00:00", "TEU-TOTAL": 9.137306685893432}, {"dt": "2013-05-01T00:00:00", "TEU-TOTAL": 5.015170040302497}, {"dt": "2013-06-01T00:00:00", "TEU-TOTAL": 3.5489897820839333}, {"dt": "2013-07-01T00:00:00", "TEU-TOTAL": 3.3331562530831027}, {"dt": "2013-08-01T00:00:00", "TEU-TOTAL": 5.553163697925401}, {"dt": "2013-09-01T00:00:00", "TEU-TOTAL": 1.0061813708366785}, {"dt": "2013-10-01T00:00:00", "TEU-TOTAL": 16.752752255607973}, {"dt": "2013-11-01T00:00:00", "TEU-TOTAL": 6.122595007155351}, {"dt": "2013-12-01T00:00:00", "TEU-TOTAL": -0.013696422816633635}, {"dt": "2014-01-01T00:00:00", "TEU-TOTAL": 6.823541051728976}, {"dt": "2014-02-01T00:00:00", "TEU-TOTAL": -1.4335202151419812}, {"dt": "2014-03-01T00:00:00", "TEU-TOTAL": 9.964420611205682}, {"dt": "2014-04-01T00:00:00", "TEU-TOTAL": 12.672397155539716}, {"dt": "2014-05-01T00:00:00", "TEU-TOTAL": 16.18119488583687}, {"dt": "2014-06-01T00:00:00", "TEU-TOTAL": 19.10152725995353}, {"dt": "2014-07-01T00:00:00", "TEU-TOTAL": 13.041370750372728}, {"dt": "2014-08-01T00:00:00", "TEU-TOTAL": 13.35716112797185}, {"dt": "2014-09-01T00:00:00", "TEU-TOTAL": 13.366563667666576}, {"dt": "2014-10-01T00:00:00", "TEU-TOTAL": 16.748080454310198}, {"dt": "2014-11-01T00:00:00", "TEU-TOTAL": 8.043841445598998}, {"dt": "2014-12-01T00:00:00", "TEU-TOTAL": 14.385631290138035}, {"dt": "2015-01-01T00:00:00", "TEU-TOTAL": 18.026118769392262}, {"dt": "2015-02-01T00:00:00", "TEU-TOTAL": 17.86399685541862}, {"dt": "2015-03-01T00:00:00", "TEU-TOTAL": 13.684259480719652}, {"dt": "2015-04-01T00:00:00", "TEU-TOTAL": 10.799130377495224}, {"dt": "2015-05-01T00:00:00", "TEU-TOTAL": 12.465204320231592}, {"dt": "2015-06-01T00:00:00", "TEU-TOTAL": 13.89568516519979}, {"dt": "2015-07-01T00:00:00", "TEU-TOTAL": 13.843265157618445}, {"dt": "2015-08-01T00:00:00", "TEU-TOTAL": 3.9995121058730154}, {"dt": "2015-09-01T00:00:00", "TEU-TOTAL": 11.114132236885732}, {"dt": "2015-10-01T00:00:00", "TEU-TOTAL": 0.03765060240963347}, {"dt": "2015-11-01T00:00:00", "TEU-TOTAL": 6.5012689123410405}, {"dt": "2015-12-01T00:00:00", "TEU-TOTAL": 1.9456733072219512}, {"dt": "2016-01-01T00:00:00", "TEU-TOTAL": -5.117155057972623}, {"dt": "2016-02-01T00:00:00", "TEU-TOTAL": 3.2937714565963727}, {"dt": "2016-03-01T00:00:00", "TEU-TOTAL": -0.217984606663435}, {"dt": "2016-04-01T00:00:00", "TEU-TOTAL": -6.078533969152467}, {"dt": "2016-05-01T00:00:00", "TEU-TOTAL": -2.169309550132281}, {"dt": "2016-06-01T00:00:00", "TEU-TOTAL": -7.477944595175179}, {"dt": "2016-07-01T00:00:00", "TEU-TOTAL": 1.1653721258054084}, {"dt": "2016-08-01T00:00:00", "TEU-TOTAL": 5.644234377932067}, {"dt": "2016-09-01T00:00:00", "TEU-TOTAL": -2.7997779753982432}, {"dt": "2016-10-01T00:00:00", "TEU-TOTAL": 2.879187053067378}, {"dt": "2016-11-01T00:00:00", "TEU-TOTAL": 14.078023881141188}, {"dt": "2016-12-01T00:00:00", "TEU-TOTAL": 13.655523155378035}, {"dt": "2017-01-01T00:00:00", "TEU-TOTAL": 27.51771289940177}, {"dt": "2017-02-01T00:00:00", "TEU-TOTAL": 11.305250629898334}, {"dt": "2017-03-01T00:00:00", "TEU-TOTAL": 12.692397797821254}, {"dt": "2017-04-01T00:00:00", "TEU-TOTAL": 19.85072075665204}, {"dt": "2017-05-01T00:00:00", "TEU-TOTAL": 2.578922216287638}, {"dt": "2017-06-01T00:00:00", "TEU-TOTAL": 16.557786866997027}, {"dt": "2017-07-01T00:00:00", "TEU-TOTAL": 2.9029983358249023}, {"dt": "2017-08-01T00:00:00", "TEU-TOTAL": -1.3460780558747332}, {"dt": "2017-09-01T00:00:00", "TEU-TOTAL": 10.43731348782375}, {"dt": "2017-10-01T00:00:00", "TEU-TOTAL": 7.8771750739038415}, {"dt": "2017-11-01T00:00:00", "TEU-TOTAL": -6.634630201407399}, {"dt": "2017-12-01T00:00:00", "TEU-TOTAL": 11.189202334630345}, {"dt": "2018-01-01T00:00:00", "TEU-TOTAL": -9.523397723464743}, {"dt": "2018-02-01T00:00:00", "TEU-TOTAL": -4.17472414969855}, {"dt": "2018-03-01T00:00:00", "TEU-TOTAL": 3.7669364017649754}, {"dt": "2018-04-01T00:00:00", "TEU-TOTAL": 3.7630404352534175}, {"dt": "2018-05-01T00:00:00", "TEU-TOTAL": 8.213119066932673}, {"dt": "2018-06-01T00:00:00", "TEU-TOTAL": 9.782958681925603}, {"dt": "2018-07-01T00:00:00", "TEU-TOTAL": 9.968148850672387}, {"dt": "2018-08-01T00:00:00", "TEU-TOTAL": 16.211851818509192}, {"dt": "2018-09-01T00:00:00", "TEU-TOTAL": -3.686282359220705}, {"dt": "2018-10-01T00:00:00", "TEU-TOTAL": 18.710584322884483}, {"dt": "2018-11-01T00:00:00", "TEU-TOTAL": 15.27641938481099}, {"dt": "2018-12-01T00:00:00", "TEU-TOTAL": 9.195446293825604}, {"dt": "2019-01-01T00:00:00", "TEU-TOTAL": 22.87422788802733}, {"dt": "2019-02-01T00:00:00", "TEU-TOTAL": 5.728276353276351}, {"dt": "2019-03-01T00:00:00", "TEU-TOTAL": 7.23934307995131}, {"dt": "2019-04-01T00:00:00", "TEU-TOTAL": 4.165160686014491}, {"dt": "2019-05-01T00:00:00", "TEU-TOTAL": 3.555564559834279}, {"dt": "2019-06-01T00:00:00", "TEU-TOTAL": -0.3763117471900945}, {"dt": "2019-07-01T00:00:00", "TEU-TOTAL": 4.959270965233253}, {"dt": "2019-08-01T00:00:00", "TEU-TOTAL": 12.863789756029064}, {"dt": "2019-09-01T00:00:00", "TEU-TOTAL": 12.539688037592512}, {"dt": "2019-10-01T00:00:00", "TEU-TOTAL": 0.1497454327642922}, {"dt": "2019-11-01T00:00:00", "TEU-TOTAL": -1.938138644522569}, {"dt": "2019-12-01T00:00:00", "TEU-TOTAL": -5.918347930155587}, {"dt": "2020-01-01T00:00:00", "TEU-TOTAL": 2.591776905911347}, {"dt": "2020-02-01T00:00:00", "TEU-TOTAL": 10.712902302238248}, {"dt": "2020-03-01T00:00:00", "TEU-TOTAL": -13.302321671267038}, {"dt": "2020-04-01T00:00:00", "TEU-TOTAL": -13.91303922862267}, {"dt": "2020-05-01T00:00:00", "TEU-TOTAL": -16.99721701873743}, {"dt": "2020-06-01T00:00:00", "TEU-TOTAL": -21.911519615181184}, {"dt": "2020-07-01T00:00:00", "TEU-TOTAL": -15.943612200891033}, {"dt": "2020-08-01T00:00:00", "TEU-TOTAL": -10.412680708678302}, {"dt": "2020-09-01T00:00:00", "TEU-TOTAL": 0.07848246711943396}, {"dt": "2020-10-01T00:00:00", "TEU-TOTAL": -0.5355171144644788}, {"dt": "2020-11-01T00:00:00", "TEU-TOTAL": 11.971145526907767}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Port-of-Virginia">Port of Virginia<a class="anchor-link" href="#Port-of-Virginia">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[46]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># http://www.portofvirginia.com/who-we-are/port-stats/</span>

<span class="n">result</span> <span class="o">=</span> <span class="o">!</span>curl -sL <span class="s1">&#39;http://www.portofvirginia.com/who-we-are/port-stats/&#39;</span> <span class="p">|</span> grep <span class="s1">&#39;xlsx&#39;</span>

<span class="n">currentReport</span> <span class="o">=</span> <span class="p">[</span><span class="n">u</span> <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;href=&quot;([^&quot;]+)&quot;&#39;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">result</span><span class="p">))</span> <span class="k">if</span> <span class="s2">&quot;xls&quot;</span> <span class="ow">in</span> <span class="n">u</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

<span class="c1">#print(currentReport)</span>

<span class="n">oldUrl</span> <span class="o">=</span> <span class="s2">&quot;http://www.portofvirginia.com/excel/Port_of_Virginia_Statistics.xlsx&quot;</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">currentReport</span> <span class="c1">#&quot;https://web.archive.org/web/20191218025738if_/http://www.portofvirginia.com/excel/Port_of_Virginia_Statistics.xlsx&quot;</span>
<span class="n">df_va</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">df_va</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Month&#39;</span><span class="p">,</span> <span class="s1">&#39;Key&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df_va</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">to_list</span><span class="p">()[</span><span class="mi">2</span><span class="p">:]</span>

<span class="n">df_va</span> <span class="o">=</span> <span class="n">df_va</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">71</span><span class="p">]</span>
<span class="n">df_va</span> <span class="o">=</span> <span class="n">df_va</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">how</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>
<span class="n">df_va</span><span class="p">[</span><span class="s1">&#39;Month&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_va</span><span class="p">[</span><span class="s1">&#39;Month&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ffill</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="c1">#df_va.head(20)</span>

<span class="n">df_va_melted</span> <span class="o">=</span> <span class="n">df_va</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">id_vars</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Month&#39;</span><span class="p">,</span> <span class="s1">&#39;Key&#39;</span><span class="p">])</span>
<span class="n">df_va_melted</span><span class="p">[</span><span class="s1">&#39;dt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df_va_melted</span><span class="p">[</span><span class="s1">&#39;Month&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">df_va_melted</span><span class="p">[</span><span class="s1">&#39;variable&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;%b %Y&quot;</span><span class="p">)</span>

<span class="n">df_va_clean</span> <span class="o">=</span> <span class="n">df_va_melted</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s1">&#39;dt&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;Key&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[47]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doChart</span><span class="p">(</span><span class="n">df_va_clean</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Virgina&#39;</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;Import Empties&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[47]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-41de9231b7be495696680e98621f4811"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-41de9231b7be495696680e98621f4811") {
      outputDiv = document.getElementById("altair-viz-41de9231b7be495696680e98621f4811");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-d84d256208255d39eb5802b5e736ddfb"}, "mark": {"type": "line", "color": "purple"}, "encoding": {"tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "Import Empties", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Volume [TEUs]"}, "field": "Import Empties"}}, "height": 400, "title": "Port of Virgina Import Empties Container Volume", "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-d84d256208255d39eb5802b5e736ddfb": [{"dt": "2009-01-01T00:00:00", "Import Empties": 6019.0}, {"dt": "2009-02-01T00:00:00", "Import Empties": 7587.0}, {"dt": "2009-03-01T00:00:00", "Import Empties": 9298.0}, {"dt": "2009-04-01T00:00:00", "Import Empties": 14764.0}, {"dt": "2009-05-01T00:00:00", "Import Empties": 13171.0}, {"dt": "2009-06-01T00:00:00", "Import Empties": 8099.0}, {"dt": "2009-07-01T00:00:00", "Import Empties": 9074.0}, {"dt": "2009-08-01T00:00:00", "Import Empties": 10051.0}, {"dt": "2009-09-01T00:00:00", "Import Empties": 10467.0}, {"dt": "2009-10-01T00:00:00", "Import Empties": 15566.0}, {"dt": "2009-11-01T00:00:00", "Import Empties": 11317.0}, {"dt": "2009-12-01T00:00:00", "Import Empties": 11524.0}, {"dt": "2010-01-01T00:00:00", "Import Empties": 17398.0}, {"dt": "2010-02-01T00:00:00", "Import Empties": 12012.0}, {"dt": "2010-03-01T00:00:00", "Import Empties": 16540.0}, {"dt": "2010-04-01T00:00:00", "Import Empties": 10756.0}, {"dt": "2010-05-01T00:00:00", "Import Empties": 8961.0}, {"dt": "2010-06-01T00:00:00", "Import Empties": 8563.0}, {"dt": "2010-07-01T00:00:00", "Import Empties": 7007.0}, {"dt": "2010-08-01T00:00:00", "Import Empties": 9547.0}, {"dt": "2010-09-01T00:00:00", "Import Empties": 5318.0}, {"dt": "2010-10-01T00:00:00", "Import Empties": 9519.0}, {"dt": "2010-11-01T00:00:00", "Import Empties": 9351.0}, {"dt": "2010-12-01T00:00:00", "Import Empties": 7996.0}, {"dt": "2011-01-01T00:00:00", "Import Empties": 11245.0}, {"dt": "2011-02-01T00:00:00", "Import Empties": 10436.0}, {"dt": "2011-03-01T00:00:00", "Import Empties": 9403.5}, {"dt": "2011-04-01T00:00:00", "Import Empties": 10961.0}, {"dt": "2011-05-01T00:00:00", "Import Empties": 11415.0}, {"dt": "2011-06-01T00:00:00", "Import Empties": 8590.5}, {"dt": "2011-07-01T00:00:00", "Import Empties": 11609.0}, {"dt": "2011-08-01T00:00:00", "Import Empties": 7096.0}, {"dt": "2011-09-01T00:00:00", "Import Empties": 9731.0}, {"dt": "2011-10-01T00:00:00", "Import Empties": 9995.25}, {"dt": "2011-11-01T00:00:00", "Import Empties": 8207.0}, {"dt": "2011-12-01T00:00:00", "Import Empties": 8330.0}, {"dt": "2012-01-01T00:00:00", "Import Empties": 8602.75}, {"dt": "2012-02-01T00:00:00", "Import Empties": 8614.0}, {"dt": "2012-03-01T00:00:00", "Import Empties": 8241.0}, {"dt": "2012-04-01T00:00:00", "Import Empties": 9984.0}, {"dt": "2012-05-01T00:00:00", "Import Empties": 8531.0}, {"dt": "2012-06-01T00:00:00", "Import Empties": 7665.0}, {"dt": "2012-07-01T00:00:00", "Import Empties": 7276.0}, {"dt": "2012-08-01T00:00:00", "Import Empties": 8097.5}, {"dt": "2012-09-01T00:00:00", "Import Empties": 6850.5}, {"dt": "2012-10-01T00:00:00", "Import Empties": 6294.0}, {"dt": "2012-11-01T00:00:00", "Import Empties": 9119.0}, {"dt": "2012-12-01T00:00:00", "Import Empties": 13916.5}, {"dt": "2013-01-01T00:00:00", "Import Empties": 11504.25}, {"dt": "2013-02-01T00:00:00", "Import Empties": 9253.0}, {"dt": "2013-03-01T00:00:00", "Import Empties": 9193.25}, {"dt": "2013-04-01T00:00:00", "Import Empties": 9108.0}, {"dt": "2013-05-01T00:00:00", "Import Empties": 10235.75}, {"dt": "2013-06-01T00:00:00", "Import Empties": 10005.0}, {"dt": "2013-07-01T00:00:00", "Import Empties": 9363.5}, {"dt": "2013-08-01T00:00:00", "Import Empties": 7182.0}, {"dt": "2013-09-01T00:00:00", "Import Empties": 7369.0}, {"dt": "2013-10-01T00:00:00", "Import Empties": 6874.75}, {"dt": "2013-11-01T00:00:00", "Import Empties": 6709.5}, {"dt": "2013-12-01T00:00:00", "Import Empties": 5384.0}, {"dt": "2014-01-01T00:00:00", "Import Empties": 6638.75}, {"dt": "2014-02-01T00:00:00", "Import Empties": 6716.0}, {"dt": "2014-03-01T00:00:00", "Import Empties": 9875.25}, {"dt": "2014-04-01T00:00:00", "Import Empties": 6086.5}, {"dt": "2014-05-01T00:00:00", "Import Empties": 7196.5}, {"dt": "2014-06-01T00:00:00", "Import Empties": 4364.25}, {"dt": "2014-07-01T00:00:00", "Import Empties": 6654.5}, {"dt": "2014-08-01T00:00:00", "Import Empties": 4535.75}, {"dt": "2014-09-01T00:00:00", "Import Empties": 4206.75}, {"dt": "2014-10-01T00:00:00", "Import Empties": 5282.5}, {"dt": "2014-11-01T00:00:00", "Import Empties": 7523.75}, {"dt": "2014-12-01T00:00:00", "Import Empties": 7690.0}, {"dt": "2015-01-01T00:00:00", "Import Empties": 5805.75}, {"dt": "2015-02-01T00:00:00", "Import Empties": 7845.5}, {"dt": "2015-03-01T00:00:00", "Import Empties": 9992.25}, {"dt": "2015-04-01T00:00:00", "Import Empties": 7385.25}, {"dt": "2015-05-01T00:00:00", "Import Empties": 8352.25}, {"dt": "2015-06-01T00:00:00", "Import Empties": 6355.25}, {"dt": "2015-07-01T00:00:00", "Import Empties": 6385.5}, {"dt": "2015-08-01T00:00:00", "Import Empties": 6124.25}, {"dt": "2015-09-01T00:00:00", "Import Empties": 3747.0}, {"dt": "2015-10-01T00:00:00", "Import Empties": 3939.5}, {"dt": "2015-11-01T00:00:00", "Import Empties": 4852.25}, {"dt": "2015-12-01T00:00:00", "Import Empties": 3753.5}, {"dt": "2016-01-01T00:00:00", "Import Empties": 5513.0}, {"dt": "2016-02-01T00:00:00", "Import Empties": 3758.0}, {"dt": "2016-03-01T00:00:00", "Import Empties": 4000.0}, {"dt": "2016-04-01T00:00:00", "Import Empties": 4524.5}, {"dt": "2016-05-01T00:00:00", "Import Empties": 6412.25}, {"dt": "2016-06-01T00:00:00", "Import Empties": 5600.25}, {"dt": "2016-07-01T00:00:00", "Import Empties": 3089.25}, {"dt": "2016-08-01T00:00:00", "Import Empties": 3763.25}, {"dt": "2016-09-01T00:00:00", "Import Empties": 2698.5}, {"dt": "2016-10-01T00:00:00", "Import Empties": 2966.25}, {"dt": "2016-11-01T00:00:00", "Import Empties": 3724.0}, {"dt": "2016-12-01T00:00:00", "Import Empties": 5801.25}, {"dt": "2017-01-01T00:00:00", "Import Empties": 5982.5}, {"dt": "2017-02-01T00:00:00", "Import Empties": 7190.75}, {"dt": "2017-03-01T00:00:00", "Import Empties": 7611.75}, {"dt": "2017-04-01T00:00:00", "Import Empties": 3532.25}, {"dt": "2017-05-01T00:00:00", "Import Empties": 4438.0}, {"dt": "2017-06-01T00:00:00", "Import Empties": 3098.0}, {"dt": "2017-07-01T00:00:00", "Import Empties": 2457.25}, {"dt": "2017-08-01T00:00:00", "Import Empties": 1923.0}, {"dt": "2017-09-01T00:00:00", "Import Empties": 1461.0}, {"dt": "2017-10-01T00:00:00", "Import Empties": 1482.25}, {"dt": "2017-11-01T00:00:00", "Import Empties": 2145.0}, {"dt": "2017-12-01T00:00:00", "Import Empties": 2053.0}, {"dt": "2018-01-01T00:00:00", "Import Empties": 2208.0}, {"dt": "2018-02-01T00:00:00", "Import Empties": 2099.0}, {"dt": "2018-03-01T00:00:00", "Import Empties": 2308.0}, {"dt": "2018-04-01T00:00:00", "Import Empties": 2112.0}, {"dt": "2018-05-01T00:00:00", "Import Empties": 2589.0}, {"dt": "2018-06-01T00:00:00", "Import Empties": 1674.0}, {"dt": "2018-07-01T00:00:00", "Import Empties": 1512.0}, {"dt": "2018-08-01T00:00:00", "Import Empties": 1540.0}, {"dt": "2018-09-01T00:00:00", "Import Empties": 1816.25}, {"dt": "2018-10-01T00:00:00", "Import Empties": 669.0}, {"dt": "2018-11-01T00:00:00", "Import Empties": 2042.0}, {"dt": "2018-12-01T00:00:00", "Import Empties": 2091.0}, {"dt": "2019-01-01T00:00:00", "Import Empties": 1868.0}, {"dt": "2019-02-01T00:00:00", "Import Empties": 2115.0}, {"dt": "2019-03-01T00:00:00", "Import Empties": 2002.0}, {"dt": "2019-04-01T00:00:00", "Import Empties": 2710.0}, {"dt": "2019-05-01T00:00:00", "Import Empties": 2064.0}, {"dt": "2019-06-01T00:00:00", "Import Empties": 1507.75}, {"dt": "2019-07-01T00:00:00", "Import Empties": 2649.0}, {"dt": "2019-08-01T00:00:00", "Import Empties": 1073.0}, {"dt": "2019-09-01T00:00:00", "Import Empties": 2447.0}, {"dt": "2019-10-01T00:00:00", "Import Empties": 1850.0}, {"dt": "2019-11-01T00:00:00", "Import Empties": 1339.0}, {"dt": "2019-12-01T00:00:00", "Import Empties": 1052.25}, {"dt": "2020-01-01T00:00:00", "Import Empties": 2366.0}, {"dt": "2020-02-01T00:00:00", "Import Empties": 1505.25}, {"dt": "2020-03-01T00:00:00", "Import Empties": 3078.0}, {"dt": "2020-04-01T00:00:00", "Import Empties": 3171.25}, {"dt": "2020-05-01T00:00:00", "Import Empties": 2068.0}, {"dt": "2020-06-01T00:00:00", "Import Empties": 1735.25}, {"dt": "2020-07-01T00:00:00", "Import Empties": 1359.0}, {"dt": "2020-08-01T00:00:00", "Import Empties": 950.0}, {"dt": "2020-09-01T00:00:00", "Import Empties": 2094.0}, {"dt": "2020-10-01T00:00:00", "Import Empties": 1096.0}, {"dt": "2020-11-01T00:00:00", "Import Empties": 778.0}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[48]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doChart</span><span class="p">(</span><span class="n">df_va_clean</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Virgina&#39;</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;Export Empties&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[48]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-6179f4c5711e4d68b5c34e07c9061ec9"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-6179f4c5711e4d68b5c34e07c9061ec9") {
      outputDiv = document.getElementById("altair-viz-6179f4c5711e4d68b5c34e07c9061ec9");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-d1add39cdb450a7e8910d348ae032706"}, "mark": {"type": "line", "color": "purple"}, "encoding": {"tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "Export Empties", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Volume [TEUs]"}, "field": "Export Empties"}}, "height": 400, "title": "Port of Virgina Export Empties Container Volume", "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-d1add39cdb450a7e8910d348ae032706": [{"dt": "2009-01-01T00:00:00", "Export Empties": 21532.0}, {"dt": "2009-02-01T00:00:00", "Export Empties": 11786.0}, {"dt": "2009-03-01T00:00:00", "Export Empties": 9678.0}, {"dt": "2009-04-01T00:00:00", "Export Empties": 9799.0}, {"dt": "2009-05-01T00:00:00", "Export Empties": 9867.0}, {"dt": "2009-06-01T00:00:00", "Export Empties": 9871.0}, {"dt": "2009-07-01T00:00:00", "Export Empties": 9360.0}, {"dt": "2009-08-01T00:00:00", "Export Empties": 11700.0}, {"dt": "2009-09-01T00:00:00", "Export Empties": 13262.0}, {"dt": "2009-10-01T00:00:00", "Export Empties": 10762.0}, {"dt": "2009-11-01T00:00:00", "Export Empties": 10634.0}, {"dt": "2009-12-01T00:00:00", "Export Empties": 8278.0}, {"dt": "2010-01-01T00:00:00", "Export Empties": 10705.0}, {"dt": "2010-02-01T00:00:00", "Export Empties": 9442.0}, {"dt": "2010-03-01T00:00:00", "Export Empties": 9582.0}, {"dt": "2010-04-01T00:00:00", "Export Empties": 10398.0}, {"dt": "2010-05-01T00:00:00", "Export Empties": 14605.0}, {"dt": "2010-06-01T00:00:00", "Export Empties": 16800.0}, {"dt": "2010-07-01T00:00:00", "Export Empties": 20056.0}, {"dt": "2010-08-01T00:00:00", "Export Empties": 24547.0}, {"dt": "2010-09-01T00:00:00", "Export Empties": 21075.0}, {"dt": "2010-10-01T00:00:00", "Export Empties": 16932.0}, {"dt": "2010-11-01T00:00:00", "Export Empties": 14190.0}, {"dt": "2010-12-01T00:00:00", "Export Empties": 12707.0}, {"dt": "2011-01-01T00:00:00", "Export Empties": 11648.0}, {"dt": "2011-02-01T00:00:00", "Export Empties": 14368.0}, {"dt": "2011-03-01T00:00:00", "Export Empties": 13509.0}, {"dt": "2011-04-01T00:00:00", "Export Empties": 12182.0}, {"dt": "2011-05-01T00:00:00", "Export Empties": 12886.0}, {"dt": "2011-06-01T00:00:00", "Export Empties": 13284.5}, {"dt": "2011-07-01T00:00:00", "Export Empties": 15686.0}, {"dt": "2011-08-01T00:00:00", "Export Empties": 15387.0}, {"dt": "2011-09-01T00:00:00", "Export Empties": 18860.0}, {"dt": "2011-10-01T00:00:00", "Export Empties": 17720.0}, {"dt": "2011-11-01T00:00:00", "Export Empties": 17757.0}, {"dt": "2011-12-01T00:00:00", "Export Empties": 13515.0}, {"dt": "2012-01-01T00:00:00", "Export Empties": 13559.0}, {"dt": "2012-02-01T00:00:00", "Export Empties": 9976.0}, {"dt": "2012-03-01T00:00:00", "Export Empties": 10840.0}, {"dt": "2012-04-01T00:00:00", "Export Empties": 15513.0}, {"dt": "2012-05-01T00:00:00", "Export Empties": 14763.25}, {"dt": "2012-06-01T00:00:00", "Export Empties": 14054.0}, {"dt": "2012-07-01T00:00:00", "Export Empties": 20690.0}, {"dt": "2012-08-01T00:00:00", "Export Empties": 20761.0}, {"dt": "2012-09-01T00:00:00", "Export Empties": 20493.25}, {"dt": "2012-10-01T00:00:00", "Export Empties": 22334.0}, {"dt": "2012-11-01T00:00:00", "Export Empties": 18065.0}, {"dt": "2012-12-01T00:00:00", "Export Empties": 14518.75}, {"dt": "2013-01-01T00:00:00", "Export Empties": 12171.75}, {"dt": "2013-02-01T00:00:00", "Export Empties": 12404.0}, {"dt": "2013-03-01T00:00:00", "Export Empties": 11722.0}, {"dt": "2013-04-01T00:00:00", "Export Empties": 13132.75}, {"dt": "2013-05-01T00:00:00", "Export Empties": 18376.5}, {"dt": "2013-06-01T00:00:00", "Export Empties": 16621.0}, {"dt": "2013-07-01T00:00:00", "Export Empties": 17964.5}, {"dt": "2013-08-01T00:00:00", "Export Empties": 17371.75}, {"dt": "2013-09-01T00:00:00", "Export Empties": 17217.0}, {"dt": "2013-10-01T00:00:00", "Export Empties": 17439.5}, {"dt": "2013-11-01T00:00:00", "Export Empties": 17710.75}, {"dt": "2013-12-01T00:00:00", "Export Empties": 16257.25}, {"dt": "2014-01-01T00:00:00", "Export Empties": 12731.75}, {"dt": "2014-02-01T00:00:00", "Export Empties": 13725.5}, {"dt": "2014-03-01T00:00:00", "Export Empties": 14422.5}, {"dt": "2014-04-01T00:00:00", "Export Empties": 16490.0}, {"dt": "2014-05-01T00:00:00", "Export Empties": 20495.0}, {"dt": "2014-06-01T00:00:00", "Export Empties": 23123.5}, {"dt": "2014-07-01T00:00:00", "Export Empties": 23502.0}, {"dt": "2014-08-01T00:00:00", "Export Empties": 34269.0}, {"dt": "2014-09-01T00:00:00", "Export Empties": 32521.5}, {"dt": "2014-10-01T00:00:00", "Export Empties": 30847.75}, {"dt": "2014-11-01T00:00:00", "Export Empties": 23212.25}, {"dt": "2014-12-01T00:00:00", "Export Empties": 18521.75}, {"dt": "2015-01-01T00:00:00", "Export Empties": 23108.25}, {"dt": "2015-02-01T00:00:00", "Export Empties": 17263.5}, {"dt": "2015-03-01T00:00:00", "Export Empties": 17134.25}, {"dt": "2015-04-01T00:00:00", "Export Empties": 23099.5}, {"dt": "2015-05-01T00:00:00", "Export Empties": 35742.25}, {"dt": "2015-06-01T00:00:00", "Export Empties": 38626.5}, {"dt": "2015-07-01T00:00:00", "Export Empties": 39246.5}, {"dt": "2015-08-01T00:00:00", "Export Empties": 43513.0}, {"dt": "2015-09-01T00:00:00", "Export Empties": 42798.25}, {"dt": "2015-10-01T00:00:00", "Export Empties": 50516.25}, {"dt": "2015-11-01T00:00:00", "Export Empties": 32209.75}, {"dt": "2015-12-01T00:00:00", "Export Empties": 31125.75}, {"dt": "2016-01-01T00:00:00", "Export Empties": 26786.0}, {"dt": "2016-02-01T00:00:00", "Export Empties": 35020.75}, {"dt": "2016-03-01T00:00:00", "Export Empties": 28672.5}, {"dt": "2016-04-01T00:00:00", "Export Empties": 35977.75}, {"dt": "2016-05-01T00:00:00", "Export Empties": 39818.5}, {"dt": "2016-06-01T00:00:00", "Export Empties": 35632.5}, {"dt": "2016-07-01T00:00:00", "Export Empties": 37541.0}, {"dt": "2016-08-01T00:00:00", "Export Empties": 40049.0}, {"dt": "2016-09-01T00:00:00", "Export Empties": 35027.5}, {"dt": "2016-10-01T00:00:00", "Export Empties": 32711.75}, {"dt": "2016-11-01T00:00:00", "Export Empties": 36412.0}, {"dt": "2016-12-01T00:00:00", "Export Empties": 39193.75}, {"dt": "2017-01-01T00:00:00", "Export Empties": 31465.5}, {"dt": "2017-02-01T00:00:00", "Export Empties": 30437.0}, {"dt": "2017-03-01T00:00:00", "Export Empties": 32487.75}, {"dt": "2017-04-01T00:00:00", "Export Empties": 34927.25}, {"dt": "2017-05-01T00:00:00", "Export Empties": 56015.75}, {"dt": "2017-06-01T00:00:00", "Export Empties": 44037.0}, {"dt": "2017-07-01T00:00:00", "Export Empties": 46854.75}, {"dt": "2017-08-01T00:00:00", "Export Empties": 50063.75}, {"dt": "2017-09-01T00:00:00", "Export Empties": 49844.25}, {"dt": "2017-10-01T00:00:00", "Export Empties": 51182.5}, {"dt": "2017-11-01T00:00:00", "Export Empties": 40057.25}, {"dt": "2017-12-01T00:00:00", "Export Empties": 39364.0}, {"dt": "2018-01-01T00:00:00", "Export Empties": 37882.5}, {"dt": "2018-02-01T00:00:00", "Export Empties": 34156.0}, {"dt": "2018-03-01T00:00:00", "Export Empties": 38151.5}, {"dt": "2018-04-01T00:00:00", "Export Empties": 33311.0}, {"dt": "2018-05-01T00:00:00", "Export Empties": 40552.0}, {"dt": "2018-06-01T00:00:00", "Export Empties": 35615.0}, {"dt": "2018-07-01T00:00:00", "Export Empties": 48182.0}, {"dt": "2018-08-01T00:00:00", "Export Empties": 56726.75}, {"dt": "2018-09-01T00:00:00", "Export Empties": 44970.25}, {"dt": "2018-10-01T00:00:00", "Export Empties": 58615.75}, {"dt": "2018-11-01T00:00:00", "Export Empties": 47841.0}, {"dt": "2018-12-01T00:00:00", "Export Empties": 52045.5}, {"dt": "2019-01-01T00:00:00", "Export Empties": 50537.75}, {"dt": "2019-02-01T00:00:00", "Export Empties": 44037.75}, {"dt": "2019-03-01T00:00:00", "Export Empties": 41711.75}, {"dt": "2019-04-01T00:00:00", "Export Empties": 38579.5}, {"dt": "2019-05-01T00:00:00", "Export Empties": 51173.25}, {"dt": "2019-06-01T00:00:00", "Export Empties": 48622.25}, {"dt": "2019-07-01T00:00:00", "Export Empties": 56696.0}, {"dt": "2019-08-01T00:00:00", "Export Empties": 54405.25}, {"dt": "2019-09-01T00:00:00", "Export Empties": 52765.5}, {"dt": "2019-10-01T00:00:00", "Export Empties": 57427.25}, {"dt": "2019-11-01T00:00:00", "Export Empties": 44991.5}, {"dt": "2019-12-01T00:00:00", "Export Empties": 41854.25}, {"dt": "2020-01-01T00:00:00", "Export Empties": 36655.5}, {"dt": "2020-02-01T00:00:00", "Export Empties": 27917.5}, {"dt": "2020-03-01T00:00:00", "Export Empties": 26347.25}, {"dt": "2020-04-01T00:00:00", "Export Empties": 32604.5}, {"dt": "2020-05-01T00:00:00", "Export Empties": 39940.0}, {"dt": "2020-06-01T00:00:00", "Export Empties": 41840.75}, {"dt": "2020-07-01T00:00:00", "Export Empties": 45383.5}, {"dt": "2020-08-01T00:00:00", "Export Empties": 50159.75}, {"dt": "2020-09-01T00:00:00", "Export Empties": 57704.0}, {"dt": "2020-10-01T00:00:00", "Export Empties": 57644.25}, {"dt": "2020-11-01T00:00:00", "Export Empties": 64844.25}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[49]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doChart</span><span class="p">(</span><span class="n">df_va_clean</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Virgina&#39;</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;Import Loads&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[49]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-1a93393c86f946329df058486669e2f7"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-1a93393c86f946329df058486669e2f7") {
      outputDiv = document.getElementById("altair-viz-1a93393c86f946329df058486669e2f7");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-3ee90084afdc5b4a3c978121dea91323"}, "mark": {"type": "line", "color": "purple"}, "encoding": {"tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "Import Loads", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Volume [TEUs]"}, "field": "Import Loads"}}, "height": 400, "title": "Port of Virgina Import Loads Container Volume", "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-3ee90084afdc5b4a3c978121dea91323": [{"dt": "2009-01-01T00:00:00", "Import Loads": 55634.0}, {"dt": "2009-02-01T00:00:00", "Import Loads": 55223.0}, {"dt": "2009-03-01T00:00:00", "Import Loads": 53377.0}, {"dt": "2009-04-01T00:00:00", "Import Loads": 54487.0}, {"dt": "2009-05-01T00:00:00", "Import Loads": 54293.0}, {"dt": "2009-06-01T00:00:00", "Import Loads": 54490.0}, {"dt": "2009-07-01T00:00:00", "Import Loads": 58313.0}, {"dt": "2009-08-01T00:00:00", "Import Loads": 60431.0}, {"dt": "2009-09-01T00:00:00", "Import Loads": 63706.0}, {"dt": "2009-10-01T00:00:00", "Import Loads": 63222.0}, {"dt": "2009-11-01T00:00:00", "Import Loads": 59463.0}, {"dt": "2009-12-01T00:00:00", "Import Loads": 57292.0}, {"dt": "2010-01-01T00:00:00", "Import Loads": 51330.0}, {"dt": "2010-02-01T00:00:00", "Import Loads": 60737.0}, {"dt": "2010-03-01T00:00:00", "Import Loads": 63306.0}, {"dt": "2010-04-01T00:00:00", "Import Loads": 56636.0}, {"dt": "2010-05-01T00:00:00", "Import Loads": 65445.0}, {"dt": "2010-06-01T00:00:00", "Import Loads": 67022.0}, {"dt": "2010-07-01T00:00:00", "Import Loads": 65771.0}, {"dt": "2010-08-01T00:00:00", "Import Loads": 72959.0}, {"dt": "2010-09-01T00:00:00", "Import Loads": 65747.0}, {"dt": "2010-10-01T00:00:00", "Import Loads": 75750.0}, {"dt": "2010-11-01T00:00:00", "Import Loads": 67159.0}, {"dt": "2010-12-01T00:00:00", "Import Loads": 54818.0}, {"dt": "2011-01-01T00:00:00", "Import Loads": 64939.0}, {"dt": "2011-02-01T00:00:00", "Import Loads": 61659.0}, {"dt": "2011-03-01T00:00:00", "Import Loads": 60139.5}, {"dt": "2011-04-01T00:00:00", "Import Loads": 64573.25}, {"dt": "2011-05-01T00:00:00", "Import Loads": 62843.0}, {"dt": "2011-06-01T00:00:00", "Import Loads": 60048.5}, {"dt": "2011-07-01T00:00:00", "Import Loads": 68534.0}, {"dt": "2011-08-01T00:00:00", "Import Loads": 62959.5}, {"dt": "2011-09-01T00:00:00", "Import Loads": 67022.0}, {"dt": "2011-10-01T00:00:00", "Import Loads": 71694.5}, {"dt": "2011-11-01T00:00:00", "Import Loads": 66387.0}, {"dt": "2011-12-01T00:00:00", "Import Loads": 58074.0}, {"dt": "2012-01-01T00:00:00", "Import Loads": 62271.0}, {"dt": "2012-02-01T00:00:00", "Import Loads": 62751.75}, {"dt": "2012-03-01T00:00:00", "Import Loads": 68116.5}, {"dt": "2012-04-01T00:00:00", "Import Loads": 68954.0}, {"dt": "2012-05-01T00:00:00", "Import Loads": 72083.75}, {"dt": "2012-06-01T00:00:00", "Import Loads": 71130.0}, {"dt": "2012-07-01T00:00:00", "Import Loads": 78709.0}, {"dt": "2012-08-01T00:00:00", "Import Loads": 81770.25}, {"dt": "2012-09-01T00:00:00", "Import Loads": 76750.0}, {"dt": "2012-10-01T00:00:00", "Import Loads": 72946.0}, {"dt": "2012-11-01T00:00:00", "Import Loads": 85116.25}, {"dt": "2012-12-01T00:00:00", "Import Loads": 69719.0}, {"dt": "2013-01-01T00:00:00", "Import Loads": 62405.0}, {"dt": "2013-02-01T00:00:00", "Import Loads": 68595.0}, {"dt": "2013-03-01T00:00:00", "Import Loads": 70953.75}, {"dt": "2013-04-01T00:00:00", "Import Loads": 74000.5}, {"dt": "2013-05-01T00:00:00", "Import Loads": 77914.5}, {"dt": "2013-06-01T00:00:00", "Import Loads": 72839.25}, {"dt": "2013-07-01T00:00:00", "Import Loads": 89410.5}, {"dt": "2013-08-01T00:00:00", "Import Loads": 90565.25}, {"dt": "2013-09-01T00:00:00", "Import Loads": 80028.75}, {"dt": "2013-10-01T00:00:00", "Import Loads": 92093.0}, {"dt": "2013-11-01T00:00:00", "Import Loads": 79328.5}, {"dt": "2013-12-01T00:00:00", "Import Loads": 75984.5}, {"dt": "2014-01-01T00:00:00", "Import Loads": 69836.0}, {"dt": "2014-02-01T00:00:00", "Import Loads": 77646.5}, {"dt": "2014-03-01T00:00:00", "Import Loads": 80519.5}, {"dt": "2014-04-01T00:00:00", "Import Loads": 87112.5}, {"dt": "2014-05-01T00:00:00", "Import Loads": 84854.5}, {"dt": "2014-06-01T00:00:00", "Import Loads": 77135.0}, {"dt": "2014-07-01T00:00:00", "Import Loads": 95080.25}, {"dt": "2014-08-01T00:00:00", "Import Loads": 89698.25}, {"dt": "2014-09-01T00:00:00", "Import Loads": 87039.5}, {"dt": "2014-10-01T00:00:00", "Import Loads": 98066.0}, {"dt": "2014-11-01T00:00:00", "Import Loads": 84585.5}, {"dt": "2014-12-01T00:00:00", "Import Loads": 86305.0}, {"dt": "2015-01-01T00:00:00", "Import Loads": 79732.75}, {"dt": "2015-02-01T00:00:00", "Import Loads": 76846.25}, {"dt": "2015-03-01T00:00:00", "Import Loads": 105719.0}, {"dt": "2015-04-01T00:00:00", "Import Loads": 87124.0}, {"dt": "2015-05-01T00:00:00", "Import Loads": 94614.75}, {"dt": "2015-06-01T00:00:00", "Import Loads": 87172.5}, {"dt": "2015-07-01T00:00:00", "Import Loads": 96918.5}, {"dt": "2015-08-01T00:00:00", "Import Loads": 93043.75}, {"dt": "2015-09-01T00:00:00", "Import Loads": 92721.5}, {"dt": "2015-10-01T00:00:00", "Import Loads": 100230.25}, {"dt": "2015-11-01T00:00:00", "Import Loads": 85371.25}, {"dt": "2015-12-01T00:00:00", "Import Loads": 83025.5}, {"dt": "2016-01-01T00:00:00", "Import Loads": 84185.5}, {"dt": "2016-02-01T00:00:00", "Import Loads": 99882.75}, {"dt": "2016-03-01T00:00:00", "Import Loads": 91059.0}, {"dt": "2016-04-01T00:00:00", "Import Loads": 92429.0}, {"dt": "2016-05-01T00:00:00", "Import Loads": 92438.5}, {"dt": "2016-06-01T00:00:00", "Import Loads": 93629.5}, {"dt": "2016-07-01T00:00:00", "Import Loads": 100105.5}, {"dt": "2016-08-01T00:00:00", "Import Loads": 107268.0}, {"dt": "2016-09-01T00:00:00", "Import Loads": 100229.25}, {"dt": "2016-10-01T00:00:00", "Import Loads": 114093.0}, {"dt": "2016-11-01T00:00:00", "Import Loads": 101860.75}, {"dt": "2016-12-01T00:00:00", "Import Loads": 97712.25}, {"dt": "2017-01-01T00:00:00", "Import Loads": 101301.5}, {"dt": "2017-02-01T00:00:00", "Import Loads": 96921.25}, {"dt": "2017-03-01T00:00:00", "Import Loads": 99664.75}, {"dt": "2017-04-01T00:00:00", "Import Loads": 101113.75}, {"dt": "2017-05-01T00:00:00", "Import Loads": 100593.5}, {"dt": "2017-06-01T00:00:00", "Import Loads": 103006.0}, {"dt": "2017-07-01T00:00:00", "Import Loads": 109215.25}, {"dt": "2017-08-01T00:00:00", "Import Loads": 113187.75}, {"dt": "2017-09-01T00:00:00", "Import Loads": 109716.0}, {"dt": "2017-10-01T00:00:00", "Import Loads": 125075.25}, {"dt": "2017-11-01T00:00:00", "Import Loads": 110672.75}, {"dt": "2017-12-01T00:00:00", "Import Loads": 105866.75}, {"dt": "2018-01-01T00:00:00", "Import Loads": 104149.75}, {"dt": "2018-02-01T00:00:00", "Import Loads": 100367.75}, {"dt": "2018-03-01T00:00:00", "Import Loads": 113122.5}, {"dt": "2018-04-01T00:00:00", "Import Loads": 97606.75}, {"dt": "2018-05-01T00:00:00", "Import Loads": 108592.25}, {"dt": "2018-06-01T00:00:00", "Import Loads": 105955.0}, {"dt": "2018-07-01T00:00:00", "Import Loads": 120132.0}, {"dt": "2018-08-01T00:00:00", "Import Loads": 117041.5}, {"dt": "2018-09-01T00:00:00", "Import Loads": 108980.5}, {"dt": "2018-10-01T00:00:00", "Import Loads": 127676.5}, {"dt": "2018-11-01T00:00:00", "Import Loads": 112218.25}, {"dt": "2018-12-01T00:00:00", "Import Loads": 111566.0}, {"dt": "2019-01-01T00:00:00", "Import Loads": 109756.5}, {"dt": "2019-02-01T00:00:00", "Import Loads": 105356.75}, {"dt": "2019-03-01T00:00:00", "Import Loads": 107039.5}, {"dt": "2019-04-01T00:00:00", "Import Loads": 119265.75}, {"dt": "2019-05-01T00:00:00", "Import Loads": 119591.75}, {"dt": "2019-06-01T00:00:00", "Import Loads": 112663.75}, {"dt": "2019-07-01T00:00:00", "Import Loads": 125259.5}, {"dt": "2019-08-01T00:00:00", "Import Loads": 121542.25}, {"dt": "2019-09-01T00:00:00", "Import Loads": 114642.5}, {"dt": "2019-10-01T00:00:00", "Import Loads": 124142.25}, {"dt": "2019-11-01T00:00:00", "Import Loads": 103410.0}, {"dt": "2019-12-01T00:00:00", "Import Loads": 103710.5}, {"dt": "2020-01-01T00:00:00", "Import Loads": 108884.0}, {"dt": "2020-02-01T00:00:00", "Import Loads": 97559.0}, {"dt": "2020-03-01T00:00:00", "Import Loads": 99129.0}, {"dt": "2020-04-01T00:00:00", "Import Loads": 100310.25}, {"dt": "2020-05-01T00:00:00", "Import Loads": 87669.25}, {"dt": "2020-06-01T00:00:00", "Import Loads": 95502.25}, {"dt": "2020-07-01T00:00:00", "Import Loads": 105691.75}, {"dt": "2020-08-01T00:00:00", "Import Loads": 120913.75}, {"dt": "2020-09-01T00:00:00", "Import Loads": 121114.75}, {"dt": "2020-10-01T00:00:00", "Import Loads": 131769.75}, {"dt": "2020-11-01T00:00:00", "Import Loads": 125214.25}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[50]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doChart</span><span class="p">(</span><span class="n">df_va_clean</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Virgina&#39;</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;Export Loads&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[50]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-a8f66d6968fc47879d2d3c64b6a001c6"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-a8f66d6968fc47879d2d3c64b6a001c6") {
      outputDiv = document.getElementById("altair-viz-a8f66d6968fc47879d2d3c64b6a001c6");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-c3da2efa78a54d6935c1c8b7ff17f0ab"}, "mark": {"type": "line", "color": "purple"}, "encoding": {"tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "Export Loads", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Volume [TEUs]"}, "field": "Export Loads"}}, "height": 400, "title": "Port of Virgina Export Loads Container Volume", "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-c3da2efa78a54d6935c1c8b7ff17f0ab": [{"dt": "2009-01-01T00:00:00", "Export Loads": 54809.0}, {"dt": "2009-02-01T00:00:00", "Export Loads": 58763.0}, {"dt": "2009-03-01T00:00:00", "Export Loads": 64383.0}, {"dt": "2009-04-01T00:00:00", "Export Loads": 65024.0}, {"dt": "2009-05-01T00:00:00", "Export Loads": 64106.0}, {"dt": "2009-06-01T00:00:00", "Export Loads": 65992.0}, {"dt": "2009-07-01T00:00:00", "Export Loads": 65423.0}, {"dt": "2009-08-01T00:00:00", "Export Loads": 68823.0}, {"dt": "2009-09-01T00:00:00", "Export Loads": 70008.0}, {"dt": "2009-10-01T00:00:00", "Export Loads": 70232.0}, {"dt": "2009-11-01T00:00:00", "Export Loads": 73163.0}, {"dt": "2009-12-01T00:00:00", "Export Loads": 71105.0}, {"dt": "2010-01-01T00:00:00", "Export Loads": 64664.0}, {"dt": "2010-02-01T00:00:00", "Export Loads": 72858.0}, {"dt": "2010-03-01T00:00:00", "Export Loads": 77834.0}, {"dt": "2010-04-01T00:00:00", "Export Loads": 69329.0}, {"dt": "2010-05-01T00:00:00", "Export Loads": 72525.0}, {"dt": "2010-06-01T00:00:00", "Export Loads": 68316.0}, {"dt": "2010-07-01T00:00:00", "Export Loads": 61111.0}, {"dt": "2010-08-01T00:00:00", "Export Loads": 68069.0}, {"dt": "2010-09-01T00:00:00", "Export Loads": 60866.0}, {"dt": "2010-10-01T00:00:00", "Export Loads": 73317.0}, {"dt": "2010-11-01T00:00:00", "Export Loads": 72511.0}, {"dt": "2010-12-01T00:00:00", "Export Loads": 62931.0}, {"dt": "2011-01-01T00:00:00", "Export Loads": 71433.0}, {"dt": "2011-02-01T00:00:00", "Export Loads": 67183.0}, {"dt": "2011-03-01T00:00:00", "Export Loads": 76702.0}, {"dt": "2011-04-01T00:00:00", "Export Loads": 73538.0}, {"dt": "2011-05-01T00:00:00", "Export Loads": 71395.0}, {"dt": "2011-06-01T00:00:00", "Export Loads": 69525.5}, {"dt": "2011-07-01T00:00:00", "Export Loads": 71247.0}, {"dt": "2011-08-01T00:00:00", "Export Loads": 66532.0}, {"dt": "2011-09-01T00:00:00", "Export Loads": 68437.0}, {"dt": "2011-10-01T00:00:00", "Export Loads": 73366.5}, {"dt": "2011-11-01T00:00:00", "Export Loads": 71594.0}, {"dt": "2011-12-01T00:00:00", "Export Loads": 74381.0}, {"dt": "2012-01-01T00:00:00", "Export Loads": 69867.0}, {"dt": "2012-02-01T00:00:00", "Export Loads": 75707.75}, {"dt": "2012-03-01T00:00:00", "Export Loads": 79521.0}, {"dt": "2012-04-01T00:00:00", "Export Loads": 75192.5}, {"dt": "2012-05-01T00:00:00", "Export Loads": 83205.75}, {"dt": "2012-06-01T00:00:00", "Export Loads": 75581.0}, {"dt": "2012-07-01T00:00:00", "Export Loads": 73709.0}, {"dt": "2012-08-01T00:00:00", "Export Loads": 78028.75}, {"dt": "2012-09-01T00:00:00", "Export Loads": 78224.0}, {"dt": "2012-10-01T00:00:00", "Export Loads": 73756.0}, {"dt": "2012-11-01T00:00:00", "Export Loads": 86419.25}, {"dt": "2012-12-01T00:00:00", "Export Loads": 87596.0}, {"dt": "2013-01-01T00:00:00", "Export Loads": 72685.25}, {"dt": "2013-02-01T00:00:00", "Export Loads": 79139.0}, {"dt": "2013-03-01T00:00:00", "Export Loads": 87648.75}, {"dt": "2013-04-01T00:00:00", "Export Loads": 83128.25}, {"dt": "2013-05-01T00:00:00", "Export Loads": 84840.75}, {"dt": "2013-06-01T00:00:00", "Export Loads": 76399.0}, {"dt": "2013-07-01T00:00:00", "Export Loads": 88398.75}, {"dt": "2013-08-01T00:00:00", "Export Loads": 83210.0}, {"dt": "2013-09-01T00:00:00", "Export Loads": 80569.75}, {"dt": "2013-10-01T00:00:00", "Export Loads": 90190.0}, {"dt": "2013-11-01T00:00:00", "Export Loads": 89169.0}, {"dt": "2013-12-01T00:00:00", "Export Loads": 83464.75}, {"dt": "2014-01-01T00:00:00", "Export Loads": 78065.0}, {"dt": "2014-02-01T00:00:00", "Export Loads": 81435.5}, {"dt": "2014-03-01T00:00:00", "Export Loads": 93016.25}, {"dt": "2014-04-01T00:00:00", "Export Loads": 91701.25}, {"dt": "2014-05-01T00:00:00", "Export Loads": 91686.25}, {"dt": "2014-06-01T00:00:00", "Export Loads": 81780.5}, {"dt": "2014-07-01T00:00:00", "Export Loads": 82534.25}, {"dt": "2014-08-01T00:00:00", "Export Loads": 85852.25}, {"dt": "2014-09-01T00:00:00", "Export Loads": 77345.5}, {"dt": "2014-10-01T00:00:00", "Export Loads": 86908.5}, {"dt": "2014-11-01T00:00:00", "Export Loads": 93442.0}, {"dt": "2014-12-01T00:00:00", "Export Loads": 90759.0}, {"dt": "2015-01-01T00:00:00", "Export Loads": 83349.25}, {"dt": "2015-02-01T00:00:00", "Export Loads": 76149.5}, {"dt": "2015-03-01T00:00:00", "Export Loads": 96564.5}, {"dt": "2015-04-01T00:00:00", "Export Loads": 92568.25}, {"dt": "2015-05-01T00:00:00", "Export Loads": 91801.5}, {"dt": "2015-06-01T00:00:00", "Export Loads": 81363.0}, {"dt": "2015-07-01T00:00:00", "Export Loads": 83437.75}, {"dt": "2015-08-01T00:00:00", "Export Loads": 77388.0}, {"dt": "2015-09-01T00:00:00", "Export Loads": 76253.5}, {"dt": "2015-10-01T00:00:00", "Export Loads": 78780.0}, {"dt": "2015-11-01T00:00:00", "Export Loads": 81038.5}, {"dt": "2015-12-01T00:00:00", "Export Loads": 79134.25}, {"dt": "2016-01-01T00:00:00", "Export Loads": 76359.75}, {"dt": "2016-02-01T00:00:00", "Export Loads": 82064.75}, {"dt": "2016-03-01T00:00:00", "Export Loads": 89454.5}, {"dt": "2016-04-01T00:00:00", "Export Loads": 82322.5}, {"dt": "2016-05-01T00:00:00", "Export Loads": 80729.0}, {"dt": "2016-06-01T00:00:00", "Export Loads": 81809.75}, {"dt": "2016-07-01T00:00:00", "Export Loads": 77174.0}, {"dt": "2016-08-01T00:00:00", "Export Loads": 84430.75}, {"dt": "2016-09-01T00:00:00", "Export Loads": 81902.0}, {"dt": "2016-10-01T00:00:00", "Export Loads": 88796.25}, {"dt": "2016-11-01T00:00:00", "Export Loads": 94158.5}, {"dt": "2016-12-01T00:00:00", "Export Loads": 86917.0}, {"dt": "2017-01-01T00:00:00", "Export Loads": 89766.5}, {"dt": "2017-02-01T00:00:00", "Export Loads": 85826.5}, {"dt": "2017-03-01T00:00:00", "Export Loads": 92384.0}, {"dt": "2017-04-01T00:00:00", "Export Loads": 85623.0}, {"dt": "2017-05-01T00:00:00", "Export Loads": 85824.0}, {"dt": "2017-06-01T00:00:00", "Export Loads": 81533.75}, {"dt": "2017-07-01T00:00:00", "Export Loads": 75702.75}, {"dt": "2017-08-01T00:00:00", "Export Loads": 75430.0}, {"dt": "2017-09-01T00:00:00", "Export Loads": 76794.25}, {"dt": "2017-10-01T00:00:00", "Export Loads": 87749.75}, {"dt": "2017-11-01T00:00:00", "Export Loads": 87695.0}, {"dt": "2017-12-01T00:00:00", "Export Loads": 90240.75}, {"dt": "2018-01-01T00:00:00", "Export Loads": 76293.5}, {"dt": "2018-02-01T00:00:00", "Export Loads": 82103.75}, {"dt": "2018-03-01T00:00:00", "Export Loads": 98648.25}, {"dt": "2018-04-01T00:00:00", "Export Loads": 86251.25}, {"dt": "2018-05-01T00:00:00", "Export Loads": 85157.25}, {"dt": "2018-06-01T00:00:00", "Export Loads": 80595.5}, {"dt": "2018-07-01T00:00:00", "Export Loads": 82853.0}, {"dt": "2018-08-01T00:00:00", "Export Loads": 83512.25}, {"dt": "2018-09-01T00:00:00", "Export Loads": 65587.75}, {"dt": "2018-10-01T00:00:00", "Export Loads": 83576.75}, {"dt": "2018-11-01T00:00:00", "Export Loads": 77788.75}, {"dt": "2018-12-01T00:00:00", "Export Loads": 75418.0}, {"dt": "2019-01-01T00:00:00", "Export Loads": 77948.25}, {"dt": "2019-02-01T00:00:00", "Export Loads": 76641.75}, {"dt": "2019-03-01T00:00:00", "Export Loads": 89282.0}, {"dt": "2019-04-01T00:00:00", "Export Loads": 85378.0}, {"dt": "2019-05-01T00:00:00", "Export Loads": 88064.5}, {"dt": "2019-06-01T00:00:00", "Export Loads": 76535.25}, {"dt": "2019-07-01T00:00:00", "Export Loads": 80954.75}, {"dt": "2019-08-01T00:00:00", "Export Loads": 80654.75}, {"dt": "2019-09-01T00:00:00", "Export Loads": 71560.5}, {"dt": "2019-10-01T00:00:00", "Export Loads": 83556.5}, {"dt": "2019-11-01T00:00:00", "Export Loads": 77241.0}, {"dt": "2019-12-01T00:00:00", "Export Loads": 78284.75}, {"dt": "2020-01-01T00:00:00", "Export Loads": 79328.0}, {"dt": "2020-02-01T00:00:00", "Export Loads": 80834.0}, {"dt": "2020-03-01T00:00:00", "Export Loads": 90761.0}, {"dt": "2020-04-01T00:00:00", "Export Loads": 71158.25}, {"dt": "2020-05-01T00:00:00", "Export Loads": 72160.0}, {"dt": "2020-06-01T00:00:00", "Export Loads": 71591.0}, {"dt": "2020-07-01T00:00:00", "Export Loads": 68593.75}, {"dt": "2020-08-01T00:00:00", "Export Loads": 75325.0}, {"dt": "2020-09-01T00:00:00", "Export Loads": 75525.75}, {"dt": "2020-10-01T00:00:00", "Export Loads": 83705.0}, {"dt": "2020-11-01T00:00:00", "Export Loads": 89031.75}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[51]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doChart</span><span class="p">(</span><span class="n">df_va_clean</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Virgina&#39;</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;Total TEUs&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[51]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-6cdea60cfc3d4171b9257cb5ca602c4a"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-6cdea60cfc3d4171b9257cb5ca602c4a") {
      outputDiv = document.getElementById("altair-viz-6cdea60cfc3d4171b9257cb5ca602c4a");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-524f44f7b8901e16e0e2e44db38f2390"}, "mark": {"type": "line", "color": "purple"}, "encoding": {"tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "Total TEUs", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Volume [TEUs]"}, "field": "Total TEUs"}}, "height": 400, "title": "Port of Virgina Total TEUs Container Volume", "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-524f44f7b8901e16e0e2e44db38f2390": [{"dt": "2009-01-01T00:00:00", "Total TEUs": 137994.0}, {"dt": "2009-02-01T00:00:00", "Total TEUs": 133359.0}, {"dt": "2009-03-01T00:00:00", "Total TEUs": 136736.0}, {"dt": "2009-04-01T00:00:00", "Total TEUs": 144074.0}, {"dt": "2009-05-01T00:00:00", "Total TEUs": 141437.0}, {"dt": "2009-06-01T00:00:00", "Total TEUs": 138452.0}, {"dt": "2009-07-01T00:00:00", "Total TEUs": 142170.0}, {"dt": "2009-08-01T00:00:00", "Total TEUs": 151005.0}, {"dt": "2009-09-01T00:00:00", "Total TEUs": 157443.0}, {"dt": "2009-10-01T00:00:00", "Total TEUs": 159782.0}, {"dt": "2009-11-01T00:00:00", "Total TEUs": 154577.0}, {"dt": "2009-12-01T00:00:00", "Total TEUs": 148199.0}, {"dt": "2010-01-01T00:00:00", "Total TEUs": 144097.0}, {"dt": "2010-02-01T00:00:00", "Total TEUs": 155049.0}, {"dt": "2010-03-01T00:00:00", "Total TEUs": 167262.0}, {"dt": "2010-04-01T00:00:00", "Total TEUs": 147119.0}, {"dt": "2010-05-01T00:00:00", "Total TEUs": 161536.0}, {"dt": "2010-06-01T00:00:00", "Total TEUs": 160701.0}, {"dt": "2010-07-01T00:00:00", "Total TEUs": 153945.0}, {"dt": "2010-08-01T00:00:00", "Total TEUs": 175122.0}, {"dt": "2010-09-01T00:00:00", "Total TEUs": 153006.0}, {"dt": "2010-10-01T00:00:00", "Total TEUs": 175518.0}, {"dt": "2010-11-01T00:00:00", "Total TEUs": 163211.0}, {"dt": "2010-12-01T00:00:00", "Total TEUs": 138452.0}, {"dt": "2011-01-01T00:00:00", "Total TEUs": 159265.0}, {"dt": "2011-02-01T00:00:00", "Total TEUs": 153646.0}, {"dt": "2011-03-01T00:00:00", "Total TEUs": 159754.0}, {"dt": "2011-04-01T00:00:00", "Total TEUs": 161254.25}, {"dt": "2011-05-01T00:00:00", "Total TEUs": 158539.0}, {"dt": "2011-06-01T00:00:00", "Total TEUs": 151449.0}, {"dt": "2011-07-01T00:00:00", "Total TEUs": 167076.0}, {"dt": "2011-08-01T00:00:00", "Total TEUs": 151974.5}, {"dt": "2011-09-01T00:00:00", "Total TEUs": 164050.0}, {"dt": "2011-10-01T00:00:00", "Total TEUs": 172776.25}, {"dt": "2011-11-01T00:00:00", "Total TEUs": 163945.0}, {"dt": "2011-12-01T00:00:00", "Total TEUs": 154300.0}, {"dt": "2012-01-01T00:00:00", "Total TEUs": 154299.75}, {"dt": "2012-02-01T00:00:00", "Total TEUs": 157049.5}, {"dt": "2012-03-01T00:00:00", "Total TEUs": 166718.5}, {"dt": "2012-04-01T00:00:00", "Total TEUs": 169643.5}, {"dt": "2012-05-01T00:00:00", "Total TEUs": 178583.75}, {"dt": "2012-06-01T00:00:00", "Total TEUs": 168430.0}, {"dt": "2012-07-01T00:00:00", "Total TEUs": 180384.0}, {"dt": "2012-08-01T00:00:00", "Total TEUs": 188657.5}, {"dt": "2012-09-01T00:00:00", "Total TEUs": 182317.75}, {"dt": "2012-10-01T00:00:00", "Total TEUs": 175330.0}, {"dt": "2012-11-01T00:00:00", "Total TEUs": 198719.5}, {"dt": "2012-12-01T00:00:00", "Total TEUs": 185750.25}, {"dt": "2013-01-01T00:00:00", "Total TEUs": 158766.25}, {"dt": "2013-02-01T00:00:00", "Total TEUs": 169391.0}, {"dt": "2013-03-01T00:00:00", "Total TEUs": 179517.75}, {"dt": "2013-04-01T00:00:00", "Total TEUs": 179369.5}, {"dt": "2013-05-01T00:00:00", "Total TEUs": 191367.5}, {"dt": "2013-06-01T00:00:00", "Total TEUs": 175864.25}, {"dt": "2013-07-01T00:00:00", "Total TEUs": 205137.25}, {"dt": "2013-08-01T00:00:00", "Total TEUs": 198329.0}, {"dt": "2013-09-01T00:00:00", "Total TEUs": 185184.5}, {"dt": "2013-10-01T00:00:00", "Total TEUs": 206597.25}, {"dt": "2013-11-01T00:00:00", "Total TEUs": 192917.75}, {"dt": "2013-12-01T00:00:00", "Total TEUs": 181090.5}, {"dt": "2014-01-01T00:00:00", "Total TEUs": 167271.5}, {"dt": "2014-02-01T00:00:00", "Total TEUs": 179523.5}, {"dt": "2014-03-01T00:00:00", "Total TEUs": 197833.5}, {"dt": "2014-04-01T00:00:00", "Total TEUs": 201390.25}, {"dt": "2014-05-01T00:00:00", "Total TEUs": 204232.25}, {"dt": "2014-06-01T00:00:00", "Total TEUs": 186403.25}, {"dt": "2014-07-01T00:00:00", "Total TEUs": 207771.0}, {"dt": "2014-08-01T00:00:00", "Total TEUs": 214355.25}, {"dt": "2014-09-01T00:00:00", "Total TEUs": 201113.25}, {"dt": "2014-10-01T00:00:00", "Total TEUs": 221104.75}, {"dt": "2014-11-01T00:00:00", "Total TEUs": 208763.5}, {"dt": "2014-12-01T00:00:00", "Total TEUs": 203275.75}, {"dt": "2015-01-01T00:00:00", "Total TEUs": 191996.0}, {"dt": "2015-02-01T00:00:00", "Total TEUs": 178104.75}, {"dt": "2015-03-01T00:00:00", "Total TEUs": 229410.0}, {"dt": "2015-04-01T00:00:00", "Total TEUs": 210177.0}, {"dt": "2015-05-01T00:00:00", "Total TEUs": 230510.75}, {"dt": "2015-06-01T00:00:00", "Total TEUs": 213517.25}, {"dt": "2015-07-01T00:00:00", "Total TEUs": 225988.25}, {"dt": "2015-08-01T00:00:00", "Total TEUs": 220069.0}, {"dt": "2015-09-01T00:00:00", "Total TEUs": 215520.25}, {"dt": "2015-10-01T00:00:00", "Total TEUs": 233466.0}, {"dt": "2015-11-01T00:00:00", "Total TEUs": 203471.75}, {"dt": "2015-12-01T00:00:00", "Total TEUs": 197039.0}, {"dt": "2016-01-01T00:00:00", "Total TEUs": 192844.25}, {"dt": "2016-02-01T00:00:00", "Total TEUs": 220726.25}, {"dt": "2016-03-01T00:00:00", "Total TEUs": 213186.0}, {"dt": "2016-04-01T00:00:00", "Total TEUs": 215253.75}, {"dt": "2016-05-01T00:00:00", "Total TEUs": 219398.25}, {"dt": "2016-06-01T00:00:00", "Total TEUs": 216672.0}, {"dt": "2016-07-01T00:00:00", "Total TEUs": 217909.75}, {"dt": "2016-08-01T00:00:00", "Total TEUs": 235511.0}, {"dt": "2016-09-01T00:00:00", "Total TEUs": 219857.25}, {"dt": "2016-10-01T00:00:00", "Total TEUs": 238567.25}, {"dt": "2016-11-01T00:00:00", "Total TEUs": 236155.25}, {"dt": "2016-12-01T00:00:00", "Total TEUs": 229624.25}, {"dt": "2017-01-01T00:00:00", "Total TEUs": 228516.0}, {"dt": "2017-02-01T00:00:00", "Total TEUs": 220375.5}, {"dt": "2017-03-01T00:00:00", "Total TEUs": 232148.25}, {"dt": "2017-04-01T00:00:00", "Total TEUs": 225196.25}, {"dt": "2017-05-01T00:00:00", "Total TEUs": 246871.25}, {"dt": "2017-06-01T00:00:00", "Total TEUs": 231674.75}, {"dt": "2017-07-01T00:00:00", "Total TEUs": 234230.0}, {"dt": "2017-08-01T00:00:00", "Total TEUs": 240604.5}, {"dt": "2017-09-01T00:00:00", "Total TEUs": 237815.5}, {"dt": "2017-10-01T00:00:00", "Total TEUs": 265489.75}, {"dt": "2017-11-01T00:00:00", "Total TEUs": 240570.0}, {"dt": "2017-12-01T00:00:00", "Total TEUs": 237524.5}, {"dt": "2018-01-01T00:00:00", "Total TEUs": 220533.75}, {"dt": "2018-02-01T00:00:00", "Total TEUs": 218726.5}, {"dt": "2018-03-01T00:00:00", "Total TEUs": 252230.25}, {"dt": "2018-04-01T00:00:00", "Total TEUs": 219281.0}, {"dt": "2018-05-01T00:00:00", "Total TEUs": 236890.5}, {"dt": "2018-06-01T00:00:00", "Total TEUs": 223839.5}, {"dt": "2018-07-01T00:00:00", "Total TEUs": 252679.0}, {"dt": "2018-08-01T00:00:00", "Total TEUs": 258820.5}, {"dt": "2018-09-01T00:00:00", "Total TEUs": 221354.75}, {"dt": "2018-10-01T00:00:00", "Total TEUs": 270538.0}, {"dt": "2018-11-01T00:00:00", "Total TEUs": 239890.0}, {"dt": "2018-12-01T00:00:00", "Total TEUs": 241120.5}, {"dt": "2019-01-01T00:00:00", "Total TEUs": 240110.5}, {"dt": "2019-02-01T00:00:00", "Total TEUs": 228151.25}, {"dt": "2019-03-01T00:00:00", "Total TEUs": 240035.25}, {"dt": "2019-04-01T00:00:00", "Total TEUs": 245933.25}, {"dt": "2019-05-01T00:00:00", "Total TEUs": 260893.5}, {"dt": "2019-06-01T00:00:00", "Total TEUs": 239329.0}, {"dt": "2019-07-01T00:00:00", "Total TEUs": 265559.25}, {"dt": "2019-08-01T00:00:00", "Total TEUs": 257675.25}, {"dt": "2019-09-01T00:00:00", "Total TEUs": 241415.5}, {"dt": "2019-10-01T00:00:00", "Total TEUs": 266976.0}, {"dt": "2019-11-01T00:00:00", "Total TEUs": 226981.5}, {"dt": "2019-12-01T00:00:00", "Total TEUs": 224901.75}, {"dt": "2020-01-01T00:00:00", "Total TEUs": 227233.5}, {"dt": "2020-02-01T00:00:00", "Total TEUs": 207815.75}, {"dt": "2020-03-01T00:00:00", "Total TEUs": 219315.25}, {"dt": "2020-04-01T00:00:00", "Total TEUs": 207244.25}, {"dt": "2020-05-01T00:00:00", "Total TEUs": 201837.25}, {"dt": "2020-06-01T00:00:00", "Total TEUs": 210669.25}, {"dt": "2020-07-01T00:00:00", "Total TEUs": 221028.0}, {"dt": "2020-08-01T00:00:00", "Total TEUs": 247348.5}, {"dt": "2020-09-01T00:00:00", "Total TEUs": 256438.5}, {"dt": "2020-10-01T00:00:00", "Total TEUs": 274215.0}, {"dt": "2020-11-01T00:00:00", "Total TEUs": 279868.25}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[52]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doYoyChart</span><span class="p">(</span><span class="n">df_va_clean</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Virgina&#39;</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;Import Loads&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[52]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-b3f1b490d35c463499f27bd1debad6a6"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-b3f1b490d35c463499f27bd1debad6a6") {
      outputDiv = document.getElementById("altair-viz-b3f1b490d35c463499f27bd1debad6a6");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-dbd0817a7f06a77f417e3a4c0dd76283"}, "mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['nolarge'] < 0"}, "value": "royalblue"}, "tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "nolarge", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Year-over-Year Volume Growth [%]"}, "field": "nolarge"}}, "height": 400, "title": "Port of Virgina Import Loads Container Volume Growth", "transform": [{"calculate": "datum['Import Loads'] > 400 ? NaN : datum['Import Loads']", "as": "nolarge"}], "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-dbd0817a7f06a77f417e3a4c0dd76283": [{"dt": "2009-01-01T00:00:00", "Import Loads": null}, {"dt": "2009-02-01T00:00:00", "Import Loads": null}, {"dt": "2009-03-01T00:00:00", "Import Loads": null}, {"dt": "2009-04-01T00:00:00", "Import Loads": null}, {"dt": "2009-05-01T00:00:00", "Import Loads": null}, {"dt": "2009-06-01T00:00:00", "Import Loads": null}, {"dt": "2009-07-01T00:00:00", "Import Loads": null}, {"dt": "2009-08-01T00:00:00", "Import Loads": null}, {"dt": "2009-09-01T00:00:00", "Import Loads": null}, {"dt": "2009-10-01T00:00:00", "Import Loads": null}, {"dt": "2009-11-01T00:00:00", "Import Loads": null}, {"dt": "2009-12-01T00:00:00", "Import Loads": null}, {"dt": "2010-01-01T00:00:00", "Import Loads": -7.7362763777546135}, {"dt": "2010-02-01T00:00:00", "Import Loads": 9.98497003060319}, {"dt": "2010-03-01T00:00:00", "Import Loads": 18.60164490323548}, {"dt": "2010-04-01T00:00:00", "Import Loads": 3.9440600510213475}, {"dt": "2010-05-01T00:00:00", "Import Loads": 20.540401156686872}, {"dt": "2010-06-01T00:00:00", "Import Loads": 22.998715360616618}, {"dt": "2010-07-01T00:00:00", "Import Loads": 12.789600946615675}, {"dt": "2010-08-01T00:00:00", "Import Loads": 20.731081729575873}, {"dt": "2010-09-01T00:00:00", "Import Loads": 3.20377986374909}, {"dt": "2010-10-01T00:00:00", "Import Loads": 19.815886874822052}, {"dt": "2010-11-01T00:00:00", "Import Loads": 12.94250206010461}, {"dt": "2010-12-01T00:00:00", "Import Loads": -4.31822942121064}, {"dt": "2011-01-01T00:00:00", "Import Loads": 26.51276056886811}, {"dt": "2011-02-01T00:00:00", "Import Loads": 1.5180203171048845}, {"dt": "2011-03-01T00:00:00", "Import Loads": -5.001895554923708}, {"dt": "2011-04-01T00:00:00", "Import Loads": 14.014496080231664}, {"dt": "2011-05-01T00:00:00", "Import Loads": -3.975857590343035}, {"dt": "2011-06-01T00:00:00", "Import Loads": -10.404792456208412}, {"dt": "2011-07-01T00:00:00", "Import Loads": 4.200939623846378}, {"dt": "2011-08-01T00:00:00", "Import Loads": -13.705642895324777}, {"dt": "2011-09-01T00:00:00", "Import Loads": 1.9392519810789821}, {"dt": "2011-10-01T00:00:00", "Import Loads": -5.353795379537951}, {"dt": "2011-11-01T00:00:00", "Import Loads": -1.1495108622820438}, {"dt": "2011-12-01T00:00:00", "Import Loads": 5.939654857893384}, {"dt": "2012-01-01T00:00:00", "Import Loads": -4.10847102665578}, {"dt": "2012-02-01T00:00:00", "Import Loads": 1.7722473604826483}, {"dt": "2012-03-01T00:00:00", "Import Loads": 13.264160826079374}, {"dt": "2012-04-01T00:00:00", "Import Loads": 6.784155977901074}, {"dt": "2012-05-01T00:00:00", "Import Loads": 14.704501694699479}, {"dt": "2012-06-01T00:00:00", "Import Loads": 18.45424948166898}, {"dt": "2012-07-01T00:00:00", "Import Loads": 14.846645460647267}, {"dt": "2012-08-01T00:00:00", "Import Loads": 29.87754032354133}, {"dt": "2012-09-01T00:00:00", "Import Loads": 14.514636984870632}, {"dt": "2012-10-01T00:00:00", "Import Loads": 1.7456011270041705}, {"dt": "2012-11-01T00:00:00", "Import Loads": 28.21222528507088}, {"dt": "2012-12-01T00:00:00", "Import Loads": 20.052002617350272}, {"dt": "2013-01-01T00:00:00", "Import Loads": 0.21518845048256185}, {"dt": "2013-02-01T00:00:00", "Import Loads": 9.311692502599534}, {"dt": "2013-03-01T00:00:00", "Import Loads": 4.165290348153539}, {"dt": "2013-04-01T00:00:00", "Import Loads": 7.31864721408475}, {"dt": "2013-05-01T00:00:00", "Import Loads": 8.088854977716897}, {"dt": "2013-06-01T00:00:00", "Import Loads": 2.4029945170813916}, {"dt": "2013-07-01T00:00:00", "Import Loads": 13.596285049994282}, {"dt": "2013-08-01T00:00:00", "Import Loads": 10.755745518694138}, {"dt": "2013-09-01T00:00:00", "Import Loads": 4.27198697068405}, {"dt": "2013-10-01T00:00:00", "Import Loads": 26.24818358785952}, {"dt": "2013-11-01T00:00:00", "Import Loads": -6.799817896112669}, {"dt": "2013-12-01T00:00:00", "Import Loads": 8.986789827737063}, {"dt": "2014-01-01T00:00:00", "Import Loads": 11.90769970354939}, {"dt": "2014-02-01T00:00:00", "Import Loads": 13.195568190101326}, {"dt": "2014-03-01T00:00:00", "Import Loads": 13.481669397318674}, {"dt": "2014-04-01T00:00:00", "Import Loads": 17.718799197302726}, {"dt": "2014-05-01T00:00:00", "Import Loads": 8.907199558490397}, {"dt": "2014-06-01T00:00:00", "Import Loads": 5.897575826220058}, {"dt": "2014-07-01T00:00:00", "Import Loads": 6.3412574585759}, {"dt": "2014-08-01T00:00:00", "Import Loads": -0.9573208266967725}, {"dt": "2014-09-01T00:00:00", "Import Loads": 8.76028927104322}, {"dt": "2014-10-01T00:00:00", "Import Loads": 6.485834971170457}, {"dt": "2014-11-01T00:00:00", "Import Loads": 6.62687432637703}, {"dt": "2014-12-01T00:00:00", "Import Loads": 13.582375352868015}, {"dt": "2015-01-01T00:00:00", "Import Loads": 14.171415888653428}, {"dt": "2015-02-01T00:00:00", "Import Loads": -1.0306324174302772}, {"dt": "2015-03-01T00:00:00", "Import Loads": 31.296145654158302}, {"dt": "2015-04-01T00:00:00", "Import Loads": 0.013201320132005812}, {"dt": "2015-05-01T00:00:00", "Import Loads": 11.502336352226461}, {"dt": "2015-06-01T00:00:00", "Import Loads": 13.01289946198223}, {"dt": "2015-07-01T00:00:00", "Import Loads": 1.9333668138230564}, {"dt": "2015-08-01T00:00:00", "Import Loads": 3.7297271685902356}, {"dt": "2015-09-01T00:00:00", "Import Loads": 6.5280705886408}, {"dt": "2015-10-01T00:00:00", "Import Loads": 2.206932066159517}, {"dt": "2015-11-01T00:00:00", "Import Loads": 0.928941721689891}, {"dt": "2015-12-01T00:00:00", "Import Loads": -3.7998957186721527}, {"dt": "2016-01-01T00:00:00", "Import Loads": 5.58459353277041}, {"dt": "2016-02-01T00:00:00", "Import Loads": 29.977389918180776}, {"dt": "2016-03-01T00:00:00", "Import Loads": -13.86694917659077}, {"dt": "2016-04-01T00:00:00", "Import Loads": 6.089022542582989}, {"dt": "2016-05-01T00:00:00", "Import Loads": -2.300117053630646}, {"dt": "2016-06-01T00:00:00", "Import Loads": 7.407152485015334}, {"dt": "2016-07-01T00:00:00", "Import Loads": 3.2883298854191834}, {"dt": "2016-08-01T00:00:00", "Import Loads": 15.28770067844427}, {"dt": "2016-09-01T00:00:00", "Import Loads": 8.097097221248584}, {"dt": "2016-10-01T00:00:00", "Import Loads": 13.830904342750827}, {"dt": "2016-11-01T00:00:00", "Import Loads": 19.31505044145423}, {"dt": "2016-12-01T00:00:00", "Import Loads": 17.68944480912491}, {"dt": "2017-01-01T00:00:00", "Import Loads": 20.33129220590244}, {"dt": "2017-02-01T00:00:00", "Import Loads": -2.9649764348698815}, {"dt": "2017-03-01T00:00:00", "Import Loads": 9.450740728538642}, {"dt": "2017-04-01T00:00:00", "Import Loads": 9.396131084399917}, {"dt": "2017-05-01T00:00:00", "Import Loads": 8.82208170837908}, {"dt": "2017-06-01T00:00:00", "Import Loads": 10.01447193459326}, {"dt": "2017-07-01T00:00:00", "Import Loads": 9.10014934244372}, {"dt": "2017-08-01T00:00:00", "Import Loads": 5.518654211880514}, {"dt": "2017-09-01T00:00:00", "Import Loads": 9.465051369734878}, {"dt": "2017-10-01T00:00:00", "Import Loads": 9.625700086771328}, {"dt": "2017-11-01T00:00:00", "Import Loads": 8.651026033089293}, {"dt": "2017-12-01T00:00:00", "Import Loads": 8.345422400978375}, {"dt": "2018-01-01T00:00:00", "Import Loads": 2.8116562933421463}, {"dt": "2018-02-01T00:00:00", "Import Loads": 3.5559797258083226}, {"dt": "2018-03-01T00:00:00", "Import Loads": 13.503018870764238}, {"dt": "2018-04-01T00:00:00", "Import Loads": -3.4683710177893734}, {"dt": "2018-05-01T00:00:00", "Import Loads": 7.9515575062006905}, {"dt": "2018-06-01T00:00:00", "Import Loads": 2.862940022911298}, {"dt": "2018-07-01T00:00:00", "Import Loads": 9.995627899949877}, {"dt": "2018-08-01T00:00:00", "Import Loads": 3.4047412374572428}, {"dt": "2018-09-01T00:00:00", "Import Loads": -0.6703671296802605}, {"dt": "2018-10-01T00:00:00", "Import Loads": 2.0797479917090023}, {"dt": "2018-11-01T00:00:00", "Import Loads": 1.3964593813743598}, {"dt": "2018-12-01T00:00:00", "Import Loads": 5.383418306503218}, {"dt": "2019-01-01T00:00:00", "Import Loads": 5.3833542567312875}, {"dt": "2019-02-01T00:00:00", "Import Loads": 4.970720176550736}, {"dt": "2019-03-01T00:00:00", "Import Loads": -5.377356405666422}, {"dt": "2019-04-01T00:00:00", "Import Loads": 22.190063699487993}, {"dt": "2019-05-01T00:00:00", "Import Loads": 10.129175885019425}, {"dt": "2019-06-01T00:00:00", "Import Loads": 6.331697418715487}, {"dt": "2019-07-01T00:00:00", "Import Loads": 4.268221622881496}, {"dt": "2019-08-01T00:00:00", "Import Loads": 3.845430894170021}, {"dt": "2019-09-01T00:00:00", "Import Loads": 5.195424869586751}, {"dt": "2019-10-01T00:00:00", "Import Loads": -2.7681288255865355}, {"dt": "2019-11-01T00:00:00", "Import Loads": -7.849213474635364}, {"dt": "2019-12-01T00:00:00", "Import Loads": -7.041123639818581}, {"dt": "2020-01-01T00:00:00", "Import Loads": -0.7949415296588325}, {"dt": "2020-02-01T00:00:00", "Import Loads": -7.401281835288199}, {"dt": "2020-03-01T00:00:00", "Import Loads": -7.390262473199149}, {"dt": "2020-04-01T00:00:00", "Import Loads": -15.893498342986145}, {"dt": "2020-05-01T00:00:00", "Import Loads": -26.692894785802533}, {"dt": "2020-06-01T00:00:00", "Import Loads": -15.232494924054985}, {"dt": "2020-07-01T00:00:00", "Import Loads": -15.621769207126002}, {"dt": "2020-08-01T00:00:00", "Import Loads": -0.5171041345704896}, {"dt": "2020-09-01T00:00:00", "Import Loads": 5.645593911507518}, {"dt": "2020-10-01T00:00:00", "Import Loads": 6.144161234390388}, {"dt": "2020-11-01T00:00:00", "Import Loads": 21.085243206653125}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[53]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doYoyChart</span><span class="p">(</span><span class="n">df_va_clean</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Virgina&#39;</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;Export Loads&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[53]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-5266b9387a724073b4478aa6c3983ea8"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-5266b9387a724073b4478aa6c3983ea8") {
      outputDiv = document.getElementById("altair-viz-5266b9387a724073b4478aa6c3983ea8");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-1aa116c65bf2d5260d6da6665df5fd2f"}, "mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['nolarge'] < 0"}, "value": "royalblue"}, "tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "nolarge", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Year-over-Year Volume Growth [%]"}, "field": "nolarge"}}, "height": 400, "title": "Port of Virgina Export Loads Container Volume Growth", "transform": [{"calculate": "datum['Export Loads'] > 400 ? NaN : datum['Export Loads']", "as": "nolarge"}], "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-1aa116c65bf2d5260d6da6665df5fd2f": [{"dt": "2009-01-01T00:00:00", "Export Loads": null}, {"dt": "2009-02-01T00:00:00", "Export Loads": null}, {"dt": "2009-03-01T00:00:00", "Export Loads": null}, {"dt": "2009-04-01T00:00:00", "Export Loads": null}, {"dt": "2009-05-01T00:00:00", "Export Loads": null}, {"dt": "2009-06-01T00:00:00", "Export Loads": null}, {"dt": "2009-07-01T00:00:00", "Export Loads": null}, {"dt": "2009-08-01T00:00:00", "Export Loads": null}, {"dt": "2009-09-01T00:00:00", "Export Loads": null}, {"dt": "2009-10-01T00:00:00", "Export Loads": null}, {"dt": "2009-11-01T00:00:00", "Export Loads": null}, {"dt": "2009-12-01T00:00:00", "Export Loads": null}, {"dt": "2010-01-01T00:00:00", "Export Loads": 17.98062362020836}, {"dt": "2010-02-01T00:00:00", "Export Loads": 23.986181781052696}, {"dt": "2010-03-01T00:00:00", "Export Loads": 20.892160974170192}, {"dt": "2010-04-01T00:00:00", "Export Loads": 6.620632381889768}, {"dt": "2010-05-01T00:00:00", "Export Loads": 13.1329360746264}, {"dt": "2010-06-01T00:00:00", "Export Loads": 3.521638986543829}, {"dt": "2010-07-01T00:00:00", "Export Loads": -6.590954251562908}, {"dt": "2010-08-01T00:00:00", "Export Loads": -1.0955639829708042}, {"dt": "2010-09-01T00:00:00", "Export Loads": -13.05850759913153}, {"dt": "2010-10-01T00:00:00", "Export Loads": 4.392584576831071}, {"dt": "2010-11-01T00:00:00", "Export Loads": -0.8911608326613196}, {"dt": "2010-12-01T00:00:00", "Export Loads": -11.49567540960551}, {"dt": "2011-01-01T00:00:00", "Export Loads": 10.467957441543984}, {"dt": "2011-02-01T00:00:00", "Export Loads": -7.78912404952099}, {"dt": "2011-03-01T00:00:00", "Export Loads": -1.4543772644345698}, {"dt": "2011-04-01T00:00:00", "Export Loads": 6.071052517705433}, {"dt": "2011-05-01T00:00:00", "Export Loads": -1.5580834195105142}, {"dt": "2011-06-01T00:00:00", "Export Loads": 1.7704490895251501}, {"dt": "2011-07-01T00:00:00", "Export Loads": 16.586211974930865}, {"dt": "2011-08-01T00:00:00", "Export Loads": -2.258002908813117}, {"dt": "2011-09-01T00:00:00", "Export Loads": 12.438799986856374}, {"dt": "2011-10-01T00:00:00", "Export Loads": 0.06751503744015785}, {"dt": "2011-11-01T00:00:00", "Export Loads": -1.2646357104439288}, {"dt": "2011-12-01T00:00:00", "Export Loads": 18.194530517550977}, {"dt": "2012-01-01T00:00:00", "Export Loads": -2.19226407962706}, {"dt": "2012-02-01T00:00:00", "Export Loads": 12.688849857850947}, {"dt": "2012-03-01T00:00:00", "Export Loads": 3.675262705014215}, {"dt": "2012-04-01T00:00:00", "Export Loads": 2.249857216677098}, {"dt": "2012-05-01T00:00:00", "Export Loads": 16.54282512781007}, {"dt": "2012-06-01T00:00:00", "Export Loads": 8.709753975160183}, {"dt": "2012-07-01T00:00:00", "Export Loads": 3.455584094768893}, {"dt": "2012-08-01T00:00:00", "Export Loads": 17.280030661937108}, {"dt": "2012-09-01T00:00:00", "Export Loads": 14.300743749726031}, {"dt": "2012-10-01T00:00:00", "Export Loads": 0.5308962537397877}, {"dt": "2012-11-01T00:00:00", "Export Loads": 20.707391680867104}, {"dt": "2012-12-01T00:00:00", "Export Loads": 17.76663395221898}, {"dt": "2013-01-01T00:00:00", "Export Loads": 4.033735526070958}, {"dt": "2013-02-01T00:00:00", "Export Loads": 4.532230848228891}, {"dt": "2013-03-01T00:00:00", "Export Loads": 10.220885049232287}, {"dt": "2013-04-01T00:00:00", "Export Loads": 10.553911626824487}, {"dt": "2013-05-01T00:00:00", "Export Loads": 1.9650084279031255}, {"dt": "2013-06-01T00:00:00", "Export Loads": 1.0822825842473627}, {"dt": "2013-07-01T00:00:00", "Export Loads": 19.92938447136714}, {"dt": "2013-08-01T00:00:00", "Export Loads": 6.640180702625642}, {"dt": "2013-09-01T00:00:00", "Export Loads": 2.9987599713642954}, {"dt": "2013-10-01T00:00:00", "Export Loads": 22.2815770920332}, {"dt": "2013-11-01T00:00:00", "Export Loads": 3.1818720944696954}, {"dt": "2013-12-01T00:00:00", "Export Loads": -4.716254166856936}, {"dt": "2014-01-01T00:00:00", "Export Loads": 7.401432890442017}, {"dt": "2014-02-01T00:00:00", "Export Loads": 2.9018562276500903}, {"dt": "2014-03-01T00:00:00", "Export Loads": 6.123875126570555}, {"dt": "2014-04-01T00:00:00", "Export Loads": 10.312980244381432}, {"dt": "2014-05-01T00:00:00", "Export Loads": 8.068646257841895}, {"dt": "2014-06-01T00:00:00", "Export Loads": 7.043940365711587}, {"dt": "2014-07-01T00:00:00", "Export Loads": -6.634143582347041}, {"dt": "2014-08-01T00:00:00", "Export Loads": 3.175399591395256}, {"dt": "2014-09-01T00:00:00", "Export Loads": -4.001812094489554}, {"dt": "2014-10-01T00:00:00", "Export Loads": -3.6384299811509035}, {"dt": "2014-11-01T00:00:00", "Export Loads": 4.792024133947903}, {"dt": "2014-12-01T00:00:00", "Export Loads": 8.739318095363613}, {"dt": "2015-01-01T00:00:00", "Export Loads": 6.769038621661427}, {"dt": "2015-02-01T00:00:00", "Export Loads": -6.491026640715658}, {"dt": "2015-03-01T00:00:00", "Export Loads": 3.8146560412831043}, {"dt": "2015-04-01T00:00:00", "Export Loads": 0.9454614849851994}, {"dt": "2015-05-01T00:00:00", "Export Loads": 0.1257004185469368}, {"dt": "2015-06-01T00:00:00", "Export Loads": -0.5105128973288298}, {"dt": "2015-07-01T00:00:00", "Export Loads": 1.094697050012572}, {"dt": "2015-08-01T00:00:00", "Export Loads": -9.859089307502133}, {"dt": "2015-09-01T00:00:00", "Export Loads": -1.4118468430613262}, {"dt": "2015-10-01T00:00:00", "Export Loads": -9.352940161204026}, {"dt": "2015-11-01T00:00:00", "Export Loads": -13.274009546028553}, {"dt": "2015-12-01T00:00:00", "Export Loads": -12.808371621547177}, {"dt": "2016-01-01T00:00:00", "Export Loads": -8.385798312522308}, {"dt": "2016-02-01T00:00:00", "Export Loads": 7.767943322017867}, {"dt": "2016-03-01T00:00:00", "Export Loads": -7.362954294797774}, {"dt": "2016-04-01T00:00:00", "Export Loads": -11.068319861291531}, {"dt": "2016-05-01T00:00:00", "Export Loads": -12.061349760080176}, {"dt": "2016-06-01T00:00:00", "Export Loads": 0.5490825067905547}, {"dt": "2016-07-01T00:00:00", "Export Loads": -7.50709361170453}, {"dt": "2016-08-01T00:00:00", "Export Loads": 9.100571147981595}, {"dt": "2016-09-01T00:00:00", "Export Loads": 7.407528834742005}, {"dt": "2016-10-01T00:00:00", "Export Loads": 12.714204112718974}, {"dt": "2016-11-01T00:00:00", "Export Loads": 16.18983569537935}, {"dt": "2016-12-01T00:00:00", "Export Loads": 9.834869225398602}, {"dt": "2017-01-01T00:00:00", "Export Loads": 17.55735187713423}, {"dt": "2017-02-01T00:00:00", "Export Loads": 4.583880411504326}, {"dt": "2017-03-01T00:00:00", "Export Loads": 3.2748492250250116}, {"dt": "2017-04-01T00:00:00", "Export Loads": 4.0092319839655}, {"dt": "2017-05-01T00:00:00", "Export Loads": 6.311238836105981}, {"dt": "2017-06-01T00:00:00", "Export Loads": -0.3373681009904095}, {"dt": "2017-07-01T00:00:00", "Export Loads": -1.906406302640784}, {"dt": "2017-08-01T00:00:00", "Export Loads": -10.66051172114425}, {"dt": "2017-09-01T00:00:00", "Export Loads": -6.23641669312105}, {"dt": "2017-10-01T00:00:00", "Export Loads": -1.1785407604487763}, {"dt": "2017-11-01T00:00:00", "Export Loads": -6.864489132685847}, {"dt": "2017-12-01T00:00:00", "Export Loads": 3.8240505309663275}, {"dt": "2018-01-01T00:00:00", "Export Loads": -15.008939860638437}, {"dt": "2018-02-01T00:00:00", "Export Loads": -4.337529783924543}, {"dt": "2018-03-01T00:00:00", "Export Loads": 6.780665483200554}, {"dt": "2018-04-01T00:00:00", "Export Loads": 0.7337397661843159}, {"dt": "2018-05-01T00:00:00", "Export Loads": -0.7768805928411671}, {"dt": "2018-06-01T00:00:00", "Export Loads": -1.1507504560994697}, {"dt": "2018-07-01T00:00:00", "Export Loads": 9.445165466247918}, {"dt": "2018-08-01T00:00:00", "Export Loads": 10.714901232931195}, {"dt": "2018-09-01T00:00:00", "Export Loads": -14.592889441592305}, {"dt": "2018-10-01T00:00:00", "Export Loads": -4.755569104185486}, {"dt": "2018-11-01T00:00:00", "Export Loads": -11.296254062375278}, {"dt": "2018-12-01T00:00:00", "Export Loads": -16.425783252023063}, {"dt": "2019-01-01T00:00:00", "Export Loads": 2.1689265795906687}, {"dt": "2019-02-01T00:00:00", "Export Loads": -6.652558500677497}, {"dt": "2019-03-01T00:00:00", "Export Loads": -9.494593163081966}, {"dt": "2019-04-01T00:00:00", "Export Loads": -1.0124490949406484}, {"dt": "2019-05-01T00:00:00", "Export Loads": 3.4139782578699984}, {"dt": "2019-06-01T00:00:00", "Export Loads": -5.037812284804987}, {"dt": "2019-07-01T00:00:00", "Export Loads": -2.291105934607074}, {"dt": "2019-08-01T00:00:00", "Export Loads": -3.421653709485739}, {"dt": "2019-09-01T00:00:00", "Export Loads": 9.106502357528656}, {"dt": "2019-10-01T00:00:00", "Export Loads": -0.02422922642959513}, {"dt": "2019-11-01T00:00:00", "Export Loads": -0.704150664459835}, {"dt": "2019-12-01T00:00:00", "Export Loads": 3.8011482669919605}, {"dt": "2020-01-01T00:00:00", "Export Loads": 1.7700846394883785}, {"dt": "2020-02-01T00:00:00", "Export Loads": 5.46992990113091}, {"dt": "2020-03-01T00:00:00", "Export Loads": 1.6565489124347632}, {"dt": "2020-04-01T00:00:00", "Export Loads": -16.655051652650567}, {"dt": "2020-05-01T00:00:00", "Export Loads": -18.060058252757926}, {"dt": "2020-06-01T00:00:00", "Export Loads": -6.460095184898462}, {"dt": "2020-07-01T00:00:00", "Export Loads": -15.26902374474629}, {"dt": "2020-08-01T00:00:00", "Export Loads": -6.608104296399153}, {"dt": "2020-09-01T00:00:00", "Export Loads": 5.541115559561494}, {"dt": "2020-10-01T00:00:00", "Export Loads": 0.1777240549807546}, {"dt": "2020-11-01T00:00:00", "Export Loads": 15.264885229347103}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[54]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doYoyChart</span><span class="p">(</span><span class="n">df_va_clean</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Virgina&#39;</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;Total TEUs&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[54]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-d95a0b72c8e047519765d3a1515716a6"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-d95a0b72c8e047519765d3a1515716a6") {
      outputDiv = document.getElementById("altair-viz-d95a0b72c8e047519765d3a1515716a6");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-951d0be2afc779847e00eff86beca261"}, "mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['nolarge'] < 0"}, "value": "royalblue"}, "tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "nolarge", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Year-over-Year Volume Growth [%]"}, "field": "nolarge"}}, "height": 400, "title": "Port of Virgina Total TEUs Container Volume Growth", "transform": [{"calculate": "datum['Total TEUs'] > 400 ? NaN : datum['Total TEUs']", "as": "nolarge"}], "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-951d0be2afc779847e00eff86beca261": [{"dt": "2009-01-01T00:00:00", "Total TEUs": null}, {"dt": "2009-02-01T00:00:00", "Total TEUs": null}, {"dt": "2009-03-01T00:00:00", "Total TEUs": null}, {"dt": "2009-04-01T00:00:00", "Total TEUs": null}, {"dt": "2009-05-01T00:00:00", "Total TEUs": null}, {"dt": "2009-06-01T00:00:00", "Total TEUs": null}, {"dt": "2009-07-01T00:00:00", "Total TEUs": null}, {"dt": "2009-08-01T00:00:00", "Total TEUs": null}, {"dt": "2009-09-01T00:00:00", "Total TEUs": null}, {"dt": "2009-10-01T00:00:00", "Total TEUs": null}, {"dt": "2009-11-01T00:00:00", "Total TEUs": null}, {"dt": "2009-12-01T00:00:00", "Total TEUs": null}, {"dt": "2010-01-01T00:00:00", "Total TEUs": 4.422656057509755}, {"dt": "2010-02-01T00:00:00", "Total TEUs": 16.264369108946532}, {"dt": "2010-03-01T00:00:00", "Total TEUs": 22.324771823075128}, {"dt": "2010-04-01T00:00:00", "Total TEUs": 2.1134972305898447}, {"dt": "2010-05-01T00:00:00", "Total TEUs": 14.210567249022542}, {"dt": "2010-06-01T00:00:00", "Total TEUs": 16.069829254904235}, {"dt": "2010-07-01T00:00:00", "Total TEUs": 8.28233804600127}, {"dt": "2010-08-01T00:00:00", "Total TEUs": 15.970994337935828}, {"dt": "2010-09-01T00:00:00", "Total TEUs": -2.818162763666854}, {"dt": "2010-10-01T00:00:00", "Total TEUs": 9.848418470165598}, {"dt": "2010-11-01T00:00:00", "Total TEUs": 5.585565769810508}, {"dt": "2010-12-01T00:00:00", "Total TEUs": -6.576967455920757}, {"dt": "2011-01-01T00:00:00", "Total TEUs": 10.5262427392659}, {"dt": "2011-02-01T00:00:00", "Total TEUs": -0.9048752329908649}, {"dt": "2011-03-01T00:00:00", "Total TEUs": -4.488766127392951}, {"dt": "2011-04-01T00:00:00", "Total TEUs": 9.608038390690531}, {"dt": "2011-05-01T00:00:00", "Total TEUs": -1.8553139857369283}, {"dt": "2011-06-01T00:00:00", "Total TEUs": -5.757275934810613}, {"dt": "2011-07-01T00:00:00", "Total TEUs": 8.52966968722595}, {"dt": "2011-08-01T00:00:00", "Total TEUs": -13.21792807300054}, {"dt": "2011-09-01T00:00:00", "Total TEUs": 7.218017594081272}, {"dt": "2011-10-01T00:00:00", "Total TEUs": -1.5620904978406736}, {"dt": "2011-11-01T00:00:00", "Total TEUs": 0.4497245896416313}, {"dt": "2011-12-01T00:00:00", "Total TEUs": 11.446566319013085}, {"dt": "2012-01-01T00:00:00", "Total TEUs": -3.117602737575742}, {"dt": "2012-02-01T00:00:00", "Total TEUs": 2.2151569191518172}, {"dt": "2012-03-01T00:00:00", "Total TEUs": 4.359515254704105}, {"dt": "2012-04-01T00:00:00", "Total TEUs": 5.202498538798195}, {"dt": "2012-05-01T00:00:00", "Total TEUs": 12.643418969464925}, {"dt": "2012-06-01T00:00:00", "Total TEUs": 11.212355314330246}, {"dt": "2012-07-01T00:00:00", "Total TEUs": 7.965237377002077}, {"dt": "2012-08-01T00:00:00", "Total TEUs": 24.137602031919837}, {"dt": "2012-09-01T00:00:00", "Total TEUs": 11.135476988722948}, {"dt": "2012-10-01T00:00:00", "Total TEUs": 1.4780677321101665}, {"dt": "2012-11-01T00:00:00", "Total TEUs": 21.21107688554089}, {"dt": "2012-12-01T00:00:00", "Total TEUs": 20.382534024627354}, {"dt": "2013-01-01T00:00:00", "Total TEUs": 2.894690367288355}, {"dt": "2013-02-01T00:00:00", "Total TEUs": 7.858350392710589}, {"dt": "2013-03-01T00:00:00", "Total TEUs": 7.677162402492832}, {"dt": "2013-04-01T00:00:00", "Total TEUs": 5.7331993268236126}, {"dt": "2013-05-01T00:00:00", "Total TEUs": 7.158406069981171}, {"dt": "2013-06-01T00:00:00", "Total TEUs": 4.413851451641637}, {"dt": "2013-07-01T00:00:00", "Total TEUs": 13.72253082313286}, {"dt": "2013-08-01T00:00:00", "Total TEUs": 5.1264858274916225}, {"dt": "2013-09-01T00:00:00", "Total TEUs": 1.5723921560023557}, {"dt": "2013-10-01T00:00:00", "Total TEUs": 17.83337135686991}, {"dt": "2013-11-01T00:00:00", "Total TEUs": -2.9195675311179836}, {"dt": "2013-12-01T00:00:00", "Total TEUs": -2.508610351803031}, {"dt": "2014-01-01T00:00:00", "Total TEUs": 5.357089431790452}, {"dt": "2014-02-01T00:00:00", "Total TEUs": 5.981722759768826}, {"dt": "2014-03-01T00:00:00", "Total TEUs": 10.20275153849688}, {"dt": "2014-04-01T00:00:00", "Total TEUs": 12.276752736669284}, {"dt": "2014-05-01T00:00:00", "Total TEUs": 6.7225364808549015}, {"dt": "2014-06-01T00:00:00", "Total TEUs": 5.992690384771215}, {"dt": "2014-07-01T00:00:00", "Total TEUs": 1.2838965131881208}, {"dt": "2014-08-01T00:00:00", "Total TEUs": 8.080638736644662}, {"dt": "2014-09-01T00:00:00", "Total TEUs": 8.601556825760248}, {"dt": "2014-10-01T00:00:00", "Total TEUs": 7.022116702908687}, {"dt": "2014-11-01T00:00:00", "Total TEUs": 8.213733572986426}, {"dt": "2014-12-01T00:00:00", "Total TEUs": 12.250918739525263}, {"dt": "2015-01-01T00:00:00", "Total TEUs": 14.781059534947683}, {"dt": "2015-02-01T00:00:00", "Total TEUs": -0.7902865084515431}, {"dt": "2015-03-01T00:00:00", "Total TEUs": 15.961149148147303}, {"dt": "2015-04-01T00:00:00", "Total TEUs": 4.363046373893464}, {"dt": "2015-05-01T00:00:00", "Total TEUs": 12.866968855310557}, {"dt": "2015-06-01T00:00:00", "Total TEUs": 14.545883722520925}, {"dt": "2015-07-01T00:00:00", "Total TEUs": 8.767946441033647}, {"dt": "2015-08-01T00:00:00", "Total TEUs": 2.665551695141599}, {"dt": "2015-09-01T00:00:00", "Total TEUs": 7.163625469729129}, {"dt": "2015-10-01T00:00:00", "Total TEUs": 5.590675912661314}, {"dt": "2015-11-01T00:00:00", "Total TEUs": -2.5348061322980286}, {"dt": "2015-12-01T00:00:00", "Total TEUs": -3.068122980729382}, {"dt": "2016-01-01T00:00:00", "Total TEUs": 0.4418060792933165}, {"dt": "2016-02-01T00:00:00", "Total TEUs": 23.930580178237815}, {"dt": "2016-03-01T00:00:00", "Total TEUs": -7.072054400418459}, {"dt": "2016-04-01T00:00:00", "Total TEUs": 2.4154641088225626}, {"dt": "2016-05-01T00:00:00", "Total TEUs": -4.820816382750048}, {"dt": "2016-06-01T00:00:00", "Total TEUs": 1.477515282723063}, {"dt": "2016-07-01T00:00:00", "Total TEUs": -3.574743377144607}, {"dt": "2016-08-01T00:00:00", "Total TEUs": 7.0168901571779685}, {"dt": "2016-09-01T00:00:00", "Total TEUs": 2.0123399077348836}, {"dt": "2016-10-01T00:00:00", "Total TEUs": 2.1850076670693053}, {"dt": "2016-11-01T00:00:00", "Total TEUs": 16.062917825201772}, {"dt": "2016-12-01T00:00:00", "Total TEUs": 16.537462126787084}, {"dt": "2017-01-01T00:00:00", "Total TEUs": 18.497699568434122}, {"dt": "2017-02-01T00:00:00", "Total TEUs": -0.15890724370118958}, {"dt": "2017-03-01T00:00:00", "Total TEUs": 8.894697588021728}, {"dt": "2017-04-01T00:00:00", "Total TEUs": 4.6189671492366635}, {"dt": "2017-05-01T00:00:00", "Total TEUs": 12.521977727716616}, {"dt": "2017-06-01T00:00:00", "Total TEUs": 6.9241757125978465}, {"dt": "2017-07-01T00:00:00", "Total TEUs": 7.489453776161925}, {"dt": "2017-08-01T00:00:00", "Total TEUs": 2.1627439907265567}, {"dt": "2017-09-01T00:00:00", "Total TEUs": 8.168140918709742}, {"dt": "2017-10-01T00:00:00", "Total TEUs": 11.285077897322449}, {"dt": "2017-11-01T00:00:00", "Total TEUs": 1.8694269977059585}, {"dt": "2017-12-01T00:00:00", "Total TEUs": 3.440512053931588}, {"dt": "2018-01-01T00:00:00", "Total TEUs": -3.4930814472509564}, {"dt": "2018-02-01T00:00:00", "Total TEUs": -0.7482682966119203}, {"dt": "2018-03-01T00:00:00", "Total TEUs": 8.650506734382013}, {"dt": "2018-04-01T00:00:00", "Total TEUs": -2.6267089261033383}, {"dt": "2018-05-01T00:00:00", "Total TEUs": -4.042896854129429}, {"dt": "2018-06-01T00:00:00", "Total TEUs": -3.382004296972374}, {"dt": "2018-07-01T00:00:00", "Total TEUs": 7.876446228066425}, {"dt": "2018-08-01T00:00:00", "Total TEUs": 7.57093071825341}, {"dt": "2018-09-01T00:00:00", "Total TEUs": -6.921647243346207}, {"dt": "2018-10-01T00:00:00", "Total TEUs": 1.9014858389071465}, {"dt": "2018-11-01T00:00:00", "Total TEUs": -0.28266201105707767}, {"dt": "2018-12-01T00:00:00", "Total TEUs": 1.5139490873573136}, {"dt": "2019-01-01T00:00:00", "Total TEUs": 8.876985948862703}, {"dt": "2019-02-01T00:00:00", "Total TEUs": 4.308920043981868}, {"dt": "2019-03-01T00:00:00", "Total TEUs": -4.834868141311366}, {"dt": "2019-04-01T00:00:00", "Total TEUs": 12.15438182058637}, {"dt": "2019-05-01T00:00:00", "Total TEUs": 10.132529586454497}, {"dt": "2019-06-01T00:00:00", "Total TEUs": 6.919913598806282}, {"dt": "2019-07-01T00:00:00", "Total TEUs": 5.097475453045175}, {"dt": "2019-08-01T00:00:00", "Total TEUs": -0.4424881336679287}, {"dt": "2019-09-01T00:00:00", "Total TEUs": 9.06271494061004}, {"dt": "2019-10-01T00:00:00", "Total TEUs": -1.3166357406353302}, {"dt": "2019-11-01T00:00:00", "Total TEUs": -5.381007961982576}, {"dt": "2019-12-01T00:00:00", "Total TEUs": -6.7264085799423885}, {"dt": "2020-01-01T00:00:00", "Total TEUs": -5.362947476266133}, {"dt": "2020-02-01T00:00:00", "Total TEUs": -8.913166156223118}, {"dt": "2020-03-01T00:00:00", "Total TEUs": -8.632065498713215}, {"dt": "2020-04-01T00:00:00", "Total TEUs": -15.731504381778393}, {"dt": "2020-05-01T00:00:00", "Total TEUs": -22.63615229969317}, {"dt": "2020-06-01T00:00:00", "Total TEUs": -11.97504272361477}, {"dt": "2020-07-01T00:00:00", "Total TEUs": -16.768856667579833}, {"dt": "2020-08-01T00:00:00", "Total TEUs": -4.007660805607061}, {"dt": "2020-09-01T00:00:00", "Total TEUs": 6.222881298011096}, {"dt": "2020-10-01T00:00:00", "Total TEUs": 2.711479683567064}, {"dt": "2020-11-01T00:00:00", "Total TEUs": 23.300026654154628}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[56]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># https://www.oaklandseaport.com/performance/facts-figures/</span>

<span class="n">df_oakland</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s2">&quot;https://www.oaklandseaport.com/files/PDF/Oakland%20Monthly%20TEUs%201998-2020.xlsx&quot;</span><span class="p">,</span>
                           <span class="n">skiprows</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="n">df_oakland</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;[^A-z]+&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">df_oakland</span><span class="p">]</span>

<span class="n">df_oakland</span><span class="p">[</span><span class="s1">&#39;dt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df_oakland</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span> <span class="o">+</span> <span class="n">df_oakland</span><span class="p">[</span><span class="s1">&#39;Month&#39;</span><span class="p">],</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;%Y%B&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>

<span class="n">df_oakland</span> <span class="o">=</span> <span class="n">df_oakland</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

<span class="n">df_oakland</span> <span class="o">=</span> <span class="n">df_oakland</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;Year&#39;</span><span class="p">,</span> <span class="s1">&#39;Month&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">df_oakland</span> <span class="o">=</span> <span class="n">df_oakland</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;dt&#39;</span><span class="p">)</span>

<span class="c1">#df_oakland.tail()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[57]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;curl -s &#39;https://www.oaklandseaport.com/performance/facts-figures/&#39; | grep &#39;Container Activity&#39; | awk -F &#39;text-2-columns</span><span class="se">\&quot;</span><span class="s2">&gt;&#39; &#39;{ print $2}&#39; | awk -F &#39;&lt;h2&#39; &#39;{ print $1 }&#39;&quot;</span>

<span class="n">df_oak_latest_res</span> <span class="o">=</span> <span class="o">!</span><span class="nv">$command</span>

<span class="n">df_oak_latest_raw</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">df_oak_latest_res</span><span class="p">)</span>

<span class="n">extractMonthAndValue</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;title=&quot;([A-z]+)&quot;&gt;&lt;span class=&quot;number&quot;&gt;([0-9,.]+)&#39;</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">getLabel</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;Import-Full&#39;</span>
    <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;Export-Full&#39;</span>
    <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;Import-Empty&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;Export-Empty&#39;</span> 

<span class="n">df_oak_latest_stg</span> <span class="o">=</span> <span class="p">[(</span><span class="n">getLabel</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">extractMonthAndValue</span><span class="p">(</span><span class="n">v</span><span class="p">))</span> <span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;class=&quot;chart-subtitle&quot;&#39;</span><span class="p">,</span> <span class="n">df_oak_latest_raw</span><span class="p">))</span> <span class="k">if</span> <span class="s2">&quot;number&quot;</span> <span class="ow">in</span> <span class="n">v</span><span class="p">]</span>

<span class="n">df_oak_latest</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
<span class="k">for</span> <span class="n">kind</span><span class="p">,</span> <span class="n">vals</span> <span class="ow">in</span> <span class="n">df_oak_latest_stg</span><span class="p">:</span>
    <span class="c1">#print(kind, vals)</span>
    <span class="n">tmp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_records</span><span class="p">(</span><span class="n">vals</span><span class="p">)</span>
    <span class="n">tmp</span><span class="p">[</span><span class="s1">&#39;dt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">&quot;2020-&quot;</span> <span class="o">+</span> <span class="n">tmp</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;%Y-%b&quot;</span><span class="p">)</span>
    <span class="n">tmp</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">tmp</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)))</span>
    <span class="n">tmp</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">kind</span><span class="p">)</span>
    <span class="n">tmp</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;month&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="s1">&#39;dt&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">]</span>
    <span class="n">df_oak_latest</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df_oak_latest</span><span class="p">,</span> <span class="n">tmp</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[58]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_oak_latest_tab</span> <span class="o">=</span> <span class="n">df_oak_latest</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s1">&#39;dt&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">)</span>

<span class="n">df_oak_latest_tab</span><span class="p">[</span><span class="s1">&#39;Total-Full&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_oak_latest_tab</span><span class="p">[</span><span class="s1">&#39;Import-Full&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df_oak_latest_tab</span><span class="p">[</span><span class="s1">&#39;Export-Full&#39;</span><span class="p">]</span>
<span class="n">df_oak_latest_tab</span><span class="p">[</span><span class="s1">&#39;Total-Empty&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_oak_latest_tab</span><span class="p">[</span><span class="s1">&#39;Import-Empty&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df_oak_latest_tab</span><span class="p">[</span><span class="s1">&#39;Export-Empty&#39;</span><span class="p">]</span>
<span class="n">df_oak_latest_tab</span><span class="p">[</span><span class="s1">&#39;Grand-Total&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_oak_latest_tab</span><span class="p">[</span><span class="s1">&#39;Total-Full&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df_oak_latest_tab</span><span class="p">[</span><span class="s1">&#39;Total-Empty&#39;</span><span class="p">]</span>

<span class="c1">#df_oak_latest_tab.head()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[59]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_oak_combined</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df_oakland</span><span class="p">,</span> <span class="n">df_oak_latest_tab</span><span class="p">])</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Port-of-Oakland">Port of Oakland<a class="anchor-link" href="#Port-of-Oakland">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[60]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doChart</span><span class="p">(</span><span class="n">df_oak_combined</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;Total-Full&#39;</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Oakland&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[60]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-be0c5ea088624a36a1d35765e5908f60"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-be0c5ea088624a36a1d35765e5908f60") {
      outputDiv = document.getElementById("altair-viz-be0c5ea088624a36a1d35765e5908f60");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-eeb2598f141e12495da36db279f553f5"}, "mark": {"type": "line", "color": "purple"}, "encoding": {"tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "Total-Full", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Volume [TEUs]"}, "field": "Total-Full"}}, "height": 400, "title": "Port of Oakland Total-Full Container Volume", "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-eeb2598f141e12495da36db279f553f5": [{"dt": "1998-01-01T00:00:00", "Total-Full": 86188.0}, {"dt": "1998-02-01T00:00:00", "Total-Full": 88844.0}, {"dt": "1998-03-01T00:00:00", "Total-Full": 100414.0}, {"dt": "1998-04-01T00:00:00", "Total-Full": 99899.0}, {"dt": "1998-05-01T00:00:00", "Total-Full": 96945.0}, {"dt": "1998-06-01T00:00:00", "Total-Full": 100986.0}, {"dt": "1998-07-01T00:00:00", "Total-Full": 97761.0}, {"dt": "1998-08-01T00:00:00", "Total-Full": 101024.0}, {"dt": "1998-09-01T00:00:00", "Total-Full": 104411.0}, {"dt": "1998-10-01T00:00:00", "Total-Full": 114363.0}, {"dt": "1998-11-01T00:00:00", "Total-Full": 107865.0}, {"dt": "1998-12-01T00:00:00", "Total-Full": 106834.0}, {"dt": "1999-01-01T00:00:00", "Total-Full": 95520.0}, {"dt": "1999-02-01T00:00:00", "Total-Full": 95377.0}, {"dt": "1999-03-01T00:00:00", "Total-Full": 102177.0}, {"dt": "1999-04-01T00:00:00", "Total-Full": 104401.0}, {"dt": "1999-05-01T00:00:00", "Total-Full": 106613.0}, {"dt": "1999-06-01T00:00:00", "Total-Full": 110073.0}, {"dt": "1999-07-01T00:00:00", "Total-Full": 97433.0}, {"dt": "1999-08-01T00:00:00", "Total-Full": 109702.0}, {"dt": "1999-09-01T00:00:00", "Total-Full": 110148.0}, {"dt": "1999-10-01T00:00:00", "Total-Full": 110643.0}, {"dt": "1999-11-01T00:00:00", "Total-Full": 108782.0}, {"dt": "1999-12-01T00:00:00", "Total-Full": 108230.0}, {"dt": "2000-01-01T00:00:00", "Total-Full": 99762.0}, {"dt": "2000-02-01T00:00:00", "Total-Full": 100865.0}, {"dt": "2000-03-01T00:00:00", "Total-Full": 109763.0}, {"dt": "2000-04-01T00:00:00", "Total-Full": 105920.0}, {"dt": "2000-05-01T00:00:00", "Total-Full": 111222.0}, {"dt": "2000-06-01T00:00:00", "Total-Full": 114096.0}, {"dt": "2000-07-01T00:00:00", "Total-Full": 113774.0}, {"dt": "2000-08-01T00:00:00", "Total-Full": 125351.0}, {"dt": "2000-09-01T00:00:00", "Total-Full": 111302.0}, {"dt": "2000-10-01T00:00:00", "Total-Full": 118691.0}, {"dt": "2000-11-01T00:00:00", "Total-Full": 107005.0}, {"dt": "2000-12-01T00:00:00", "Total-Full": 104628.0}, {"dt": "2001-01-01T00:00:00", "Total-Full": 102881.0}, {"dt": "2001-02-01T00:00:00", "Total-Full": 91193.0}, {"dt": "2001-03-01T00:00:00", "Total-Full": 108842.0}, {"dt": "2001-04-01T00:00:00", "Total-Full": 102567.0}, {"dt": "2001-05-01T00:00:00", "Total-Full": 105380.0}, {"dt": "2001-06-01T00:00:00", "Total-Full": 99695.0}, {"dt": "2001-07-01T00:00:00", "Total-Full": 107751.0}, {"dt": "2001-08-01T00:00:00", "Total-Full": 113425.0}, {"dt": "2001-09-01T00:00:00", "Total-Full": 103980.0}, {"dt": "2001-10-01T00:00:00", "Total-Full": 114768.0}, {"dt": "2001-11-01T00:00:00", "Total-Full": 98227.0}, {"dt": "2001-12-01T00:00:00", "Total-Full": 96638.0}, {"dt": "2002-01-01T00:00:00", "Total-Full": 89500.0}, {"dt": "2002-02-01T00:00:00", "Total-Full": 90349.0}, {"dt": "2002-03-01T00:00:00", "Total-Full": 99630.0}, {"dt": "2002-04-01T00:00:00", "Total-Full": 103546.0}, {"dt": "2002-05-01T00:00:00", "Total-Full": 111757.0}, {"dt": "2002-06-01T00:00:00", "Total-Full": 113130.0}, {"dt": "2002-07-01T00:00:00", "Total-Full": 107987.0}, {"dt": "2002-08-01T00:00:00", "Total-Full": 119239.0}, {"dt": "2002-09-01T00:00:00", "Total-Full": 111635.0}, {"dt": "2002-10-01T00:00:00", "Total-Full": 103555.0}, {"dt": "2002-11-01T00:00:00", "Total-Full": 118775.0}, {"dt": "2002-12-01T00:00:00", "Total-Full": 110664.0}, {"dt": "2003-01-01T00:00:00", "Total-Full": 108125.0}, {"dt": "2003-02-01T00:00:00", "Total-Full": 106315.0}, {"dt": "2003-03-01T00:00:00", "Total-Full": 117347.0}, {"dt": "2003-04-01T00:00:00", "Total-Full": 115082.0}, {"dt": "2003-05-01T00:00:00", "Total-Full": 115248.0}, {"dt": "2003-06-01T00:00:00", "Total-Full": 118914.0}, {"dt": "2003-07-01T00:00:00", "Total-Full": 124005.0}, {"dt": "2003-08-01T00:00:00", "Total-Full": 117423.0}, {"dt": "2003-09-01T00:00:00", "Total-Full": 118502.0}, {"dt": "2003-10-01T00:00:00", "Total-Full": 125491.0}, {"dt": "2003-11-01T00:00:00", "Total-Full": 118109.0}, {"dt": "2003-12-01T00:00:00", "Total-Full": 114396.0}, {"dt": "2004-01-01T00:00:00", "Total-Full": 111064.0}, {"dt": "2004-02-01T00:00:00", "Total-Full": 96958.0}, {"dt": "2004-03-01T00:00:00", "Total-Full": 121614.0}, {"dt": "2004-04-01T00:00:00", "Total-Full": 119838.0}, {"dt": "2004-05-01T00:00:00", "Total-Full": 117302.0}, {"dt": "2004-06-01T00:00:00", "Total-Full": 121548.0}, {"dt": "2004-07-01T00:00:00", "Total-Full": 127749.0}, {"dt": "2004-08-01T00:00:00", "Total-Full": 137081.0}, {"dt": "2004-09-01T00:00:00", "Total-Full": 127583.0}, {"dt": "2004-10-01T00:00:00", "Total-Full": 141500.0}, {"dt": "2004-11-01T00:00:00", "Total-Full": 143701.0}, {"dt": "2004-12-01T00:00:00", "Total-Full": 142092.0}, {"dt": "2005-01-01T00:00:00", "Total-Full": 132386.0}, {"dt": "2005-02-01T00:00:00", "Total-Full": 131870.0}, {"dt": "2005-03-01T00:00:00", "Total-Full": 132229.0}, {"dt": "2005-04-01T00:00:00", "Total-Full": 135082.0}, {"dt": "2005-05-01T00:00:00", "Total-Full": 141653.0}, {"dt": "2005-06-01T00:00:00", "Total-Full": 135443.0}, {"dt": "2005-07-01T00:00:00", "Total-Full": 143756.0}, {"dt": "2005-08-01T00:00:00", "Total-Full": 147639.0}, {"dt": "2005-09-01T00:00:00", "Total-Full": 144075.0}, {"dt": "2005-10-01T00:00:00", "Total-Full": 147632.0}, {"dt": "2005-11-01T00:00:00", "Total-Full": 144672.0}, {"dt": "2005-12-01T00:00:00", "Total-Full": 146400.0}, {"dt": "2006-01-01T00:00:00", "Total-Full": 137379.0}, {"dt": "2006-02-01T00:00:00", "Total-Full": 130345.0}, {"dt": "2006-03-01T00:00:00", "Total-Full": 148790.0}, {"dt": "2006-04-01T00:00:00", "Total-Full": 140514.0}, {"dt": "2006-05-01T00:00:00", "Total-Full": 145368.0}, {"dt": "2006-06-01T00:00:00", "Total-Full": 146611.0}, {"dt": "2006-07-01T00:00:00", "Total-Full": 141304.0}, {"dt": "2006-08-01T00:00:00", "Total-Full": 154634.0}, {"dt": "2006-09-01T00:00:00", "Total-Full": 141921.0}, {"dt": "2006-10-01T00:00:00", "Total-Full": 150941.0}, {"dt": "2006-11-01T00:00:00", "Total-Full": 142551.0}, {"dt": "2006-12-01T00:00:00", "Total-Full": 137565.0}, {"dt": "2007-01-01T00:00:00", "Total-Full": 142796.0}, {"dt": "2007-02-01T00:00:00", "Total-Full": 127658.0}, {"dt": "2007-03-01T00:00:00", "Total-Full": 142839.0}, {"dt": "2007-04-01T00:00:00", "Total-Full": 142970.0}, {"dt": "2007-05-01T00:00:00", "Total-Full": 149224.0}, {"dt": "2007-06-01T00:00:00", "Total-Full": 148119.0}, {"dt": "2007-07-01T00:00:00", "Total-Full": 157539.0}, {"dt": "2007-08-01T00:00:00", "Total-Full": 158481.0}, {"dt": "2007-09-01T00:00:00", "Total-Full": 149211.0}, {"dt": "2007-10-01T00:00:00", "Total-Full": 160329.0}, {"dt": "2007-11-01T00:00:00", "Total-Full": 156820.0}, {"dt": "2007-12-01T00:00:00", "Total-Full": 143931.0}, {"dt": "2008-01-01T00:00:00", "Total-Full": 140852.0}, {"dt": "2008-02-01T00:00:00", "Total-Full": 145080.0}, {"dt": "2008-03-01T00:00:00", "Total-Full": 139491.0}, {"dt": "2008-04-01T00:00:00", "Total-Full": 150537.0}, {"dt": "2008-05-01T00:00:00", "Total-Full": 147424.0}, {"dt": "2008-06-01T00:00:00", "Total-Full": 152309.0}, {"dt": "2008-07-01T00:00:00", "Total-Full": 154174.0}, {"dt": "2008-08-01T00:00:00", "Total-Full": 146270.0}, {"dt": "2008-09-01T00:00:00", "Total-Full": 145754.0}, {"dt": "2008-10-01T00:00:00", "Total-Full": 141970.0}, {"dt": "2008-11-01T00:00:00", "Total-Full": 122130.0}, {"dt": "2008-12-01T00:00:00", "Total-Full": 121113.0}, {"dt": "2009-01-01T00:00:00", "Total-Full": 122012.0}, {"dt": "2009-02-01T00:00:00", "Total-Full": 106005.0}, {"dt": "2009-03-01T00:00:00", "Total-Full": 134411.0}, {"dt": "2009-04-01T00:00:00", "Total-Full": 135229.0}, {"dt": "2009-05-01T00:00:00", "Total-Full": 135479.0}, {"dt": "2009-06-01T00:00:00", "Total-Full": 141066.0}, {"dt": "2009-07-01T00:00:00", "Total-Full": 149467.0}, {"dt": "2009-08-01T00:00:00", "Total-Full": 148292.0}, {"dt": "2009-09-01T00:00:00", "Total-Full": 147535.0}, {"dt": "2009-10-01T00:00:00", "Total-Full": 147694.0}, {"dt": "2009-11-01T00:00:00", "Total-Full": 144818.0}, {"dt": "2009-12-01T00:00:00", "Total-Full": 156375.0}, {"dt": "2010-01-01T00:00:00", "Total-Full": 128962.0}, {"dt": "2010-02-01T00:00:00", "Total-Full": 125891.0}, {"dt": "2010-03-01T00:00:00", "Total-Full": 141586.0}, {"dt": "2010-04-01T00:00:00", "Total-Full": 143350.0}, {"dt": "2010-05-01T00:00:00", "Total-Full": 146708.0}, {"dt": "2010-06-01T00:00:00", "Total-Full": 148705.0}, {"dt": "2010-07-01T00:00:00", "Total-Full": 154572.0}, {"dt": "2010-08-01T00:00:00", "Total-Full": 156483.0}, {"dt": "2010-09-01T00:00:00", "Total-Full": 153579.0}, {"dt": "2010-10-01T00:00:00", "Total-Full": 154227.0}, {"dt": "2010-11-01T00:00:00", "Total-Full": 155416.0}, {"dt": "2010-12-01T00:00:00", "Total-Full": 148757.0}, {"dt": "2011-01-01T00:00:00", "Total-Full": 139349.0}, {"dt": "2011-02-01T00:00:00", "Total-Full": 134691.0}, {"dt": "2011-03-01T00:00:00", "Total-Full": 147608.0}, {"dt": "2011-04-01T00:00:00", "Total-Full": 150426.0}, {"dt": "2011-05-01T00:00:00", "Total-Full": 151669.0}, {"dt": "2011-06-01T00:00:00", "Total-Full": 152183.0}, {"dt": "2011-07-01T00:00:00", "Total-Full": 147852.0}, {"dt": "2011-08-01T00:00:00", "Total-Full": 160716.0}, {"dt": "2011-09-01T00:00:00", "Total-Full": 150506.0}, {"dt": "2011-10-01T00:00:00", "Total-Full": 151245.0}, {"dt": "2011-11-01T00:00:00", "Total-Full": 157012.0}, {"dt": "2011-12-01T00:00:00", "Total-Full": 147841.0}, {"dt": "2012-01-01T00:00:00", "Total-Full": 152675.0}, {"dt": "2012-02-01T00:00:00", "Total-Full": 128521.0}, {"dt": "2012-03-01T00:00:00", "Total-Full": 154467.0}, {"dt": "2012-04-01T00:00:00", "Total-Full": 143672.0}, {"dt": "2012-05-01T00:00:00", "Total-Full": 156233.0}, {"dt": "2012-06-01T00:00:00", "Total-Full": 146109.0}, {"dt": "2012-07-01T00:00:00", "Total-Full": 148963.0}, {"dt": "2012-08-01T00:00:00", "Total-Full": 151793.0}, {"dt": "2012-09-01T00:00:00", "Total-Full": 141124.0}, {"dt": "2012-10-01T00:00:00", "Total-Full": 157131.0}, {"dt": "2012-11-01T00:00:00", "Total-Full": 144219.0}, {"dt": "2012-12-01T00:00:00", "Total-Full": 153217.0}, {"dt": "2013-01-01T00:00:00", "Total-Full": 150019.0}, {"dt": "2013-02-01T00:00:00", "Total-Full": 148201.0}, {"dt": "2013-03-01T00:00:00", "Total-Full": 141497.0}, {"dt": "2013-04-01T00:00:00", "Total-Full": 149440.0}, {"dt": "2013-05-01T00:00:00", "Total-Full": 155674.0}, {"dt": "2013-06-01T00:00:00", "Total-Full": 152471.0}, {"dt": "2013-07-01T00:00:00", "Total-Full": 154512.0}, {"dt": "2013-08-01T00:00:00", "Total-Full": 157539.0}, {"dt": "2013-09-01T00:00:00", "Total-Full": 153123.0}, {"dt": "2013-10-01T00:00:00", "Total-Full": 156544.0}, {"dt": "2013-11-01T00:00:00", "Total-Full": 154365.0}, {"dt": "2013-12-01T00:00:00", "Total-Full": 144725.0}, {"dt": "2014-01-01T00:00:00", "Total-Full": 150654.0}, {"dt": "2014-02-01T00:00:00", "Total-Full": 138413.0}, {"dt": "2014-03-01T00:00:00", "Total-Full": 147812.0}, {"dt": "2014-04-01T00:00:00", "Total-Full": 156831.0}, {"dt": "2014-05-01T00:00:00", "Total-Full": 160156.0}, {"dt": "2014-06-01T00:00:00", "Total-Full": 157885.0}, {"dt": "2014-07-01T00:00:00", "Total-Full": 147537.0}, {"dt": "2014-08-01T00:00:00", "Total-Full": 149652.0}, {"dt": "2014-09-01T00:00:00", "Total-Full": 151676.0}, {"dt": "2014-10-01T00:00:00", "Total-Full": 159189.0}, {"dt": "2014-11-01T00:00:00", "Total-Full": 145694.0}, {"dt": "2014-12-01T00:00:00", "Total-Full": 149689.0}, {"dt": "2015-01-01T00:00:00", "Total-Full": 101750.0}, {"dt": "2015-02-01T00:00:00", "Total-Full": 90868.0}, {"dt": "2015-03-01T00:00:00", "Total-Full": 157286.0}, {"dt": "2015-04-01T00:00:00", "Total-Full": 148217.0}, {"dt": "2015-05-01T00:00:00", "Total-Full": 158791.0}, {"dt": "2015-06-01T00:00:00", "Total-Full": 153460.0}, {"dt": "2015-07-01T00:00:00", "Total-Full": 154625.0}, {"dt": "2015-08-01T00:00:00", "Total-Full": 160149.0}, {"dt": "2015-09-01T00:00:00", "Total-Full": 142844.0}, {"dt": "2015-10-01T00:00:00", "Total-Full": 144989.0}, {"dt": "2015-11-01T00:00:00", "Total-Full": 150356.0}, {"dt": "2015-12-01T00:00:00", "Total-Full": 139045.0}, {"dt": "2016-01-01T00:00:00", "Total-Full": 144911.0}, {"dt": "2016-02-01T00:00:00", "Total-Full": 144075.0}, {"dt": "2016-03-01T00:00:00", "Total-Full": 137178.0}, {"dt": "2016-04-01T00:00:00", "Total-Full": 150907.0}, {"dt": "2016-05-01T00:00:00", "Total-Full": 165262.0}, {"dt": "2016-06-01T00:00:00", "Total-Full": 150046.0}, {"dt": "2016-07-01T00:00:00", "Total-Full": 158058.0}, {"dt": "2016-08-01T00:00:00", "Total-Full": 161487.0}, {"dt": "2016-09-01T00:00:00", "Total-Full": 146629.0}, {"dt": "2016-10-01T00:00:00", "Total-Full": 161475.0}, {"dt": "2016-11-01T00:00:00", "Total-Full": 159091.0}, {"dt": "2016-12-01T00:00:00", "Total-Full": 152597.0}, {"dt": "2017-01-01T00:00:00", "Total-Full": 153769.15}, {"dt": "2017-02-01T00:00:00", "Total-Full": 136687.2}, {"dt": "2017-03-01T00:00:00", "Total-Full": 149998.59999999998}, {"dt": "2017-04-01T00:00:00", "Total-Full": 153766.75}, {"dt": "2017-05-01T00:00:00", "Total-Full": 161023.85}, {"dt": "2017-06-01T00:00:00", "Total-Full": 155713.59999999998}, {"dt": "2017-07-01T00:00:00", "Total-Full": 159656.0}, {"dt": "2017-08-01T00:00:00", "Total-Full": 155039.15000000002}, {"dt": "2017-09-01T00:00:00", "Total-Full": 153496.25}, {"dt": "2017-10-01T00:00:00", "Total-Full": 162634.3}, {"dt": "2017-11-01T00:00:00", "Total-Full": 149372.34999999998}, {"dt": "2017-12-01T00:00:00", "Total-Full": 159192.8}, {"dt": "2018-01-01T00:00:00", "Total-Full": 150019.0}, {"dt": "2018-02-01T00:00:00", "Total-Full": 147570.75}, {"dt": "2018-03-01T00:00:00", "Total-Full": 148256.65}, {"dt": "2018-04-01T00:00:00", "Total-Full": 153365.3}, {"dt": "2018-05-01T00:00:00", "Total-Full": 154511.84999999998}, {"dt": "2018-06-01T00:00:00", "Total-Full": 159101.55}, {"dt": "2018-07-01T00:00:00", "Total-Full": 153679.84999999998}, {"dt": "2018-08-01T00:00:00", "Total-Full": 160014.05}, {"dt": "2018-09-01T00:00:00", "Total-Full": 155540.25}, {"dt": "2018-10-01T00:00:00", "Total-Full": 161249.40000000002}, {"dt": "2018-11-01T00:00:00", "Total-Full": 160649.35}, {"dt": "2018-12-01T00:00:00", "Total-Full": 159445.55}, {"dt": "2019-01-01T00:00:00", "Total-Full": 157243.3}, {"dt": "2019-02-01T00:00:00", "Total-Full": 137814.05}, {"dt": "2019-03-01T00:00:00", "Total-Full": 162916.45}, {"dt": "2019-04-01T00:00:00", "Total-Full": 159993.3}, {"dt": "2019-05-01T00:00:00", "Total-Full": 164039.45}, {"dt": "2019-06-01T00:00:00", "Total-Full": 155795.65}, {"dt": "2019-07-01T00:00:00", "Total-Full": 167012.25}, {"dt": "2019-08-01T00:00:00", "Total-Full": 163404.55}, {"dt": "2019-09-01T00:00:00", "Total-Full": 156963.45}, {"dt": "2019-10-01T00:00:00", "Total-Full": 165975.1}, {"dt": "2019-11-01T00:00:00", "Total-Full": 159147.2}, {"dt": "2019-12-01T00:00:00", "Total-Full": 155923.75}, {"dt": "2020-01-01T00:00:00", "Total-Full": 165801.5}, {"dt": "2020-02-01T00:00:00", "Total-Full": 141847.45}, {"dt": "2020-03-01T00:00:00", "Total-Full": 150816.25}, {"dt": "2020-04-01T00:00:00", "Total-Full": 162166.9}, {"dt": "2020-05-01T00:00:00", "Total-Full": 143142.5}, {"dt": "2020-06-01T00:00:00", "Total-Full": 153102.2}, {"dt": "2020-07-01T00:00:00", "Total-Full": 167944.8}, {"dt": "2020-08-01T00:00:00", "Total-Full": 172408.65}, {"dt": "2020-09-01T00:00:00", "Total-Full": 169588.0}, {"dt": "2020-10-01T00:00:00", "Total-Full": 173694.75}, {"dt": "2020-11-01T00:00:00", "Total-Full": 157712.2}, {"dt": "2020-12-01T00:00:00", "Total-Full": 165549.5}, {"dt": "2020-01-01T00:00:00", "Total-Full": 165801.0}, {"dt": "2020-02-01T00:00:00", "Total-Full": 141848.0}, {"dt": "2020-03-01T00:00:00", "Total-Full": 150817.0}, {"dt": "2020-04-01T00:00:00", "Total-Full": 162167.0}, {"dt": "2020-05-01T00:00:00", "Total-Full": 143143.0}, {"dt": "2020-06-01T00:00:00", "Total-Full": 153102.0}, {"dt": "2020-07-01T00:00:00", "Total-Full": 167945.0}, {"dt": "2020-08-01T00:00:00", "Total-Full": 172408.0}, {"dt": "2020-09-01T00:00:00", "Total-Full": 169588.0}, {"dt": "2020-10-01T00:00:00", "Total-Full": 173695.0}, {"dt": "2020-11-01T00:00:00", "Total-Full": 157712.0}, {"dt": "2020-12-01T00:00:00", "Total-Full": 165550.0}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[61]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doYoyChart</span><span class="p">(</span><span class="n">df_oak_combined</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;Total-Full&#39;</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Oakland&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[61]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-fe174576a599408f9d6702eacd4f13ba"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-fe174576a599408f9d6702eacd4f13ba") {
      outputDiv = document.getElementById("altair-viz-fe174576a599408f9d6702eacd4f13ba");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-3f62289c4bfc889b0a936bda3c975b78"}, "mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['nolarge'] < 0"}, "value": "royalblue"}, "tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "nolarge", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Year-over-Year Volume Growth [%]"}, "field": "nolarge"}}, "height": 400, "title": "Port of Oakland Total-Full Container Volume Growth", "transform": [{"calculate": "datum['Total-Full'] > 400 ? NaN : datum['Total-Full']", "as": "nolarge"}], "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-3f62289c4bfc889b0a936bda3c975b78": [{"dt": "1998-01-01T00:00:00", "Total-Full": null}, {"dt": "1998-02-01T00:00:00", "Total-Full": null}, {"dt": "1998-03-01T00:00:00", "Total-Full": null}, {"dt": "1998-04-01T00:00:00", "Total-Full": null}, {"dt": "1998-05-01T00:00:00", "Total-Full": null}, {"dt": "1998-06-01T00:00:00", "Total-Full": null}, {"dt": "1998-07-01T00:00:00", "Total-Full": null}, {"dt": "1998-08-01T00:00:00", "Total-Full": null}, {"dt": "1998-09-01T00:00:00", "Total-Full": null}, {"dt": "1998-10-01T00:00:00", "Total-Full": null}, {"dt": "1998-11-01T00:00:00", "Total-Full": null}, {"dt": "1998-12-01T00:00:00", "Total-Full": null}, {"dt": "1999-01-01T00:00:00", "Total-Full": 10.827493386550335}, {"dt": "1999-02-01T00:00:00", "Total-Full": 7.353338435910128}, {"dt": "1999-03-01T00:00:00", "Total-Full": 1.7557312725317242}, {"dt": "1999-04-01T00:00:00", "Total-Full": 4.506551617133314}, {"dt": "1999-05-01T00:00:00", "Total-Full": 9.972664913095052}, {"dt": "1999-06-01T00:00:00", "Total-Full": 8.998276988889554}, {"dt": "1999-07-01T00:00:00", "Total-Full": -0.33551211628358724}, {"dt": "1999-08-01T00:00:00", "Total-Full": 8.590038010769717}, {"dt": "1999-09-01T00:00:00", "Total-Full": 5.494631791669469}, {"dt": "1999-10-01T00:00:00", "Total-Full": -3.2528002938013167}, {"dt": "1999-11-01T00:00:00", "Total-Full": 0.8501367450053365}, {"dt": "1999-12-01T00:00:00", "Total-Full": 1.3067001141958468}, {"dt": "2000-01-01T00:00:00", "Total-Full": 4.440954773869343}, {"dt": "2000-02-01T00:00:00", "Total-Full": 5.754007779653381}, {"dt": "2000-03-01T00:00:00", "Total-Full": 7.424371433884347}, {"dt": "2000-04-01T00:00:00", "Total-Full": 1.4549669064472637}, {"dt": "2000-05-01T00:00:00", "Total-Full": 4.323112566009768}, {"dt": "2000-06-01T00:00:00", "Total-Full": 3.6548472377422314}, {"dt": "2000-07-01T00:00:00", "Total-Full": 16.771525047981694}, {"dt": "2000-08-01T00:00:00", "Total-Full": 14.265008842135973}, {"dt": "2000-09-01T00:00:00", "Total-Full": 1.0476813015215969}, {"dt": "2000-10-01T00:00:00", "Total-Full": 7.273844707753763}, {"dt": "2000-11-01T00:00:00", "Total-Full": -1.6335423139857697}, {"dt": "2000-12-01T00:00:00", "Total-Full": -3.3280975699898407}, {"dt": "2001-01-01T00:00:00", "Total-Full": 3.126440929412011}, {"dt": "2001-02-01T00:00:00", "Total-Full": -9.589054677043574}, {"dt": "2001-03-01T00:00:00", "Total-Full": -0.8390805644889476}, {"dt": "2001-04-01T00:00:00", "Total-Full": -3.165596676737159}, {"dt": "2001-05-01T00:00:00", "Total-Full": -5.252557947168723}, {"dt": "2001-06-01T00:00:00", "Total-Full": -12.621827233207128}, {"dt": "2001-07-01T00:00:00", "Total-Full": -5.2938281153866455}, {"dt": "2001-08-01T00:00:00", "Total-Full": -9.514084450861981}, {"dt": "2001-09-01T00:00:00", "Total-Full": -6.578498140195144}, {"dt": "2001-10-01T00:00:00", "Total-Full": -3.3052211203882353}, {"dt": "2001-11-01T00:00:00", "Total-Full": -8.203354983411993}, {"dt": "2001-12-01T00:00:00", "Total-Full": -7.636579118400433}, {"dt": "2002-01-01T00:00:00", "Total-Full": -13.006288819121126}, {"dt": "2002-02-01T00:00:00", "Total-Full": -0.9255096334148449}, {"dt": "2002-03-01T00:00:00", "Total-Full": -8.463644548979254}, {"dt": "2002-04-01T00:00:00", "Total-Full": 0.9544980354305066}, {"dt": "2002-05-01T00:00:00", "Total-Full": 6.051432909470478}, {"dt": "2002-06-01T00:00:00", "Total-Full": 13.476102111439904}, {"dt": "2002-07-01T00:00:00", "Total-Full": 0.21902348934117466}, {"dt": "2002-08-01T00:00:00", "Total-Full": 5.125854088604798}, {"dt": "2002-09-01T00:00:00", "Total-Full": 7.361992690902097}, {"dt": "2002-10-01T00:00:00", "Total-Full": -9.770144988150008}, {"dt": "2002-11-01T00:00:00", "Total-Full": 20.918891954350638}, {"dt": "2002-12-01T00:00:00", "Total-Full": 14.513959312071867}, {"dt": "2003-01-01T00:00:00", "Total-Full": 20.810055865921797}, {"dt": "2003-02-01T00:00:00", "Total-Full": 17.671473951012185}, {"dt": "2003-03-01T00:00:00", "Total-Full": 17.782796346481987}, {"dt": "2003-04-01T00:00:00", "Total-Full": 11.14094218994457}, {"dt": "2003-05-01T00:00:00", "Total-Full": 3.123741689558601}, {"dt": "2003-06-01T00:00:00", "Total-Full": 5.1127022010076795}, {"dt": "2003-07-01T00:00:00", "Total-Full": 14.833266967320146}, {"dt": "2003-08-01T00:00:00", "Total-Full": -1.5229916386417242}, {"dt": "2003-09-01T00:00:00", "Total-Full": 6.15129663635956}, {"dt": "2003-10-01T00:00:00", "Total-Full": 21.182946260441305}, {"dt": "2003-11-01T00:00:00", "Total-Full": -0.5607240580930317}, {"dt": "2003-12-01T00:00:00", "Total-Full": 3.3723704185643077}, {"dt": "2004-01-01T00:00:00", "Total-Full": 2.7181502890173403}, {"dt": "2004-02-01T00:00:00", "Total-Full": -8.801203969336402}, {"dt": "2004-03-01T00:00:00", "Total-Full": 3.636224189796078}, {"dt": "2004-04-01T00:00:00", "Total-Full": 4.132705375297618}, {"dt": "2004-05-01T00:00:00", "Total-Full": 1.782243509648751}, {"dt": "2004-06-01T00:00:00", "Total-Full": 2.215046167818757}, {"dt": "2004-07-01T00:00:00", "Total-Full": 3.0192330954396995}, {"dt": "2004-08-01T00:00:00", "Total-Full": 16.74118358413599}, {"dt": "2004-09-01T00:00:00", "Total-Full": 7.663161803176322}, {"dt": "2004-10-01T00:00:00", "Total-Full": 12.757090149891237}, {"dt": "2004-11-01T00:00:00", "Total-Full": 21.668120126324}, {"dt": "2004-12-01T00:00:00", "Total-Full": 24.210636735550196}, {"dt": "2005-01-01T00:00:00", "Total-Full": 19.19793992652885}, {"dt": "2005-02-01T00:00:00", "Total-Full": 36.00734338579592}, {"dt": "2005-03-01T00:00:00", "Total-Full": 8.728435870870133}, {"dt": "2005-04-01T00:00:00", "Total-Full": 12.720506016455557}, {"dt": "2005-05-01T00:00:00", "Total-Full": 20.75923684165657}, {"dt": "2005-06-01T00:00:00", "Total-Full": 11.431697765491823}, {"dt": "2005-07-01T00:00:00", "Total-Full": 12.530039374085122}, {"dt": "2005-08-01T00:00:00", "Total-Full": 7.70201559661805}, {"dt": "2005-09-01T00:00:00", "Total-Full": 12.926487071161507}, {"dt": "2005-10-01T00:00:00", "Total-Full": 4.333568904593643}, {"dt": "2005-11-01T00:00:00", "Total-Full": 0.6757085893626336}, {"dt": "2005-12-01T00:00:00", "Total-Full": 3.0318385271514314}, {"dt": "2006-01-01T00:00:00", "Total-Full": 3.771546840300344}, {"dt": "2006-02-01T00:00:00", "Total-Full": -1.1564419504057066}, {"dt": "2006-03-01T00:00:00", "Total-Full": 12.524484039053462}, {"dt": "2006-04-01T00:00:00", "Total-Full": 4.021261159888079}, {"dt": "2006-05-01T00:00:00", "Total-Full": 2.6226059455147332}, {"dt": "2006-06-01T00:00:00", "Total-Full": 8.245535022112627}, {"dt": "2006-07-01T00:00:00", "Total-Full": -1.7056679373382622}, {"dt": "2006-08-01T00:00:00", "Total-Full": 4.737908005337332}, {"dt": "2006-09-01T00:00:00", "Total-Full": -1.4950546590317582}, {"dt": "2006-10-01T00:00:00", "Total-Full": 2.2413839817925663}, {"dt": "2006-11-01T00:00:00", "Total-Full": -1.4660749834107478}, {"dt": "2006-12-01T00:00:00", "Total-Full": -6.034836065573767}, {"dt": "2007-01-01T00:00:00", "Total-Full": 3.9431062971778896}, {"dt": "2007-02-01T00:00:00", "Total-Full": -2.0614522996662665}, {"dt": "2007-03-01T00:00:00", "Total-Full": -3.9995967470932148}, {"dt": "2007-04-01T00:00:00", "Total-Full": 1.747868539789632}, {"dt": "2007-05-01T00:00:00", "Total-Full": 2.6525782840790324}, {"dt": "2007-06-01T00:00:00", "Total-Full": 1.0285722080880744}, {"dt": "2007-07-01T00:00:00", "Total-Full": 11.489412897016372}, {"dt": "2007-08-01T00:00:00", "Total-Full": 2.487809925372164}, {"dt": "2007-09-01T00:00:00", "Total-Full": 5.136660536495663}, {"dt": "2007-10-01T00:00:00", "Total-Full": 6.219648736923689}, {"dt": "2007-11-01T00:00:00", "Total-Full": 10.009750896170488}, {"dt": "2007-12-01T00:00:00", "Total-Full": 4.627630574637442}, {"dt": "2008-01-01T00:00:00", "Total-Full": -1.3613826717835287}, {"dt": "2008-02-01T00:00:00", "Total-Full": 13.647401651287039}, {"dt": "2008-03-01T00:00:00", "Total-Full": -2.3438976750047247}, {"dt": "2008-04-01T00:00:00", "Total-Full": 5.292718752185777}, {"dt": "2008-05-01T00:00:00", "Total-Full": -1.206240283064386}, {"dt": "2008-06-01T00:00:00", "Total-Full": 2.828806567692199}, {"dt": "2008-07-01T00:00:00", "Total-Full": -2.1359790274154355}, {"dt": "2008-08-01T00:00:00", "Total-Full": -7.705024577078645}, {"dt": "2008-09-01T00:00:00", "Total-Full": -2.316853315104117}, {"dt": "2008-10-01T00:00:00", "Total-Full": -11.450829232390891}, {"dt": "2008-11-01T00:00:00", "Total-Full": -22.1209029460528}, {"dt": "2008-12-01T00:00:00", "Total-Full": -15.853429768430704}, {"dt": "2009-01-01T00:00:00", "Total-Full": -13.375741913497851}, {"dt": "2009-02-01T00:00:00", "Total-Full": -26.93341604631927}, {"dt": "2009-03-01T00:00:00", "Total-Full": -3.6418120165458756}, {"dt": "2009-04-01T00:00:00", "Total-Full": -10.168928569056114}, {"dt": "2009-05-01T00:00:00", "Total-Full": -8.102479921858041}, {"dt": "2009-06-01T00:00:00", "Total-Full": -7.381704298498448}, {"dt": "2009-07-01T00:00:00", "Total-Full": -3.0530439633141726}, {"dt": "2009-08-01T00:00:00", "Total-Full": 1.382375059820884}, {"dt": "2009-09-01T00:00:00", "Total-Full": 1.221921868353526}, {"dt": "2009-10-01T00:00:00", "Total-Full": 4.03183771219271}, {"dt": "2009-11-01T00:00:00", "Total-Full": 18.57692622615246}, {"dt": "2009-12-01T00:00:00", "Total-Full": 29.11495875752397}, {"dt": "2010-01-01T00:00:00", "Total-Full": 5.696161033340985}, {"dt": "2010-02-01T00:00:00", "Total-Full": 18.759492476769957}, {"dt": "2010-03-01T00:00:00", "Total-Full": 5.338104768210927}, {"dt": "2010-04-01T00:00:00", "Total-Full": 6.005368670921185}, {"dt": "2010-05-01T00:00:00", "Total-Full": 8.288369415186114}, {"dt": "2010-06-01T00:00:00", "Total-Full": 5.415195723987343}, {"dt": "2010-07-01T00:00:00", "Total-Full": 3.415469635437929}, {"dt": "2010-08-01T00:00:00", "Total-Full": 5.523561621665363}, {"dt": "2010-09-01T00:00:00", "Total-Full": 4.0966550310095995}, {"dt": "2010-10-01T00:00:00", "Total-Full": 4.423334732622863}, {"dt": "2010-11-01T00:00:00", "Total-Full": 7.318151058570077}, {"dt": "2010-12-01T00:00:00", "Total-Full": -4.871622701838529}, {"dt": "2011-01-01T00:00:00", "Total-Full": 8.054310572106505}, {"dt": "2011-02-01T00:00:00", "Total-Full": 6.990174039446817}, {"dt": "2011-03-01T00:00:00", "Total-Full": 4.25324537736782}, {"dt": "2011-04-01T00:00:00", "Total-Full": 4.936170212765956}, {"dt": "2011-05-01T00:00:00", "Total-Full": 3.381547018567499}, {"dt": "2011-06-01T00:00:00", "Total-Full": 2.338858814431255}, {"dt": "2011-07-01T00:00:00", "Total-Full": -4.347488549025702}, {"dt": "2011-08-01T00:00:00", "Total-Full": 2.7050861754950972}, {"dt": "2011-09-01T00:00:00", "Total-Full": -2.000924605577581}, {"dt": "2011-10-01T00:00:00", "Total-Full": -1.9335135871150988}, {"dt": "2011-11-01T00:00:00", "Total-Full": 1.0269212951047546}, {"dt": "2011-12-01T00:00:00", "Total-Full": -0.6157693419469368}, {"dt": "2012-01-01T00:00:00", "Total-Full": 9.563039562537234}, {"dt": "2012-02-01T00:00:00", "Total-Full": -4.580855439487419}, {"dt": "2012-03-01T00:00:00", "Total-Full": 4.646767112893602}, {"dt": "2012-04-01T00:00:00", "Total-Full": -4.489915307194236}, {"dt": "2012-05-01T00:00:00", "Total-Full": 3.009184474085025}, {"dt": "2012-06-01T00:00:00", "Total-Full": -3.991247379799323}, {"dt": "2012-07-01T00:00:00", "Total-Full": 0.7514271027784458}, {"dt": "2012-08-01T00:00:00", "Total-Full": -5.5520296672391005}, {"dt": "2012-09-01T00:00:00", "Total-Full": -6.233638526038831}, {"dt": "2012-10-01T00:00:00", "Total-Full": 3.8916988991371637}, {"dt": "2012-11-01T00:00:00", "Total-Full": -8.147784882684128}, {"dt": "2012-12-01T00:00:00", "Total-Full": 3.6363390399144935}, {"dt": "2013-01-01T00:00:00", "Total-Full": -1.7396430325855583}, {"dt": "2013-02-01T00:00:00", "Total-Full": 15.312672637156567}, {"dt": "2013-03-01T00:00:00", "Total-Full": -8.396615458317957}, {"dt": "2013-04-01T00:00:00", "Total-Full": 4.014700150342443}, {"dt": "2013-05-01T00:00:00", "Total-Full": -0.3577989285234229}, {"dt": "2013-06-01T00:00:00", "Total-Full": 4.354283445920504}, {"dt": "2013-07-01T00:00:00", "Total-Full": 3.725086095204855}, {"dt": "2013-08-01T00:00:00", "Total-Full": 3.7854182999216057}, {"dt": "2013-09-01T00:00:00", "Total-Full": 8.502451744565054}, {"dt": "2013-10-01T00:00:00", "Total-Full": -0.3735736423748359}, {"dt": "2013-11-01T00:00:00", "Total-Full": 7.035134066939852}, {"dt": "2013-12-01T00:00:00", "Total-Full": -5.5424659143567645}, {"dt": "2014-01-01T00:00:00", "Total-Full": 0.4232797179023917}, {"dt": "2014-02-01T00:00:00", "Total-Full": -6.604543828989007}, {"dt": "2014-03-01T00:00:00", "Total-Full": 4.4629921482434165}, {"dt": "2014-04-01T00:00:00", "Total-Full": 4.945797644539618}, {"dt": "2014-05-01T00:00:00", "Total-Full": 2.8790934902424237}, {"dt": "2014-06-01T00:00:00", "Total-Full": 3.5508391759744518}, {"dt": "2014-07-01T00:00:00", "Total-Full": -4.514212488350422}, {"dt": "2014-08-01T00:00:00", "Total-Full": -5.006379372726755}, {"dt": "2014-09-01T00:00:00", "Total-Full": -0.9449919345885349}, {"dt": "2014-10-01T00:00:00", "Total-Full": 1.6896208094848708}, {"dt": "2014-11-01T00:00:00", "Total-Full": -5.617205972856542}, {"dt": "2014-12-01T00:00:00", "Total-Full": 3.429953359820348}, {"dt": "2015-01-01T00:00:00", "Total-Full": -32.461136113213065}, {"dt": "2015-02-01T00:00:00", "Total-Full": -34.35009717295341}, {"dt": "2015-03-01T00:00:00", "Total-Full": 6.409493139934508}, {"dt": "2015-04-01T00:00:00", "Total-Full": -5.492536552084726}, {"dt": "2015-05-01T00:00:00", "Total-Full": -0.8522940133369961}, {"dt": "2015-06-01T00:00:00", "Total-Full": -2.8026728314912708}, {"dt": "2015-07-01T00:00:00", "Total-Full": 4.804218602791166}, {"dt": "2015-08-01T00:00:00", "Total-Full": 7.014273113623615}, {"dt": "2015-09-01T00:00:00", "Total-Full": -5.822938368627861}, {"dt": "2015-10-01T00:00:00", "Total-Full": -8.92021433641772}, {"dt": "2015-11-01T00:00:00", "Total-Full": 3.199857235026826}, {"dt": "2015-12-01T00:00:00", "Total-Full": -7.110742940363024}, {"dt": "2016-01-01T00:00:00", "Total-Full": 42.418673218673206}, {"dt": "2016-02-01T00:00:00", "Total-Full": 58.55416648325043}, {"dt": "2016-03-01T00:00:00", "Total-Full": -12.784354615159643}, {"dt": "2016-04-01T00:00:00", "Total-Full": 1.8149065221938043}, {"dt": "2016-05-01T00:00:00", "Total-Full": 4.075167988110162}, {"dt": "2016-06-01T00:00:00", "Total-Full": -2.224683956731399}, {"dt": "2016-07-01T00:00:00", "Total-Full": 2.220210185933702}, {"dt": "2016-08-01T00:00:00", "Total-Full": 0.8354719667309718}, {"dt": "2016-09-01T00:00:00", "Total-Full": 2.649743776427438}, {"dt": "2016-10-01T00:00:00", "Total-Full": 11.370517763416533}, {"dt": "2016-11-01T00:00:00", "Total-Full": 5.809545345712852}, {"dt": "2016-12-01T00:00:00", "Total-Full": 9.746484950915168}, {"dt": "2017-01-01T00:00:00", "Total-Full": 6.112820972873001}, {"dt": "2017-02-01T00:00:00", "Total-Full": -5.127745965642882}, {"dt": "2017-03-01T00:00:00", "Total-Full": 9.345959264605085}, {"dt": "2017-04-01T00:00:00", "Total-Full": 1.8950413168375313}, {"dt": "2017-05-01T00:00:00", "Total-Full": -2.5645036366496843}, {"dt": "2017-06-01T00:00:00", "Total-Full": 3.777241645895235}, {"dt": "2017-07-01T00:00:00", "Total-Full": 1.011021270672785}, {"dt": "2017-08-01T00:00:00", "Total-Full": -3.9927981818969838}, {"dt": "2017-09-01T00:00:00", "Total-Full": 4.683418696165154}, {"dt": "2017-10-01T00:00:00", "Total-Full": 0.7179439541724619}, {"dt": "2017-11-01T00:00:00", "Total-Full": -6.108862223507316}, {"dt": "2017-12-01T00:00:00", "Total-Full": 4.322365446240739}, {"dt": "2018-01-01T00:00:00", "Total-Full": -2.438818189474279}, {"dt": "2018-02-01T00:00:00", "Total-Full": 7.962376872157728}, {"dt": "2018-03-01T00:00:00", "Total-Full": -1.1613108389011528}, {"dt": "2018-04-01T00:00:00", "Total-Full": -0.2610772484948898}, {"dt": "2018-05-01T00:00:00", "Total-Full": -4.04412141431224}, {"dt": "2018-06-01T00:00:00", "Total-Full": 2.1757572877385334}, {"dt": "2018-07-01T00:00:00", "Total-Full": -3.7431415042341154}, {"dt": "2018-08-01T00:00:00", "Total-Full": 3.2088024218398736}, {"dt": "2018-09-01T00:00:00", "Total-Full": 1.3316286228491014}, {"dt": "2018-10-01T00:00:00", "Total-Full": -0.8515423868150629}, {"dt": "2018-11-01T00:00:00", "Total-Full": 7.549590001094608}, {"dt": "2018-12-01T00:00:00", "Total-Full": 0.15876974335522487}, {"dt": "2019-01-01T00:00:00", "Total-Full": 4.815590025263461}, {"dt": "2019-02-01T00:00:00", "Total-Full": -6.611540566135233}, {"dt": "2019-03-01T00:00:00", "Total-Full": 9.888123062270736}, {"dt": "2019-04-01T00:00:00", "Total-Full": 4.321707713544076}, {"dt": "2019-05-01T00:00:00", "Total-Full": 6.166258445549677}, {"dt": "2019-06-01T00:00:00", "Total-Full": -2.077855306877896}, {"dt": "2019-07-01T00:00:00", "Total-Full": 8.675437931518037}, {"dt": "2019-08-01T00:00:00", "Total-Full": 2.118876436162953}, {"dt": "2019-09-01T00:00:00", "Total-Full": 0.9150043156032073}, {"dt": "2019-10-01T00:00:00", "Total-Full": 2.9306775715134403}, {"dt": "2019-11-01T00:00:00", "Total-Full": -0.9350489124294592}, {"dt": "2019-12-01T00:00:00", "Total-Full": -2.208779109859127}, {"dt": "2020-01-01T00:00:00", "Total-Full": 5.442648430807551}, {"dt": "2020-01-01T00:00:00", "Total-Full": 20.30776252493851}, {"dt": "2020-02-01T00:00:00", "Total-Full": -12.932395715718082}, {"dt": "2020-02-01T00:00:00", "Total-Full": -11.34128741641055}, {"dt": "2020-03-01T00:00:00", "Total-Full": -8.060987768491056}, {"dt": "2020-03-01T00:00:00", "Total-Full": -3.1956283760169124}, {"dt": "2020-04-01T00:00:00", "Total-Full": -2.90119437346662}, {"dt": "2020-04-01T00:00:00", "Total-Full": -0.7573534519081604}, {"dt": "2020-05-01T00:00:00", "Total-Full": -8.805202739873529}, {"dt": "2020-05-01T00:00:00", "Total-Full": -13.756340559517666}, {"dt": "2020-06-01T00:00:00", "Total-Full": -3.7984959835925536}, {"dt": "2020-06-01T00:00:00", "Total-Full": -1.8095703829596133}, {"dt": "2020-07-01T00:00:00", "Total-Full": 1.2926903556361058}, {"dt": "2020-07-01T00:00:00", "Total-Full": 1.2931164468248157}, {"dt": "2020-08-01T00:00:00", "Total-Full": 21.545117659852163}, {"dt": "2020-08-01T00:00:00", "Total-Full": 21.544188145056676}, {"dt": "2020-09-01T00:00:00", "Total-Full": 12.446768832934119}, {"dt": "2020-09-01T00:00:00", "Total-Full": 12.446209644801321}, {"dt": "2020-10-01T00:00:00", "Total-Full": 7.10863314276835}, {"dt": "2020-10-01T00:00:00", "Total-Full": 7.10872125648252}, {"dt": "2020-11-01T00:00:00", "Total-Full": 10.178458529088164}, {"dt": "2020-11-01T00:00:00", "Total-Full": 10.177933954157737}, {"dt": "2020-12-01T00:00:00", "Total-Full": 8.130200781178566}, {"dt": "2020-12-01T00:00:00", "Total-Full": 8.13038610810295}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[62]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doChart</span><span class="p">(</span><span class="n">df_oak_combined</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;Total-Empty&#39;</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Oakland&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[62]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-bae62ba5b0dc42609923ec43ff1498e0"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-bae62ba5b0dc42609923ec43ff1498e0") {
      outputDiv = document.getElementById("altair-viz-bae62ba5b0dc42609923ec43ff1498e0");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-e681b84820ba55210f9f760c83cb5896"}, "mark": {"type": "line", "color": "purple"}, "encoding": {"tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "Total-Empty", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Volume [TEUs]"}, "field": "Total-Empty"}}, "height": 400, "title": "Port of Oakland Total-Empty Container Volume", "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-e681b84820ba55210f9f760c83cb5896": [{"dt": "1998-01-01T00:00:00", "Total-Empty": 27528.0}, {"dt": "1998-02-01T00:00:00", "Total-Empty": 26068.0}, {"dt": "1998-03-01T00:00:00", "Total-Empty": 32252.0}, {"dt": "1998-04-01T00:00:00", "Total-Empty": 33037.0}, {"dt": "1998-05-01T00:00:00", "Total-Empty": 26986.0}, {"dt": "1998-06-01T00:00:00", "Total-Empty": 30398.0}, {"dt": "1998-07-01T00:00:00", "Total-Empty": 29448.0}, {"dt": "1998-08-01T00:00:00", "Total-Empty": 29616.0}, {"dt": "1998-09-01T00:00:00", "Total-Empty": 30123.0}, {"dt": "1998-10-01T00:00:00", "Total-Empty": 35157.0}, {"dt": "1998-11-01T00:00:00", "Total-Empty": 33617.0}, {"dt": "1998-12-01T00:00:00", "Total-Empty": 35642.0}, {"dt": "1999-01-01T00:00:00", "Total-Empty": 30130.0}, {"dt": "1999-02-01T00:00:00", "Total-Empty": 27589.0}, {"dt": "1999-03-01T00:00:00", "Total-Empty": 32937.0}, {"dt": "1999-04-01T00:00:00", "Total-Empty": 36696.0}, {"dt": "1999-05-01T00:00:00", "Total-Empty": 32599.0}, {"dt": "1999-06-01T00:00:00", "Total-Empty": 35355.0}, {"dt": "1999-07-01T00:00:00", "Total-Empty": 29394.0}, {"dt": "1999-08-01T00:00:00", "Total-Empty": 40137.0}, {"dt": "1999-09-01T00:00:00", "Total-Empty": 33394.0}, {"dt": "1999-10-01T00:00:00", "Total-Empty": 33626.0}, {"dt": "1999-11-01T00:00:00", "Total-Empty": 36345.0}, {"dt": "1999-12-01T00:00:00", "Total-Empty": 36455.0}, {"dt": "2000-01-01T00:00:00", "Total-Empty": 37328.0}, {"dt": "2000-02-01T00:00:00", "Total-Empty": 34529.0}, {"dt": "2000-03-01T00:00:00", "Total-Empty": 34159.0}, {"dt": "2000-04-01T00:00:00", "Total-Empty": 37702.0}, {"dt": "2000-05-01T00:00:00", "Total-Empty": 43832.0}, {"dt": "2000-06-01T00:00:00", "Total-Empty": 39435.0}, {"dt": "2000-07-01T00:00:00", "Total-Empty": 37482.0}, {"dt": "2000-08-01T00:00:00", "Total-Empty": 44349.0}, {"dt": "2000-09-01T00:00:00", "Total-Empty": 33330.0}, {"dt": "2000-10-01T00:00:00", "Total-Empty": 40752.0}, {"dt": "2000-11-01T00:00:00", "Total-Empty": 38646.0}, {"dt": "2000-12-01T00:00:00", "Total-Empty": 32999.0}, {"dt": "2001-01-01T00:00:00", "Total-Empty": 32210.0}, {"dt": "2001-02-01T00:00:00", "Total-Empty": 27000.0}, {"dt": "2001-03-01T00:00:00", "Total-Empty": 32027.0}, {"dt": "2001-04-01T00:00:00", "Total-Empty": 35443.0}, {"dt": "2001-05-01T00:00:00", "Total-Empty": 35505.0}, {"dt": "2001-06-01T00:00:00", "Total-Empty": 30726.0}, {"dt": "2001-07-01T00:00:00", "Total-Empty": 33422.0}, {"dt": "2001-08-01T00:00:00", "Total-Empty": 39526.0}, {"dt": "2001-09-01T00:00:00", "Total-Empty": 33872.0}, {"dt": "2001-10-01T00:00:00", "Total-Empty": 34947.0}, {"dt": "2001-11-01T00:00:00", "Total-Empty": 32545.0}, {"dt": "2001-12-01T00:00:00", "Total-Empty": 31015.0}, {"dt": "2002-01-01T00:00:00", "Total-Empty": 33394.0}, {"dt": "2002-02-01T00:00:00", "Total-Empty": 28337.0}, {"dt": "2002-03-01T00:00:00", "Total-Empty": 31037.0}, {"dt": "2002-04-01T00:00:00", "Total-Empty": 32083.0}, {"dt": "2002-05-01T00:00:00", "Total-Empty": 40350.0}, {"dt": "2002-06-01T00:00:00", "Total-Empty": 37390.0}, {"dt": "2002-07-01T00:00:00", "Total-Empty": 44852.0}, {"dt": "2002-08-01T00:00:00", "Total-Empty": 48983.0}, {"dt": "2002-09-01T00:00:00", "Total-Empty": 36641.0}, {"dt": "2002-10-01T00:00:00", "Total-Empty": 28287.0}, {"dt": "2002-11-01T00:00:00", "Total-Empty": 31647.0}, {"dt": "2002-12-01T00:00:00", "Total-Empty": 35059.0}, {"dt": "2003-01-01T00:00:00", "Total-Empty": 42682.0}, {"dt": "2003-02-01T00:00:00", "Total-Empty": 35806.0}, {"dt": "2003-03-01T00:00:00", "Total-Empty": 38751.0}, {"dt": "2003-04-01T00:00:00", "Total-Empty": 46054.0}, {"dt": "2003-05-01T00:00:00", "Total-Empty": 56710.0}, {"dt": "2003-06-01T00:00:00", "Total-Empty": 45462.0}, {"dt": "2003-07-01T00:00:00", "Total-Empty": 48315.0}, {"dt": "2003-08-01T00:00:00", "Total-Empty": 50284.0}, {"dt": "2003-09-01T00:00:00", "Total-Empty": 41436.0}, {"dt": "2003-10-01T00:00:00", "Total-Empty": 37609.0}, {"dt": "2003-11-01T00:00:00", "Total-Empty": 37339.0}, {"dt": "2003-12-01T00:00:00", "Total-Empty": 43699.0}, {"dt": "2004-01-01T00:00:00", "Total-Empty": 37522.0}, {"dt": "2004-02-01T00:00:00", "Total-Empty": 33741.0}, {"dt": "2004-03-01T00:00:00", "Total-Empty": 37678.0}, {"dt": "2004-04-01T00:00:00", "Total-Empty": 43473.0}, {"dt": "2004-05-01T00:00:00", "Total-Empty": 37031.0}, {"dt": "2004-06-01T00:00:00", "Total-Empty": 44521.0}, {"dt": "2004-07-01T00:00:00", "Total-Empty": 52467.0}, {"dt": "2004-08-01T00:00:00", "Total-Empty": 56517.0}, {"dt": "2004-09-01T00:00:00", "Total-Empty": 46082.0}, {"dt": "2004-10-01T00:00:00", "Total-Empty": 49402.0}, {"dt": "2004-11-01T00:00:00", "Total-Empty": 45697.0}, {"dt": "2004-12-01T00:00:00", "Total-Empty": 55343.0}, {"dt": "2005-01-01T00:00:00", "Total-Empty": 48587.0}, {"dt": "2005-02-01T00:00:00", "Total-Empty": 33450.0}, {"dt": "2005-03-01T00:00:00", "Total-Empty": 47029.0}, {"dt": "2005-04-01T00:00:00", "Total-Empty": 44005.0}, {"dt": "2005-05-01T00:00:00", "Total-Empty": 52182.0}, {"dt": "2005-06-01T00:00:00", "Total-Empty": 46812.0}, {"dt": "2005-07-01T00:00:00", "Total-Empty": 46404.0}, {"dt": "2005-08-01T00:00:00", "Total-Empty": 60538.0}, {"dt": "2005-09-01T00:00:00", "Total-Empty": 56936.0}, {"dt": "2005-10-01T00:00:00", "Total-Empty": 57926.0}, {"dt": "2005-11-01T00:00:00", "Total-Empty": 48923.0}, {"dt": "2005-12-01T00:00:00", "Total-Empty": 48361.0}, {"dt": "2006-01-01T00:00:00", "Total-Empty": 50806.0}, {"dt": "2006-02-01T00:00:00", "Total-Empty": 48277.0}, {"dt": "2006-03-01T00:00:00", "Total-Empty": 54795.0}, {"dt": "2006-04-01T00:00:00", "Total-Empty": 52017.0}, {"dt": "2006-05-01T00:00:00", "Total-Empty": 64656.0}, {"dt": "2006-06-01T00:00:00", "Total-Empty": 58051.0}, {"dt": "2006-07-01T00:00:00", "Total-Empty": 51979.0}, {"dt": "2006-08-01T00:00:00", "Total-Empty": 73362.0}, {"dt": "2006-09-01T00:00:00", "Total-Empty": 54917.0}, {"dt": "2006-10-01T00:00:00", "Total-Empty": 62611.0}, {"dt": "2006-11-01T00:00:00", "Total-Empty": 59172.0}, {"dt": "2006-12-01T00:00:00", "Total-Empty": 43179.0}, {"dt": "2007-01-01T00:00:00", "Total-Empty": 53451.0}, {"dt": "2007-02-01T00:00:00", "Total-Empty": 43530.0}, {"dt": "2007-03-01T00:00:00", "Total-Empty": 45437.0}, {"dt": "2007-04-01T00:00:00", "Total-Empty": 44997.0}, {"dt": "2007-05-01T00:00:00", "Total-Empty": 53496.0}, {"dt": "2007-06-01T00:00:00", "Total-Empty": 49857.0}, {"dt": "2007-07-01T00:00:00", "Total-Empty": 55260.0}, {"dt": "2007-08-01T00:00:00", "Total-Empty": 56177.0}, {"dt": "2007-09-01T00:00:00", "Total-Empty": 55707.0}, {"dt": "2007-10-01T00:00:00", "Total-Empty": 56756.0}, {"dt": "2007-11-01T00:00:00", "Total-Empty": 45296.0}, {"dt": "2007-12-01T00:00:00", "Total-Empty": 48030.0}, {"dt": "2008-01-01T00:00:00", "Total-Empty": 46454.0}, {"dt": "2008-02-01T00:00:00", "Total-Empty": 35747.0}, {"dt": "2008-03-01T00:00:00", "Total-Empty": 38078.0}, {"dt": "2008-04-01T00:00:00", "Total-Empty": 39882.0}, {"dt": "2008-05-01T00:00:00", "Total-Empty": 36376.0}, {"dt": "2008-06-01T00:00:00", "Total-Empty": 46268.0}, {"dt": "2008-07-01T00:00:00", "Total-Empty": 47097.0}, {"dt": "2008-08-01T00:00:00", "Total-Empty": 48530.0}, {"dt": "2008-09-01T00:00:00", "Total-Empty": 43306.0}, {"dt": "2008-10-01T00:00:00", "Total-Empty": 51989.0}, {"dt": "2008-11-01T00:00:00", "Total-Empty": 46695.0}, {"dt": "2008-12-01T00:00:00", "Total-Empty": 46007.0}, {"dt": "2009-01-01T00:00:00", "Total-Empty": 35929.0}, {"dt": "2009-02-01T00:00:00", "Total-Empty": 26753.0}, {"dt": "2009-03-01T00:00:00", "Total-Empty": 34539.0}, {"dt": "2009-04-01T00:00:00", "Total-Empty": 33732.0}, {"dt": "2009-05-01T00:00:00", "Total-Empty": 27320.0}, {"dt": "2009-06-01T00:00:00", "Total-Empty": 28699.0}, {"dt": "2009-07-01T00:00:00", "Total-Empty": 35137.0}, {"dt": "2009-08-01T00:00:00", "Total-Empty": 29563.0}, {"dt": "2009-09-01T00:00:00", "Total-Empty": 34555.0}, {"dt": "2009-10-01T00:00:00", "Total-Empty": 31414.0}, {"dt": "2009-11-01T00:00:00", "Total-Empty": 28656.0}, {"dt": "2009-12-01T00:00:00", "Total-Empty": 30531.0}, {"dt": "2010-01-01T00:00:00", "Total-Empty": 28070.0}, {"dt": "2010-02-01T00:00:00", "Total-Empty": 29833.0}, {"dt": "2010-03-01T00:00:00", "Total-Empty": 45370.0}, {"dt": "2010-04-01T00:00:00", "Total-Empty": 42963.0}, {"dt": "2010-05-01T00:00:00", "Total-Empty": 47542.0}, {"dt": "2010-06-01T00:00:00", "Total-Empty": 56822.0}, {"dt": "2010-07-01T00:00:00", "Total-Empty": 60074.0}, {"dt": "2010-08-01T00:00:00", "Total-Empty": 61150.0}, {"dt": "2010-09-01T00:00:00", "Total-Empty": 60782.0}, {"dt": "2010-10-01T00:00:00", "Total-Empty": 54301.0}, {"dt": "2010-11-01T00:00:00", "Total-Empty": 46112.0}, {"dt": "2010-12-01T00:00:00", "Total-Empty": 39202.0}, {"dt": "2011-01-01T00:00:00", "Total-Empty": 42688.0}, {"dt": "2011-02-01T00:00:00", "Total-Empty": 40917.0}, {"dt": "2011-03-01T00:00:00", "Total-Empty": 49795.0}, {"dt": "2011-04-01T00:00:00", "Total-Empty": 41155.0}, {"dt": "2011-05-01T00:00:00", "Total-Empty": 42352.0}, {"dt": "2011-06-01T00:00:00", "Total-Empty": 48549.0}, {"dt": "2011-07-01T00:00:00", "Total-Empty": 49721.0}, {"dt": "2011-08-01T00:00:00", "Total-Empty": 55560.0}, {"dt": "2011-09-01T00:00:00", "Total-Empty": 49730.0}, {"dt": "2011-10-01T00:00:00", "Total-Empty": 46022.0}, {"dt": "2011-11-01T00:00:00", "Total-Empty": 42767.0}, {"dt": "2011-12-01T00:00:00", "Total-Empty": 42172.0}, {"dt": "2012-01-01T00:00:00", "Total-Empty": 43022.0}, {"dt": "2012-02-01T00:00:00", "Total-Empty": 38383.0}, {"dt": "2012-03-01T00:00:00", "Total-Empty": 42890.0}, {"dt": "2012-04-01T00:00:00", "Total-Empty": 44403.0}, {"dt": "2012-05-01T00:00:00", "Total-Empty": 47207.0}, {"dt": "2012-06-01T00:00:00", "Total-Empty": 51226.0}, {"dt": "2012-07-01T00:00:00", "Total-Empty": 53030.0}, {"dt": "2012-08-01T00:00:00", "Total-Empty": 55173.0}, {"dt": "2012-09-01T00:00:00", "Total-Empty": 50371.0}, {"dt": "2012-10-01T00:00:00", "Total-Empty": 50496.0}, {"dt": "2012-11-01T00:00:00", "Total-Empty": 45863.0}, {"dt": "2012-12-01T00:00:00", "Total-Empty": 43715.0}, {"dt": "2013-01-01T00:00:00", "Total-Empty": 42479.0}, {"dt": "2013-02-01T00:00:00", "Total-Empty": 39500.0}, {"dt": "2013-03-01T00:00:00", "Total-Empty": 43276.0}, {"dt": "2013-04-01T00:00:00", "Total-Empty": 41287.0}, {"dt": "2013-05-01T00:00:00", "Total-Empty": 44836.0}, {"dt": "2013-06-01T00:00:00", "Total-Empty": 44129.0}, {"dt": "2013-07-01T00:00:00", "Total-Empty": 46473.0}, {"dt": "2013-08-01T00:00:00", "Total-Empty": 51599.0}, {"dt": "2013-09-01T00:00:00", "Total-Empty": 48498.0}, {"dt": "2013-10-01T00:00:00", "Total-Empty": 42246.0}, {"dt": "2013-11-01T00:00:00", "Total-Empty": 40604.0}, {"dt": "2013-12-01T00:00:00", "Total-Empty": 43527.0}, {"dt": "2014-01-01T00:00:00", "Total-Empty": 45768.0}, {"dt": "2014-02-01T00:00:00", "Total-Empty": 39428.0}, {"dt": "2014-03-01T00:00:00", "Total-Empty": 45922.0}, {"dt": "2014-04-01T00:00:00", "Total-Empty": 40953.0}, {"dt": "2014-05-01T00:00:00", "Total-Empty": 45321.0}, {"dt": "2014-06-01T00:00:00", "Total-Empty": 47807.0}, {"dt": "2014-07-01T00:00:00", "Total-Empty": 55982.0}, {"dt": "2014-08-01T00:00:00", "Total-Empty": 55027.0}, {"dt": "2014-09-01T00:00:00", "Total-Empty": 55723.0}, {"dt": "2014-10-01T00:00:00", "Total-Empty": 47238.0}, {"dt": "2014-11-01T00:00:00", "Total-Empty": 47421.0}, {"dt": "2014-12-01T00:00:00", "Total-Empty": 52291.0}, {"dt": "2015-01-01T00:00:00", "Total-Empty": 36315.0}, {"dt": "2015-02-01T00:00:00", "Total-Empty": 31110.0}, {"dt": "2015-03-01T00:00:00", "Total-Empty": 52121.0}, {"dt": "2015-04-01T00:00:00", "Total-Empty": 52883.0}, {"dt": "2015-05-01T00:00:00", "Total-Empty": 54462.0}, {"dt": "2015-06-01T00:00:00", "Total-Empty": 50163.0}, {"dt": "2015-07-01T00:00:00", "Total-Empty": 50895.0}, {"dt": "2015-08-01T00:00:00", "Total-Empty": 56762.0}, {"dt": "2015-09-01T00:00:00", "Total-Empty": 54639.0}, {"dt": "2015-10-01T00:00:00", "Total-Empty": 47294.0}, {"dt": "2015-11-01T00:00:00", "Total-Empty": 42228.0}, {"dt": "2015-12-01T00:00:00", "Total-Empty": 46269.0}, {"dt": "2016-01-01T00:00:00", "Total-Empty": 46244.0}, {"dt": "2016-02-01T00:00:00", "Total-Empty": 44064.0}, {"dt": "2016-03-01T00:00:00", "Total-Empty": 41767.0}, {"dt": "2016-04-01T00:00:00", "Total-Empty": 37393.0}, {"dt": "2016-05-01T00:00:00", "Total-Empty": 46507.0}, {"dt": "2016-06-01T00:00:00", "Total-Empty": 44232.0}, {"dt": "2016-07-01T00:00:00", "Total-Empty": 48542.0}, {"dt": "2016-08-01T00:00:00", "Total-Empty": 59060.0}, {"dt": "2016-09-01T00:00:00", "Total-Empty": 40910.0}, {"dt": "2016-10-01T00:00:00", "Total-Empty": 44694.0}, {"dt": "2016-11-01T00:00:00", "Total-Empty": 37889.0}, {"dt": "2016-12-01T00:00:00", "Total-Empty": 46558.0}, {"dt": "2017-01-01T00:00:00", "Total-Empty": 43540.45}, {"dt": "2017-02-01T00:00:00", "Total-Empty": 38214.5}, {"dt": "2017-03-01T00:00:00", "Total-Empty": 49077.95}, {"dt": "2017-04-01T00:00:00", "Total-Empty": 43734.0}, {"dt": "2017-05-01T00:00:00", "Total-Empty": 49936.100000000006}, {"dt": "2017-06-01T00:00:00", "Total-Empty": 48541.5}, {"dt": "2017-07-01T00:00:00", "Total-Empty": 50233.5}, {"dt": "2017-08-01T00:00:00", "Total-Empty": 57615.95}, {"dt": "2017-09-01T00:00:00", "Total-Empty": 57973.899999999994}, {"dt": "2017-10-01T00:00:00", "Total-Empty": 47279.25}, {"dt": "2017-11-01T00:00:00", "Total-Empty": 36696.5}, {"dt": "2017-12-01T00:00:00", "Total-Empty": 47642.95}, {"dt": "2018-01-01T00:00:00", "Total-Empty": 55821.25}, {"dt": "2018-02-01T00:00:00", "Total-Empty": 40603.95}, {"dt": "2018-03-01T00:00:00", "Total-Empty": 45084.25}, {"dt": "2018-04-01T00:00:00", "Total-Empty": 50651.75}, {"dt": "2018-05-01T00:00:00", "Total-Empty": 50254.75}, {"dt": "2018-06-01T00:00:00", "Total-Empty": 56394.45}, {"dt": "2018-07-01T00:00:00", "Total-Empty": 63727.5}, {"dt": "2018-08-01T00:00:00", "Total-Empty": 71174.25}, {"dt": "2018-09-01T00:00:00", "Total-Empty": 64527.95}, {"dt": "2018-10-01T00:00:00", "Total-Empty": 64803.0}, {"dt": "2018-11-01T00:00:00", "Total-Empty": 58475.25}, {"dt": "2018-12-01T00:00:00", "Total-Empty": 61476.75}, {"dt": "2019-01-01T00:00:00", "Total-Empty": 55250.0}, {"dt": "2019-02-01T00:00:00", "Total-Empty": 47870.7}, {"dt": "2019-03-01T00:00:00", "Total-Empty": 51056.0}, {"dt": "2019-04-01T00:00:00", "Total-Empty": 56009.5}, {"dt": "2019-05-01T00:00:00", "Total-Empty": 59061.7}, {"dt": "2019-06-01T00:00:00", "Total-Empty": 47934.5}, {"dt": "2019-07-01T00:00:00", "Total-Empty": 51179.2}, {"dt": "2019-08-01T00:00:00", "Total-Empty": 61132.45}, {"dt": "2019-09-01T00:00:00", "Total-Empty": 49580.75}, {"dt": "2019-10-01T00:00:00", "Total-Empty": 38904.7}, {"dt": "2019-11-01T00:00:00", "Total-Empty": 38213.15}, {"dt": "2019-12-01T00:00:00", "Total-Empty": 38039.55}, {"dt": "2020-01-01T00:00:00", "Total-Empty": 45449.45}, {"dt": "2020-02-01T00:00:00", "Total-Empty": 38377.45}, {"dt": "2020-03-01T00:00:00", "Total-Empty": 39371.45}, {"dt": "2020-04-01T00:00:00", "Total-Empty": 39751.5}, {"dt": "2020-05-01T00:00:00", "Total-Empty": 42452.2}, {"dt": "2020-06-01T00:00:00", "Total-Empty": 45909.25}, {"dt": "2020-07-01T00:00:00", "Total-Empty": 51135.5}, {"dt": "2020-08-01T00:00:00", "Total-Empty": 53080.5}, {"dt": "2020-09-01T00:00:00", "Total-Empty": 56218.5}, {"dt": "2020-10-01T00:00:00", "Total-Empty": 42989.25}, {"dt": "2020-11-01T00:00:00", "Total-Empty": 39979.5}, {"dt": "2020-12-01T00:00:00", "Total-Empty": 42791.75}, {"dt": "2020-01-01T00:00:00", "Total-Empty": 45449.0}, {"dt": "2020-02-01T00:00:00", "Total-Empty": 38378.0}, {"dt": "2020-03-01T00:00:00", "Total-Empty": 39372.0}, {"dt": "2020-04-01T00:00:00", "Total-Empty": 39751.0}, {"dt": "2020-05-01T00:00:00", "Total-Empty": 42452.0}, {"dt": "2020-06-01T00:00:00", "Total-Empty": 45909.0}, {"dt": "2020-07-01T00:00:00", "Total-Empty": 51135.0}, {"dt": "2020-08-01T00:00:00", "Total-Empty": 53081.0}, {"dt": "2020-09-01T00:00:00", "Total-Empty": 56219.0}, {"dt": "2020-10-01T00:00:00", "Total-Empty": 42990.0}, {"dt": "2020-11-01T00:00:00", "Total-Empty": 39980.0}, {"dt": "2020-12-01T00:00:00", "Total-Empty": 42792.0}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[63]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doYoyChart</span><span class="p">(</span><span class="n">df_oak_combined</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;Total-Empty&#39;</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Oakland&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[63]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-d18af56d1a5648aa91c308a3c6a18f78"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-d18af56d1a5648aa91c308a3c6a18f78") {
      outputDiv = document.getElementById("altair-viz-d18af56d1a5648aa91c308a3c6a18f78");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-069b38db35bcef2f1f2422a6c0dbd17e"}, "mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['nolarge'] < 0"}, "value": "royalblue"}, "tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "nolarge", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Year-over-Year Volume Growth [%]"}, "field": "nolarge"}}, "height": 400, "title": "Port of Oakland Total-Empty Container Volume Growth", "transform": [{"calculate": "datum['Total-Empty'] > 400 ? NaN : datum['Total-Empty']", "as": "nolarge"}], "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-069b38db35bcef2f1f2422a6c0dbd17e": [{"dt": "1998-01-01T00:00:00", "Total-Empty": null}, {"dt": "1998-02-01T00:00:00", "Total-Empty": null}, {"dt": "1998-03-01T00:00:00", "Total-Empty": null}, {"dt": "1998-04-01T00:00:00", "Total-Empty": null}, {"dt": "1998-05-01T00:00:00", "Total-Empty": null}, {"dt": "1998-06-01T00:00:00", "Total-Empty": null}, {"dt": "1998-07-01T00:00:00", "Total-Empty": null}, {"dt": "1998-08-01T00:00:00", "Total-Empty": null}, {"dt": "1998-09-01T00:00:00", "Total-Empty": null}, {"dt": "1998-10-01T00:00:00", "Total-Empty": null}, {"dt": "1998-11-01T00:00:00", "Total-Empty": null}, {"dt": "1998-12-01T00:00:00", "Total-Empty": null}, {"dt": "1999-01-01T00:00:00", "Total-Empty": 9.452194129613488}, {"dt": "1999-02-01T00:00:00", "Total-Empty": 5.834739911001985}, {"dt": "1999-03-01T00:00:00", "Total-Empty": 2.1238992930670886}, {"dt": "1999-04-01T00:00:00", "Total-Empty": 11.075460846929207}, {"dt": "1999-05-01T00:00:00", "Total-Empty": 20.79967390498778}, {"dt": "1999-06-01T00:00:00", "Total-Empty": 16.306993881176403}, {"dt": "1999-07-01T00:00:00", "Total-Empty": -0.1833740831295838}, {"dt": "1999-08-01T00:00:00", "Total-Empty": 35.52471636952998}, {"dt": "1999-09-01T00:00:00", "Total-Empty": 10.858812203299806}, {"dt": "1999-10-01T00:00:00", "Total-Empty": -4.354751543078194}, {"dt": "1999-11-01T00:00:00", "Total-Empty": 8.114941844899892}, {"dt": "1999-12-01T00:00:00", "Total-Empty": 2.2810167779585777}, {"dt": "2000-01-01T00:00:00", "Total-Empty": 23.889810819780944}, {"dt": "2000-02-01T00:00:00", "Total-Empty": 25.154953061002573}, {"dt": "2000-03-01T00:00:00", "Total-Empty": 3.7101132465009012}, {"dt": "2000-04-01T00:00:00", "Total-Empty": 2.7414432090691054}, {"dt": "2000-05-01T00:00:00", "Total-Empty": 34.45811221203103}, {"dt": "2000-06-01T00:00:00", "Total-Empty": 11.540093338990243}, {"dt": "2000-07-01T00:00:00", "Total-Empty": 27.515819555011234}, {"dt": "2000-08-01T00:00:00", "Total-Empty": 10.494057851857397}, {"dt": "2000-09-01T00:00:00", "Total-Empty": -0.19165119482541515}, {"dt": "2000-10-01T00:00:00", "Total-Empty": 21.19193481234758}, {"dt": "2000-11-01T00:00:00", "Total-Empty": 6.330994634750309}, {"dt": "2000-12-01T00:00:00", "Total-Empty": -9.480181045124125}, {"dt": "2001-01-01T00:00:00", "Total-Empty": -13.71088726960994}, {"dt": "2001-02-01T00:00:00", "Total-Empty": -21.804859683164878}, {"dt": "2001-03-01T00:00:00", "Total-Empty": -6.241400509382588}, {"dt": "2001-04-01T00:00:00", "Total-Empty": -5.991724576945523}, {"dt": "2001-05-01T00:00:00", "Total-Empty": -18.99753604672385}, {"dt": "2001-06-01T00:00:00", "Total-Empty": -22.084442753898827}, {"dt": "2001-07-01T00:00:00", "Total-Empty": -10.83186596232858}, {"dt": "2001-08-01T00:00:00", "Total-Empty": -10.875104286455162}, {"dt": "2001-09-01T00:00:00", "Total-Empty": 1.6261626162616283}, {"dt": "2001-10-01T00:00:00", "Total-Empty": -14.244699646643111}, {"dt": "2001-11-01T00:00:00", "Total-Empty": -15.786886094291773}, {"dt": "2001-12-01T00:00:00", "Total-Empty": -6.012303403133423}, {"dt": "2002-01-01T00:00:00", "Total-Empty": 3.675877056814647}, {"dt": "2002-02-01T00:00:00", "Total-Empty": 4.951851851851852}, {"dt": "2002-03-01T00:00:00", "Total-Empty": -3.091141849064849}, {"dt": "2002-04-01T00:00:00", "Total-Empty": -9.480010157153739}, {"dt": "2002-05-01T00:00:00", "Total-Empty": 13.645965356991962}, {"dt": "2002-06-01T00:00:00", "Total-Empty": 21.688472303586547}, {"dt": "2002-07-01T00:00:00", "Total-Empty": 34.19903057866076}, {"dt": "2002-08-01T00:00:00", "Total-Empty": 23.926023377017657}, {"dt": "2002-09-01T00:00:00", "Total-Empty": 8.1748937175248}, {"dt": "2002-10-01T00:00:00", "Total-Empty": -19.05742982230234}, {"dt": "2002-11-01T00:00:00", "Total-Empty": -2.759256414195732}, {"dt": "2002-12-01T00:00:00", "Total-Empty": 13.038852168305649}, {"dt": "2003-01-01T00:00:00", "Total-Empty": 27.813379649038737}, {"dt": "2003-02-01T00:00:00", "Total-Empty": 26.357765465645635}, {"dt": "2003-03-01T00:00:00", "Total-Empty": 24.854206269935887}, {"dt": "2003-04-01T00:00:00", "Total-Empty": 43.54642645637876}, {"dt": "2003-05-01T00:00:00", "Total-Empty": 40.54522924411401}, {"dt": "2003-06-01T00:00:00", "Total-Empty": 21.5886600695373}, {"dt": "2003-07-01T00:00:00", "Total-Empty": 7.720948898599844}, {"dt": "2003-08-01T00:00:00", "Total-Empty": 2.656023518363515}, {"dt": "2003-09-01T00:00:00", "Total-Empty": 13.086433230534112}, {"dt": "2003-10-01T00:00:00", "Total-Empty": 32.95506769894298}, {"dt": "2003-11-01T00:00:00", "Total-Empty": 17.985907037001937}, {"dt": "2003-12-01T00:00:00", "Total-Empty": 24.644171254171532}, {"dt": "2004-01-01T00:00:00", "Total-Empty": -12.089405369945172}, {"dt": "2004-02-01T00:00:00", "Total-Empty": -5.76718985644864}, {"dt": "2004-03-01T00:00:00", "Total-Empty": -2.7689608010115885}, {"dt": "2004-04-01T00:00:00", "Total-Empty": -5.604290615364571}, {"dt": "2004-05-01T00:00:00", "Total-Empty": -34.70111091518251}, {"dt": "2004-06-01T00:00:00", "Total-Empty": -2.0698605428709715}, {"dt": "2004-07-01T00:00:00", "Total-Empty": 8.593604470661287}, {"dt": "2004-08-01T00:00:00", "Total-Empty": 12.39559303158062}, {"dt": "2004-09-01T00:00:00", "Total-Empty": 11.21247224635582}, {"dt": "2004-10-01T00:00:00", "Total-Empty": 31.35685607168497}, {"dt": "2004-11-01T00:00:00", "Total-Empty": 22.384102413026596}, {"dt": "2004-12-01T00:00:00", "Total-Empty": 26.645918670907797}, {"dt": "2005-01-01T00:00:00", "Total-Empty": 29.489366238473423}, {"dt": "2005-02-01T00:00:00", "Total-Empty": -0.8624522094780818}, {"dt": "2005-03-01T00:00:00", "Total-Empty": 24.818196294920103}, {"dt": "2005-04-01T00:00:00", "Total-Empty": 1.223748073516906}, {"dt": "2005-05-01T00:00:00", "Total-Empty": 40.914369042153865}, {"dt": "2005-06-01T00:00:00", "Total-Empty": 5.14588621100156}, {"dt": "2005-07-01T00:00:00", "Total-Empty": -11.555835096346279}, {"dt": "2005-08-01T00:00:00", "Total-Empty": 7.114673461082499}, {"dt": "2005-09-01T00:00:00", "Total-Empty": 23.553665205503236}, {"dt": "2005-10-01T00:00:00", "Total-Empty": 17.25436217157199}, {"dt": "2005-11-01T00:00:00", "Total-Empty": 7.059544390222561}, {"dt": "2005-12-01T00:00:00", "Total-Empty": -12.615868312162338}, {"dt": "2006-01-01T00:00:00", "Total-Empty": 4.567065264371117}, {"dt": "2006-02-01T00:00:00", "Total-Empty": 44.325859491778786}, {"dt": "2006-03-01T00:00:00", "Total-Empty": 16.51321525016478}, {"dt": "2006-04-01T00:00:00", "Total-Empty": 18.207021929326217}, {"dt": "2006-05-01T00:00:00", "Total-Empty": 23.904794756812684}, {"dt": "2006-06-01T00:00:00", "Total-Empty": 24.008801162095182}, {"dt": "2006-07-01T00:00:00", "Total-Empty": 12.01405051288682}, {"dt": "2006-08-01T00:00:00", "Total-Empty": 21.183388945786106}, {"dt": "2006-09-01T00:00:00", "Total-Empty": -3.546086834340312}, {"dt": "2006-10-01T00:00:00", "Total-Empty": 8.087905258433171}, {"dt": "2006-11-01T00:00:00", "Total-Empty": 20.949246775545237}, {"dt": "2006-12-01T00:00:00", "Total-Empty": -10.715245755877667}, {"dt": "2007-01-01T00:00:00", "Total-Empty": 5.206078022280836}, {"dt": "2007-02-01T00:00:00", "Total-Empty": -9.832839654493863}, {"dt": "2007-03-01T00:00:00", "Total-Empty": -17.07820056574505}, {"dt": "2007-04-01T00:00:00", "Total-Empty": -13.495587980852408}, {"dt": "2007-05-01T00:00:00", "Total-Empty": -17.26057906458798}, {"dt": "2007-06-01T00:00:00", "Total-Empty": -14.1151745878624}, {"dt": "2007-07-01T00:00:00", "Total-Empty": 6.3121645279824445}, {"dt": "2007-08-01T00:00:00", "Total-Empty": -23.424933889479572}, {"dt": "2007-09-01T00:00:00", "Total-Empty": 1.4385345157237328}, {"dt": "2007-10-01T00:00:00", "Total-Empty": -9.351391927935982}, {"dt": "2007-11-01T00:00:00", "Total-Empty": -23.45028053809234}, {"dt": "2007-12-01T00:00:00", "Total-Empty": 11.234627944139518}, {"dt": "2008-01-01T00:00:00", "Total-Empty": -13.09049409739762}, {"dt": "2008-02-01T00:00:00", "Total-Empty": -17.879623248334486}, {"dt": "2008-03-01T00:00:00", "Total-Empty": -16.196051675946922}, {"dt": "2008-04-01T00:00:00", "Total-Empty": -11.367424494966327}, {"dt": "2008-05-01T00:00:00", "Total-Empty": -32.002392702258106}, {"dt": "2008-06-01T00:00:00", "Total-Empty": -7.198587961570091}, {"dt": "2008-07-01T00:00:00", "Total-Empty": -14.771986970684036}, {"dt": "2008-08-01T00:00:00", "Total-Empty": -13.612332449222997}, {"dt": "2008-09-01T00:00:00", "Total-Empty": -22.26111619724631}, {"dt": "2008-10-01T00:00:00", "Total-Empty": -8.399111988159847}, {"dt": "2008-11-01T00:00:00", "Total-Empty": 3.0885729424231734}, {"dt": "2008-12-01T00:00:00", "Total-Empty": -4.211950864043301}, {"dt": "2009-01-01T00:00:00", "Total-Empty": -22.656821802212946}, {"dt": "2009-02-01T00:00:00", "Total-Empty": -25.160153299577594}, {"dt": "2009-03-01T00:00:00", "Total-Empty": -9.294080571458585}, {"dt": "2009-04-01T00:00:00", "Total-Empty": -15.420490446818114}, {"dt": "2009-05-01T00:00:00", "Total-Empty": -24.895535517923907}, {"dt": "2009-06-01T00:00:00", "Total-Empty": -37.972248638367766}, {"dt": "2009-07-01T00:00:00", "Total-Empty": -25.39439879397839}, {"dt": "2009-08-01T00:00:00", "Total-Empty": -39.08304141767979}, {"dt": "2009-09-01T00:00:00", "Total-Empty": -20.207361566526583}, {"dt": "2009-10-01T00:00:00", "Total-Empty": -39.575679470657256}, {"dt": "2009-11-01T00:00:00", "Total-Empty": -38.63154513331192}, {"dt": "2009-12-01T00:00:00", "Total-Empty": -33.63835938009433}, {"dt": "2010-01-01T00:00:00", "Total-Empty": -21.873695343594314}, {"dt": "2010-02-01T00:00:00", "Total-Empty": 11.512727544574442}, {"dt": "2010-03-01T00:00:00", "Total-Empty": 31.358753872434054}, {"dt": "2010-04-01T00:00:00", "Total-Empty": 27.365706154393443}, {"dt": "2010-05-01T00:00:00", "Total-Empty": 74.01903367496338}, {"dt": "2010-06-01T00:00:00", "Total-Empty": 97.99296142722741}, {"dt": "2010-07-01T00:00:00", "Total-Empty": 70.97077155135611}, {"dt": "2010-08-01T00:00:00", "Total-Empty": 106.84639583262863}, {"dt": "2010-09-01T00:00:00", "Total-Empty": 75.89929098538562}, {"dt": "2010-10-01T00:00:00", "Total-Empty": 72.85605144203222}, {"dt": "2010-11-01T00:00:00", "Total-Empty": 60.91568955890565}, {"dt": "2010-12-01T00:00:00", "Total-Empty": 28.400641970456263}, {"dt": "2011-01-01T00:00:00", "Total-Empty": 52.076950480940496}, {"dt": "2011-02-01T00:00:00", "Total-Empty": 37.153487748466475}, {"dt": "2011-03-01T00:00:00", "Total-Empty": 9.753140841966058}, {"dt": "2011-04-01T00:00:00", "Total-Empty": -4.208272234248078}, {"dt": "2011-05-01T00:00:00", "Total-Empty": -10.916663160994489}, {"dt": "2011-06-01T00:00:00", "Total-Empty": -14.559501601492375}, {"dt": "2011-07-01T00:00:00", "Total-Empty": -17.233745047774406}, {"dt": "2011-08-01T00:00:00", "Total-Empty": -9.141455437448897}, {"dt": "2011-09-01T00:00:00", "Total-Empty": -18.183014708301805}, {"dt": "2011-10-01T00:00:00", "Total-Empty": -15.246496381282116}, {"dt": "2011-11-01T00:00:00", "Total-Empty": -7.2540770298403885}, {"dt": "2011-12-01T00:00:00", "Total-Empty": 7.576144074281932}, {"dt": "2012-01-01T00:00:00", "Total-Empty": 0.7824212893553284}, {"dt": "2012-02-01T00:00:00", "Total-Empty": -6.193024904074096}, {"dt": "2012-03-01T00:00:00", "Total-Empty": -13.866854101817449}, {"dt": "2012-04-01T00:00:00", "Total-Empty": 7.892115174340897}, {"dt": "2012-05-01T00:00:00", "Total-Empty": 11.463449187759721}, {"dt": "2012-06-01T00:00:00", "Total-Empty": 5.5140167665657325}, {"dt": "2012-07-01T00:00:00", "Total-Empty": 6.6551356569658715}, {"dt": "2012-08-01T00:00:00", "Total-Empty": -0.6965442764578889}, {"dt": "2012-09-01T00:00:00", "Total-Empty": 1.2889603860848586}, {"dt": "2012-10-01T00:00:00", "Total-Empty": 9.721437573334502}, {"dt": "2012-11-01T00:00:00", "Total-Empty": 7.239226506418506}, {"dt": "2012-12-01T00:00:00", "Total-Empty": 3.658825761168538}, {"dt": "2013-01-01T00:00:00", "Total-Empty": -1.2621449490958114}, {"dt": "2013-02-01T00:00:00", "Total-Empty": 2.910142511007474}, {"dt": "2013-03-01T00:00:00", "Total-Empty": 0.8999766845418478}, {"dt": "2013-04-01T00:00:00", "Total-Empty": -7.017543859649122}, {"dt": "2013-05-01T00:00:00", "Total-Empty": -5.022560213527649}, {"dt": "2013-06-01T00:00:00", "Total-Empty": -13.854292741966967}, {"dt": "2013-07-01T00:00:00", "Total-Empty": -12.364699226852727}, {"dt": "2013-08-01T00:00:00", "Total-Empty": -6.477806173309409}, {"dt": "2013-09-01T00:00:00", "Total-Empty": -3.718409402235412}, {"dt": "2013-10-01T00:00:00", "Total-Empty": -16.33792775665399}, {"dt": "2013-11-01T00:00:00", "Total-Empty": -11.46675969735953}, {"dt": "2013-12-01T00:00:00", "Total-Empty": -0.43005833238018987}, {"dt": "2014-01-01T00:00:00", "Total-Empty": 7.74264930907036}, {"dt": "2014-02-01T00:00:00", "Total-Empty": -0.18227848101265431}, {"dt": "2014-03-01T00:00:00", "Total-Empty": 6.114243460578606}, {"dt": "2014-04-01T00:00:00", "Total-Empty": -0.8089713469130677}, {"dt": "2014-05-01T00:00:00", "Total-Empty": 1.081720046391288}, {"dt": "2014-06-01T00:00:00", "Total-Empty": 8.33465521539123}, {"dt": "2014-07-01T00:00:00", "Total-Empty": 20.461343145482314}, {"dt": "2014-08-01T00:00:00", "Total-Empty": 6.643539603480697}, {"dt": "2014-09-01T00:00:00", "Total-Empty": 14.897521547280302}, {"dt": "2014-10-01T00:00:00", "Total-Empty": 11.816503337594098}, {"dt": "2014-11-01T00:00:00", "Total-Empty": 16.788986306767818}, {"dt": "2014-12-01T00:00:00", "Total-Empty": 20.134629080800416}, {"dt": "2015-01-01T00:00:00", "Total-Empty": -20.654168851599376}, {"dt": "2015-02-01T00:00:00", "Total-Empty": -21.09668256061682}, {"dt": "2015-03-01T00:00:00", "Total-Empty": 13.498976525412655}, {"dt": "2015-04-01T00:00:00", "Total-Empty": 29.130954997191893}, {"dt": "2015-05-01T00:00:00", "Total-Empty": 20.16945786721387}, {"dt": "2015-06-01T00:00:00", "Total-Empty": 4.928148597485715}, {"dt": "2015-07-01T00:00:00", "Total-Empty": -9.086849344432135}, {"dt": "2015-08-01T00:00:00", "Total-Empty": 3.152997619350506}, {"dt": "2015-09-01T00:00:00", "Total-Empty": -1.945336755020366}, {"dt": "2015-10-01T00:00:00", "Total-Empty": 0.1185486261060964}, {"dt": "2015-11-01T00:00:00", "Total-Empty": -10.95084456253559}, {"dt": "2015-12-01T00:00:00", "Total-Empty": -11.51632212044138}, {"dt": "2016-01-01T00:00:00", "Total-Empty": 27.341319014181465}, {"dt": "2016-02-01T00:00:00", "Total-Empty": 41.639344262295076}, {"dt": "2016-03-01T00:00:00", "Total-Empty": -19.865313405345255}, {"dt": "2016-04-01T00:00:00", "Total-Empty": -29.291076527428473}, {"dt": "2016-05-01T00:00:00", "Total-Empty": -14.606514634056778}, {"dt": "2016-06-01T00:00:00", "Total-Empty": -11.82345553495604}, {"dt": "2016-07-01T00:00:00", "Total-Empty": -4.6232439335887605}, {"dt": "2016-08-01T00:00:00", "Total-Empty": 4.048483140128956}, {"dt": "2016-09-01T00:00:00", "Total-Empty": -25.126740972565386}, {"dt": "2016-10-01T00:00:00", "Total-Empty": -5.497526113249041}, {"dt": "2016-11-01T00:00:00", "Total-Empty": -10.275172871080795}, {"dt": "2016-12-01T00:00:00", "Total-Empty": 0.6246082690354315}, {"dt": "2017-01-01T00:00:00", "Total-Empty": -5.846271948793358}, {"dt": "2017-02-01T00:00:00", "Total-Empty": -13.275009077705157}, {"dt": "2017-03-01T00:00:00", "Total-Empty": 17.50413005482796}, {"dt": "2017-04-01T00:00:00", "Total-Empty": 16.957719359238354}, {"dt": "2017-05-01T00:00:00", "Total-Empty": 7.373298643215009}, {"dt": "2017-06-01T00:00:00", "Total-Empty": 9.742946283233866}, {"dt": "2017-07-01T00:00:00", "Total-Empty": 3.484611264471993}, {"dt": "2017-08-01T00:00:00", "Total-Empty": -2.445055875380975}, {"dt": "2017-09-01T00:00:00", "Total-Empty": 41.71082864825224}, {"dt": "2017-10-01T00:00:00", "Total-Empty": 5.784333467579539}, {"dt": "2017-11-01T00:00:00", "Total-Empty": -3.1473514740426034}, {"dt": "2017-12-01T00:00:00", "Total-Empty": 2.330319171785722}, {"dt": "2018-01-01T00:00:00", "Total-Empty": 28.20549626841249}, {"dt": "2018-02-01T00:00:00", "Total-Empty": 6.252731293095537}, {"dt": "2018-03-01T00:00:00", "Total-Empty": -8.137462954341002}, {"dt": "2018-04-01T00:00:00", "Total-Empty": 15.817784789866018}, {"dt": "2018-05-01T00:00:00", "Total-Empty": 0.638115511623849}, {"dt": "2018-06-01T00:00:00", "Total-Empty": 16.177806619078506}, {"dt": "2018-07-01T00:00:00", "Total-Empty": 26.862551882707763}, {"dt": "2018-08-01T00:00:00", "Total-Empty": 23.532198983094087}, {"dt": "2018-09-01T00:00:00", "Total-Empty": 11.3051735349873}, {"dt": "2018-10-01T00:00:00", "Total-Empty": 37.06435698535826}, {"dt": "2018-11-01T00:00:00", "Total-Empty": 59.348302971673036}, {"dt": "2018-12-01T00:00:00", "Total-Empty": 29.0364051764217}, {"dt": "2019-01-01T00:00:00", "Total-Empty": -1.0233558008822752}, {"dt": "2019-02-01T00:00:00", "Total-Empty": 17.896657837476404}, {"dt": "2019-03-01T00:00:00", "Total-Empty": 13.245756555781686}, {"dt": "2019-04-01T00:00:00", "Total-Empty": 10.577620713993108}, {"dt": "2019-05-01T00:00:00", "Total-Empty": 17.52461210134364}, {"dt": "2019-06-01T00:00:00", "Total-Empty": -15.001387547888134}, {"dt": "2019-07-01T00:00:00", "Total-Empty": -19.690557451649603}, {"dt": "2019-08-01T00:00:00", "Total-Empty": -14.108754219398168}, {"dt": "2019-09-01T00:00:00", "Total-Empty": -23.16391579152909}, {"dt": "2019-10-01T00:00:00", "Total-Empty": -39.96466212983967}, {"dt": "2019-11-01T00:00:00", "Total-Empty": -34.65072829957974}, {"dt": "2019-12-01T00:00:00", "Total-Empty": -38.123680903756295}, {"dt": "2020-01-01T00:00:00", "Total-Empty": -17.738552036199096}, {"dt": "2020-01-01T00:00:00", "Total-Empty": -5.058835571654474}, {"dt": "2020-02-01T00:00:00", "Total-Empty": -24.83263475399562}, {"dt": "2020-02-01T00:00:00", "Total-Empty": -31.479481159446166}, {"dt": "2020-03-01T00:00:00", "Total-Empty": -33.33844098629061}, {"dt": "2020-03-01T00:00:00", "Total-Empty": -17.862917105633723}, {"dt": "2020-04-01T00:00:00", "Total-Empty": -22.328797636539843}, {"dt": "2020-04-01T00:00:00", "Total-Empty": -34.97561442409064}, {"dt": "2020-05-01T00:00:00", "Total-Empty": -14.3776566510188}, {"dt": "2020-05-01T00:00:00", "Total-Empty": 9.117921485064784}, {"dt": "2020-06-01T00:00:00", "Total-Empty": 20.13927142881442}, {"dt": "2020-06-01T00:00:00", "Total-Empty": 20.68820477634461}, {"dt": "2020-07-01T00:00:00", "Total-Empty": 12.510712450865746}, {"dt": "2020-07-01T00:00:00", "Total-Empty": 12.510726308609655}, {"dt": "2020-08-01T00:00:00", "Total-Empty": 38.31169084970472}, {"dt": "2020-08-01T00:00:00", "Total-Empty": 38.31101151701495}, {"dt": "2020-09-01T00:00:00", "Total-Empty": 42.790016623721016}, {"dt": "2020-09-01T00:00:00", "Total-Empty": 42.789291882556135}, {"dt": "2020-10-01T00:00:00", "Total-Empty": 8.144975661295796}, {"dt": "2020-10-01T00:00:00", "Total-Empty": 8.148222686221729}, {"dt": "2020-11-01T00:00:00", "Total-Empty": -5.824668686192935}, {"dt": "2020-11-01T00:00:00", "Total-Empty": -5.823047206256482}, {"dt": "2020-12-01T00:00:00", "Total-Empty": -6.790062950619702}, {"dt": "2020-12-01T00:00:00", "Total-Empty": -6.79002597515751}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[64]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doChart</span><span class="p">(</span><span class="n">df_oak_combined</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;Grand-Total&#39;</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Oakland&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[64]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-0b87262d2e7c4cbf9b43bf9f93568690"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-0b87262d2e7c4cbf9b43bf9f93568690") {
      outputDiv = document.getElementById("altair-viz-0b87262d2e7c4cbf9b43bf9f93568690");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-b7d4e68a643b8ba5cff443d72b5ad564"}, "mark": {"type": "line", "color": "purple"}, "encoding": {"tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "Grand-Total", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Volume [TEUs]"}, "field": "Grand-Total"}}, "height": 400, "title": "Port of Oakland Grand-Total Container Volume", "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-b7d4e68a643b8ba5cff443d72b5ad564": [{"dt": "1998-01-01T00:00:00", "Grand-Total": 113716.0}, {"dt": "1998-02-01T00:00:00", "Grand-Total": 114912.0}, {"dt": "1998-03-01T00:00:00", "Grand-Total": 132666.0}, {"dt": "1998-04-01T00:00:00", "Grand-Total": 132936.0}, {"dt": "1998-05-01T00:00:00", "Grand-Total": 123931.0}, {"dt": "1998-06-01T00:00:00", "Grand-Total": 131384.0}, {"dt": "1998-07-01T00:00:00", "Grand-Total": 127209.0}, {"dt": "1998-08-01T00:00:00", "Grand-Total": 130640.0}, {"dt": "1998-09-01T00:00:00", "Grand-Total": 134534.0}, {"dt": "1998-10-01T00:00:00", "Grand-Total": 149520.0}, {"dt": "1998-11-01T00:00:00", "Grand-Total": 141482.0}, {"dt": "1998-12-01T00:00:00", "Grand-Total": 142476.0}, {"dt": "1999-01-01T00:00:00", "Grand-Total": 125650.0}, {"dt": "1999-02-01T00:00:00", "Grand-Total": 122966.0}, {"dt": "1999-03-01T00:00:00", "Grand-Total": 135114.0}, {"dt": "1999-04-01T00:00:00", "Grand-Total": 141097.0}, {"dt": "1999-05-01T00:00:00", "Grand-Total": 139212.0}, {"dt": "1999-06-01T00:00:00", "Grand-Total": 145428.0}, {"dt": "1999-07-01T00:00:00", "Grand-Total": 126827.0}, {"dt": "1999-08-01T00:00:00", "Grand-Total": 149839.0}, {"dt": "1999-09-01T00:00:00", "Grand-Total": 143542.0}, {"dt": "1999-10-01T00:00:00", "Grand-Total": 144269.0}, {"dt": "1999-11-01T00:00:00", "Grand-Total": 145127.0}, {"dt": "1999-12-01T00:00:00", "Grand-Total": 144685.0}, {"dt": "2000-01-01T00:00:00", "Grand-Total": 137090.0}, {"dt": "2000-02-01T00:00:00", "Grand-Total": 135394.0}, {"dt": "2000-03-01T00:00:00", "Grand-Total": 143922.0}, {"dt": "2000-04-01T00:00:00", "Grand-Total": 143622.0}, {"dt": "2000-05-01T00:00:00", "Grand-Total": 155054.0}, {"dt": "2000-06-01T00:00:00", "Grand-Total": 153531.0}, {"dt": "2000-07-01T00:00:00", "Grand-Total": 151256.0}, {"dt": "2000-08-01T00:00:00", "Grand-Total": 169700.0}, {"dt": "2000-09-01T00:00:00", "Grand-Total": 144632.0}, {"dt": "2000-10-01T00:00:00", "Grand-Total": 159443.0}, {"dt": "2000-11-01T00:00:00", "Grand-Total": 145651.0}, {"dt": "2000-12-01T00:00:00", "Grand-Total": 137627.0}, {"dt": "2001-01-01T00:00:00", "Grand-Total": 135091.0}, {"dt": "2001-02-01T00:00:00", "Grand-Total": 118193.0}, {"dt": "2001-03-01T00:00:00", "Grand-Total": 140869.0}, {"dt": "2001-04-01T00:00:00", "Grand-Total": 138010.0}, {"dt": "2001-05-01T00:00:00", "Grand-Total": 140885.0}, {"dt": "2001-06-01T00:00:00", "Grand-Total": 130421.0}, {"dt": "2001-07-01T00:00:00", "Grand-Total": 141173.0}, {"dt": "2001-08-01T00:00:00", "Grand-Total": 152951.0}, {"dt": "2001-09-01T00:00:00", "Grand-Total": 137852.0}, {"dt": "2001-10-01T00:00:00", "Grand-Total": 149715.0}, {"dt": "2001-11-01T00:00:00", "Grand-Total": 130772.0}, {"dt": "2001-12-01T00:00:00", "Grand-Total": 127653.0}, {"dt": "2002-01-01T00:00:00", "Grand-Total": 122894.0}, {"dt": "2002-02-01T00:00:00", "Grand-Total": 118686.0}, {"dt": "2002-03-01T00:00:00", "Grand-Total": 130667.0}, {"dt": "2002-04-01T00:00:00", "Grand-Total": 135629.0}, {"dt": "2002-05-01T00:00:00", "Grand-Total": 152107.0}, {"dt": "2002-06-01T00:00:00", "Grand-Total": 150520.0}, {"dt": "2002-07-01T00:00:00", "Grand-Total": 152839.0}, {"dt": "2002-08-01T00:00:00", "Grand-Total": 168222.0}, {"dt": "2002-09-01T00:00:00", "Grand-Total": 148276.0}, {"dt": "2002-10-01T00:00:00", "Grand-Total": 131842.0}, {"dt": "2002-11-01T00:00:00", "Grand-Total": 150422.0}, {"dt": "2002-12-01T00:00:00", "Grand-Total": 145723.0}, {"dt": "2003-01-01T00:00:00", "Grand-Total": 150807.0}, {"dt": "2003-02-01T00:00:00", "Grand-Total": 142121.0}, {"dt": "2003-03-01T00:00:00", "Grand-Total": 156098.0}, {"dt": "2003-04-01T00:00:00", "Grand-Total": 161136.0}, {"dt": "2003-05-01T00:00:00", "Grand-Total": 171958.0}, {"dt": "2003-06-01T00:00:00", "Grand-Total": 164376.0}, {"dt": "2003-07-01T00:00:00", "Grand-Total": 172320.0}, {"dt": "2003-08-01T00:00:00", "Grand-Total": 167707.0}, {"dt": "2003-09-01T00:00:00", "Grand-Total": 159938.0}, {"dt": "2003-10-01T00:00:00", "Grand-Total": 163100.0}, {"dt": "2003-11-01T00:00:00", "Grand-Total": 155448.0}, {"dt": "2003-12-01T00:00:00", "Grand-Total": 158095.0}, {"dt": "2004-01-01T00:00:00", "Grand-Total": 148586.0}, {"dt": "2004-02-01T00:00:00", "Grand-Total": 130699.0}, {"dt": "2004-03-01T00:00:00", "Grand-Total": 159292.0}, {"dt": "2004-04-01T00:00:00", "Grand-Total": 163311.0}, {"dt": "2004-05-01T00:00:00", "Grand-Total": 154333.0}, {"dt": "2004-06-01T00:00:00", "Grand-Total": 166069.0}, {"dt": "2004-07-01T00:00:00", "Grand-Total": 180216.0}, {"dt": "2004-08-01T00:00:00", "Grand-Total": 193598.0}, {"dt": "2004-09-01T00:00:00", "Grand-Total": 173665.0}, {"dt": "2004-10-01T00:00:00", "Grand-Total": 190902.0}, {"dt": "2004-11-01T00:00:00", "Grand-Total": 189398.0}, {"dt": "2004-12-01T00:00:00", "Grand-Total": 197435.0}, {"dt": "2005-01-01T00:00:00", "Grand-Total": 180973.0}, {"dt": "2005-02-01T00:00:00", "Grand-Total": 165320.0}, {"dt": "2005-03-01T00:00:00", "Grand-Total": 179258.0}, {"dt": "2005-04-01T00:00:00", "Grand-Total": 179087.0}, {"dt": "2005-05-01T00:00:00", "Grand-Total": 193835.0}, {"dt": "2005-06-01T00:00:00", "Grand-Total": 182255.0}, {"dt": "2005-07-01T00:00:00", "Grand-Total": 190160.0}, {"dt": "2005-08-01T00:00:00", "Grand-Total": 208177.0}, {"dt": "2005-09-01T00:00:00", "Grand-Total": 201011.0}, {"dt": "2005-10-01T00:00:00", "Grand-Total": 205558.0}, {"dt": "2005-11-01T00:00:00", "Grand-Total": 193595.0}, {"dt": "2005-12-01T00:00:00", "Grand-Total": 194761.0}, {"dt": "2006-01-01T00:00:00", "Grand-Total": 188185.0}, {"dt": "2006-02-01T00:00:00", "Grand-Total": 178622.0}, {"dt": "2006-03-01T00:00:00", "Grand-Total": 203585.0}, {"dt": "2006-04-01T00:00:00", "Grand-Total": 192531.0}, {"dt": "2006-05-01T00:00:00", "Grand-Total": 210024.0}, {"dt": "2006-06-01T00:00:00", "Grand-Total": 204662.0}, {"dt": "2006-07-01T00:00:00", "Grand-Total": 193283.0}, {"dt": "2006-08-01T00:00:00", "Grand-Total": 227996.0}, {"dt": "2006-09-01T00:00:00", "Grand-Total": 196838.0}, {"dt": "2006-10-01T00:00:00", "Grand-Total": 213552.0}, {"dt": "2006-11-01T00:00:00", "Grand-Total": 201723.0}, {"dt": "2006-12-01T00:00:00", "Grand-Total": 180744.0}, {"dt": "2007-01-01T00:00:00", "Grand-Total": 196247.0}, {"dt": "2007-02-01T00:00:00", "Grand-Total": 171188.0}, {"dt": "2007-03-01T00:00:00", "Grand-Total": 188276.0}, {"dt": "2007-04-01T00:00:00", "Grand-Total": 187967.0}, {"dt": "2007-05-01T00:00:00", "Grand-Total": 202720.0}, {"dt": "2007-06-01T00:00:00", "Grand-Total": 197976.0}, {"dt": "2007-07-01T00:00:00", "Grand-Total": 212799.0}, {"dt": "2007-08-01T00:00:00", "Grand-Total": 214658.0}, {"dt": "2007-09-01T00:00:00", "Grand-Total": 204918.0}, {"dt": "2007-10-01T00:00:00", "Grand-Total": 217085.0}, {"dt": "2007-11-01T00:00:00", "Grand-Total": 202116.0}, {"dt": "2007-12-01T00:00:00", "Grand-Total": 191961.0}, {"dt": "2008-01-01T00:00:00", "Grand-Total": 187306.0}, {"dt": "2008-02-01T00:00:00", "Grand-Total": 180827.0}, {"dt": "2008-03-01T00:00:00", "Grand-Total": 177569.0}, {"dt": "2008-04-01T00:00:00", "Grand-Total": 190419.0}, {"dt": "2008-05-01T00:00:00", "Grand-Total": 183800.0}, {"dt": "2008-06-01T00:00:00", "Grand-Total": 198577.0}, {"dt": "2008-07-01T00:00:00", "Grand-Total": 201271.0}, {"dt": "2008-08-01T00:00:00", "Grand-Total": 194800.0}, {"dt": "2008-09-01T00:00:00", "Grand-Total": 189060.0}, {"dt": "2008-10-01T00:00:00", "Grand-Total": 193959.0}, {"dt": "2008-11-01T00:00:00", "Grand-Total": 168825.0}, {"dt": "2008-12-01T00:00:00", "Grand-Total": 167120.0}, {"dt": "2009-01-01T00:00:00", "Grand-Total": 157941.0}, {"dt": "2009-02-01T00:00:00", "Grand-Total": 132758.0}, {"dt": "2009-03-01T00:00:00", "Grand-Total": 168950.0}, {"dt": "2009-04-01T00:00:00", "Grand-Total": 168961.0}, {"dt": "2009-05-01T00:00:00", "Grand-Total": 162799.0}, {"dt": "2009-06-01T00:00:00", "Grand-Total": 169765.0}, {"dt": "2009-07-01T00:00:00", "Grand-Total": 184604.0}, {"dt": "2009-08-01T00:00:00", "Grand-Total": 177855.0}, {"dt": "2009-09-01T00:00:00", "Grand-Total": 182090.0}, {"dt": "2009-10-01T00:00:00", "Grand-Total": 179108.0}, {"dt": "2009-11-01T00:00:00", "Grand-Total": 173474.0}, {"dt": "2009-12-01T00:00:00", "Grand-Total": 186906.0}, {"dt": "2010-01-01T00:00:00", "Grand-Total": 157032.0}, {"dt": "2010-02-01T00:00:00", "Grand-Total": 155724.0}, {"dt": "2010-03-01T00:00:00", "Grand-Total": 186956.0}, {"dt": "2010-04-01T00:00:00", "Grand-Total": 186313.0}, {"dt": "2010-05-01T00:00:00", "Grand-Total": 194250.0}, {"dt": "2010-06-01T00:00:00", "Grand-Total": 205527.0}, {"dt": "2010-07-01T00:00:00", "Grand-Total": 214646.0}, {"dt": "2010-08-01T00:00:00", "Grand-Total": 217633.0}, {"dt": "2010-09-01T00:00:00", "Grand-Total": 214361.0}, {"dt": "2010-10-01T00:00:00", "Grand-Total": 208528.0}, {"dt": "2010-11-01T00:00:00", "Grand-Total": 201528.0}, {"dt": "2010-12-01T00:00:00", "Grand-Total": 187959.0}, {"dt": "2011-01-01T00:00:00", "Grand-Total": 182037.0}, {"dt": "2011-02-01T00:00:00", "Grand-Total": 175608.0}, {"dt": "2011-03-01T00:00:00", "Grand-Total": 197403.0}, {"dt": "2011-04-01T00:00:00", "Grand-Total": 191581.0}, {"dt": "2011-05-01T00:00:00", "Grand-Total": 194021.0}, {"dt": "2011-06-01T00:00:00", "Grand-Total": 200732.0}, {"dt": "2011-07-01T00:00:00", "Grand-Total": 197573.0}, {"dt": "2011-08-01T00:00:00", "Grand-Total": 216276.0}, {"dt": "2011-09-01T00:00:00", "Grand-Total": 200236.0}, {"dt": "2011-10-01T00:00:00", "Grand-Total": 197267.0}, {"dt": "2011-11-01T00:00:00", "Grand-Total": 199779.0}, {"dt": "2011-12-01T00:00:00", "Grand-Total": 190013.0}, {"dt": "2012-01-01T00:00:00", "Grand-Total": 195697.0}, {"dt": "2012-02-01T00:00:00", "Grand-Total": 166904.0}, {"dt": "2012-03-01T00:00:00", "Grand-Total": 197357.0}, {"dt": "2012-04-01T00:00:00", "Grand-Total": 188075.0}, {"dt": "2012-05-01T00:00:00", "Grand-Total": 203440.0}, {"dt": "2012-06-01T00:00:00", "Grand-Total": 197335.0}, {"dt": "2012-07-01T00:00:00", "Grand-Total": 201993.0}, {"dt": "2012-08-01T00:00:00", "Grand-Total": 206966.0}, {"dt": "2012-09-01T00:00:00", "Grand-Total": 191495.0}, {"dt": "2012-10-01T00:00:00", "Grand-Total": 207627.0}, {"dt": "2012-11-01T00:00:00", "Grand-Total": 190082.0}, {"dt": "2012-12-01T00:00:00", "Grand-Total": 196932.0}, {"dt": "2013-01-01T00:00:00", "Grand-Total": 192498.0}, {"dt": "2013-02-01T00:00:00", "Grand-Total": 187701.0}, {"dt": "2013-03-01T00:00:00", "Grand-Total": 184773.0}, {"dt": "2013-04-01T00:00:00", "Grand-Total": 190727.0}, {"dt": "2013-05-01T00:00:00", "Grand-Total": 200510.0}, {"dt": "2013-06-01T00:00:00", "Grand-Total": 196600.0}, {"dt": "2013-07-01T00:00:00", "Grand-Total": 200985.0}, {"dt": "2013-08-01T00:00:00", "Grand-Total": 209138.0}, {"dt": "2013-09-01T00:00:00", "Grand-Total": 201621.0}, {"dt": "2013-10-01T00:00:00", "Grand-Total": 198790.0}, {"dt": "2013-11-01T00:00:00", "Grand-Total": 194969.0}, {"dt": "2013-12-01T00:00:00", "Grand-Total": 188252.0}, {"dt": "2014-01-01T00:00:00", "Grand-Total": 196422.0}, {"dt": "2014-02-01T00:00:00", "Grand-Total": 177841.0}, {"dt": "2014-03-01T00:00:00", "Grand-Total": 193734.0}, {"dt": "2014-04-01T00:00:00", "Grand-Total": 197784.0}, {"dt": "2014-05-01T00:00:00", "Grand-Total": 205477.0}, {"dt": "2014-06-01T00:00:00", "Grand-Total": 205692.0}, {"dt": "2014-07-01T00:00:00", "Grand-Total": 203519.0}, {"dt": "2014-08-01T00:00:00", "Grand-Total": 204679.0}, {"dt": "2014-09-01T00:00:00", "Grand-Total": 207399.0}, {"dt": "2014-10-01T00:00:00", "Grand-Total": 206427.0}, {"dt": "2014-11-01T00:00:00", "Grand-Total": 193115.0}, {"dt": "2014-12-01T00:00:00", "Grand-Total": 201980.0}, {"dt": "2015-01-01T00:00:00", "Grand-Total": 138065.0}, {"dt": "2015-02-01T00:00:00", "Grand-Total": 121978.0}, {"dt": "2015-03-01T00:00:00", "Grand-Total": 209407.0}, {"dt": "2015-04-01T00:00:00", "Grand-Total": 201100.0}, {"dt": "2015-05-01T00:00:00", "Grand-Total": 213253.0}, {"dt": "2015-06-01T00:00:00", "Grand-Total": 203623.0}, {"dt": "2015-07-01T00:00:00", "Grand-Total": 205520.0}, {"dt": "2015-08-01T00:00:00", "Grand-Total": 216911.0}, {"dt": "2015-09-01T00:00:00", "Grand-Total": 197483.0}, {"dt": "2015-10-01T00:00:00", "Grand-Total": 192283.0}, {"dt": "2015-11-01T00:00:00", "Grand-Total": 192584.0}, {"dt": "2015-12-01T00:00:00", "Grand-Total": 185314.0}, {"dt": "2016-01-01T00:00:00", "Grand-Total": 191155.0}, {"dt": "2016-02-01T00:00:00", "Grand-Total": 188139.0}, {"dt": "2016-03-01T00:00:00", "Grand-Total": 178945.0}, {"dt": "2016-04-01T00:00:00", "Grand-Total": 188300.0}, {"dt": "2016-05-01T00:00:00", "Grand-Total": 211769.0}, {"dt": "2016-06-01T00:00:00", "Grand-Total": 194278.0}, {"dt": "2016-07-01T00:00:00", "Grand-Total": 206600.0}, {"dt": "2016-08-01T00:00:00", "Grand-Total": 220547.0}, {"dt": "2016-09-01T00:00:00", "Grand-Total": 187539.0}, {"dt": "2016-10-01T00:00:00", "Grand-Total": 206169.0}, {"dt": "2016-11-01T00:00:00", "Grand-Total": 196980.0}, {"dt": "2016-12-01T00:00:00", "Grand-Total": 199155.0}, {"dt": "2017-01-01T00:00:00", "Grand-Total": 197309.59999999998}, {"dt": "2017-02-01T00:00:00", "Grand-Total": 174901.7}, {"dt": "2017-03-01T00:00:00", "Grand-Total": 199076.55}, {"dt": "2017-04-01T00:00:00", "Grand-Total": 197500.75}, {"dt": "2017-05-01T00:00:00", "Grand-Total": 210959.95}, {"dt": "2017-06-01T00:00:00", "Grand-Total": 204255.09999999998}, {"dt": "2017-07-01T00:00:00", "Grand-Total": 209889.5}, {"dt": "2017-08-01T00:00:00", "Grand-Total": 212655.10000000003}, {"dt": "2017-09-01T00:00:00", "Grand-Total": 211470.15}, {"dt": "2017-10-01T00:00:00", "Grand-Total": 209913.55}, {"dt": "2017-11-01T00:00:00", "Grand-Total": 186068.84999999998}, {"dt": "2017-12-01T00:00:00", "Grand-Total": 206835.75}, {"dt": "2018-01-01T00:00:00", "Grand-Total": 205840.25}, {"dt": "2018-02-01T00:00:00", "Grand-Total": 188174.7}, {"dt": "2018-03-01T00:00:00", "Grand-Total": 193340.9}, {"dt": "2018-04-01T00:00:00", "Grand-Total": 204017.05}, {"dt": "2018-05-01T00:00:00", "Grand-Total": 204766.59999999998}, {"dt": "2018-06-01T00:00:00", "Grand-Total": 215496.0}, {"dt": "2018-07-01T00:00:00", "Grand-Total": 217407.34999999998}, {"dt": "2018-08-01T00:00:00", "Grand-Total": 231188.3}, {"dt": "2018-09-01T00:00:00", "Grand-Total": 220068.2}, {"dt": "2018-10-01T00:00:00", "Grand-Total": 226052.40000000002}, {"dt": "2018-11-01T00:00:00", "Grand-Total": 219124.6}, {"dt": "2018-12-01T00:00:00", "Grand-Total": 220922.3}, {"dt": "2019-01-01T00:00:00", "Grand-Total": 212493.3}, {"dt": "2019-02-01T00:00:00", "Grand-Total": 185684.75}, {"dt": "2019-03-01T00:00:00", "Grand-Total": 213972.45}, {"dt": "2019-04-01T00:00:00", "Grand-Total": 216002.8}, {"dt": "2019-05-01T00:00:00", "Grand-Total": 223101.15000000002}, {"dt": "2019-06-01T00:00:00", "Grand-Total": 203730.15}, {"dt": "2019-07-01T00:00:00", "Grand-Total": 218191.45}, {"dt": "2019-08-01T00:00:00", "Grand-Total": 224537.0}, {"dt": "2019-09-01T00:00:00", "Grand-Total": 206544.2}, {"dt": "2019-10-01T00:00:00", "Grand-Total": 204879.8}, {"dt": "2019-11-01T00:00:00", "Grand-Total": 197360.35}, {"dt": "2019-12-01T00:00:00", "Grand-Total": 193963.3}, {"dt": "2020-01-01T00:00:00", "Grand-Total": 211250.95}, {"dt": "2020-02-01T00:00:00", "Grand-Total": 180224.90000000002}, {"dt": "2020-03-01T00:00:00", "Grand-Total": 190187.7}, {"dt": "2020-04-01T00:00:00", "Grand-Total": 201918.4}, {"dt": "2020-05-01T00:00:00", "Grand-Total": 185594.7}, {"dt": "2020-06-01T00:00:00", "Grand-Total": 199011.45}, {"dt": "2020-07-01T00:00:00", "Grand-Total": 219080.3}, {"dt": "2020-08-01T00:00:00", "Grand-Total": 225489.15}, {"dt": "2020-09-01T00:00:00", "Grand-Total": 225806.5}, {"dt": "2020-10-01T00:00:00", "Grand-Total": 216684.0}, {"dt": "2020-11-01T00:00:00", "Grand-Total": 197691.7}, {"dt": "2020-12-01T00:00:00", "Grand-Total": 208341.25}, {"dt": "2020-01-01T00:00:00", "Grand-Total": 211250.0}, {"dt": "2020-02-01T00:00:00", "Grand-Total": 180226.0}, {"dt": "2020-03-01T00:00:00", "Grand-Total": 190189.0}, {"dt": "2020-04-01T00:00:00", "Grand-Total": 201918.0}, {"dt": "2020-05-01T00:00:00", "Grand-Total": 185595.0}, {"dt": "2020-06-01T00:00:00", "Grand-Total": 199011.0}, {"dt": "2020-07-01T00:00:00", "Grand-Total": 219080.0}, {"dt": "2020-08-01T00:00:00", "Grand-Total": 225489.0}, {"dt": "2020-09-01T00:00:00", "Grand-Total": 225807.0}, {"dt": "2020-10-01T00:00:00", "Grand-Total": 216685.0}, {"dt": "2020-11-01T00:00:00", "Grand-Total": 197692.0}, {"dt": "2020-12-01T00:00:00", "Grand-Total": 208342.0}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[65]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doYoyChart</span><span class="p">(</span><span class="n">df_oak_combined</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;Grand-Total&#39;</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;Oakland&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[65]:</div>



   
        
            
<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-560aba742b0242c8af2da9b509190a6f"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-560aba742b0242c8af2da9b509190a6f") {
      outputDiv = document.getElementById("altair-viz-560aba742b0242c8af2da9b509190a6f");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-daec959cc4b97bd76f7cc9c4692c0be2"}, "mark": {"type": "bar", "color": "blue", "width": 2}, "encoding": {"color": {"condition": {"value": "lightsalmon", "test": "datum['nolarge'] < 0"}, "value": "royalblue"}, "tooltip": [{"type": "temporal", "field": "dt", "format": "%b %Y"}, {"type": "quantitative", "field": "nolarge", "format": ",.02f"}], "x": {"type": "temporal", "axis": {"title": ""}, "field": "dt"}, "y": {"type": "quantitative", "axis": {"title": "Year-over-Year Volume Growth [%]"}, "field": "nolarge"}}, "height": 400, "title": "Port of Oakland Grand-Total Container Volume Growth", "transform": [{"calculate": "datum['Grand-Total'] > 400 ? NaN : datum['Grand-Total']", "as": "nolarge"}], "width": 750, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-daec959cc4b97bd76f7cc9c4692c0be2": [{"dt": "1998-01-01T00:00:00", "Grand-Total": null}, {"dt": "1998-02-01T00:00:00", "Grand-Total": null}, {"dt": "1998-03-01T00:00:00", "Grand-Total": null}, {"dt": "1998-04-01T00:00:00", "Grand-Total": null}, {"dt": "1998-05-01T00:00:00", "Grand-Total": null}, {"dt": "1998-06-01T00:00:00", "Grand-Total": null}, {"dt": "1998-07-01T00:00:00", "Grand-Total": null}, {"dt": "1998-08-01T00:00:00", "Grand-Total": null}, {"dt": "1998-09-01T00:00:00", "Grand-Total": null}, {"dt": "1998-10-01T00:00:00", "Grand-Total": null}, {"dt": "1998-11-01T00:00:00", "Grand-Total": null}, {"dt": "1998-12-01T00:00:00", "Grand-Total": null}, {"dt": "1999-01-01T00:00:00", "Grand-Total": 10.494565408561684}, {"dt": "1999-02-01T00:00:00", "Grand-Total": 7.0088415483152255}, {"dt": "1999-03-01T00:00:00", "Grand-Total": 1.8452354031929907}, {"dt": "1999-04-01T00:00:00", "Grand-Total": 6.139044352169476}, {"dt": "1999-05-01T00:00:00", "Grand-Total": 12.330248283318944}, {"dt": "1999-06-01T00:00:00", "Grand-Total": 10.68927723314863}, {"dt": "1999-07-01T00:00:00", "Grand-Total": -0.3002932182471385}, {"dt": "1999-08-01T00:00:00", "Grand-Total": 14.696111451316597}, {"dt": "1999-09-01T00:00:00", "Grand-Total": 6.695705174900035}, {"dt": "1999-10-01T00:00:00", "Grand-Total": -3.5119047619047605}, {"dt": "1999-11-01T00:00:00", "Grand-Total": 2.5762994585883714}, {"dt": "1999-12-01T00:00:00", "Grand-Total": 1.5504365647547758}, {"dt": "2000-01-01T00:00:00", "Grand-Total": 9.104655789892568}, {"dt": "2000-02-01T00:00:00", "Grand-Total": 10.106858806499353}, {"dt": "2000-03-01T00:00:00", "Grand-Total": 6.51893956214753}, {"dt": "2000-04-01T00:00:00", "Grand-Total": 1.7895490336435227}, {"dt": "2000-05-01T00:00:00", "Grand-Total": 11.379766112116773}, {"dt": "2000-06-01T00:00:00", "Grand-Total": 5.571829358857983}, {"dt": "2000-07-01T00:00:00", "Grand-Total": 19.261671410661773}, {"dt": "2000-08-01T00:00:00", "Grand-Total": 13.254893585782067}, {"dt": "2000-09-01T00:00:00", "Grand-Total": 0.7593596299340977}, {"dt": "2000-10-01T00:00:00", "Grand-Total": 10.517852068011834}, {"dt": "2000-11-01T00:00:00", "Grand-Total": 0.3610630688982708}, {"dt": "2000-12-01T00:00:00", "Grand-Total": -4.878183640322076}, {"dt": "2001-01-01T00:00:00", "Grand-Total": -1.4581661682106617}, {"dt": "2001-02-01T00:00:00", "Grand-Total": -12.704403444761214}, {"dt": "2001-03-01T00:00:00", "Grand-Total": -2.1212879198454715}, {"dt": "2001-04-01T00:00:00", "Grand-Total": -3.9074793555304854}, {"dt": "2001-05-01T00:00:00", "Grand-Total": -9.138106724109019}, {"dt": "2001-06-01T00:00:00", "Grand-Total": -15.052334707648619}, {"dt": "2001-07-01T00:00:00", "Grand-Total": -6.666181837414708}, {"dt": "2001-08-01T00:00:00", "Grand-Total": -9.869770182675309}, {"dt": "2001-09-01T00:00:00", "Grand-Total": -4.68775927872117}, {"dt": "2001-10-01T00:00:00", "Grand-Total": -6.10123994154651}, {"dt": "2001-11-01T00:00:00", "Grand-Total": -10.215515169823753}, {"dt": "2001-12-01T00:00:00", "Grand-Total": -7.24712447412208}, {"dt": "2002-01-01T00:00:00", "Grand-Total": -9.028728782820473}, {"dt": "2002-02-01T00:00:00", "Grand-Total": 0.41711438071627693}, {"dt": "2002-03-01T00:00:00", "Grand-Total": -7.242189551995115}, {"dt": "2002-04-01T00:00:00", "Grand-Total": -1.7252373016448108}, {"dt": "2002-05-01T00:00:00", "Grand-Total": 7.965361819924044}, {"dt": "2002-06-01T00:00:00", "Grand-Total": 15.410861747724681}, {"dt": "2002-07-01T00:00:00", "Grand-Total": 8.263619813987088}, {"dt": "2002-08-01T00:00:00", "Grand-Total": 9.984243319756004}, {"dt": "2002-09-01T00:00:00", "Grand-Total": 7.5617328729362}, {"dt": "2002-10-01T00:00:00", "Grand-Total": -11.938015562902848}, {"dt": "2002-11-01T00:00:00", "Grand-Total": 15.026152387361202}, {"dt": "2002-12-01T00:00:00", "Grand-Total": 14.155562344794092}, {"dt": "2003-01-01T00:00:00", "Grand-Total": 22.713069799990237}, {"dt": "2003-02-01T00:00:00", "Grand-Total": 19.74537856191969}, {"dt": "2003-03-01T00:00:00", "Grand-Total": 19.462450350891956}, {"dt": "2003-04-01T00:00:00", "Grand-Total": 18.806449948019967}, {"dt": "2003-05-01T00:00:00", "Grand-Total": 13.050681428205134}, {"dt": "2003-06-01T00:00:00", "Grand-Total": 9.2054212064842}, {"dt": "2003-07-01T00:00:00", "Grand-Total": 12.746092293197409}, {"dt": "2003-08-01T00:00:00", "Grand-Total": -0.3061430728442227}, {"dt": "2003-09-01T00:00:00", "Grand-Total": 7.8650624511046985}, {"dt": "2003-10-01T00:00:00", "Grand-Total": 23.7086816037378}, {"dt": "2003-11-01T00:00:00", "Grand-Total": 3.3412665700495836}, {"dt": "2003-12-01T00:00:00", "Grand-Total": 8.49008049518607}, {"dt": "2004-01-01T00:00:00", "Grand-Total": -1.472743307671398}, {"dt": "2004-02-01T00:00:00", "Grand-Total": -8.036813701001256}, {"dt": "2004-03-01T00:00:00", "Grand-Total": 2.0461504952017373}, {"dt": "2004-04-01T00:00:00", "Grand-Total": 1.349791480488527}, {"dt": "2004-05-01T00:00:00", "Grand-Total": -10.249595831540258}, {"dt": "2004-06-01T00:00:00", "Grand-Total": 1.029955711296049}, {"dt": "2004-07-01T00:00:00", "Grand-Total": 4.5821727019498715}, {"dt": "2004-08-01T00:00:00", "Grand-Total": 15.438234540001305}, {"dt": "2004-09-01T00:00:00", "Grand-Total": 8.582700796558672}, {"dt": "2004-10-01T00:00:00", "Grand-Total": 17.0459840588596}, {"dt": "2004-11-01T00:00:00", "Grand-Total": 21.840100869744216}, {"dt": "2004-12-01T00:00:00", "Grand-Total": 24.883772415319893}, {"dt": "2005-01-01T00:00:00", "Grand-Total": 21.796804544169703}, {"dt": "2005-02-01T00:00:00", "Grand-Total": 26.48910856242206}, {"dt": "2005-03-01T00:00:00", "Grand-Total": 12.534213896491986}, {"dt": "2005-04-01T00:00:00", "Grand-Total": 9.660096380525495}, {"dt": "2005-05-01T00:00:00", "Grand-Total": 25.595303661562973}, {"dt": "2005-06-01T00:00:00", "Grand-Total": 9.746551132360647}, {"dt": "2005-07-01T00:00:00", "Grand-Total": 5.517823056776305}, {"dt": "2005-08-01T00:00:00", "Grand-Total": 7.530553001580587}, {"dt": "2005-09-01T00:00:00", "Grand-Total": 15.746408314859073}, {"dt": "2005-10-01T00:00:00", "Grand-Total": 7.677237535489412}, {"dt": "2005-11-01T00:00:00", "Grand-Total": 2.215968489635589}, {"dt": "2005-12-01T00:00:00", "Grand-Total": -1.3543697925899711}, {"dt": "2006-01-01T00:00:00", "Grand-Total": 3.9851248528786076}, {"dt": "2006-02-01T00:00:00", "Grand-Total": 8.046213404306801}, {"dt": "2006-03-01T00:00:00", "Grand-Total": 13.57094244050474}, {"dt": "2006-04-01T00:00:00", "Grand-Total": 7.506965888087902}, {"dt": "2006-05-01T00:00:00", "Grand-Total": 8.351948822452094}, {"dt": "2006-06-01T00:00:00", "Grand-Total": 12.29431291322598}, {"dt": "2006-07-01T00:00:00", "Grand-Total": 1.642301220025244}, {"dt": "2006-08-01T00:00:00", "Grand-Total": 9.52026400611019}, {"dt": "2006-09-01T00:00:00", "Grand-Total": -2.076005790727875}, {"dt": "2006-10-01T00:00:00", "Grand-Total": 3.8889267262767646}, {"dt": "2006-11-01T00:00:00", "Grand-Total": 4.198455538624457}, {"dt": "2006-12-01T00:00:00", "Grand-Total": -7.197026098654247}, {"dt": "2007-01-01T00:00:00", "Grand-Total": 4.284082153200308}, {"dt": "2007-02-01T00:00:00", "Grand-Total": -4.1618613608626065}, {"dt": "2007-03-01T00:00:00", "Grand-Total": -7.519709212368298}, {"dt": "2007-04-01T00:00:00", "Grand-Total": -2.370527343648554}, {"dt": "2007-05-01T00:00:00", "Grand-Total": -3.477697786919587}, {"dt": "2007-06-01T00:00:00", "Grand-Total": -3.2668497327300594}, {"dt": "2007-07-01T00:00:00", "Grand-Total": 10.097111489370514}, {"dt": "2007-08-01T00:00:00", "Grand-Total": -5.850102633379528}, {"dt": "2007-09-01T00:00:00", "Grand-Total": 4.104898444406069}, {"dt": "2007-10-01T00:00:00", "Grand-Total": 1.654397992058132}, {"dt": "2007-11-01T00:00:00", "Grand-Total": 0.19482161181421098}, {"dt": "2007-12-01T00:00:00", "Grand-Total": 6.206015137431953}, {"dt": "2008-01-01T00:00:00", "Grand-Total": -4.5559932126351015}, {"dt": "2008-02-01T00:00:00", "Grand-Total": 5.630651681192611}, {"dt": "2008-03-01T00:00:00", "Grand-Total": -5.686863965667421}, {"dt": "2008-04-01T00:00:00", "Grand-Total": 1.3044842977756765}, {"dt": "2008-05-01T00:00:00", "Grand-Total": -9.33307024467246}, {"dt": "2008-06-01T00:00:00", "Grand-Total": 0.3035721501596145}, {"dt": "2008-07-01T00:00:00", "Grand-Total": -5.41731869040738}, {"dt": "2008-08-01T00:00:00", "Grand-Total": -9.250994605372265}, {"dt": "2008-09-01T00:00:00", "Grand-Total": -7.738705238192834}, {"dt": "2008-10-01T00:00:00", "Grand-Total": -10.652970034779008}, {"dt": "2008-11-01T00:00:00", "Grand-Total": -16.471234340675657}, {"dt": "2008-12-01T00:00:00", "Grand-Total": -12.940649402743265}, {"dt": "2009-01-01T00:00:00", "Grand-Total": -15.677554376261305}, {"dt": "2009-02-01T00:00:00", "Grand-Total": -26.582866496706792}, {"dt": "2009-03-01T00:00:00", "Grand-Total": -4.853887784466881}, {"dt": "2009-04-01T00:00:00", "Grand-Total": -11.268833467248541}, {"dt": "2009-05-01T00:00:00", "Grand-Total": -11.426006528835686}, {"dt": "2009-06-01T00:00:00", "Grand-Total": -14.509233194176563}, {"dt": "2009-07-01T00:00:00", "Grand-Total": -8.280875039126357}, {"dt": "2009-08-01T00:00:00", "Grand-Total": -8.69866529774127}, {"dt": "2009-09-01T00:00:00", "Grand-Total": -3.686660319475299}, {"dt": "2009-10-01T00:00:00", "Grand-Total": -7.656772823122415}, {"dt": "2009-11-01T00:00:00", "Grand-Total": 2.753739078927886}, {"dt": "2009-12-01T00:00:00", "Grand-Total": 11.839396840593587}, {"dt": "2010-01-01T00:00:00", "Grand-Total": -0.5755313693087905}, {"dt": "2010-02-01T00:00:00", "Grand-Total": 17.299145814188233}, {"dt": "2010-03-01T00:00:00", "Grand-Total": 10.657591003255407}, {"dt": "2010-04-01T00:00:00", "Grand-Total": 10.26982558105125}, {"dt": "2010-05-01T00:00:00", "Grand-Total": 19.318914735348503}, {"dt": "2010-06-01T00:00:00", "Grand-Total": 21.065590669454835}, {"dt": "2010-07-01T00:00:00", "Grand-Total": 16.273753548135474}, {"dt": "2010-08-01T00:00:00", "Grand-Total": 22.36541002502037}, {"dt": "2010-09-01T00:00:00", "Grand-Total": 17.722554780603005}, {"dt": "2010-10-01T00:00:00", "Grand-Total": 16.425843625075377}, {"dt": "2010-11-01T00:00:00", "Grand-Total": 16.171875900711342}, {"dt": "2010-12-01T00:00:00", "Grand-Total": 0.5633848030560884}, {"dt": "2011-01-01T00:00:00", "Grand-Total": 15.92350603698609}, {"dt": "2011-02-01T00:00:00", "Grand-Total": 12.76874470216538}, {"dt": "2011-03-01T00:00:00", "Grand-Total": 5.587945826825558}, {"dt": "2011-04-01T00:00:00", "Grand-Total": 2.827499959745161}, {"dt": "2011-05-01T00:00:00", "Grand-Total": -0.11788931788931922}, {"dt": "2011-06-01T00:00:00", "Grand-Total": -2.33302680426416}, {"dt": "2011-07-01T00:00:00", "Grand-Total": -7.95402662989294}, {"dt": "2011-08-01T00:00:00", "Grand-Total": -0.6235267629449592}, {"dt": "2011-09-01T00:00:00", "Grand-Total": -6.589351607801797}, {"dt": "2011-10-01T00:00:00", "Grand-Total": -5.400234021330464}, {"dt": "2011-11-01T00:00:00", "Grand-Total": -0.8678694771942386}, {"dt": "2011-12-01T00:00:00", "Grand-Total": 1.0927915130427346}, {"dt": "2012-01-01T00:00:00", "Grand-Total": 7.50396897334058}, {"dt": "2012-02-01T00:00:00", "Grand-Total": -4.956494009384538}, {"dt": "2012-03-01T00:00:00", "Grand-Total": -0.023302584053941366}, {"dt": "2012-04-01T00:00:00", "Grand-Total": -1.8300353375334755}, {"dt": "2012-05-01T00:00:00", "Grand-Total": 4.854629138082989}, {"dt": "2012-06-01T00:00:00", "Grand-Total": -1.6923061594563915}, {"dt": "2012-07-01T00:00:00", "Grand-Total": 2.2371477884123747}, {"dt": "2012-08-01T00:00:00", "Grand-Total": -4.304684754665333}, {"dt": "2012-09-01T00:00:00", "Grand-Total": -4.365348888311793}, {"dt": "2012-10-01T00:00:00", "Grand-Total": 5.251765373833428}, {"dt": "2012-11-01T00:00:00", "Grand-Total": -4.853863519188706}, {"dt": "2012-12-01T00:00:00", "Grand-Total": 3.6413298037502706}, {"dt": "2013-01-01T00:00:00", "Grand-Total": -1.634669923401999}, {"dt": "2013-02-01T00:00:00", "Grand-Total": 12.460456310214262}, {"dt": "2013-03-01T00:00:00", "Grand-Total": -6.376262306378799}, {"dt": "2013-04-01T00:00:00", "Grand-Total": 1.4100757676458908}, {"dt": "2013-05-01T00:00:00", "Grand-Total": -1.4402280770743237}, {"dt": "2013-06-01T00:00:00", "Grand-Total": -0.37246307041325366}, {"dt": "2013-07-01T00:00:00", "Grand-Total": -0.49902719401166973}, {"dt": "2013-08-01T00:00:00", "Grand-Total": 1.0494477353768294}, {"dt": "2013-09-01T00:00:00", "Grand-Total": 5.287866523930118}, {"dt": "2013-10-01T00:00:00", "Grand-Total": -4.256190187210718}, {"dt": "2013-11-01T00:00:00", "Grand-Total": 2.570995675550547}, {"dt": "2013-12-01T00:00:00", "Grand-Total": -4.4076127800459}, {"dt": "2014-01-01T00:00:00", "Grand-Total": 2.038462737275193}, {"dt": "2014-02-01T00:00:00", "Grand-Total": -5.253035412704243}, {"dt": "2014-03-01T00:00:00", "Grand-Total": 4.849734539137218}, {"dt": "2014-04-01T00:00:00", "Grand-Total": 3.700052955271138}, {"dt": "2014-05-01T00:00:00", "Grand-Total": 2.4771831828836577}, {"dt": "2014-06-01T00:00:00", "Grand-Total": 4.624618514750756}, {"dt": "2014-07-01T00:00:00", "Grand-Total": 1.2607906062641394}, {"dt": "2014-08-01T00:00:00", "Grand-Total": -2.1320850347617326}, {"dt": "2014-09-01T00:00:00", "Grand-Total": 2.865772910559916}, {"dt": "2014-10-01T00:00:00", "Grand-Total": 3.84174254238141}, {"dt": "2014-11-01T00:00:00", "Grand-Total": -0.9509204027306928}, {"dt": "2014-12-01T00:00:00", "Grand-Total": 7.292352803688673}, {"dt": "2015-01-01T00:00:00", "Grand-Total": -29.710012116769}, {"dt": "2015-02-01T00:00:00", "Grand-Total": -31.4117666904707}, {"dt": "2015-03-01T00:00:00", "Grand-Total": 8.089958396564366}, {"dt": "2015-04-01T00:00:00", "Grand-Total": 1.676576467257207}, {"dt": "2015-05-01T00:00:00", "Grand-Total": 3.784365160090908}, {"dt": "2015-06-01T00:00:00", "Grand-Total": -1.0058728584485532}, {"dt": "2015-07-01T00:00:00", "Grand-Total": 0.983200585694699}, {"dt": "2015-08-01T00:00:00", "Grand-Total": 5.9761871027316005}, {"dt": "2015-09-01T00:00:00", "Grand-Total": -4.781122377639235}, {"dt": "2015-10-01T00:00:00", "Grand-Total": -6.851816865041882}, {"dt": "2015-11-01T00:00:00", "Grand-Total": -0.2749656940165157}, {"dt": "2015-12-01T00:00:00", "Grand-Total": -8.251312011090207}, {"dt": "2016-01-01T00:00:00", "Grand-Total": 38.45290261833194}, {"dt": "2016-02-01T00:00:00", "Grand-Total": 54.240108872091696}, {"dt": "2016-03-01T00:00:00", "Grand-Total": -14.546791654529223}, {"dt": "2016-04-01T00:00:00", "Grand-Total": -6.364992541024361}, {"dt": "2016-05-01T00:00:00", "Grand-Total": -0.6958870449653709}, {"dt": "2016-06-01T00:00:00", "Grand-Total": -4.589363676991298}, {"dt": "2016-07-01T00:00:00", "Grand-Total": 0.5254963020630665}, {"dt": "2016-08-01T00:00:00", "Grand-Total": 1.6762635366578849}, {"dt": "2016-09-01T00:00:00", "Grand-Total": -5.035370133125383}, {"dt": "2016-10-01T00:00:00", "Grand-Total": 7.221647259508113}, {"dt": "2016-11-01T00:00:00", "Grand-Total": 2.2826403024134967}, {"dt": "2016-12-01T00:00:00", "Grand-Total": 7.468944602134764}, {"dt": "2017-01-01T00:00:00", "Grand-Total": 3.219690826815924}, {"dt": "2017-02-01T00:00:00", "Grand-Total": -7.035914935234045}, {"dt": "2017-03-01T00:00:00", "Grand-Total": 11.250132722344851}, {"dt": "2017-04-01T00:00:00", "Grand-Total": 4.886218799787567}, {"dt": "2017-05-01T00:00:00", "Grand-Total": -0.38204364189281526}, {"dt": "2017-06-01T00:00:00", "Grand-Total": 5.135475967428116}, {"dt": "2017-07-01T00:00:00", "Grand-Total": 1.5922071636011559}, {"dt": "2017-08-01T00:00:00", "Grand-Total": -3.578330242533323}, {"dt": "2017-09-01T00:00:00", "Grand-Total": 12.7606257898357}, {"dt": "2017-10-01T00:00:00", "Grand-Total": 1.816252685903308}, {"dt": "2017-11-01T00:00:00", "Grand-Total": -5.539217179409084}, {"dt": "2017-12-01T00:00:00", "Grand-Total": 3.8566694283347136}, {"dt": "2018-01-01T00:00:00", "Grand-Total": 4.323484513678011}, {"dt": "2018-02-01T00:00:00", "Grand-Total": 7.588834185145132}, {"dt": "2018-03-01T00:00:00", "Grand-Total": -2.881127887739665}, {"dt": "2018-04-01T00:00:00", "Grand-Total": 3.2993798757726234}, {"dt": "2018-05-01T00:00:00", "Grand-Total": -2.9357942111761237}, {"dt": "2018-06-01T00:00:00", "Grand-Total": 5.503363196316768}, {"dt": "2018-07-01T00:00:00", "Grand-Total": 3.5818132874679165}, {"dt": "2018-08-01T00:00:00", "Grand-Total": 8.715144851922174}, {"dt": "2018-09-01T00:00:00", "Grand-Total": 4.0658456997358705}, {"dt": "2018-10-01T00:00:00", "Grand-Total": 7.688331696548434}, {"dt": "2018-11-01T00:00:00", "Grand-Total": 17.765332563725767}, {"dt": "2018-12-01T00:00:00", "Grand-Total": 6.810500602531233}, {"dt": "2019-01-01T00:00:00", "Grand-Total": 3.2321424016925615}, {"dt": "2019-02-01T00:00:00", "Grand-Total": -1.323211887676723}, {"dt": "2019-03-01T00:00:00", "Grand-Total": 10.67107373556242}, {"dt": "2019-04-01T00:00:00", "Grand-Total": 5.874876634085235}, {"dt": "2019-05-01T00:00:00", "Grand-Total": 8.953877243652064}, {"dt": "2019-06-01T00:00:00", "Grand-Total": -5.45989252700746}, {"dt": "2019-07-01T00:00:00", "Grand-Total": 0.36065937973119855}, {"dt": "2019-08-01T00:00:00", "Grand-Total": -2.877005453995718}, {"dt": "2019-09-01T00:00:00", "Grand-Total": -6.145367663297108}, {"dt": "2019-10-01T00:00:00", "Grand-Total": -9.366235439216764}, {"dt": "2019-11-01T00:00:00", "Grand-Total": -9.93236268314922}, {"dt": "2019-12-01T00:00:00", "Grand-Total": -12.202932886358687}, {"dt": "2020-01-01T00:00:00", "Grand-Total": -0.5846537279057595}, {"dt": "2020-01-01T00:00:00", "Grand-Total": 13.768093502562806}, {"dt": "2020-02-01T00:00:00", "Grand-Total": -15.771913627198265}, {"dt": "2020-02-01T00:00:00", "Grand-Total": -16.563118626240026}, {"dt": "2020-03-01T00:00:00", "Grand-Total": -14.752702977999}, {"dt": "2020-03-01T00:00:00", "Grand-Total": -6.64661072502033}, {"dt": "2020-04-01T00:00:00", "Grand-Total": -7.458152003664676}, {"dt": "2020-04-01T00:00:00", "Grand-Total": -10.073618156473096}, {"dt": "2020-05-01T00:00:00", "Grand-Total": -10.142865304375526}, {"dt": "2020-05-01T00:00:00", "Grand-Total": -9.412738591115366}, {"dt": "2020-06-01T00:00:00", "Grand-Total": 0.8363635350261633}, {"dt": "2020-06-01T00:00:00", "Grand-Total": 2.6026315287479784}, {"dt": "2020-07-01T00:00:00", "Grand-Total": 3.7061845165666574}, {"dt": "2020-07-01T00:00:00", "Grand-Total": 3.7065088757396447}, {"dt": "2020-08-01T00:00:00", "Grand-Total": 25.115425227035757}, {"dt": "2020-08-01T00:00:00", "Grand-Total": 25.11457836272235}, {"dt": "2020-09-01T00:00:00", "Grand-Total": 18.72823531700525}, {"dt": "2020-09-01T00:00:00", "Grand-Total": 18.727686669576048}, {"dt": "2020-10-01T00:00:00", "Grand-Total": 7.312656994112476}, {"dt": "2020-10-01T00:00:00", "Grand-Total": 7.313364831268143}, {"dt": "2020-11-01T00:00:00", "Grand-Total": 6.517966299684197}, {"dt": "2020-11-01T00:00:00", "Grand-Total": 6.517955763894512}, {"dt": "2020-12-01T00:00:00", "Grand-Total": 4.688308686454512}, {"dt": "2020-12-01T00:00:00", "Grand-Total": 4.688448830456737}]}}, {"mode": "vega-lite"});
</script>
</div>

        
    
        
    
        
    
        
    
        
    

</div>

</div>
</div>

</div>
<hr>
&copy; 2020 pymoment
<p><small>Exported from <a href="http://github.com/kdunn926/us-macro/blob/c0e27c96be2a518cb8f3fb2f3ddf880eba971df1/analysis/transportation-ocean.ipynb"><code>analysis/transportation-ocean.ipynb</code></a> committed by Kyle Dunn on Sat Jan 9 05:34:15 2021 <a href="http://github.com/kdunn926/us-macro/commit/c0e27c96be2a518cb8f3fb2f3ddf880eba971df1">revision 1, c0e27c9</a> <a href="https://stephenslab.github.io/ipynb-website/notes.html#Note-about-commit-ids"><span class="fa fa-question-circle"></span></a></small></p>
</div>
</div>
</body>


<script>
// TODO - some, or all of this could be moved to pre-rendering sed/regex
// add bootstrap table styles to pandoc tables (notebooks)
$(document).ready( () => {

  $('tr').parent('thead').parent('table').addClass('table table-condensed');
  $('tr').parent('thead').parent('table').removeAttr('border');
  $('tr').parent('thead').parent('table').removeClass('dataframe');

  $('.output_area .output_html table thead tr').removeAttr('style');
  $('.output_area .output_html table thead tr th').attr("scope", "col");

  $('.output_area .output_html table tbody tr th').attr("scope", "row");


  // Change the input cell gutter text, make it a link
  $('.input .input_prompt').map((n, e) => {
    e.innerHTML = `<a href="#" >Show Code Cell [${n + 1}]</a>`;
  });

  // Attach an event listener to the above link for show/hide
  $('.input .input_prompt a').map((n, e) => {
    const showOrHide = e => {
      e.preventDefault();
      $(`#code-${n}`).find('.inner_cell').toggleClass('collapse');
      const v = $(`#code-${n}`).find('.input_prompt a');
      if (v.html().includes('Show')) {
        v.html(`Hide Code Cell [${n+1}]`);
      } else {
        v.html(`Show Code Cell [${n+1}]`);
      }
    }

    e.addEventListener("click", showOrHide, false);
  });

  // Annotate parent cells of input cells with id/classes
  $('.input .inner_cell').map((n, e) => {
    $('.input .inner_cell').parent('div').toArray()[n].id = `code-${n}`;
  });
  $('.input .inner_cell')
    .addClass("collapse")
    .after('<div class="inner_cell" style="font-size: 150%; padding-left: 5px;">...</div>');

});
</script>
    

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-9902895-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-9902895-3');
</script>

</html>
